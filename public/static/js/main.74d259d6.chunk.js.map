{"version":3,"sources":["utils/userConfig.js","components/local_storage.js","components/dashboard/dazzle/widgetWrapper.js","components/dashboard/dazzle/widgetPicker.js","components/dashboard/dazzle/dashboard.js","components/dashboard/status.js","components/dashboard/emoji.js","components/dashboard/gamification.js","utils/session_storage.js","utils/time.js","components/dashboard/activity.js","utils/timesince.js","components/dashboard/report_heatmap.js","utils/debounce.js","components/dashboard/report_art.js","components/dashboard/report_alertpower.js","components/dashboard/report_created.js","components/dashboard/report.js","list/LoadingContainer/index.js","components/dashboard/thinglist.js","components/dashboard/dazzle/widgets.js","main/home.js","utils/cookies.js","components/esearch.js","debug-components/wall.js","modal/login.js","components/TagInput/index.js","utils/XHR.js","list/tableConfig.js","utils/constants.js","utils/list-columns.js","components/detail_data_status.js","components/promote.js","components/marker.js","modal/entity_detail.js","components/traffic_light_protocol.js","detail/selected_header_options.js","modal/delete.js","modal/owner.js","modal/entities.js","modal/change_history.js","modal/viewed_by_history.js","components/permission.js","components/conflict.js","components/add_entry.js","components/file_upload.js","components/summary.js","components/task.js","modal/link_warning.js","components/signature_table.js","components/autocomplete_input.js","modal/entity_create.js","components/custom_metadata_table.js","components/feed_table.js","detail/alert_subcomponent.js","detail/selected_entry.js","components/badge.js","components/add_flair.js","modal/links.js","modal/mark.js","detail/selected_header.js","list/list-view.js","modal/export_event.js","modal/promoted_data.js","detail/selected_container.js","components/admin/usergroupform.js","components/admin/areyousure.js","components/admin/usergroupcontainer.js","components/admin/api.js","components/admin/undelete.js","components/admin/index.js","utils/activemq.js","components/forcegraph/EntityInfo.js","components/forcegraph/GraphControl.js","components/forcegraph/ThingInfo.js","components/forcegraph/NodeInfo.js","components/forcegraph/ScotForceGraph.js","components/forcegraph/SFG.js","components/forcegraph/index.js","main/index.js","registerServiceWorker.js","index.js","images/scot_logo_473x473.png"],"names":["UserConfigKeyShape","key","PropTypes","string","isRequired","default","any","UserConfigContextTypes","getUserConfig","func","setUserConfig","UserConfigProvider","props","state","userConfig","loading","update","bind","this","Promise","resolve","reject","json","localStorage","JSON","parse","config","name","value","stringify","setItem","then","setState","channel","children","PureComponent","childContextTypes","shape","bool","PanelHeader","title","onRemove","style","position","className","Button","onClick","bsSize","Wrapper","editable","Panel","header","React","cloneElement","editMode","WidgetPicker","widgets","layout","isOpen","onClose","onSelect","activeWidgets","Set","rows","forEach","row","columns","col","widget","add","widgetItems","Object","keys","filter","has","map","widgetObj","description","length","Modal","show","onHide","Header","closeButton","Title","Body","Footer","defaultLayout","Dashboard","saveDashboard","isNew","widgetPicker","newWidgetOptions","onAdd","updateLayout","updateTitle","reset","toggleEdit","togglePicker","selectWidget","rowIndex","columnIndex","target","errorToggle","addWidget","onEdit","onSave","onCancel","handleTitleChange","Grid","fluid","onMove","frameComponent","WidgetWrapper","defaultProps","TitleBar","onSubmit","type","placeholder","onChange","bsStyle","disabled","Status","statusData","error","updateData","fetchError","$","ajax","url","success","_isMounted","response","services","Array","isArray","service","status","push","classes","join","Service","Emoji","role","aria-label","label","aria-hidden","symbol","titleCase","str","charAt","toUpperCase","slice","Gamification","updateCategory","nextIndex","categoryIndex","gameCategories","data","categories","category","console","log","gameData","categoryInterval","setInterval","clearInterval","Well","Category","tooltip","username","count","setLocalStorage","getLocalStorage","getSessionStorage","moment","extendMoment","Moment","DAY","timeOlderThan","timestamp","secondsAgo","Date","now","todayRange","start","Math","floor","setHours","end","lastWeekRange","epochRangeToFilter","range","epochRangeToString","NOTIFICATION_LEVEL","wall","create","delete","NOTIFICATION_TYPES","NOTIFICATION_TIME","ACTIVITY_TYPE","Activity","users","notifications","loadWall","updateActivity","updateUsers","wallMessage","notification","refreshTimer","createCallback","pruned","time","action","persistWall","records","user","who","timeago","last_activity","walls","SessionStorage","message","activemqwhen","activemqwho","activemqmessage","level","includes","activemqwall","activemqtype","activemqstate","activemqid","i","item","epoch","badge","seconds","interval","timeSince","text","items","concat","sort","a","b","buildActivityItem","stopped","marquee","well","marqueeValues","window","getComputedStyle","parseInt","width","paddingLeft","offsetWidth","ref","ReactDOM","findDOMNode","Component","ActivityItem","Label","ReportHeatmap","getData","collection","year","axios","get","res","loadHeatMap","margin","height","gridSize","legendElementWidth","colors","container","d3","graph","select","empty","append","attr","selectAll","enter","d","remove","colorScale","domain","buckets","cards","day","hour","merge","transition","duration","exit","legend","quantiles","round","collectionChange","event","yearChange","exportToPNG","svgString","XMLSerializer","serializeToString","document","querySelector","canvas","createElement","ctx","getContext","DOMURL","self","URL","webkitURL","img","Image","svg","Blob","createObjectURL","onload","drawImage","png","toDataURL","innerHTML","revokeObjectURL","appendTo","click","src","formDisabled","htmlFor","display","textAlign","id","min","step","viewBox","hidden","debounce","callback","timeout","wait","immediate","args","clearTimeout","setTimeout","apply","formatTime","days","hours","minutes","output","barColors","All","Promoted","Incident","ReportArt","initChart","xAxisEl","yAxisEl","chartInit","updateChart","barNames","chartData","dates","values","lineNames","lines","maxValue","dateScale","padding","rangeRound","date","barScale","from","bandwidth","yScale","clamp","nice","xAxis","scale","yAxis","ticks","tickFormat","formatTickTime","call","AvgHolder","averages","AvgHolderBox","node","getBBox","x","y","borderOffset","transform","baseVal","initialize","getItem","LegendHolder","legendHeight","widthSums","legendWidth","loadArt","opts","unit","unitChange","lengthChange","dateChange","today","toISOString","pattern","wrapText","each","getComputedTextLength","words","split","reverse","word","line","lineCount","dy","parseFloat","pop","yOffset","ReportAlertpower","xScale","dataset","dataTypes","replace","score","curStart","curEnd","total","max","stackedMax","groupedMax","alerts","alertTypes","bars","displayMode","transitionGrouped","transitionStacked","delay","tween","prec","pow","t","initialDuration","displayModeChanged","loadData","chartResults","chartSort","chartSortDir","encodeURIComponent","chartFilter","dataChange","displayModeChang","preventSubmit","preventDefault","stopPropagation","background","border","checked","displayModeChange","ReportCreated","statusLine","curve","lineHolder","shown","on","newData","genData","reduce","e","dataMaxes","alertgroups","entries","events","intel","incidents","lineData","getTime","random","reportByType","reportType","reportTitleByType","reportDescriptionByType","reportPanelHeader","expandButton","backButton","to","ReportPage","overflow","SingleReport","reportComponentByType","withStyles","theme","progress","spacing","CircularProgress","ThingList","extend","queryOptions","newBadge","ajaxSetup","traditional","thingType","processData","fetchData","thing","getLink","getSummary","created","things","genThingItem","emptyStyle","emptyString","ListGroup","limit","offset","subject","configKey","RecentIntel","RecentEvents","RecentIncidents","OpenTasks","tasks","updated","body_plain","substr","YourTasks","yourTasks","owner","UnviewedAlerts","unviewedAlerts","views","TopEvents","topEvents","has_tasks","ViewedEvents","viewedEvents","EntryEvents","entryEvents","entry_count","Widgets","ReportWidgets","HomeDashboard","switchTab","closeTab","saveTab","dashboardConfig","tabs","updateDashboardConfig","curTab","tabConfig","index","tabLayout","newTabConfig","splice","newTab","newConfig","loggedIn","dashboardHeader","removeCallback","tabsConfig","defaultTab","buildTab","tabHeaders","tab","eventKey","cursor","tabContent","Tab","Pane","Container","activeKey","Row","Col","sm","Content","mountOnEnter","unmountOnExit","withUserConfig","checkPropTypes","WrappedComponent","UserConfigSubscriber","setUserSubConfig","subConfig","context","restProps","userConfigProps","contextTypes","displayName","getDisplayName","checkCookie","cookie","getCookie","cname","ca","c","substring","indexOf","deleteCookie","setCookie","cvalue","exdays","setTime","expires","toUTCString","Search","componentDidMount","keyup","undefined","keyCode","closeSearch","showSearchToolbar","searchString","doSearch","qstring","results","searching","handleEnterKey","componentDidUpdate","render","tableRows","dataOne","zIndex","marginTop","float","color","charSet","onKeyPress","flexFlow","right","top","borderStyle","overflowY","maxHeight","componentWillUnmount","off","searchResults","entityHeight","SearchDataEachHeader","flexGrow","textOverflow","whiteSpace","SearchDataEachRows","entryid","highlight","rowEvenOdd","isEven","rowClassName","href","search_string_array","activeClassName","styles","Active","highlightClassName","searchWords","autoEscape","textToHighlight","Highlight","highlightStyle","backgroundColor","borderColor","borderWidth","overflowX","wordWrap","n","require","Wall","sendWallMessage","alert","buttonStatus","buttonText","buttonLoading","msg","inputChange","input","Login","pass","SSO","NormalAuth","isEnterPressed","mounted","origurl","dialogClassName","modalActive","ScotImage","alt","marginBottom","marginRight","marginLeft","defaultValue","crossDomain","WhoAmIQuery","GetHandler","loginToggle","refs","csrf","responseText","TagInput","handleDelete","tags","handleAdd","tag","maxTags","handleInputChange","arr","result","obj","suggestions","showHideInput","hide","handleAddition","autoresize","autofocus","allowBackspace","allowNew","tagComponent","Tag","classNames","onDelete","selectedTag","selectedTagName","get_data","endpoint","params","body","post","put_data","put","customFilters","numberFilter","debounceTimeout","minLength","stringFilter","dropdownFilter","options","align","OverlayTrigger","trigger","placement","overlay","Popover","maxWidth","ButtonGroup","vertical","option","active","textTransform","block","readOnly","dateRange","rootClose","numberOfCalendars","selectionType","showLegend","singleDateRange","states","momentRangeToEpoch","dispatchEvent","MouseEvent","tagFilter","customCellRenderers","dateFormater","toLocaleString","alertStatus","trim","open","closed","textStatus","alertStatusAlerts","justifyContent","flairCell","appliesTo","original","applies_to","columnDefinitions","Id","accessor","Filter","AlertStatus","open_count","closed_count","promoted_count","column","Cell","EventStatus","FeedStatus","DispatchStatus","IntelStatus","ProductStatus","IncidentStatus","SigStatus","TaskStatus","metadata","task","TaskSummary","minWidth","Subject","Location","Created","Updated","Occurred","LastAttempt","LastArticle","Sources","Tags","TaskOwner","Owner","Entries","Articles","Promotions","Views","DOE","IncidentType","AppliesTo","Value","Name","Group","signature_group","Type","EntityType","FeedType","Description","Uri","uri","TargetType","TargetId","filterable","EntryCountColumn","resizable","expander","Expander","isExpanded","rest","variant","size","getProps","rowInfo","defaultColumnSettings","typeColumns","alertgroup","incident","dispatch","product","feed","signature","guide","entity","buildTypeColumns","rowData","propData","flag","get_current_combined_columnWidths","hasOwnProperty","colOptions","element","columnobj","getColumnWidth","status_code_obj","num_of_exemptions","windowsize","innerWidth","column_total_width","residual","residual_per_column","FlairObject","wordBreak","dangerouslySetInnerHTML","__html","headerText","String","cellLength","newtext","stripHtml","calc_width","PromotionButton","getPromotionInfo","prevProps","onMouseDown","listColumnsJSON","columnsDisplay","columnsClassName","ButtonToolbar","MenuItem","DropdownButton","Link","DetailDataStatus","keydown","is","ctrlKey","metaKey","statusAjax","unbind","trackAll","untrackAll","activeAll","pauseAll","closeAll","openAll","enableAll","disableAll","newStatus","contentType","buttonStyle","classStatus","promotion_id","fontSize","Promote","newType","newURL","promote","location","assign","pid","eventkey","Marker","isMarked","removeMarkedItemsHandler","getMarkedItemsHandler","setMarkedItemsHandler","getSelectedAlerts","nextProps","isAlert","Tooltip","markedItems","getMarkedItems","selectedAlerts","removeMarkedItems","setMarkedItems","alertsSelected","currentMarked","nextMarked","startX","startY","startWidth","startHeight","DropdownToggle","DropdownMenu","TrafficLightProtocol","selectColor","tlp","serverRequest","r","cx","cy","fill","stroke","strokeWidth","divider","SelectedHeaderOptions","toggleFlair","newGlobalFlairState","globalFlairState","ifr","contentDocument","ifrContents","contents","find","addClass","removeClass","alertOpenOrCloseSelected","iterarray","entryData","object","ToggleProcessingMessage","catch","alertPromoteSelected","array","promoteTo","alert_id","alertSelectExisting","prompt","selectExisting","alertExportCSV","currentRecords","data_to_download","dataToDownload","csvLink","link","PrintPrepare","css","pre","forceUpdate","Print","print","guideToggle","flairToolbarToggle","guideID","left","sourceToggle","createGuide","subjectName","reparseFlair","parsed","createLinkSignature","manualUpdate","subjectType","headerData","showPromote","entryToggle","fileUploadToggle","viewedByHistoryToggle","changeHistoryToggle","permissionsToggle","entitiesToggle","guideRedirectToAlertListWithFilter","linksModalToggle","showSignatureOptionsToggle","exportToggle","deleteToggle","markModalToggle","filename","promoteRemaining","customStyles","content","bottom","ACTION_BUTTONS","READY","LOADING","SUCCESS","ERROR","DeleteThing","deleteItems","deleteType","iterator","enqueueSnackbar","delete_data","history","deleteText","deleteTempArray","paddingRight","onRequestClose","DeleteEntry","toggle","DeleteModal","deleteButton","deleteAll","when","deleteAjax","always","confirmText","DeleteThingComponent","withSnackbar","whoami","componentWillReceiveProps","currentOwner","ownerToggle","ownerToolbar","Entities","entitiesBody","entityData","EntitiesData","originalobj","entities","prop","subobj","EntitiesDataHeaderIterator","eachValue","entityId","entityValue","fontWeight","EntitiesDataValueIterator","ChangeHistory","historyBody","ChangeHistoryData","ChangeHistoryDataIterator","format","what","ViewedByHistory","ViewedByHistoryData","view_history","ViewedByHistoryDataIterator","where","ReactTags","WithContext","SelectedPermission","toggleNewReadPermission","readPermissionEntry","toggleNewModifyPermission","modifyPermissionEntry","permissionsfunc","permissionData","groups","writepermissionsarr","readpermissionsarr","readwritepermissionsarr","fullprop","modifyRows","readRows","dataRead","dataModify","updateid","read_modify","readUpdate","modifyUpdate","paddingTop","PermissionIterator","permissionDelete","newPermission","tempArr","read","modify","j","NewPermission","handleDrag","minQueryLength","customCSS","Conflict","handlePUT","editedtext","target_id","targetid","parent","target_type","handleClose","addedEntry","handleEditorChange","localconflict","Card","card","CardContent","Typography","component","initialValue","remoteconflict","plugins","onEditorChange","init","selector","table_clone_elements","paste_retain_style_properties","paste_data_images","paste_preprocess","plugin","relative_urls","remove_script_host","link_assume_external_targets","toolbar1","content_css","verify_html","setup","editor","addButton","onclick","insertContent","Prompt","AddEntryModal","entryAction","asyncContentLoaded","recentlyUpdated","scrollTop","leaveCatch","addedentry","change","submit","startsWith","set","dataURL","Number","html","dataType","forEdit","showConflict","toggleVisibility","exportContent","recipients","exportResponse","localcontent","not_saved_entry_id","Dialog","fullWidth","aria-labelledby","tinyID","table_default_attributes","auto_focus","browser_spellcheck","contextmenu","codesample_languages","paste_postprocess","querySelectorAll","tableNode","setAttribute","ui","registry","addMenuButton","fetch","EntityDetail","componentWillMount","onLoad","getElementById","readyState","ifrContentsHead","rel","contentWindow","requestAnimationFrame","newheight","scrollHeight","isMounted","currentTabArray","valueClicked","entityvalue","entitytype","entityid","isNaN","entityidsarray","currentKey","initialLoad","processedIds","flairToolbarOff","containerHeightAdjust","addEventListener","checkForInitialLoadComplete","addNewEntity","watcher","nextPropsEntityIdInt","addEntity","currentTabArrayIndex","checkFlairHover","linkWarningToggle","initDrag","hasClass","elem","clientX","clientY","defaultView","documentElement","doDrag","stopDrag","blockiFrameMouseEvent","removeEventListener","allowiFrameMouseEvent","moveDivInit","moveDivStop","handleSelectTab","positionRightBoundsCheck","defaultEntityOffset","entityWidthint","fullScreen","defaultOffsetX","tabsArr","DragmeClass","z","addFlair","form","entityobj","defaultActiveKey","animation","handle","entityWidth","flex","borderTop","borderBottom","entityMaxHeight","entityoffset","TabContents","minHeight","guideurl","isPopUp","EntityValue","entityurl","scanner","class","EntityBody","updateAppearances","appearancesNumber","newAppearancesNumber","appearances","entryToolbar","showFullEntityButton","linkOnClickIntercept","nopop","entityEnrichmentDataArr","entityEnrichmentLinkArr","entityEnrichmentGeoArr","enrichmentEventKey","dataSource","nopopup","data-nopop","GeoView","copyToEntry","copyToEntryToolbar","copyToEntity","copyToEntityToolbar","trArr","copyArr","copy","EntityEnrichmentButtons","expandLevel","EntityReferences","promoted","therest","result_array","compareUpdatedDate","loading_type","loadingType","entityReferencesData","loadingSignature","loadingEvents","loadingAlerts","loadingIncidents","loadingIntel","Paper","promotedHref","alignItems","lineHeight","daysSince","minRows","sortable","maxRecords","order","orderBy","GuideBody","SourceBody","head","frameBorder","sandbox","styleSheets","finalfiles","FileUpload","Close","files","onDrop","FormData","xhr","XMLHttpRequest","uploadProgress","uploadComplete","uploadFailed","uploadCancelled","send","edit","stagecolor","enable","addentry","saved","enablesave","getRootProps","getInputProps","file","Summary","newClass","summary","summaryDisplay","Task","makeTask","make_task","closeTask","close_task","takeTask","take_task","taskDisplay","taskData","LinkWarning","proceed","opener","apiOnly","myDomain","reg","RegExp","linkRegResult","match","myDomainRegResult","SignatureTable","submitSigBody","viewVersionid","ajaxType","viewSigBodyid","signature_id","revision","cursorEnabledDisabled","signatureData","editSigBody","lastViewVersionid","createNewSigBody","createNewSigBodyFromSig","Cancel","version","prod_sigbody_id","viewSigBody","keyboardHandlerUpdate","Cookies","currentKeyboardHandler","languageModeUpdate","currentLanguageMode","editorThemeUpdate","currentEditorTheme","loaded","keyboardHandlers","languageModes","editorThemes","versionsArray","keyboardHandlersArray","languageModesArray","editorThemesArray","not_saved_signature_entry_id","currentKeyboardHandlerApplied","highestVersionid","versionidrevision","versionidrevisionprodqual","versionidSigBodyid","qual_sigbody_id","showSignatureOptions","mode","editorProps","$blockScrolling","keyboardHandler","maxLines","minLines","showPrintMargin","SignatureMetaData","submitMetaData","k","v","err","optionsType","onOptionsChange","optionsValue","AutoCompleteInput","HandleAdd","HandleInputChange","OnChange","getItemValue","renderItem","isHighlighted","menuStyle","borderRadius","boxShadow","inputProps","wrapperProps","EntityCreateModal","HasSpacesCheck","test","multiword","GetCount","countLoading","Confirmation","confirmation","Submit","ToggleCreateEntity","responseJSON","error_msg","OnChangeMatch","OnChangeValue","userdef","CustomMetaDataTable","nextState","multiSelectArr","dropdownArr","datesArr","inputArr","textAreaArr","inputMultiArr","booleanArr","formType","o","referenceKey","dropdownValues","help","fetchURL","dynamic","onBlur","calendarValue","typeTitle","typeLower","mainType","mainId","DropdownComponent","getDynamic","selected","bsClass","InputComponent","inputOnChange","Calendar","data_string","_d","showCalendar","TextAreaComponent","InputMultiComponent","group","groupArr","inputValue","InputChange","clickedThing","bsType","BooleanComponent","MultiSelectComponent","makeForm","FormControl","componentClass","multiple","FeedDataTable","attribute_name","rowElements","thiskey","AddEntryToAlert","useState","visible","setVisibility","showEntryData","SelectedEntry","getEntryData","updatedCB","Watcher","getEntityData","entityResult","showEntityData","waitForEntry","waitEntry","flairToolbar","newEntityDetailKey","entityDetailKey","linkWarningToolbar","containerid","intervalID","not","tr","parentNode","ListViewTableHeight","getElementsByClassName","clientHeight","innerHeight","divid","divClass","subcomponent","setAlertColumns","setEntryEntities","fileUploadToolbar","notificationType","notificationMessage","onresize","runWatcher","EntryIterator","linkToSearch","data_with_flair","flairOff","search","ahrefs","NewAlertTable","createData","dataarray","dataitem","promotionId","expanded","handleSelectAll","prevState","styleName","reactTable","onExpandedChange","defaultFilterMethod","SubComponent","onFilteredChange","onSortedChange","newSorted","shiftKey","showPagination","pageSize","getTdProps","getTrProps","sortedData","handleMultiSelection","getSelection","removeAllRanges","handleShiftSelect","handleSelection","some","AlertTableSearchDiv","outline","EntryParent","refreshButton","editEntryToggle","editEntryToolbar","replyEntryToggle","replyEntryToolbar","deleteToolbar","permissionsToolbar","getEntryEntityData","itemarr","subitemarr","itemsClass","outerClassName","innerClassName","taskOwner","subitem","childobj","childfunc","entryActions","actions","send_to_name","send_to_url","datahref","tlpBorder","tlpColorCSS","header1","header2","createdTime","updatedTime","entryHeaderInnerId","showEntityCreateModal","highlightedText","body_flair","pullRight","header3","checkHighlight","iframe","toString","EntryAction","post_data","data-href","EntryData","setHeight","rawMarkup","entry_body_id","entry_body_inner_id","contentDidMount","Badge","toggleBadgeEntry","badgetype","source","badgevar","badgeType","BadgeDataIterator","badgeDelete","newBadgeArr","newobject","NewBadge","handleSuggestionOrTagConversion","oldarray","newobj","abbreviateNumber","num","fixed","toPrecision","toFixed","abs","AddFlair","entityUpdate","scrollTo","currentEntityValue","entityMatched","toLowerCase","entityCount","entitydata","entityEntryCount","entry","circle","country_code","geoip","isocode","isp","sidd","constructor","blocklist3","firewall","watch","whitelist","blackhole","proxy_block","entityEntry","subtable","wrap","Links","allSelected","getLinks","handleTHeadCheckboxSelection","handleRowSelection","handleCheckboxSelection","cell","defaultPageSize","getTheadThProps","noDataText","verticeObject","linkid","vertices","memo","checkAllSelected","instance","pageRows","pageRow","Actions","actionSuccess","RemoveLink","RemoveLinkAjax","ToggleActionSuccess","newActionSuccess","Mark","currentItem","unshift","deleteCallback","RemoveSelected","pendingDelete","LinkContextChange","linkContextString","ExpandLinkToggle","newState","linkPanel","StartDelete","MoveEntry","EntryAjax","CopyEntry","arrayToLink","currentobj","LinkAjax","Reparse","reparseButton","ReparseAjax","promoteButton","PromoteAjax","reload","removeOriginal","RemoveEntryAfterMove","numSelected","addToEvent","deleteThings","collapsible","Form","horizontal","InitialAjaxLoad","datasource","listStartY","listStartHeight","listQuery","ExportModal","emailArray","emailField","showEditor","responseSuccess","aria-describedby","PostResponse","PromotedData","showAllPromotedDataToolbar","showAllPromotedDataToggle","promotedFromType","fullarr","shortarr","shortforlength","SelectedHeader","_type","_message","refreshing","eventLoaded","entryLoaded","entityLoaded","entryType","eventResult","showEventData","isNotFound","tagData","sourceData","flairing","entryResult","exportModal","viewedbyfunc","viewedbyarr","isDeleted","changeHistoryToolbar","viewedByHistoryToolbar","entitiesToolbar","entryEntityData","promoteToggle","promoteToolbar","intervalID1","nicktype","summaryUpdate","taskid","escape","handleFilter","showMarkModal","processing","togglePreventClick","showLinksModal","checkSelection","temparray","selection","startIndex","endIndex","delayFunction","rowid","viewedby","promoted_from","alertPreSelectedId","EntryDataUpdated","EntryDataSubject","handleChange","keyName","newValue","calculateWidth","newWidth","isDisabled","SelectedContainer","datarows","toggleEventDisplay","viewEvent","tabIndex","ListView","viewMode","Landscape","Portrait","ConvertAlertIdToAlertgroupId","ConvertEntryIdToType","scrollheight","sortBy","filterBy","pageLimit","activepage","pageNumber","page","idsarray","finalarray","storeKey","reloadactive","sortObj","sortInt","desc","stringArr","sourcearr","tagarr","totalPages","getPages","totalRecordCount","objectarray","totalCount","showSelectedContainer","statusText","keyNavigate","toggleView","preventClick","targetType","srcElement","tagName","curRow","nextRow","parentElement","nextElementSibling","previousElementSibling","nextId","getNewData","showClearFilter","listViewContainerDisplay","typeCapitalized","listViewKey","notificationSetting","notificationToggle","createNewThing","exportCSV","clearAll","pages","onPageChange","handlePageChange","onPageSizeChange","handlePageSizeChange","filtered","handleSort","sorted","manual","LoadingComponent","CustomTableLoader","dragdiv","queryType","AutoScrollToId","tbody","offsetHeight","offsetTop","initialAutoScrollToId","idReference","id2","response1","newresponse","async","startdrag","manualScrollHeight","stopdrag","onmousemove","onmouseup","onmousedown","classname","splitter","maxheight","alldetail","differentviews","maxwidth","minwidth","scrollwidth","resize","listViewOrientation","newListViewKey","subid","newPage","newidsarray","newarray","abort","csv","storearray","data_uri","sortArr","clearall","newSortArr","sortEach","cookieName","filterObj","newFilterArr","filterEach","pageIndex","ceil","listViewSort","listViewPage","listViewFilter","selectedColor","sourcetags","startepoch","endepoch","idtext","statustext","subjecttext","viewsarrow","idarrow","subjectarrow","statusarrow","createdarrow","sourcearrow","tagsarrow","viewstext","entriestext","suggestiontags","suggestionssource","sourcetext","tagstext","viewfilter","viewevent","showevent","fsearch","textField","root","palette","paper","textInput","initstate","fullname","password","UserGroupFormComponent","formatGroups","allgroups","resetState","checkBlankInputs","buildDataObj","handleGroups","newgroups","handlePOST","nativeEvent","newval","editObject","selectedValue","TextField","helperText","InputLabelProps","shrink","autoComplete","FormControlLabel","control","Switch","GroupSelection","CardActions","button","GroupSelectionComponent","mapUsersGroupsToTags","usersgroups","checkValidGroup","el","tagInput","tagInputField","inline","UserGroupForm","AreYouSure","deletetext","UserGroupContainer","showModal","showUserDialog","showGroupDialog","handleUserClose","handleListItemClick","getColumns","handleActiveToggle","toggleAreYouSure","setUserGroupResults","userdata","groupdata","areYouSure","handleAreYouSureClose","getUserObject","updateId","other","showuserpagination","showgrouppagination","elevation","xs","gutterBottom","Person","flexDirection","Fab","mixins","gutters","paddingBottom","Api","GetKeys","GetAvailableGroups","CreateKey","DeleteKey","GroupChange","ToggleActiveStatus","availableGroups","newGroup","keysArr","keyActiveStatus","keyGroups","apikey","currentGroups","allGroups","keyActiveStatusCss","GroupModal","Open","DeleteGroup","newGroups","textContent","currentGroupArray","currentGroupArrayEdit","keyStatus","Undelete","getDeletedItems","dataArr","Restore","Purge","notificationSystem","addNotification","autoDismiss","TabContainer","createMuiTheme","typography","Admin","AppBar","appBar","indicatorColor","centered","Amq","s4","get_guid","register_client","restart","client","clientId","destination","process_message","handle_update","create_callback_object","intkey","checkNumber","cb_map","newset","remove_callback_object","payload","activemqaction","activemqguid","guid","activemqhostname","hostname","activemqpid","execute_callback_function","searchstring","f","noti","amqdebug","Map","number","tablestyle","EntityInfo","ei","nodeInfo","ti","sourcetype","NodeInfo","ni","ThingInfo","merge_arrays","aitem","bitem","ScotForceGraph","loadGraph","depth","add_to_graph","existing_graph","new_nodes","nodes","new_links","links","existing_nodes","existing_links","new_graph","draw_to_canvas","globalScale","font","bckgDimensions","measureText","fillStyle","beginPath","arc","PI","fillRect","textBaseline","fillText","__bckgDimensions","node_paint","handleNodeHover","nodeinfo","handle_node_add","elements","thingtype","thingid","graphData","nodeCanvasObject","nodePointerAreaPaint","onNodeHover","ScotForceGraphDisplay","nodeinfostyle","sidebyside","SFG","graphcopy","update_graph","response_graph","a_item","b_item","handleNodeClick","handleClearGraph","handleToggleGraph","graphtype","paint_highlight","hoverNode","highlightNodes","highlightLinks","onNodeClick","nodeAutoColorBy","nodeThreeObject","THREE","GraphView","threed","App","viewModeSetting","listViewFilterSetting","listViewSortSetting","listViewPageSetting","handler","AMQ","ee","eedraw","prepend","eeremove","removeItem","eestring","path","isExact","stateProps","errorString","loggedin","login","pathname","LogOut","sensitivity","IH","inverse","fixedTop","Brand","Toggle","Collapse","exact","isTask","Boolean","customHistory","createBrowserHistory","HashRouter","Route","module","exports"],"mappings":"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","file":"static/js/main.74d259d6.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getDisplayName } from \"recompose\";\nimport { Broadcast, Subscriber } from \"react-broadcast\";\nimport * as LocalStorage from \"../components/local_storage\";\n\n/**\n * This file defines everything needed to use user settings\n * in components.\n *\n * This uses React's context API so that we don't need to have\n * a giant prop chain\n *\n * The provider sets everything up and is included at the top\n * of the application.\n *\n * The HOC is included with every component that wants access\n * to the object\n *\n * userConfig data format:\n * {\n *\t\tkey1: { data },\n *\t\tkey2: [ data, data, data, ],\n *\t\tkey3: true,\n *\t\t...\n * }\n * where keys and data structures are defined in the UserConfigKeys\n * object\n *\n * Currently components may only access one key of userConfig.\n *\n * WARNING: The context API is likely to change in the future\n * and this will need to be updated. Hopefully though, only\n * this file will need to be updated as nothing else directly\n * accesses context\n */\n\n// Channel name for react-broadcast\nconst UserConfigChannel = \"userConfig\";\n\nconst UserConfigKeyShape = {\n  key: PropTypes.string.isRequired,\n  default: PropTypes.any.isRequired\n};\n\n/**\n * Unique keys for the structure of userConfig\n *\n * Structure:\n *\t\tKEY_ID: {\n *\t\t\tkey: KEY_VALUE,\n *\t\t\tdefault: DEFAULT_VALUE(S),\n *\t\t}\n *\n *\tThis is how to specify the top-level key into the userConfig object\n *\tand define the shape of the data as well as the default values\n */\nexport const UserConfigKeys = {\n  DASHBOARD: {\n    key: \"dashboard\",\n    default: {\n      curTab: 0,\n      tabs: []\n    }\n  }\n};\n\nconst UserConfigContextTypes = {\n  getUserConfig: PropTypes.func,\n  setUserConfig: PropTypes.func\n};\n\n/**\n * This sets up the context provider for the userConfig object\n *\n * Only needs to be included once, somewhere at the top of the chain\n * Currently in main/index.js\n */\nexport class UserConfigProvider extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userConfig: {\n        loading: true\n      }\n    };\n\n    this.update = this.update.bind(this);\n    this.setUserConfig = this.setUserConfig.bind(this);\n  }\n\n  static childContextTypes = UserConfigContextTypes;\n\n  getChildContext() {\n    return {\n      getUserConfig: this.getUserConfig,\n      setUserConfig: this.setUserConfig\n    };\n  }\n\n  /**\n   * Load user config\n   *\n   * Return: Promise\n   */\n  getUserConfig() {\n    // Currently just uses localstorage\n    // This should be easy to change to use a backend at some point\n    return new Promise((resolve, reject) => {\n      let json = LocalStorage.getLocalStorage(UserConfigChannel);\n      if (json) {\n        resolve(JSON.parse(json));\n        return;\n      }\n\n      resolve({});\n    });\n  }\n\n  /**\n   * Save user config\n   *\n   * Return: Promise\n   */\n  setUserConfig(config) {\n    // Currently just uses localstorage\n    // This should be easy to change to use a backend at some point\n    return new Promise((resolve, reject) => {\n      LocalStorage.setLocalStorage(UserConfigChannel, JSON.stringify(config));\n\n      resolve();\n    }).then(() => {\n      this.update();\n    });\n  }\n\n  update() {\n    this.getUserConfig().then(config => {\n      this.setState({\n        userConfig: config\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.update();\n  }\n\n  render() {\n    return (\n      <Broadcast value={this.state.userConfig} channel={UserConfigChannel}>\n        <div>{this.props.children}</div>\n      </Broadcast>\n    );\n  }\n}\n\n/*\n * Defining shape for UserConfig props.\n *\n * This should be imported by wrapped components:\n * static propTypes = {\n *\t\t( all local propTypes ),\n *\t\t...UserConfigPropTypes,\n * };\n *\n * Children:\n *\t\tconfig: the actual data,\n *\t\tsetUserConfig( config ): save changes to config\n *\t\tgetUserConfig(): load the config from source again\n *\t\tloading: whether the config is currently loading\n */\nexport const UserConfigPropTypes = {\n  userConfig: PropTypes.shape({\n    config: PropTypes.any.isRequired,\n    setUserConfig: PropTypes.func.isRequired,\n    getUserConfig: PropTypes.func.isRequired,\n    loading: PropTypes.bool\n  }).isRequired\n};\n\n/**\n * Higher-order Component (HOC) for providing a subkey of userConfig\n * to a component\n *\n * Usage: (In component file)\n *\t\texport default withUserConfig( KEY ) (COMPONENT);\n * Where:\n *\t\tKEY: is one of the values above in UserConfigKeys\n *\t\tCOMPONENT: is the component needing access to userConfig\n *\n * Example:\n *\t\texport default withUserConfig( UserConfigKeys.DASHBOARD ) (HomeDashboard);\n *\n *\t\tThis gives HomeDashboard access to the dashboard portion of userConfig\n */\nexport const withUserConfig = configKey => {\n  PropTypes.checkPropTypes(\n    UserConfigKeyShape,\n    configKey,\n    \"argument\",\n    \"withUserConfig\"\n  );\n\n  return WrappedComponent => {\n    class UserConfigSubscriber extends PureComponent {\n      constructor(props) {\n        super(props);\n\n        this.state = {};\n\n        this.setUserSubConfig = this.setUserSubConfig.bind(this);\n      }\n\n      static contextTypes = UserConfigContextTypes;\n      static displayName = `withUserConfig(${getDisplayName(\n        WrappedComponent\n      )})`;\n      static propTypes = {\n        userConfig: PropTypes.object.isRequired\n      };\n\n      /**\n       * This allows the wrapped component to only have to worry about its own\n       * portion of userConfig. Its changes are automatically wrapped back into\n       * the whole object\n       */\n      setUserSubConfig(subConfig) {\n        let newConfig = {\n          ...this.props.userConfig\n        };\n        newConfig[configKey.key] = subConfig;\n\n        this.context.setUserConfig(newConfig);\n      }\n\n      render() {\n        let { userConfig, ...restProps } = this.props;\n\n        let data = userConfig[configKey.key] || configKey.default;\n        const loading = userConfig.loading;\n\n        const userConfigProps = {\n          userConfig: {\n            loading: loading === true,\n            config: data,\n            setUserConfig: this.setUserSubConfig,\n            getUserConfig: this.context.getUserConfig\n          }\n        };\n\n        return <WrappedComponent {...restProps} {...userConfigProps} />;\n      }\n    }\n\n    const UserConfigHelper = props => (\n      <Subscriber channel={UserConfigChannel}>\n        {data => <UserConfigSubscriber userConfig={data} {...props} />}\n      </Subscriber>\n    );\n    return UserConfigHelper;\n  };\n};\n","export const setLocalStorage = ( name, value ) =>{\n    localStorage.setItem( name, value );\n};\n\nexport const removeLocalStorage = ( name ) => {\n    localStorage.removeItem( name );\n};\n\nexport const getLocalStorage = ( name ) => {\n    return localStorage[ name ];\n};\n","import React from 'react';\n\nimport { Panel, Button } from 'react-bootstrap';\n\nconst PanelHeader = ( title, onRemove ) => (\n\t<div style={{ position: 'relative' }}>\n\t\t{title}\n\t\t<span className=\"panel-button right\">\n\t\t\t<Button onClick={onRemove} bsSize=\"small\"><i className=\"fa fa-close\" /></Button>\n\t\t</span>\n\t</div>\n)\n\nconst Wrapper = ( { children, onRemove, editable, title } ) => (\n\t<div className={`widget ${editable && \"editable\"}`}>\n\t\t{ !editable && children }\n\t\t{ editable &&\n\t\t\t<Panel header={PanelHeader( title, onRemove )}>\n\t\t\t\t{React.cloneElement(children, { editMode: editable })}\n\t\t\t</Panel>\n\t\t}\n\t</div>\n)\n\nexport default Wrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, Button } from 'react-bootstrap';\n\nconst WidgetPicker = ( { widgets, layout, isOpen, onClose, onSelect } ) => {\n\tlet activeWidgets = new Set();\n\tlayout.rows.forEach( row => {\n\t\trow.columns.forEach( col => {\n\t\t\tcol.widgets.forEach( widget => {\n\t\t\t\tactiveWidgets.add( widget.key );\n\t\t\t} );\n\t\t} );\n\t} );\n\n\tlet widgetItems = Object.keys(widgets)\n\t\t.filter( widget => !activeWidgets.has( widget ) )\n\t\t.map( ( widget, key ) => {\n\t\t\tconst widgetObj = widgets[widget];\n\t\t\treturn (\n\t\t\t\t<div key={key} className=\"picker-item\" onClick={() => {onSelect(widget);}}>\n\t\t\t\t\t<h3>{widgetObj.title}</h3>\n\t\t\t\t\t<p>{widgetObj.description}</p>\n\t\t\t\t</div>\n\t\t\t)\n\t\t} );\n\n\tif ( !widgetItems.length ) {\n\t\twidgetItems = <h2>No available widgets</h2>;\n\t}\n\n\treturn (\n\t\t<Modal show={isOpen} onHide={onClose} className=\"WidgetPicker\">\n\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title>Pick a Widget</Modal.Title>\n\t\t\t</Modal.Header>\n\n\t\t\t<Modal.Body className=\"picker-grid\">{widgetItems}</Modal.Body>\n\n\t\t\t<Modal.Footer>\n\t\t\t\t<Button onClick={onClose}>Cancel</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t)\n}\nWidgetPicker.propTypes = {\n\twidgets: PropTypes.object.isRequired,\n\tlayout: PropTypes.object.isRequired,\n\tisOpen: PropTypes.bool.isRequired,\n\tonClose: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func.isRequired,\n};\n\nexport default WidgetPicker;\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dazzle, { addWidget } from \"react-dazzle\";\nimport { Grid, Button } from \"react-bootstrap\";\nimport WidgetWrapper from \"./widgetWrapper\";\nimport WidgetPicker from \"./widgetPicker\";\n\nexport const defaultLayout = {\n  rows: [\n    {\n      columns: [\n        {\n          className: \"col-sm-4\",\n          widgets: []\n        },\n        {\n          className: \"col-sm-4\",\n          widgets: []\n        },\n        {\n          className: \"col-sm-4\",\n          widgets: []\n        }\n      ]\n    }\n  ]\n};\n\nexport default class Dashboard extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      editable: props.saveDashboard != null,\n      editMode: props.isNew,\n      layout: props.layout,\n      title: props.title,\n      widgetPicker: false,\n      newWidgetOptions: {}\n    };\n\n    this.onAdd = this.onAdd.bind(this);\n    this.updateLayout = this.updateLayout.bind(this);\n    this.updateTitle = this.updateTitle.bind(this);\n    this.reset = this.reset.bind(this);\n    this.saveDashboard = this.saveDashboard.bind(this);\n    this.toggleEdit = this.toggleEdit.bind(this);\n    this.togglePicker = this.togglePicker.bind(this);\n    this.selectWidget = this.selectWidget.bind(this);\n  }\n\n  static propTypes = {\n    widgets: PropTypes.object.isRequired,\n    title: PropTypes.string,\n    saveDashboard: PropTypes.func,\n    layout: PropTypes.object,\n    isNew: PropTypes.bool,\n    errorToggle: PropTypes.func\n  };\n\n  static defaultProps = {\n    title: \"\",\n    layout: defaultLayout,\n    isNew: false\n  };\n\n  onAdd(layout, rowIndex, columnIndex) {\n    this.setState({\n      widgetPicker: true,\n      newWidgetOptions: {\n        row: rowIndex,\n        col: columnIndex\n      }\n    });\n  }\n\n  updateLayout(layout) {\n    this.setState({\n      layout: layout\n    });\n  }\n\n  updateTitle(title) {\n    this.setState({\n      title: title.target.value\n    });\n  }\n\n  toggleEdit() {\n    this.setState({\n      editMode: !this.state.editMode\n    });\n  }\n\n  saveDashboard() {\n    // Handle upstream save\n    if (!this.state.title) {\n      this.props.errorToggle(\"Please enter a dashboard title\");\n      return;\n    }\n\n    this.props.saveDashboard(this.state.title, this.state.layout);\n    this.toggleEdit();\n  }\n\n  reset() {\n    this.setState({\n      layout: this.props.layout,\n      title: this.props.title,\n      editMode: false,\n      widgetPicker: false,\n      newWidgetOptions: {}\n    });\n  }\n\n  togglePicker() {\n    this.setState({\n      widgetPicker: !this.state.widgetPicker\n    });\n  }\n\n  selectWidget(widget) {\n    let { row, col } = this.state.newWidgetOptions;\n    this.updateLayout(addWidget(this.state.layout, row, col, widget));\n    this.togglePicker();\n  }\n\n  render() {\n    return (\n      <div className=\"dashboard\">\n        <WidgetPicker\n          widgets={this.props.widgets}\n          layout={this.state.layout}\n          isOpen={this.state.widgetPicker}\n          onClose={this.togglePicker}\n          onSelect={this.selectWidget}\n        />\n        <TitleBar\n          title={this.state.title}\n          editable={this.state.editable}\n          editMode={this.state.editMode}\n          onEdit={this.toggleEdit}\n          onSave={this.saveDashboard}\n          onCancel={this.reset}\n          handleTitleChange={this.updateTitle}\n          isNew={this.props.isNew}\n        />\n        <Grid fluid>\n          <Dazzle\n            onRemove={this.updateLayout}\n            onMove={this.updateLayout}\n            onAdd={this.onAdd}\n            editable={this.state.editMode}\n            layout={this.state.layout}\n            widgets={this.props.widgets}\n            frameComponent={WidgetWrapper}\n          />\n        </Grid>\n      </div>\n    );\n  }\n}\n\nconst TitleBar = ({\n  title,\n  editMode,\n  onEdit,\n  onSave,\n  onCancel,\n  handleTitleChange,\n  isNew,\n  editable\n}) => {\n  if (!editable) {\n    return null;\n  }\n  return (\n    <div className=\"titleBar clearfix\">\n      {editMode && (\n        <form onSubmit={onSave}>\n          <input\n            type=\"text\"\n            className=\"title\"\n            value={title}\n            placeholder=\"Dashboard Title\"\n            onChange={handleTitleChange}\n          />\n          <Button bsStyle=\"primary\" bsSize=\"small\" onClick={onSave}>\n            Save\n          </Button>\n          <Button\n            bsStyle=\"warning\"\n            bsSize=\"small\"\n            disabled={isNew}\n            onClick={onCancel}\n          >\n            Cancel\n          </Button>\n        </form>\n      )}\n      {!editMode && (\n        <div className=\"edit\">\n          <Button bsSize=\"xsmall\" onClick={onEdit}>\n            <i className=\"fa fa-edit\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\nTitleBar.propTypes = {\n  title: PropTypes.string.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  handleTitleChange: PropTypes.func.isRequired,\n  editable: PropTypes.bool.isRequired\n};\n","import React, { PureComponent } from \"react\";\nimport { Panel } from \"react-bootstrap\";\nimport $ from \"jquery\";\n\nclass Status extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      statusData: {},\n      error: null\n    };\n\n    this.updateData = this.updateData.bind(this);\n    this.fetchError = this.fetchError.bind(this);\n  }\n\n  componentDidMount() {\n    /*\n\t\t * Expected structure:\n\t\t * [\n\t\t *\t\t{ name: \"SERVICE\", status: \"STATUS\" },\n\t\t *\t\t...\n\t\t * ]\n\t\t *\n\t\t * Service: name of service\n\t\t * Status: [ \"ok\", \"error\", \"warn\", \"unknown\" ]\n\t\t */\n    $.ajax({\n      type: \"get\",\n      url: \"scot/api/v2/status\",\n      success: this.updateData,\n      error: this.fetchError\n    });\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  updateData(response) {\n    if (this._isMounted) {\n      this.setState({\n        statusData: response\n      });\n    }\n  }\n\n  fetchError(error) {\n    if (this._isMounted) {\n      this.setState({\n        error: error\n      });\n    }\n  }\n\n  render() {\n    let { className = \"\" } = this.props;\n    let services = [];\n    if (Array.isArray(this.state.statusData)) {\n      for (let service of this.state.statusData) {\n        let { name, status } = service;\n        if (!status) {\n          status = \"unknown\";\n        }\n\n        services.push(<Service key={name} name={name} status={status} />);\n      }\n    }\n\n    let classes = [\"Status\", className];\n    if (services.length > 4) {\n      classes.push(\"cols-2\");\n    }\n\n    return (\n      <div className={classes.join(\" \")}>\n        {this.state.error && (\n          <Panel bsStyle=\"danger\" header=\"Error\">\n            {this.state.error}\n          </Panel>\n        )}\n        {services}\n      </div>\n    );\n  }\n}\n\nconst Service = ({ name, status }) => (\n  <div className={`service status-${status}`} title={`Status: ${status}`}>\n    {name}\n  </div>\n);\n\nexport default Status;\n","import React from 'react';\nconst Emoji = props => (\n  <span\n    className=\"emoji\"\n    role=\"img\"\n    aria-label={props.label ? props.label : \"\"}\n    aria-hidden={props.label ? \"false\" : \"true\"}\n  >\n    {props.symbol}\n  </span>\n);\nexport default Emoji;","import React, { PureComponent } from \"react\";\nimport { Well, Panel, Badge } from \"react-bootstrap\";\nimport Emoji from './emoji'\nimport $ from \"jquery\";\nconst titleCase = str => str.charAt(0).toUpperCase() + str.slice(1);\nconst CATEGORY_INTERVAL = 5000;\n\nclass Gamification extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gameData: [],\n      gameCategories: [],\n      categoryIndex: 0,\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/game\",\n      success: this.updateData,\n      error: this.fetchError\n    });\n    this.categoryInterval = setInterval(this.updateCategory, CATEGORY_INTERVAL);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    if (this.categoryInterval) {\n      clearInterval(this.categoryInterval);\n    }\n    this._isMounted = false;\n  }\n\n  updateCategory = () => {\n    let nextIndex =\n      (this.state.categoryIndex + 1) % this.state.gameCategories.length;\n    if (this._isMounted) {\n      this.setState({\n        categoryIndex: nextIndex\n      });\n    }\n  }\n\n  updateData = (data) => {\n    let categories = [];\n    for (let category in data) {\n      if (category !== null) {\n        console.log(`${titleCase(category)}`);\n        categories.push(<Category category={category} data={data[category]} />);\n      }\n    }\n    if (this._isMounted) {\n      this.setState({ gameData: data, gameCategories: categories });\n    }\n  }\n\n  fetchError = (error) => {\n    if (this._isMounted) {\n      this.setState({ error: error });\n    }\n  }\n\n  render() {\n    return (\n      <Well className=\"Gamification\">\n        <h3>Leaders</h3>\n        {this.state.error && (\n          <Panel bsStyle=\"danger\" header=\"Error\">\n            {this.state.error}\n          </Panel>\n        )}\n        {this.state.gameCategories[this.state.categoryIndex]}\n      </Well>\n    );\n  }\n}\n\nconst Category = ({ category, data }) => (\n  <Panel\n    className=\"category\"\n  >\n    <Panel.Title><b>{`${titleCase(category)} - ${data[0].tooltip}`}</b></Panel.Title>\n    <Panel.Body>\n      <div>\n        {data[0].username !== \"\" && data[0].username !== null && data[0].count != null && data[0].count !== \"\" ?\n          <div>\n            <Emoji symbol=\"🥇\" /> {data[0].username} <Badge>{data[0].count}</Badge>\n          </div> : null\n        }\n        {data[1].username !== \"\" && data[1].username != null && data[1].count != null && data[1].count !== \"\" ?\n          <div>\n            <Emoji symbol=\"🥈\" /> {data[1].username} <Badge>{data[1].count}</Badge>\n          </div> : null\n        }\n        {data[2].username !== \"\" && data[2].username != null && data[2].count != null && data[2].count !== \"\" ?\n          <div>\n            <Emoji symbol=\"🥉\" /> {data[2].username} <Badge>{data[2].count}</Badge>\n          </div> : null\n        }\n      </div>\n    </Panel.Body>\n  </Panel>\n);\n\nexport default Gamification;\n","export const setLocalStorage = ( name, value ) => {\n    localStorage.setItem( name, value );\n};\n\nexport const removeLocalStorage = ( name ) =>{\n    localStorage.removeItem( name );\n};\n\nexport const getLocalStorage = ( name ) => {\n    return localStorage[ name ];\n};\n\nexport const setSessionStorage = ( name, value ) => {\n    localStorage.setItem( name, value );\n};\n\nexport const removeSessionStorage = ( name ) => {\n    localStorage.removeItem( name );\n};\n\nexport const getSessionStorage = ( name ) => {\n    return localStorage[ name ];\n};","import Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nconst moment = extendMoment( Moment );\n\nconst DAY = 24 * 60 * 60 * 1000;\n\n/**\n * Calculate if a timestamp is older than a number of seconds\n *\n * timestamp: Date() object to test against\n * secondsAgo: Number of seconds to test against\n */\nexport const timeOlderThan = ( timestamp, secondsAgo ) => {\n    if ( !timestamp ) {\n        return true;\n    }\n\n    return Date.now() - timestamp > ( secondsAgo * 1000 );\n};\n\n/**\n * Calculate if a timestamp is in the past and therefore data is expired\n *\n * expires: time data expires\n */\nexport const isExpired = ( expires ) => {\n    return !expires || Date.now() >= expires;\n};\n\n/**\n * Return an Epoch Range from beginning of yesterday till end of tomorrow\n */\nexport const todayRange = () => {\n\treturn {\n\t\tstart: Math.floor( (new Date(Date.now() - DAY)).setHours(0, 0, 0, 0) / 1000 ),\n\t\tend: Math.floor( (new Date(Date.now() + DAY)).setHours(23, 59, 59, 999) / 1000 ),\n\t}\n}\n\n/**\n * Return an Epoch Range for the last week\n */\nexport const lastWeekRange = () => {\n\treturn {\n\t\tstart: Math.floor( (new Date(Date.now() - DAY * 7)).setHours(0, 0, 0, 0) / 1000 ),\n\t\tend: Math.floor( (new Date(Date.now() + DAY)).setHours(23, 59, 59, 999) / 1000 ),\n\t}\n}\n\n/**\n * Convert an epoch to seconds ago\n *\n * epoch: epoch to convert\n */\nexport const epochToTimeago = ( epoch ) => {\n\treturn ( Date.now() - epoch * 1000 ) / 1000;\n}\n\n/**\n * Convert seconds ago to epoch\n *\n * timeago: seconds ago to convert\n */\nexport const timeagoToEpoch = ( timeago ) => {\n\treturn ( Date.now() - timeago * 1000 ) / 1000;\n}\n\n/**\n * Epoch Range to filter array\n *\n * range: epoch range\n */\nexport const epochRangeToFilter = ( range ) => {\n\treturn [\n\t\trange.start,\n\t\trange.end,\n\t];\n}\n\n/**\n * Conversion Functions for DateRangeFilter\n *\n * epochRangeToString: stringify an epoch range\n * epochRangeToMoment: convert epoch range into MomentRange object\n * momentRangeToEpoch: convert MomentRange object to epoch range\n *\n * epoch range: { start: _epoch_, end: _epoch_ }\n */\nexport const epochRangeToString = range => {\n    return range.start +', '+ range.end;\n};\n\nexport const epochRangeToMoment = range => {\n    return moment.range( range.start * 1000, range.end * 1000 );\n};\n\nexport const momentRangeToEpoch = range => {\n    return {\n        start: Math.round( range.start ) / 1000,\n        end: Math.round( range.end ) / 1000,\n    };\n};\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\nimport * as SessionStorage from \"../../utils/session_storage\";\nimport { Well, Label, Badge } from \"react-bootstrap\";\nimport timeSince from \"../../utils/timesince\";\nimport {\n    timeOlderThan,\n    epochToTimeago,\n    timeagoToEpoch\n} from \"../../utils/time\";\n\nconst REFRESH_RATE = 30 * 1000; // 30 seconds\n\n// Bootstrap styles for different notification types\nconst NOTIFICATION_LEVEL = {\n    wall: \"warning\",\n    create: \"info\",\n    delete: \"danger\"\n};\n\n// Types of notifications we're interested in\n// (used to hide normal notifications of these types)\nexport const NOTIFICATION_TYPES = [\"create\", \"delete\"];\n\n// Time notifications will stay in activity bar\nconst NOTIFICATION_TIME = {\n    create: 120,\n    delete: 60,\n    wall: 60 * 60 // 1 hour\n};\nconst ACTIVITY_TYPE = {\n    USER: 0,\n    NOTIFICATION: 1\n};\n\n// localstorage key for persisting wall messages\nconst WALL_KEY = \"walls\";\n\nclass Activity extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            users: [],\n            notifications: this.loadWall()\n        };\n\n        this.updateActivity = this.updateActivity.bind(this);\n        this.updateUsers = this.updateUsers.bind(this);\n        this.wallMessage = this.wallMessage.bind(this);\n        this.notification = this.notification.bind(this);\n        this.fetchError = this.fetchError.bind(this);\n    }\n\n    static propTypes = {};\n\n    componentDidMount() {\n        this.refreshTimer = setInterval(this.updateActivity, REFRESH_RATE);\n        this.updateActivity();\n        this.props.createCallback(\"wall\", this.wallMessage);\n    }\n\n    componentWillUnmount() {\n        if (this.refreshTimer) {\n            clearInterval(this.refreshTimer);\n        }\n    }\n\n    updateActivity() {\n        this.updateUsers();\n\n        // Clean out notifications\n        let pruned = this.state.notifications.filter(notification => {\n            return !timeOlderThan(\n                notification.time * 1000,\n                NOTIFICATION_TIME[notification.action]\n            );\n        });\n\n        this.setState(\n            {\n                notifications: pruned\n            },\n            this.persistWall\n        );\n    }\n\n    updateUsers() {\n        $.ajax({\n            type: \"get\",\n            url: \"/scot/api/v2/who\",\n            success: data => {\n                this.setState({\n                    users: data.records.map(user => {\n                        return {\n                            type: ACTIVITY_TYPE.USER,\n                            who: user.username,\n                            time: timeagoToEpoch(user.last_activity)\n                        };\n                    })\n                });\n            },\n            error: this.fetchError\n        });\n    }\n\n    persistWall() {\n        let walls = this.state.notifications.filter(notification => {\n            return notification.action === \"wall\";\n        });\n\n        SessionStorage.setLocalStorage(WALL_KEY, JSON.stringify(walls));\n    }\n\n    loadWall() {\n        let json = SessionStorage.getLocalStorage(WALL_KEY);\n        if (json) {\n            return JSON.parse(json);\n        }\n        return [];\n    }\n\n    wallMessage(message) {\n        let notifications = this.state.notifications;\n        notifications.push({\n            type: ACTIVITY_TYPE.NOTIFICATION,\n            time: message.activemqwhen,\n            who: message.activemqwho,\n            message: message.activemqmessage,\n            level: NOTIFICATION_LEVEL.wall,\n            action: \"wall\"\n        });\n\n        this.setState(\n            {\n                notifications: notifications\n            },\n            this.persistWall\n        );\n    }\n\n    notification(message) {\n        const ignoredUsers = [\"scot-flair\", \"scot-alerts\", \"scot-admin\", \"\", \"api\"];\n        const interestedEvents = [\"create\", \"delete\"];\n\n        // Ignore some notifications\n        if (ignoredUsers.includes(message.activemqwho)) return;\n        if (message.activemqwall === true) return;\n        if (message.activemqtype === \"entity\") return;\n        if (!interestedEvents.includes(message.activemqstate)) return;\n\n        let notifications = this.state.notifications;\n        notifications.push({\n            type: ACTIVITY_TYPE.NOTIFICATION,\n            time: Date.now() / 1000,\n            who: message.activemqwho,\n            message: message.activemqmessage + message.activemqid,\n            level: NOTIFICATION_LEVEL[message.activemqstate],\n            action: message.activemqstate\n        });\n\n        this.setState({\n            notifications: notifications\n        });\n    }\n\n    addDebugItems(count = 10) {\n        let notifications = this.state.notifications;\n\n        for (let i = 0; i < count; i++) {\n            notifications.push({\n                type: ACTIVITY_TYPE.NOTIFICATION,\n                time: Date.now() / 1000,\n                who: \"fred\",\n                message: \"blah\",\n                level: NOTIFICATION_LEVEL.create,\n                action: \"create\"\n            });\n        }\n\n        this.setState({\n            notifications: notifications\n        });\n    }\n\n    fetchError(error) { }\n\n    buildActivityItem(item, i) {\n        let badge = timeSince(epochToTimeago(item.time));\n        let text = \"\";\n        switch (item.type) {\n            default:\n            case ACTIVITY_TYPE.USER:\n                text = item.who;\n                break;\n            case ACTIVITY_TYPE.NOTIFICATION:\n                text = `${item.who}: ${item.message}`;\n                break;\n        }\n\n        return (\n            <ActivityItem key={i} badge={badge} style={item.level}>\n                {text}\n            </ActivityItem>\n        );\n    }\n\n    render() {\n        let { className = \"\" } = this.props;\n        let classes = [\"Activity\", className];\n\n        // Build activity items\n        let items = this.state.users\n            .concat(this.state.notifications)\n            .sort((a, b) => {\n                return b.time - a.time;\n            })\n            .map(this.buildActivityItem);\n\n        // Calculate whether the marquee should scroll\n        let stopped = true;\n        if (this.marquee && this.well) {\n            let marqueeValues = window.getComputedStyle(this.marquee);\n            if (\n                parseInt(marqueeValues.width, 10) -\n                parseInt(marqueeValues.paddingLeft, 10) >\n                this.well.offsetWidth\n            ) {\n                stopped = false;\n            }\n        }\n\n        return (\n            <Well\n                bsSize=\"small\"\n                className={classes.join(\" \")}\n                ref={well => (this.well = ReactDOM.findDOMNode(well))}\n            >\n                <div\n                    className={`marquee ${stopped ? \"stopped\" : \"\"}`}\n                    ref={marquee => (this.marquee = marquee)}\n                >\n                    {items}\n                </div>\n            </Well>\n        );\n    }\n}\n\nconst ActivityItem = ({ children, badge = null, style = \"default\" }) => (\n    <div className=\"activity-item\">\n        <Label bsStyle={style}>\n            {children}\n            {badge !== null && <Badge>{badge}</Badge>}\n        </Label>\n    </div>\n);\n\nexport default Activity;\n","//Calculates and displays time since a given time in seconds\n\nexport default function timeSince(seconds) {\n  /*function timeSince(date) {\n    var seconds = Math.floor((new Date() - date) / 1000);*/\n\n  var interval = Math.floor(seconds / 31536000);\n\n  if (interval > 1) {\n    return interval + \" years\";\n  }\n  interval = Math.floor(seconds / 2592000);\n  if (interval > 1) {\n    return interval + \" months\";\n  }\n  interval = Math.floor(seconds / 86400);\n  if (interval > 1) {\n    return interval + \" days\";\n  }\n  interval = Math.floor(seconds / 3600);\n  if (interval > 1) {\n    return interval + \" hours\";\n  }\n  interval = Math.floor(seconds / 60);\n  if (interval > 1) {\n    return interval + \" minutes\";\n  }\n  return Math.floor(seconds) + \" seconds\";\n}\n","import React, { PureComponent } from 'react';\nimport { Button } from 'react-bootstrap';\nimport * as d3 from 'd3'\nimport $ from 'jquery'\nimport axios from 'axios'\n\n\n\nclass ReportHeatmap extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      collection: 'event',\n      type: 'created',\n      year: '2017',\n      data: []\n    }\n  }\n\n  getData = () => {\n    var url = '/scot/api/v2/graph/dhheatmap?collection=' + this.state.collection + '&type=' + this.state.type + '&year=' + this.state.year\n\n    axios.get(url).then(res => {\n      this.setState({ data: res.data })\n    });\n  }\n\n  componentDidMount() {\n    this.getData();\n    this.loadHeatMap();\n  }\n\n  componentDidUpdate() {\n    this.loadHeatMap();\n  }\n\n  loadHeatMap = () => {\n    // Don't load if dashboard in edit mode\n    if (this.props.editMode) {\n      return;\n    }\n\n    let margin = {\n      top: 30,\n      bottom: 30,\n      left: 30,\n      right: 0,\n    },\n      width = 1000 - (margin.left - margin.right),\n      height = 300 - (margin.top - margin.bottom),\n      gridSize = Math.floor(width / 24),\n      legendElementWidth = gridSize * 1.5,\n      buckets = 9,\n      colors = ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n      days = ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su'],\n      times = ['1a', '2a', '3a', '4a', '5a', '6a', '7a', '8a', '9a', '10a', '11a', '12a', '1p', '2p', '3p', '4p', '5p', '6p', '7p', '8p', '9p', '10p', '11p', '12p'];\n\n    let container = d3.select('#report_heatmap');\n    let graph = container.select('g');\n    if (graph.empty()) {\n      graph = container.append('g')\n        .attr('transform', 'translate( ' + margin.left + ', ' + margin.top + ' )');\n    }\n\n    // Day Labels\n    graph.selectAll('.dayLabel')\n      .data(days)\n      .enter().append('text')\n      .text((d) => d)\n      .attr('x', 0)\n      .attr('y', (d, i) => { return i * gridSize; })\n      .style('text-anchor', 'end')\n      .attr('transform', 'translate( -6, ' + gridSize / 1.5 + ' )')\n      .attr('class', (d, i) => {\n        return (i >= 0 && i <= 4) ? 'dayLabel axis axis-worktime' : 'dayLabel axis';\n      });\n\n    // Time Labels\n    graph.selectAll('.timeLabel')\n      .data(times)\n      .enter().append('text')\n      .text((d) => d)\n      .attr('x', (d, i) => { return i * gridSize; })\n      .attr('y', 0)\n      .style('text-anchor', 'middle')\n      .attr('transform', 'translate( ' + gridSize / 2 + ', -6 )')\n      .attr('class', (d, i) => {\n        return (i >= 7 && i <= 16) ? 'timeLabel axis axis-worktime' : 'timeLabel axis';\n      });\n\n\n\n\n    container.selectAll('.legend').remove();\n    container.selectAll('.legend-text').remove();\n\n    let colorScale = d3.scaleQuantile()\n      .domain([0, buckets - 1, d3.max(this.state.data, (d) => { return d.value })])\n      .range(colors);\n\n    // Cards\n    let cards = graph.selectAll('.hour')\n      .data(this.state.data, (d) => { return d.day + ':' + d.hour; });\n    cards.append('title');\n    cards.enter().append('rect')\n      .style('fill', colors[0])\n      .merge(cards)\n      .attr('x', (d) => (d.hour - 1) * gridSize)\n      .attr('y', (d) => (d.day - 1) * gridSize)\n      .attr('rx', 4)\n      .attr('ry', 4)\n      .attr('class', 'hour')\n      .attr('width', gridSize)\n      .attr('height', gridSize)\n      .transition().duration(1000)\n      .style('fill', (d) => { return colorScale(d.value); });\n    cards.select('title').text((d) => d.value);\n    cards.exit().remove();\n\n    // Legend\n    var legend = graph.selectAll('.legend')\n      .data([0].concat(colorScale.quantiles()), (d) => d);\n\n    legend.enter()\n      .append('rect')\n      .attr('class', 'legend')\n      .attr('x', (d, i) => (legendElementWidth * i))\n      .attr('y', height)\n      .attr('width', legendElementWidth)\n      .attr('height', gridSize / 2)\n      .style('fill', (d, i) => colors[i])\n\n    legend.enter().append('text')\n      .text((d) => ('≥ ' + Math.round(d)))\n      .attr('class', 'legend-text')\n      .attr('x', (d, i) => legendElementWidth * i)\n      .attr('y', height + gridSize);\n  }\n\n\n  collectionChange = (event) => {\n    this.setState({ collection: event.target.value });\n  }\n\n  yearChange = (event) => {\n    this.setState({ year: event.target.value });\n  }\n\n  exportToPNG = () => {\n    var svgString = new XMLSerializer().serializeToString(document.querySelector('#report_heatmap'));\n\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var DOMURL = window.self.URL || window.self.webkitURL || window.self;\n    var img = new Image();\n    var svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\n    var url = DOMURL.createObjectURL(svg);\n    img.onload = function () {\n      ctx.drawImage(img, 0, 0);\n      var png = canvas.toDataURL(\"image/png\");\n      document.querySelector('#png-container').innerHTML = '<img src=\"' + png + '\"/>';\n      DOMURL.revokeObjectURL(png);\n      var a = $(\"<a>\")\n        .attr(\"href\", png)\n        .attr(\"download\", \"img.png\")\n        .appendTo(\"body\");\n\n      a[0].click();\n\n      a.remove();\n    };\n    img.src = url;\n  }\n\n  render() {\n    let formDisabled = this.props.editMode;\n\n    return (\n      <div className=\"dashboard\">\n        {!this.props.editMode &&\n          <h1>Day of Week, Hour of Day Heatmap</h1>\n        }\n        <label htmlFor=\"year\" style={{ display: \"inline-block\", width: \"240px\", textAlign: \"right\" }}>Year = <span id=\"year-value\"></span>\n          <input className='report_input' type=\"number\" min=\"2013\" step=\"1\" value={this.state.year} id=\"year\" onChange={this.yearChange} disabled={formDisabled} />\n        </label>\n        <label htmlFor=\"collection\" style={{ display: \"inline-block\", width: \"240px\", textAlign: \"right\" }}>Collection = <span id=\"year-value\"></span>\n          <select id=\"collection\" value={this.state.collection} onChange={this.collectionChange} disabled={formDisabled} >\n            <option value='event'>event</option>\n            <option value='alert'>alert</option>\n            <option value='incident'>incident</option>\n          </select>\n        </label>\n        <Button id='export' bsSize='xsmall' bsStyle='default' onClick={this.exportToPNG} disabled={formDisabled} >Export to PNG</Button>\n        <div id=\"chart\">\n          <svg id='report_heatmap' viewBox='0 0 1000 380' />\n        </div>\n        <div id='png-container' hidden></div>\n      </div>\n\n    )\n  }\n}\n\nexport default ReportHeatmap;\nexport const Description = \"Heatmap of incoming alerts, event, and incidents\";\n","export default function debounce( callback, wait = 200, immediate = false ) {\n    let timeout;\n\n    return function( ...args ) {\n        clearTimeout( timeout );\n\n        timeout = setTimeout( () => {\n            timeout = null;\n            if ( !immediate ) callback.apply( this, args );\n        }, wait );\n\n        if ( immediate && !timeout ) callback.apply( this, [...args] );\n    };\n}\n","import React, { PureComponent } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport * as d3 from \"d3\";\nimport debounce from \"../../utils/debounce\";\nimport $ from \"jquery\";\nimport axios from 'axios'\n\nconst formatTickTime = (domain, count = 10) => {\n  let start = domain[0],\n    end = domain[domain.length - 1],\n    step = d3.tickStep(start, end, count);\n\n  return d => {\n    const daySeconds = 3600 * 24;\n    let days = Math.floor(d / daySeconds),\n      hours = Math.floor((d % daySeconds) / 3600),\n      minutes = Math.floor((d % 3600) / 60),\n      seconds = Math.floor(d % 60);\n\n    if (days) {\n      if (step < daySeconds) {\n        return `${days}d ${hours}h`;\n      }\n      return days + \"d\";\n    }\n    if (hours) {\n      if (step < 3600) {\n        return `${hours}h ${minutes}m`;\n      }\n      return hours + \"h\";\n    }\n    if (minutes) {\n      if (step < 60) {\n        return `${minutes}m ${seconds}s`;\n      }\n      return minutes + \"m\";\n    }\n    return seconds + \"s\";\n  };\n};\n\nconst formatTime = d => {\n  const daySeconds = 3600 * 24;\n  let days = Math.floor(d / daySeconds),\n    hours = Math.floor((d % daySeconds) / 3600),\n    minutes = Math.floor((d % 3600) / 60),\n    seconds = Math.floor(d % 60);\n\n  let output = seconds + \"s\";\n  if (minutes) {\n    output = minutes + \"m \" + output;\n  }\n  if (hours) {\n    output = hours + \"h \" + output;\n  }\n  if (days) {\n    output = days + \"d \" + output;\n  }\n  return output;\n};\n\nlet margin = { top: 20, right: 20, bottom: 60, left: 50 },\n  width = 1000 - margin.left - margin.right,\n  height = 500 - margin.top - margin.bottom,\n  barColors = {\n    All: \"#3b35a6\",\n    Promoted: \"#eebd31\",\n    Incident: \"#e63041\"\n  };\n\nclass ReportArt extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    let today = new Date().toISOString().slice(0, 10);\n    this.state = {\n      length: 7,\n      date: today,\n      unit: \"day\",\n      chartData: {\n        dates: [],\n        lines: []\n      }\n    };\n\n    // Load Art is auto debounced\n    this.loadArt = debounce(this.loadArt);\n  }\n\n  componentDidMount() {\n    this.initChart();\n    this.loadArt();\n  }\n\n  componentDidUpdate() { }\n\n  initChart = () => {\n    this.svg = d3\n      .select(\"#report_art\")\n      .append(\"g\")\n      .attr(\"transform\", \"translate( \" + margin.left + \",\" + margin.top + \" )\");\n\n    this.xAxisEl = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate( 0, ${height} )`);\n\n    this.yAxisEl = this.svg.append(\"g\").attr(\"class\", \"y axis\");\n\n    this.yAxisEl\n      .append(\"text\")\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"x\", 0 - height / 2)\n      .attr(\"y\", 0)\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"start\")\n      .style(\"fill\", \"black\")\n      .text(\"Response Time\");\n\n    this.chartInit = true;\n  }\n\n  updateChart = () => {\n    // Bar names\n    let barNames = new Set();\n    this.state.chartData.dates.forEach(d => {\n      d.values.forEach(b => {\n        barNames.add(b.name);\n      });\n    });\n\n    // Line names\n    let lineNames = new Set();\n    this.state.chartData.lines.forEach(d => {\n      lineNames.add(d.name);\n    });\n\n    // Scales\n    let maxValue = d3.max(this.state.chartData.dates, d => {\n      return d3.max(d.values, b => b.value);\n    });\n\n    let dateScale = d3\n      .scaleBand()\n      .padding(0.1)\n      .rangeRound([0, width])\n      .domain(this.state.chartData.dates.map(d => d.date));\n    let barScale = d3\n      .scaleBand()\n      .domain(Array.from(barNames))\n      .rangeRound([0, dateScale.bandwidth()]);\n    let yScale = d3\n      .scaleLinear()\n      .clamp(true)\n      .range([height, 0])\n      .domain([0, maxValue])\n      .nice();\n\n    // Axes\n    var xAxis = d3.axisBottom().scale(dateScale);\n\n    var yAxis = d3\n      .axisLeft()\n      .scale(yScale)\n      .ticks(20)\n      .tickFormat(formatTickTime(yScale.domain(), 20));\n\n    this.xAxisEl.transition().call(xAxis);\n    this.yAxisEl.transition().call(yAxis);\n\n    // Bars\n    let dates = this.svg\n      .selectAll(\".date\")\n      .data(this.state.chartData.dates, d => d.date);\n\n    dates\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .attr(\"height\", 0)\n      .attr(\"y\", height)\n      .remove();\n\n    let bars = dates\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"date\")\n      .attr(\"transform\", d => `translate( ${dateScale(d.date)}, 0 )`)\n      .selectAll(\".bar\")\n      .data(d => d.values)\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", \"bar\")\n      .style(\"fill\", d => barColors[d.name])\n      .attr(\"width\", barScale.bandwidth())\n      .attr(\"x\", d => barScale(d.name))\n      .attr(\"y\", height)\n      .attr(\"height\", 0);\n\n    bars.append(\"title\").text(d => formatTime(d.value));\n\n    dates\n      .transition()\n      .attr(\"transform\", d => `translate( ${dateScale(d.date)}, 0 )`);\n\n    this.svg\n      .selectAll(\".date\")\n      .selectAll(\".bar\")\n      .transition()\n      .attr(\"width\", barScale.bandwidth())\n      .attr(\"x\", d => barScale(d.name))\n      .attr(\"y\", d => yScale(d.value))\n      .attr(\"height\", d => height - yScale(d.value));\n\n    // Avg Box\n    this.svg.select(\".avg-holder\").remove();\n    this.svg.select(\".avg-holder-border\").remove();\n    let AvgHolder = this.svg.append(\"g\").attr(\"class\", \"avg-holder\");\n\n    let averages = AvgHolder.selectAll(\".avg\")\n      .data(this.state.chartData.lines)\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"avg\")\n      .attr(\"transform\", (d, i) => `translate( 0, ${i * 15} )`);\n\n    averages\n      .append(\"tspan\")\n      .attr(\"x\", 0)\n      .attr(\"font-weight\", \"bold\")\n      .text(d => `${d.name}:`);\n\n    averages\n      .append(\"tspan\")\n      .attr(\"x\", 100)\n      .text(d => formatTime(d.value));\n\n    let AvgHolderBox = AvgHolder.node().getBBox();\n    AvgHolder.attr(\n      \"transform\",\n      `translate( ${width - AvgHolderBox.width}, 0 )`\n    );\n\n    const borderOffset = 2;\n    let border = this.svg\n      .append(\"rect\")\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"class\", \"avg-holder-border\")\n      .attr(\"x\", AvgHolderBox.x - borderOffset)\n      .attr(\"y\", AvgHolderBox.y - borderOffset)\n      .attr(\"width\", AvgHolderBox.width + borderOffset * 2)\n      .attr(\"height\", AvgHolderBox.height + borderOffset * 2);\n    border\n      .node()\n      .transform.baseVal.initialize(\n        AvgHolder.node().transform.baseVal.getItem(0)\n      );\n\n    // Legend\n    const legendHeight = 20,\n      legendSpacing = 15,\n      legendTextSpacing = 5;\n    this.svg.select(\".legend-holder\").remove();\n    let LegendHolder = this.svg.append(\"g\").attr(\"class\", \"legend-holder\");\n    let legend = LegendHolder.selectAll(\".legend\")\n      .data(Array.from(barNames))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"legend\");\n\n    // Legend Boxes\n    legend\n      .append(\"rect\")\n      .attr(\"width\", legendHeight)\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"height\", legendHeight)\n      .style(\"fill\", d => barColors[d]);\n\n    // Legend Text\n    legend\n      .append(\"text\")\n      .attr(\"x\", legendHeight + legendTextSpacing)\n      .attr(\"y\", legendHeight / 2)\n      .attr(\"dy\", \".35em\")\n      .style(\"text-anchor\", \"start\")\n      .text(d => d);\n\n    // Legend Position\n    let widthSums = 0;\n    LegendHolder.selectAll(\".legend\").attr(\"transform\", function (d, i) {\n      let value = widthSums;\n      widthSums += this.getBBox().width + legendSpacing;\n      return `translate( ${value}, 0 )`;\n    });\n    let legendWidth = LegendHolder.node().getBBox().width;\n    LegendHolder.attr(\n      \"transform\",\n      `translate( ${width / 2 - legendWidth / 2}, ${height +\n      margin.bottom / 2} )`\n    );\n  }\n\n  loadArt = () => {\n\n\n    if (!this.state.date || !this.state.length || this.props.editMode) {\n      return;\n    }\n\n    let url = \"/scot/api/v2/metric/response_avg_last_x_days\";\n    let opts = `?days=${this.state.length}&targetdate=${this.state.date}&unit=${\n      this.state.unit\n      }`;\n\n    axios.get(url + opts).then(res => {\n      this.setState({\n        chartData: res.data\n      });\n    });\n  }\n\n  unitChange = event => {\n    this.setState({ unit: event.target.value }, () => this.loadArt());\n  }\n\n  lengthChange = event => {\n    this.setState({ length: event.target.value }, () => this.loadArt());\n  }\n\n  dateChange = event => {\n    this.setState({ date: event.target.value }, () => this.loadArt());\n  }\n\n  exportToPNG = () => {\n    var svgString = new XMLSerializer().serializeToString(\n      document.querySelector(\"#report_art\")\n    );\n\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var DOMURL = window.self.URL || window.self.webkitURL || window.self;\n    var img = new Image();\n    var svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\n    var url = DOMURL.createObjectURL(svg);\n    img.onload = function () {\n      ctx.drawImage(img, 0, 0);\n      var png = canvas.toDataURL(\"image/png\");\n      document.querySelector(\"#png-container\").innerHTML =\n        '<img src=\"' + png + '\"/>';\n      DOMURL.revokeObjectURL(png);\n      var a = $(\"<a>\")\n        .attr(\"href\", png)\n        .attr(\"download\", \"img.png\")\n        .appendTo(\"body\");\n\n      a[0].click();\n\n      a.remove();\n    };\n    img.src = url;\n  }\n\n  render() {\n    if (this.chartInit) {\n      this.updateChart();\n    }\n\n    let formDisabled = this.props.editMode;\n\n    return (\n      <div className=\"dashboard\">\n        {!this.props.editMode && <h1>Alert Response Time</h1>}\n        <label\n          htmlFor=\"date\"\n          style={{ display: \"inline-block\", textAlign: \"right\" }}\n        >\n          Initial Date =&nbsp;\n          <input\n            className=\"report_input\"\n            type=\"date\"\n            value={this.state.date}\n            onChange={this.dateChange}\n            placeholder=\"yyyy-mm-dd\"\n            pattern=\"[0-9]{4}-[0-9]{2}-[0-9]{2}\"\n            disabled={formDisabled}\n          />\n        </label>\n        <label\n          htmlFor=\"length\"\n          style={{ display: \"inline-block\", textAlign: \"right\" }}\n        >\n          Length =&nbsp;\n          <input\n            className=\"report_name\"\n            type=\"number\"\n            min=\"1\"\n            step=\"1\"\n            value={this.state.length}\n            id=\"length\"\n            onChange={this.lengthChange}\n            disabled={formDisabled}\n          />\n        </label>\n        <label\n          htmlFor=\"unit\"\n          style={{\n            display: \"inline-block\",\n            width: \"240px\",\n            textAlign: \"right\"\n          }}\n        >\n          Unit =&nbsp;\n          <select\n            id=\"unit\"\n            value={this.state.unit}\n            onChange={this.unitChange}\n            disabled\n          >\n            <option value=\"hour\">hourly</option>\n            <option value=\"day\">daily</option>\n            <option value=\"month\">monthly</option>\n            <option value=\"year\">yearly</option>\n          </select>\n        </label>\n        <Button\n          id=\"export\"\n          bsSize=\"xsmall\"\n          bsStyle=\"default\"\n          onClick={this.exportToPNG}\n          disabled={formDisabled}\n        >\n          Export to PNG\n        </Button>\n        <div id=\"chart\">\n          <svg id=\"report_art\" viewBox=\"0 0 1000 500\" />\n        </div>\n        <div id=\"png-container\" hidden />\n      </div>\n    );\n  }\n}\n\nexport default ReportArt;\nexport const Description =\n  \"Chart of average alert, event, and incident response time\";\n","import React, { PureComponent } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport * as d3 from \"d3\";\nimport debounce from \"../../utils/debounce\";\nimport axios from 'axios'\nimport $ from \"jquery\";\nconst wrapText = (text, width) => {\n  // FYI: not an arrow function because of 'this' injection\n  text.each(function (value, i) {\n    if (this.getComputedTextLength() < width) {\n      return;\n    }\n\n    let text = d3.select(this),\n      words = text\n        .text()\n        .split(/\\s+/)\n        .reverse(),\n      word = null,\n      line = [],\n      lineCount = 1,\n      lineHeight = 0.8, // ems\n      x = text.attr(\"x\"),\n      y = text.attr(\"y\"),\n      dy = parseFloat(text.attr(\"dy\")),\n      row = text\n        .text(null)\n        .append(\"tspan\")\n        .attr(\"x\", x)\n        .attr(\"y\", y)\n        .attr(\"dy\", dy + \"em\");\n\n    while ((word = words.pop())) {\n      line.push(word);\n      row.text(line.join(\" \"));\n      if (row.node().getComputedTextLength() > width) {\n        lineCount++;\n        line.pop();\n        row.text(line.join(\" \"));\n        line = [word];\n        row = text\n          .append(\"tspan\")\n          .attr(\"x\", x)\n          .attr(\"y\", y)\n          .attr(\"dy\", lineHeight + dy + \"em\")\n          .text(word);\n      }\n    }\n\n    let yOffset = (this.getBBox().height / (2 * lineCount)) * (lineCount - 1);\n    text.attr(\"transform\", `translate( 0, -${yOffset} )`);\n  });\n};\n\nconst margin = {\n  top: 5,\n  left: 200,\n  right: 30,\n  bottom: 60\n},\n  width = 1000 - margin.left - margin.right,\n  legendHeight = 20,\n  legendSpacing = 15,\n  legendTextSpacing = 5;\n\nclass ReportAlertpower extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      displayMode: \"stacked\",\n      chartData: [],\n      chartResults: 20,\n      chartSort: \"power\",\n      chartSortDir: \"desc\",\n      chartFilter: \"\"\n    };\n\n    // LoadData is automatically debounced\n    this.loadData = debounce(this.loadData);\n  }\n\n  componentDidMount() {\n    this.initChart();\n    this.updateChart();\n    this.loadData();\n  }\n\n  initChart = () => {\n    // Height is initially 0, is calculated after we have data\n    this.height = 0;\n\n    this.xScale = d3.scaleLinear().rangeRound([0, width]);\n    this.yScale = d3\n      .scaleBand()\n      .rangeRound([0, this.height])\n      .padding(0.3);\n\n    this.colors = d3.scaleOrdinal(d3.schemeCategory10);\n\n    this.xAxis = d3.axisBottom().scale(this.xScale);\n\n    this.yAxis = d3.axisLeft().scale(this.yScale);\n\n    this.svg = d3\n      .select(\"#report_alertpower\")\n      .attr(\"viewBox\", `0 0 1000 ${this.height + margin.top + margin.bottom}`)\n      .append(\"g\")\n      .attr(\"transform\", `translate( ${margin.left}, ${margin.top} )`);\n\n    this.yAxisEl = this.svg.append(\"g\").attr(\"class\", \"y axis\");\n\n    this.xAxisEl = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate( 0, ${this.height} )`);\n\n    this.xAxisEl\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", 30)\n      .style(\"fill\", \"black\")\n      .style(\"font-size\", \"12px\")\n      .text(\"Alert Count\");\n\n    this.LegendHolder = this.svg.append(\"g\").attr(\"class\", \"legend-holder\");\n\n    this.chartInit = true;\n  }\n\n  updateChart = () => {\n    let dataset = this.state.chartData;\n\n    // Calculate height\n    this.height = 32 * dataset.length;\n    d3.select(\"#report_alertpower\")\n      .transition()\n      .attr(\"viewBox\", `0 0 1000 ${this.height + margin.top + margin.bottom}`);\n\n    this.dataTypes = d3\n      .keys(dataset[0])\n      .filter(\n        key => ![\"name\", \"values\", \"total\", \"score\", \"max\"].includes(key)\n      );\n\n    // Build color domain from keys except name\n    this.colors.domain(this.dataTypes);\n\n    dataset.forEach(d => {\n      // Remove number at the end\n      d.name = d.name.replace(/ \\([0-9]+\\)/, \"\");\n\n      /* // False Data\n\t\t\tthis.dataTypes.forEach( type => {\n\t\t\t\td[ type ] = Math.round( Math.random() * 5 );\n\t\t\t} );\n\t\t\tif ( !d.score ) {\n\t\t\t\td.score = ( Math.random() * 10 ).toPrecision( 2 );\n\t\t\t}\n\t\t\t/**/\n      if (typeof d.score === \"number\") {\n        d.score = \"\" + d.score;\n      }\n\n      // Calculate bar start/end points\n      let start = 0;\n      d.values = this.dataTypes.map(name => {\n        let curStart = start,\n          curEnd = start + d[name];\n\n        start += d[name];\n        return {\n          name: name,\n          count: d[name],\n          start: curStart,\n          end: curEnd\n        };\n      });\n\n      d.total = d.values[d.values.length - 1].end;\n      d.max = d3.max(this.dataTypes, b => {\n        return d[b];\n      });\n    });\n\n    this.stackedMax = d3.max(dataset, d => d.total);\n    this.groupedMax = d3.max(dataset, d => {\n      return d3.max(this.dataTypes, b => d[b]);\n    });\n\n    this.yScale.rangeRound([0, this.height]).domain(dataset.map(d => d.name));\n\n    /*\n\t\t// Animated, but multiline flashes\n\t\tthis.yAxisEl.transition().call( g => {\n\t\t\tg.call( this.yAxis )\n\t\t\tsetTimeout( () => {\n\t\t\t\tg.selectAll( '.tick text' ).call( wrapText, margin.left - 20 );\n\t\t\t}, 50 )\n\t\t} )\n\t\t/**/\n    /**/\n    // Not animated\n    this.yAxisEl.call(this.yAxis);\n    this.svg.selectAll(\".y.axis .tick text\").call(wrapText, margin.left - 20); // Wrap axis labels\n    /**/\n\n    let alerts = this.svg.selectAll(\".alert\").data(dataset, d => d.name);\n\n    alerts\n      .exit()\n      .transition()\n      .attr(\"height\", 0)\n      .style(\"opacity\", 0)\n      .remove();\n\n    alerts\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"alert\")\n      .attr(\"transform\", d => `translate( 1, ${this.yScale(d.name)} )`)\n      .append(\"text\")\n      .attr(\"dy\", \"1.2em\");\n\n    alerts\n      .transition()\n      .attr(\"transform\", d => `translate( 1, ${this.yScale(d.name)} )`);\n\n    let alertTypes = this.svg\n      .selectAll(\".alert\")\n      .selectAll(\"rect\")\n      .data(d => d.values);\n\n    let bars = alertTypes\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"width\", 0)\n      .attr(\"height\", this.yScale.bandwidth());\n    bars.merge(alertTypes).style(\"fill\", d => this.colors(d.name));\n\n    bars\n      .append(\"title\")\n      .merge(alertTypes.select(\"title\"))\n      .text(d => `${d.name}: ${d.count}`);\n\n    // Legend\n    let legend = this.LegendHolder.selectAll(\".legend\").data(this.dataTypes);\n\n    legend.exit().remove();\n\n    legend = legend\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"legend\");\n\n    // Legend Boxes\n    legend\n      .append(\"rect\")\n      .attr(\"width\", legendHeight)\n      .attr(\"x\", 0)\n      .attr(\"y\", 0)\n      .attr(\"height\", legendHeight)\n      .style(\"fill\", d => this.colors(d));\n\n    // Legend Text\n    legend\n      .append(\"text\")\n      .attr(\"x\", legendHeight + legendTextSpacing)\n      .attr(\"y\", legendHeight / 2)\n      .attr(\"dy\", \".35em\")\n      .style(\"text-anchor\", \"start\")\n      .style(\"text-transform\", \"capitalize\")\n      .text(d => d);\n\n    // Legend Position\n    let widthSums = 0;\n    this.LegendHolder.selectAll(\".legend\").attr(\"transform\", function (d, i) {\n      let value = widthSums;\n      widthSums += this.getBBox().width + legendSpacing;\n      return `translate( ${value}, 0 )`;\n    });\n    let legendWidth = this.LegendHolder.node().getBBox().width;\n    this.LegendHolder.transition().attr(\n      \"transform\",\n      `translate( ${width / 2 - legendWidth / 2}, ${this.height +\n      margin.bottom -\n      legendHeight} )`\n    );\n\n    if (this.state.displayMode === \"grouped\") {\n      this.transitionGrouped();\n    } else {\n      this.transitionStacked();\n    }\n  }\n\n  transitionStacked = () => {\n    this.xScale.domain([0, this.stackedMax]).nice();\n    this.xAxisEl\n      .transition()\n      .call(this.xAxis)\n      .attr(\"transform\", `translate( 0, ${this.height} )`);\n\n    this.svg\n      .selectAll(\".alert rect\")\n      .transition()\n      .delay((d, i) => i * 5)\n      .duration(500)\n      .attr(\"width\", d => this.xScale(d.end) - this.xScale(d.start))\n      .attr(\"x\", d => this.xScale(d.start))\n      .transition()\n      .attr(\"height\", this.yScale.bandwidth())\n      .attr(\"y\", 0);\n\n    this.svg\n      .selectAll(\".alert text\")\n      .transition()\n      .delay((d, i) => i * this.dataTypes.length * 5 + i)\n      .duration(500)\n      .attr(\"transform\", d => `translate( ${this.xScale(d.total) + 10}, 0 )`)\n      .tween(\"text\", function (d) {\n        let text = d3.select(this);\n        let i = d3.interpolateNumber(text.text(), d.score),\n          prec = d.score.split(\".\"),\n          round = prec.length > 1 ? Math.pow(10, prec[0].length) : 1;\n\n        return t => text.text(Math.round(i(t) * round) / round);\n      });\n  }\n\n  transitionGrouped = () => {\n    this.xScale.domain([0, this.groupedMax]).nice();\n    this.xAxisEl\n      .transition()\n      .call(this.xAxis)\n      .attr(\"transform\", `translate( 0, ${this.height} )`);\n\n    let initialDuration = this.displayModeChanged ? 500 : 0;\n\n    this.svg\n      .selectAll(\".alert\")\n      .selectAll(\"rect\")\n      .transition()\n      .delay((d, i) => i * 5)\n      .duration(initialDuration)\n      .attr(\"height\", this.yScale.bandwidth() / this.dataTypes.length)\n      .attr(\n        \"y\",\n        (d, i) => (this.yScale.bandwidth() / this.dataTypes.length) * i\n      )\n      .transition()\n      .duration(500)\n      .attr(\"x\", 0)\n      .attr(\"width\", d => this.xScale(d.end) - this.xScale(d.start));\n\n    this.svg\n      .selectAll(\".alert text\")\n      .transition()\n      .delay((d, i) => i * 5 + initialDuration)\n      .attr(\"transform\", d => `translate( ${this.xScale(d.max) + 10}, 0 )`)\n      .tween(\"text\", function (d) {\n        let text = d3.select(this);\n        let i = d3.interpolateNumber(text.text(), d.score),\n          prec = d.score.split(\".\"),\n          round = prec.length > 1 ? Math.pow(10, prec[0].length) : 1;\n\n        return t => text.text(Math.round(i(t) * round) / round);\n      });\n\n    this.displayModeChanged = false;\n  }\n\n  loadData = () => {\n    if (!this.state.chartResults || this.props.editMode) {\n      return;\n    }\n\n    let url = \"/scot/api/v2/metric/alert_power\";\n    let opts = `?sort=${this.state.chartSort}&dir=${\n      this.state.chartSortDir\n      }&count=${this.state.chartResults}&filter=${encodeURIComponent(\n        this.state.chartFilter\n      )}`;\n\n    axios.get(url + opts).then(res => {\n      this.setState({\n        chartData: res.data\n      });\n    });\n  }\n\n\n\n  dataChange = (event) => {\n    let target = event.target;\n\n    if (target.name === \"chartResults\" && target.value) {\n      if (target.value > 50) target.value = 50;\n      if (target.value < 1) target.value = 1;\n    }\n\n    this.setState(\n      {\n        [target.name]: target.value\n      },\n      this.loadData\n    );\n  }\n\n  displayModeChang = (event) => {\n    this.displayModeChanged = true;\n    this.setState({\n      displayMode: event.target.value\n    });\n  }\n\n  preventSubmit = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  exportToPNG = () => {\n    var svgString = new XMLSerializer().serializeToString(\n      document.querySelector(\"#report_alertpower\")\n    );\n\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var DOMURL = window.self.URL || window.self.webkitURL || window.self;\n    var img = new Image();\n    var svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\n    var url = DOMURL.createObjectURL(svg);\n    img.onload = function () {\n      ctx.drawImage(img, 0, 0);\n      var png = canvas.toDataURL(\"image/png\");\n      document.querySelector(\n        \"#png-container\"\n      ).innerHTML = `<img src='${png}'/>`;\n      DOMURL.revokeObjectURL(png);\n      var a = $(\"<a>\")\n        .attr(\"href\", png)\n        .attr(\"download\", \"img.png\")\n        .appendTo(\"body\");\n\n      a[0].click();\n\n      a.remove();\n    };\n    img.src = url;\n  }\n\n  render() {\n    if (this.chartInit) {\n      this.updateChart();\n    }\n\n    let formDisabled = this.props.editMode;\n\n    return (\n      <div className=\"dashboard\">\n        {!this.props.editMode && <h1>Alert Power</h1>}\n        <form onSubmit={this.preventSubmit}>\n          <label>\n            Filter =&nbsp;\n            <input\n              className=\"report_input\"\n              type=\"text\"\n              style={{ background: \"initial\", border: \"1px solid #ccc\" }}\n              name=\"chartFilter\"\n              value={this.state.chartFilter}\n              onChange={this.dataChange}\n              placeholder=\"All\"\n              disabled={formDisabled}\n            />\n          </label>\n        </form>\n        <form onSubmit={this.preventSubmit}>\n          <label>\n            Sort by =&nbsp;\n            <select\n              name=\"chartSort\"\n              value={this.state.chartSort}\n              onChange={this.dataChange}\n              disabled={formDisabled}\n            >\n              <option value=\"power\">Power Score</option>\n              <option value=\"count\">Alert Count</option>\n              <option value=\"promoted\">Promoted Count</option>\n              <option value=\"incident\">Incident Count</option>\n            </select>\n            <select\n              name=\"chartSortDir\"\n              value={this.state.chartSortDir}\n              onChange={this.dataChange}\n              disabled={formDisabled}\n            >\n              <option value=\"desc\">Desc</option>\n              <option value=\"asc\">Asc</option>\n            </select>\n          </label>\n          <label>\n            Results =&nbsp;\n            <input\n              className=\"report_input\"\n              type=\"number\"\n              min={1}\n              max={50}\n              name=\"chartResults\"\n              value={this.state.chartResults}\n              onChange={this.dataChange}\n              disabled={formDisabled}\n            />\n          </label>\n        </form>\n        <form>\n          <label>\n            <input\n              className=\"report_input\"\n              type=\"radio\"\n              name=\"mode\"\n              value=\"grouped\"\n              checked={this.state.displayMode === \"grouped\"}\n              onChange={this.displayModeChange}\n              disabled={formDisabled}\n            />{\" \"}\n            Grouped\n          </label>\n          &nbsp;\n          <label>\n            <input\n              className=\"report_input\"\n              type=\"radio\"\n              name=\"mode\"\n              value=\"stacked\"\n              checked={this.state.displayMode === \"stacked\"}\n              onChange={this.displayModeChange}\n              disabled={formDisabled}\n            />{\" \"}\n            Stacked\n          </label>\n          <Button\n            id=\"export\"\n            bsSize=\"xsmall\"\n            bsStyle=\"default\"\n            onClick={this.exportToPNG}\n            disabled={formDisabled}\n          >\n            Export to PNG\n          </Button>\n        </form>\n        <div id=\"chart\">\n          <svg id=\"report_alertpower\" viewBox=\"0 0 1000 100\" />\n        </div>\n        <div id=\"png-container\" hidden />\n      </div>\n    );\n  }\n}\n\nexport default ReportAlertpower;\nexport const Description =\n  \"Chart of alerts in terms of how frequently they're promoted or become incidents\";\n","import React, { Component } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport * as d3 from \"d3\";\nimport debounce from \"../../utils/debounce\";\nimport $ from \"jquery\";\nimport axios from 'axios'\n\nconst margin = {\n  top: 5,\n  left: 40,\n  right: 20,\n  bottom: 60\n},\n  width = 1000 - margin.left - margin.right,\n  height = 600 - margin.top - margin.bottom,\n  timeWindow = 7 * 24 * 3600 * 1000,\n  legendHeight = 20,\n  legendSpacing = 15,\n  legendTextSpacing = 5;\n\nclass ReportCreated extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chartData: []\n    };\n\n    // LoadData is automatically debounced\n    this.loadData = debounce(this.loadData);\n\n    // this.dataChange = this.dataChange.bind( this );\n    // this.displayModeChange = this.displayModeChange.bind( this );\n  }\n\n  initChart = () => {\n    let now = new Date();\n\n    this.xScale = d3\n      .scaleTime()\n      .rangeRound([0, width])\n      .domain([now - timeWindow, now]);\n    this.yScale = d3\n      .scaleLinear()\n      .rangeRound([height, 0])\n      .domain([0, 0]);\n\n    this.xAxis = d3.axisBottom().scale(this.xScale);\n\n    this.yAxis = d3.axisLeft().scale(this.yScale);\n\n    this.svg = d3\n      .select(\"#report_created\")\n      .attr(\"viewBox\", `0 0 1000 ${height + margin.top + margin.bottom}`)\n      .append(\"g\")\n      .attr(\"transform\", `translate( ${margin.left}, ${margin.top} )`);\n\n    this.yAxisEl = this.svg.append(\"g\").attr(\"class\", \"y axis\");\n\n    this.yAxisEl.call(this.yAxis);\n\n    this.xAxisEl = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", `translate( 0, ${height} )`);\n\n    this.xAxisEl\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", margin.bottom - 10)\n      .style(\"font-size\", \"10px\")\n      .style(\"fill\", \"black\")\n      .text(\"Toggle Trendlines\");\n\n    this.xAxisEl.call(this.xAxis);\n\n    this.statusLine = d3\n      .line()\n      .curve(d3.curveBasis)\n      .x(d => this.xScale(new Date(d.time * 1000)))\n      .y(d => this.yScale(d.value));\n\n    this.lineHolder = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"lines\")\n      .attr(\"clip-path\", \"url(#bounds)\");\n\n    // Legend\n    this.LegendHolder = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"legend-holder\")\n      .style(\"font-family\", \"sans-serif\");\n\n    this.chartInit = true;\n  }\n\n  updateChart = () => {\n    this.yScale\n      .domain([\n        0,\n        Math.max(\n          d3.max(this.state.chartData, d => {\n            if (!d.shown || !d.data.length) return 0;\n\n            return d3.max(d.data, b => b.value);\n          }),\n          10\n        )\n      ])\n      .nice();\n\n    this.colors = d3.scaleOrdinal(d3.schemeCategory10).domain(\n      this.state.chartData.map(line => {\n        return line.name;\n      })\n    );\n\n    let lines = this.lineHolder\n      .selectAll(\".line\")\n      .data(this.state.chartData, d => d.name);\n\n    lines\n      .exit()\n      .transition()\n      .style(\"opacity\", 0)\n      .remove();\n\n    lines\n      .enter()\n      .append(\"path\")\n      .attr(\"class\", d => `line ${d.name}`)\n      .style(\"stroke\", d => this.colors(d.name))\n      .style(\"stroke-width\", 2)\n      .style(\"fill\", \"none\")\n      .attr(\"d\", d => this.statusLine(d.data));\n\n    this.LegendHolder.selectAll(\".legend\").remove();\n\n    let legend = this.LegendHolder.selectAll(\".legend\").data(\n      this.state.chartData,\n      d => d.name\n    );\n\n    legend = legend\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"legend\")\n      .style(\"cursor\", \"pointer\")\n      .on(\"click\", d => {\n        let newData = this.state.chartData.map(row => {\n          if (row.name === d.name) {\n            row.shown = !d.shown;\n          }\n          return row;\n        });\n        console.log(`newData = ${newData}`)\n        this.setState({\n          chartData: newData\n        });\n      });\n\n    // Legend Boxes\n    legend\n      .append(\"rect\")\n      .attr(\"width\", legendHeight)\n      .attr(\"x\", 0)\n      .attr(\"y\", (legendHeight - 5) / 2)\n      .attr(\"height\", 5)\n      .style(\"fill\", d => (d.shown ? this.colors(d.name) : \"transparent\"))\n      .style(\"stroke\", d => this.colors(d.name))\n      .style(\"stroke-width\", 1);\n\n    // Legend Text\n    legend\n      .append(\"text\")\n      .attr(\"x\", legendHeight + legendTextSpacing)\n      .attr(\"y\", legendHeight / 2)\n      .attr(\"dy\", \".35em\")\n      .style(\"text-anchor\", \"start\")\n      .style(\"text-transform\", \"capitalize\")\n      .text(d => d.name)\n      .append(\"title\")\n      .text(d => `Toggle ${d.name} line`);\n\n    // Legend Position\n    let widthSums = 0;\n    this.LegendHolder.selectAll(\".legend\").attr(\"transform\", function (d, i) {\n      let value = widthSums;\n      widthSums += this.getBBox().width + legendSpacing;\n      return `translate( ${value}, 0 )`;\n    });\n    let legendWidth = this.LegendHolder.node().getBBox().width;\n    this.LegendHolder.attr(\n      \"transform\",\n      `translate( ${width / 2 - legendWidth / 2}, ${height +\n      margin.bottom -\n      legendHeight * 2} )`\n    );\n\n    // Animate changes\n    this.yAxisEl.transition().call(this.yAxis);\n\n    lines\n      .transition()\n      .attr(\"d\", d => this.statusLine(d.data))\n      .style(\"stroke\", d => (d.shown ? this.colors(d.name) : \"transparent\"));\n  }\n\n  loadData = () => {\n    let url = \"/scot/api/v2/metric/create_histo\";\n    let opts = `?range=7`;\n\n    // Use dummy data while dashboard is in editMode\n    if (this.props.editMode) {\n      let dataset = this.genData();\n\n      // Add line visibility to data\n      dataset = dataset.map(line => {\n        line.shown = this.state.chartData.reduce((shown, d) => {\n          return shown && (d.name === line.name ? d.shown : true);\n        }, true);\n\n        return line;\n      });\n\n      this.setState({\n        chartData: dataset\n      });\n\n      return;\n    }\n    axios.get(url + opts).then(res => {\n      try {\n        // Add line visibility to data\n        console.log(res)\n        res = res.data.map(line => {\n          line.shown = this.state.chartData.reduce((shown, d) => {\n            return shown && (d.name === line.name ? d.shown : true);\n          }, true);\n\n          return line;\n        });\n\n        this.setState({\n          chartData: res\n        });\n      } catch (e) {\n        console.log(\"Malformed data\");\n        console.log(res);\n        console.error(e);\n      }\n    });\n  };\n\n  genData = () => {\n    let dataTypes = [\n      \"alerts\",\n      \"alertgroups\",\n      \"events\",\n      \"incidents\",\n      \"entries\",\n      \"intel\"\n    ];\n    let dataMaxes = {\n      alerts: 5000,\n      alertgroups: 500,\n      entries: 100,\n      events: 15,\n      intel: 5,\n      incidents: 5\n    };\n\n    let now = new Date(),\n      date = new Date(Date.now() - timeWindow);\n    let lineData = [];\n    dataTypes.forEach(d => {\n      lineData.push({\n        name: d,\n        data: []\n      });\n    });\n    for (; date <= now; date = new Date(date.getTime() + 6 * 3600 * 1000)) {\n      lineData.forEach(line => {\n        line.data.push({\n          time: date.getTime() / 1000,\n          value: Math.random() * dataMaxes[line.name]\n        });\n      });\n    }\n\n    return lineData;\n  }\n\n  componentDidMount() {\n    this.initChart();\n    this.loadData();\n  }\n\n  dataChange(event) {\n    let target = event.target;\n\n    if (target.name === \"chartResults\" && target.value) {\n      if (target.value > 50) target.value = 50;\n      if (target.value < 1) target.value = 1;\n    }\n\n    this.setState(\n      {\n        [target.name]: target.value\n      },\n      this.loadData\n    );\n  }\n\n  exportToPNG = () => {\n    var svgString = new XMLSerializer().serializeToString(\n      document.querySelector(\"#report_created\")\n    );\n\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    var DOMURL = window.self.URL || window.self.webkitURL || window.self;\n    var img = new Image();\n    var svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\n    var url = DOMURL.createObjectURL(svg);\n    img.onload = function () {\n      ctx.drawImage(img, 0, 0);\n      var png = canvas.toDataURL(\"image/png\");\n      document.querySelector(\n        \"#png-container\"\n      ).innerHTML = `<img src='${png}'/>`;\n      DOMURL.revokeObjectURL(png);\n      var a = $(\"<a>\")\n        .attr(\"href\", png)\n        .attr(\"download\", \"img.png\")\n        .appendTo(\"body\");\n\n      a[0].click();\n\n      a.remove();\n    };\n    img.src = url;\n  }\n\n  render() {\n    if (this.chartInit) {\n      this.updateChart();\n    }\n\n    let formDisabled = this.props.editMode;\n\n    return (\n      <div className=\"dashboard\">\n        {!this.props.editMode && <h1>Items Created</h1>}\n        <form>\n          <Button\n            id=\"export\"\n            bsSize=\"xsmall\"\n            bsStyle=\"default\"\n            onClick={this.exportToPNG}\n            disabled={formDisabled}\n          >\n            Export to PNG\n          </Button>\n        </form>\n        <div id=\"chart\">\n          <svg id=\"report_created\" viewBox=\"0 0 1000 600\" />\n        </div>\n        <div id=\"png-container\" hidden />\n      </div>\n    );\n  }\n}\n\nexport default ReportCreated;\nexport const Description = \"Chart of newly created items\";\n","import React from \"react\";\nimport { Panel, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\nimport ReportHeatmap, { Description as HeatmapDesc } from \"./report_heatmap\";\nimport ReportArt, { Description as ArtDesc } from \"./report_art\";\nimport ReportAlertpower, {\n  Description as PowerDesc\n} from \"./report_alertpower\";\nimport ReportCreated, { Description as CreatedDesc } from \"./report_created\";\n\nexport const ReportWidgets = () => {\n  const widgetTypes = [\"heatmap\", \"art\", \"alertpower\", \"created\"];\n\n  let widgets = {};\n  for (let type of widgetTypes) {\n    widgets[type] = {\n      type: reportByType(type),\n      title: reportTitleByType(type),\n      description: reportDescriptionByType(type)\n    };\n  }\n\n  return widgets;\n};\n\nconst reportByType = reportType => {\n  switch (reportType) {\n    default:\n    case \"heatmap\":\n      return ReportHeatmap;\n    case \"alertpower\":\n      return ReportAlertpower;\n    case \"art\":\n      return ReportArt;\n    case \"created\":\n      return ReportCreated;\n  }\n};\n\nconst reportComponentByType = reportType => {\n  switch (reportType) {\n    default:\n    case \"heatmap\":\n      return <ReportHeatmap />;\n    case \"alertpower\":\n      return <ReportAlertpower />;\n    case \"art\":\n      return <ReportArt />;\n    case \"created\":\n      return <ReportCreated />;\n  }\n};\n\nconst reportTitleByType = reportType => {\n  switch (reportType) {\n    default:\n    case \"heatmap\":\n      return \"Heatmap\";\n    case \"alertpower\":\n      return \"Alert Power\";\n    case \"art\":\n      return \"Alert Response Time\";\n    case \"created\":\n      return \"Items Created\";\n  }\n};\n\nconst reportDescriptionByType = reportType => {\n  switch (reportType) {\n    default:\n    case \"heatmap\":\n      return HeatmapDesc;\n    case \"alertpower\":\n      return PowerDesc;\n    case \"art\":\n      return ArtDesc;\n    case \"created\":\n      return CreatedDesc;\n  }\n};\n\nconst reportPanelHeader = (type, expandButton = false, backButton = false) => (\n  <div style={{ position: \"relative\" }}>\n    {reportTitleByType(type)}\n    {expandButton && (\n      <Link to={`/reports/${type}`} className=\"panel-button right\">\n        <Button bsSize=\"small\">\n          <i className=\"fa fa-external-link\" aria-hidden />\n        </Button>\n      </Link>\n    )}\n    {backButton && (\n      <Link to=\"/reports\" className=\"panel-button left\">\n        <Button bsSize=\"small\">\n          <i className=\"fa fa-arrow-left\" aria-hidden />\n        </Button>\n      </Link>\n    )}\n  </div>\n);\n\n//<Panel header={reportPanelHeader( reportTitleByType( 'heatmap' ), '/heatmap' )}>\n\nexport const ReportPage = () => (\n  <div\n    id=\"report\"\n    className=\"dashboard\"\n    style={{ height: \"calc( 100vh - 51px )\", overflow: \"auto\" }}\n  >\n    <div style={{ textAlign: \"center\" }}>\n      <h2>Reports</h2>\n    </div>\n    <div className=\"container-fluid\">\n      <div className=\"col-md-6\">\n        <Panel header={reportPanelHeader(\"heatmap\", true)}>\n          <ReportHeatmap />\n        </Panel>\n        <Panel header={reportPanelHeader(\"alertpower\", true)}>\n          <ReportAlertpower />\n        </Panel>\n      </div>\n      <div className=\"col-md-6\">\n        <Panel header={reportPanelHeader(\"art\", true)}>\n          <ReportArt />\n        </Panel>\n        <Panel header={reportPanelHeader(\"created\", true)}>\n          <ReportCreated />\n        </Panel>\n      </div>\n    </div>\n  </div>\n);\n\nexport const SingleReport = ({ reportType = \"heatmap\" }) => (\n  <div\n    id=\"report\"\n    className=\"dashboard\"\n    style={{ height: \"calc( 100vh - 51px )\", overflow: \"auto\" }}\n  >\n    <div className=\"container\">\n      <Panel header={reportPanelHeader(reportType, false, true)}>\n        {reportComponentByType(reportType)}\n      </Panel>\n    </div>\n  </div>\n);\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  progress: {\n    margin: theme.spacing.unit * 2,\n  },\n});\nfunction LoadingContainer(props) {\n  const { classes, loading } = props;\n  return (\n    <div className='LoadingContainer'>\n      {loading &&\n        <CircularProgress className={classes.progress} />\n      }\n    </div>\n  );\n}\n\nLoadingContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\nexport default withStyles(styles)(LoadingContainer);\n\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ListGroup, Label } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport $ from \"jquery\";\nimport * as SessionStorage from \"../../utils/session_storage\";\nimport LoadingContainer from \"../../list/LoadingContainer\";\nimport {\n  todayRange,\n  lastWeekRange,\n  epochRangeToFilter,\n  timeOlderThan\n} from \"../../utils/time\";\n\nconst NEW_TIME = 24 * 60 * 60; // 1 day\nconst isNew = created => {\n  return !timeOlderThan(created * 1000, NEW_TIME);\n};\n\nconst SCOT_API = \"/scot/api/v2/\";\n\nexport default class ThingList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      loading: false\n    };\n  }\n\n  static propTypes = {\n    thingType: PropTypes.string.isRequired, // Type to query\n    title: PropTypes.string.isRequired, // Title of Widget\n    queryOptions: PropTypes.object, // Search query options (sort & filter)\n    processData: PropTypes.func, // Function to process data\n    getSummary: PropTypes.func, // Function to create a summary from data entry\n    getLink: PropTypes.func, // Funciton to create a link from data entry\n    emptyString: PropTypes.string, // String to show when no data returned\n    emptyStyle: PropTypes.oneOf([\"success\", \"info\", \"warning\", \"danger\"]), // Style of emptyString\n    newBadge: PropTypes.bool, // Display a badge if the data entry is newer than a day\n    editMode: PropTypes.bool, // Whether the dashboard is in edit mode\n    errorToggle: PropTypes.func\n  };\n\n  static defaultProps = {\n    queryOptions: {\n      limit: 5,\n      offset: 0,\n      sort: {\n        id: -1\n      },\n      columns: [\"id\", \"subject\"]\n    },\n    processData: data => {\n      return data;\n    },\n    getSummary: thing => {\n      return thing.subject;\n    },\n    getLink: (thingType, thing) => {\n      return `${thingType}/${thing.id}`;\n    },\n    emptyString: \"No Data\",\n    emptyStyle: \"warning\",\n    newBadge: true\n  };\n\n  fetchData() {\n    this.setState({\n      loading: true\n    });\n\n    // Force deep copy\n    let data = $.extend(true, {}, this.props.queryOptions);\n    if (data.sort) {\n      data.sort = JSON.stringify(data.sort);\n    }\n\n    if (data.filter) {\n      data = {\n        ...data,\n        ...data.filter\n      };\n      delete data.filter;\n    }\n\n    if (this.props.newBadge) {\n      data.columns.push(\"created\");\n    }\n\n    $.ajaxSetup({ traditional: true });\n    $.ajax({\n      type: \"get\",\n      url: SCOT_API + this.props.thingType,\n      data: data\n    }).then(\n      data => {\n        this.setState({\n          data: this.props.processData(data.records),\n          loading: false\n        });\n      },\n      error => {\n        this.props.errorToggle(\"Failed to fetch data: \" + error);\n        this.setState({\n          loading: false\n        });\n      }\n    );\n  }\n\n  componentDidMount() {\n    if (!this.props.editMode) {\n      this.fetchData();\n    }\n  }\n\n  genThingItem(thing, i) {\n    // Using this instead of a subcomponent so I don't have to forward all the props\n    return (\n      <Link\n        key={i}\n        to={this.props.getLink(this.props.thingType, thing)}\n        className=\"list-group-item\"\n      >\n        {this.props.getSummary(thing)}\n        {this.props.newBadge &&\n          isNew(thing.created) && <Label bsStyle=\"primary\">New!</Label>}\n        <i className=\"fa fa-angle-right\" />\n      </Link>\n    );\n  }\n\n  render() {\n    let things = this.state.data.map((thing, i) => this.genThingItem(thing, i));\n    if (this.props.editMode) {\n      things = [1, 2, 3, 4, 5].map(thing => (\n        <div className=\"list-group-item\">\n          {this.props.thingType} - {thing}\n        </div>\n      ));\n    } else if (things.length === 0) {\n      things = (\n        <div\n          className={`list-group-item list-group-item-${this.props.emptyStyle}`}\n        >\n          {this.props.emptyString}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"ThingList\">\n        {!this.props.editMode && <h1>{this.props.title}</h1>}\n        {this.state.loading ? (\n          <LoadingContainer loading={true} />\n        ) : (\n          <ListGroup>{things}</ListGroup>\n        )}\n      </div>\n    );\n  }\n}\n\n/**\n * Hardcoded variants of Thinglist\n */\nexport const Widgets = () => {\n  return {\n    ...RecentIntel,\n    ...RecentEvents,\n    ...RecentIncidents,\n    ...OpenTasks,\n    ...YourTasks,\n    ...UnviewedAlerts,\n    ...TopEvents,\n    ...ViewedEvents,\n    ...EntryEvents\n  };\n};\n\nexport const RecentIntel = {\n  intel: {\n    type: ThingList,\n    title: \"Recent Intel\",\n    description: \"List of the 5 most recent Intel entries\",\n    props: {\n      thingType: \"intel\",\n      title: \"Recent Intel\"\n    }\n  }\n};\n\nexport const RecentEvents = {\n  events: {\n    type: ThingList,\n    title: \"Recent Events\",\n    description: \"List of the 5 most recent events\",\n    props: {\n      thingType: \"event\",\n      title: \"Recent Events\"\n    }\n  }\n};\n\nexport const RecentIncidents = {\n  incidents: {\n    type: ThingList,\n    title: \"Recent Incidents\",\n    description: \"List of the 5 most recent Incidents\",\n    props: {\n      thingType: \"incident\",\n      title: \"Recent Incidents\"\n    }\n  }\n};\n\nexport const OpenTasks = {\n  tasks: {\n    type: ThingList,\n    title: \"Open Tasks\",\n    description: \"List of recent open tasks\",\n    props: {\n      thingType: \"task\",\n      title: \"Open Tasks\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          updated: -1\n        },\n        filter: {\n          \"metadata.task.status\": \"open\"\n        },\n        columns: [\"id\", \"body_plain\", \"target\"]\n      },\n      getSummary: thing => {\n        return thing.body_plain.length > 200\n          ? thing.body_plain.substr(0, 200) + \"...\"\n          : thing.body_plain;\n      },\n      getLink: (thingType, thing) => {\n        let target = thing.target;\n        return `${thingType}/${target.type}/${target.id}/${thing.id}`;\n      },\n      emptyString: \"None\",\n      emptyStyle: \"info\"\n    }\n  }\n};\n\nexport const YourTasks = {\n  yourTasks: {\n    type: ThingList,\n    title: \"Your Tasks\",\n    description: \"List of open tasks that you own\",\n    props: {\n      thingType: \"task\",\n      title: \"Your Tasks\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          updated: 1\n        },\n        filter: {\n          \"metadata.task.status\": \"open\",\n          owner: SessionStorage.getLocalStorage(\"whoami\")\n        },\n        columns: [\"id\", \"body_plain\", \"target\"]\n      },\n      getSummary: thing => {\n        return thing.body_plain.length > 200\n          ? thing.body_plain.substr(0, 200) + \"...\"\n          : thing.body_plain;\n      },\n      getLink: (thingType, thing) => {\n        let target = thing.target;\n        return `${thingType}/${target.type}/${target.id}/${thing.id}`;\n      },\n      emptyString: \"None!\",\n      emptyStyle: \"success\"\n    }\n  }\n};\n\nexport const UnviewedAlerts = {\n  unviewedAlerts: {\n    type: ThingList,\n    title: \"Unviewed Alerts\",\n    description: \"Recent alerts with zero views\",\n    props: {\n      thingType: \"alertgroup\",\n      title: \"Unviewed Alerts\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          id: -1\n        },\n        filter: {\n          created: JSON.stringify(epochRangeToFilter(todayRange())),\n          views: 0\n        },\n        columns: [\"id\", \"subject\"]\n      },\n      newBadge: false,\n      emptyString: \"None!\",\n      emptyStyle: \"success\"\n    }\n  }\n};\n\nexport const TopEvents = {\n  topEvents: {\n    type: ThingList,\n    title: \"Important Events\",\n    description: \"Recent Events with open tasks\",\n    props: {\n      thingType: \"event\",\n      title: \"Important Events\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          has_tasks: 1\n        },\n        filter: {\n          created: JSON.stringify(epochRangeToFilter(todayRange()))\n        },\n        columns: [\"id\", \"subject\", \"has_tasks\"]\n      },\n      processData: data => {\n        return data.filter(thing => thing.has_tasks);\n      },\n      getSummary: thing => {\n        return `${thing.subject} (${thing.has_tasks} open task${\n          thing.has_tasks > 1 ? \"s\" : \"\"\n        })`;\n      },\n      newBadge: false,\n      emptyString: \"None!\",\n      emptyStyle: \"success\"\n    }\n  }\n};\n\nexport const ViewedEvents = {\n  viewedEvents: {\n    type: ThingList,\n    title: \"Most Viewed Events\",\n    description: \"Events with the most views over the last week\",\n    props: {\n      thingType: \"event\",\n      title: \"Most Viewed Events\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          views: -1\n        },\n        filter: {\n          created: JSON.stringify(epochRangeToFilter(lastWeekRange()))\n        },\n        columns: [\"id\", \"subject\", \"views\"]\n      },\n      processData: data => {\n        return data.filter(thing => thing.views > 0);\n      },\n      getSummary: thing => {\n        return `${thing.subject} (${thing.views} view${\n          thing.views > 1 ? \"s\" : \"\"\n        })`;\n      }\n    }\n  }\n};\n\nexport const EntryEvents = {\n  entryEvents: {\n    type: ThingList,\n    title: \"Events with Entries\",\n    description: \"Events with the most entries over the last week\",\n    props: {\n      thingType: \"event\",\n      title: \"Events with Entries\",\n      queryOptions: {\n        limit: 5,\n        offset: 0,\n        sort: {\n          entry_count: -1\n        },\n        filter: {\n          created: JSON.stringify(epochRangeToFilter(lastWeekRange()))\n        },\n        columns: [\"id\", \"subject\", \"entry_count\"]\n      },\n      processData: data => {\n        return data.filter(thing => thing.entry_count > 0);\n      },\n      getSummary: thing => {\n        return `${thing.subject} (${thing.entry_count} ${\n          thing.entry_count > 1 ? \"entries\" : \"entry\"\n        })`;\n      }\n    }\n  }\n};\n","import { ReportWidgets } from \"../report\";\nimport { Widgets as ThingWidgets } from \"../thinglist\";\n\nexport const Widgets = {\n  ...ThingWidgets(),\n  ...ReportWidgets()\n};\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Tab, Row, Col, Nav, NavItem } from \"react-bootstrap\";\nimport {\n    withUserConfig,\n    UserConfigPropTypes,\n    UserConfigKeys\n} from \"../utils/userConfig\";\nimport Dashboard, {\n    defaultLayout\n} from \"../components/dashboard/dazzle/dashboard\";\nimport Status from \"../components/dashboard/status\";\nimport Gamification from \"../components/dashboard/gamification\";\nimport Activity from \"../components/dashboard/activity\";\nimport { Widgets } from \"../components/dashboard/dazzle/widgets\";\nimport $ from \"jquery\";\n\nconst NEWTABKEY = \"new\";\n\nclass HomeDashboard extends PureComponent {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _isMounted: false\n        };\n\n        this.switchTab = this.switchTab.bind(this);\n        this.closeTab = this.closeTab.bind(this);\n        this.saveTab = this.saveTab.bind(this);\n    }\n\n    static propTypes = {\n        loggedIn: PropTypes.bool.isRequired,\n        sensitivity: PropTypes.string,\n        errorToggle: PropTypes.func,\n        ...UserConfigPropTypes\n    };\n\n    defaultTab() {\n        const layout = $.extend(true, {}, defaultLayout); // Deep copy\n\n        // Default tab has 3 charts: heatmap, ART, and created\n        layout.rows[0].columns[0].widgets.push({ key: \"heatmap\" });\n        layout.rows[0].columns[1].widgets.push({ key: \"art\" });\n        layout.rows[0].columns[2].widgets.push({ key: \"created\" });\n\n        return {\n            title: \"Default\",\n            layout: (\n                <Dashboard\n                    widgets={Widgets}\n                    title=\"Default\"\n                    layout={layout}\n                    errorToggle={this.props.errorToggle}\n                />\n            )\n        };\n    }\n\n    newTab() {\n        const dashboardConfig = this.props.userConfig.config;\n        let tabs = [...dashboardConfig.tabs];\n        tabs.push({});\n\n        this.updateDashboardConfig({\n            curTab: tabs.length,\n            tabs: tabs\n        });\n    }\n\n    buildTab(tabConfig, index) {\n        let tabLayout = (\n            <Dashboard\n                widgets={Widgets}\n                title={tabConfig.title}\n                layout={tabConfig.layout}\n                saveDashboard={(title, layout) => {\n                    this.saveTab(index, title, layout);\n                }}\n                isNew={tabConfig.layout == null}\n                errorToggle={this.props.errorToggle}\n            />\n        );\n        return {\n            title: tabConfig.title,\n            layout: tabLayout\n        };\n    }\n\n    saveTab(index, title, layout) {\n        const dashboardConfig = this.props.userConfig.config;\n        let tabs = [...dashboardConfig.tabs];\n\n        let newTabConfig = {\n            title: title,\n            layout: layout\n        };\n\n        tabs[index] = newTabConfig;\n        this.updateDashboardConfig({\n            tabs: tabs\n        });\n    }\n\n    closeTab(index) {\n        if (index < 1) {\n            return;\n        }\n\n        const dashboardConfig = this.props.userConfig.config;\n        let tabs = [...dashboardConfig.tabs];\n        tabs.splice(index - 1, 1);\n\n        this.updateDashboardConfig({\n            curTab: index - 1,\n            tabs: tabs\n        });\n    }\n\n    switchTab(key) {\n        if (key === this.props.userConfig.config.curTab) {\n            return;\n        }\n        if (key === NEWTABKEY) {\n            this.newTab();\n            return;\n        }\n\n        this.updateDashboardConfig({\n            curTab: key\n        });\n    }\n\n    updateDashboardConfig(newConfig) {\n        const dashboardConfig = this.props.userConfig.config;\n\n        this.props.userConfig.setUserConfig({\n            ...dashboardConfig,\n            ...newConfig\n        });\n    }\n\n    render() {\n        if (!this.props.loggedIn || this.props.userConfig.loading) {\n            return (\n                <div className=\"homePageDisplay\">\n                    <div className=\"home-grid loggedOut\">\n                        <div className=\"title-area\">\n                            <h1>\n                                Sandia Cyber Omni Tracker\n                <br />\n                                3.5\n              </h1>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        const dashboardHeader = (\n            <div className=\"home-grid\">\n                <div className=\"title-area\" />\n                <Status className=\"status-area\" />\n                <div className=\"game-area\">\n                    <Gamification />\n                </div>\n                <Activity\n                    createCallback={this.props.createCallback}\n                    removeCallback={this.props.removeCallback}\n                    className=\"activity-area\"\n                />\n            </div>\n        );\n\n        const dashboardConfig = this.props.userConfig.config;\n        const tabsConfig = dashboardConfig.tabs;\n\n        let tabs = [];\n        tabs.push(this.defaultTab());\n\n        let index = 0;\n        for (let newTab of tabsConfig) {\n            tabs.push(this.buildTab(newTab, index++));\n        }\n\n        let tabHeaders = tabs.map((tab, i) => {\n            let { title = \"New Dashboard\", layout, ...props } = tab;\n            return (\n                <NavItem eventKey={i} key={i}>\n                    {title}\n                    {i === dashboardConfig.curTab &&\n                        i !== 0 && (\n                            <span onClick={() => this.closeTab(i)}>\n                                &nbsp;\n                <i className=\"fa fa-times\" style={{ cursor: \"pointer\" }} />\n                            </span>\n                        )}\n                </NavItem>\n            );\n        });\n\n        tabHeaders.push(\n            <NavItem eventKey={NEWTABKEY} key={NEWTABKEY}>\n                +\n      </NavItem>\n        );\n\n        const tabContent = tabs.map((tab, i) => {\n            let { title, layout, ...props } = tab;\n            return (\n                <Tab.Pane eventKey={i} key={i} {...props}>\n                    {layout}\n                </Tab.Pane>\n            );\n        });\n\n        return (\n            <div className=\"homePageDisplay\">\n                <Tab.Container\n                    id=\"DashboardTabs\"\n                    activeKey={dashboardConfig.curTab}\n                    onSelect={this.switchTab}\n                >\n                    <Row>\n                        <Col sm={12}>\n                            <Nav bsStyle=\"tabs\">{tabHeaders}</Nav>\n                        </Col>\n                        <Col sm={12}>\n                            <Tab.Content mountOnEnter unmountOnExit>\n                                {dashboardHeader}\n                                {tabContent}\n                            </Tab.Content>\n                        </Col>\n                    </Row>\n                </Tab.Container>\n            </div>\n        );\n    }\n}\n\nexport default withUserConfig(UserConfigKeys.DASHBOARD)(HomeDashboard);\n","//Used to check for viewCookie which is used to determine if the default view should be portrait or landscape mode\n\nexport const checkCookie = string => {\n  let cookie = getCookie(string);\n  if (cookie !== \"\") {\n    return cookie;\n  }\n};\n\nexport const getCookie = cname => {\n  let name = cname + \"=\";\n  let ca = document.cookie.split(\";\");\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) === \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n};\n\nexport const deleteCookie = name => {\n  document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n};\n\nexport const setCookie = (cname, cvalue, exdays) => {\n  let d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  let expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n};\n","import React from \"react\";\nimport $ from \"jquery\";\nimport { Link } from 'react-router-dom'\nimport Highlighter from \"react-highlight-words\";\nimport styles from './Highlighter.example.css'\nexport default class Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSearchToolbar: false,\n      searchResults: null,\n      entityHeight: \"60vh\",\n      searching: false,\n      searchString: \"\"\n    };\n  }\n\n  componentDidMount = () => {\n    function searchEscHandler(event) {\n      if ($(\"#main-search-results\")[0] !== undefined) {\n        if (event.keyCode === 27) {\n          this.closeSearch();\n          event.preventDefault();\n        }\n      }\n    }\n    $(document).keyup(searchEscHandler.bind(this));\n  };\n\n  closeSearch = () => {\n    this.setState({\n      showSearchToolbar: false, searchString:\"\"\n    });\n  };\n\n  doSearch = string => {\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/esearch\",\n      data: { qstring: string },\n      success: function (response) {\n        if (string === $(\"#main-search\")[0].value) {\n          this.setState({\n            results: response.records,\n            showSearchToolbar: true,\n            searching: false,\n            searchString: string\n          });\n        }\n      }.bind(this),\n      error: function () {\n        //this.props.errorToggle('search failed')\n        this.setState({ searching: false });\n      }.bind(this)\n    });\n    this.setState({ searching: true });\n  };\n\n  handleEnterKey = e => {\n    if (e.key === \"Enter\") {\n      this.doSearch(e.target.value);\n    }\n  };\n\n  onChange = e => {\n    //only do auto search if there are at least 3 characters\n    //if (e.target.value.length > 2) {\n    this.doSearch(e.target.value);\n    //}\n  };\n\n  componentDidUpdate = () => {\n    if (this.state.searchString !== undefined) {\n      //var re = new RegExp(this.state.searchString,\"gi\");\n      //$(\".search-snippet\").html(function(_, html) {\n      //    return html.replace(re, '<span class=\"search_highlight\">$&</span>');\n      //});\n      // $(\".search-snippet\").mark(this.state.searchString, {\n      //   element: \"span\",\n      //   className: \"search_highlight\"\n      // });\n    }\n  };\n\n  render = () => {\n    let tableRows = [];\n    if (this.state.results !== undefined) {\n      if (this.state.results[0] !== undefined) {\n        for (let i = 0; i < this.state.results.length; i++) {\n          tableRows.push(\n            <SearchDataEachRows\n              dataOne={this.state.results[i]}\n              key={i}\n              index={i}\n              searchString={this.state.searchString}\n            />\n          );\n        }\n      } else {\n        tableRows.push(\n          <div style={{ display: \"inline-flex\" }}>\n            <div style={{ display: \"flex\" }}>No results returned</div>\n          </div>\n        );\n      }\n    }\n    return (\n      <div className=\"esearch\" style={{ zIndex: '100' }} >\n        <div style={{ display: \"flex\" }}>\n          <input\n            id=\"main-search\"\n            className=\"esearch-query\"\n            style={{\n              marginTop: \"3px\",\n              padding: \"10px 10px\",\n              float: \"right\",\n              position: \"relative\",\n              color: 'black'\n            }}\n            placeholder=\"&#xF002; Search\"\n            charSet=\"utf-8\"\n            onKeyPress={this.handleEnterKey}\n            onChange={this.onChange}\n          />\n          {this.state.searching ? (\n            <i\n              className=\"fa fa-spinner fa-spin fa-3x fa-fw\"\n              style={{ color: \"white\" }}\n            />\n          ) : null}\n        </div>\n        {this.state.showSearchToolbar ? (\n          <div\n            id=\"main-search-results\"\n            style={{\n              display: \"flex\",\n              flexFlow: \"row\",\n              position: \"absolute\",\n              right: \"10px\",\n              top: \"53px\",\n              background: \"#f3f3f3\",\n              border: \"black\",\n              borderStyle: \"solid\"\n            }}\n          >\n            <div>\n              <SearchDataEachHeader closeSearch={this.closeSearch} />\n              <div\n                style={{\n                  overflowY: \"auto\",\n                  maxHeight: \"600px\",\n                  display: \"table-caption\"\n                }}\n              >\n\n                {tableRows}\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  };\n\n  componentWillUnmount = () => {\n    $(document).off(\"keypress\");\n  };\n}\n\nclass SearchDataEachHeader extends React.Component {\n  render = () => {\n\n    return (\n      <div\n        className=\"table-row header\"\n        style={{ color: \"black\", display: \"flex\" }}\n      >\n        <div style={{ flexGrow: 1, display: \"flex\" }}>\n          <div\n            style={{\n              width: \"100%\",\n              textAlign: \"left\",\n              overflow: \"hidden\",\n              textOverflow: \"ellipsis\",\n              whiteSpace: \"nowrap\"\n            }}\n          >\n            Search Results - Score Displayed\n            <i\n              className=\"fa fa-times pull-right\"\n              style={{ color: \"red\", margin: \"2px\", cursor: \"pointer\" }}\n              onClick={this.props.closeSearch}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  };\n}\n\nclass SearchDataEachRows extends React.Component {\n  render = () => {\n    let type = this.props.dataOne.type;\n    let id = this.props.dataOne.id;\n    let entryid = this.props.dataOne.entryid;\n    let score = this.props.dataOne.score;\n    let highlight = [];\n\n    let rowEvenOdd = \"even\";\n    if (!isEven(this.props.index)) {\n      rowEvenOdd = \"odd\";\n    }\n\n    let rowClassName = \"search_result_row list-view-row\" + rowEvenOdd;\n\n    let href = \"/\" + type + \"/\" + id;\n    if (entryid !== undefined) {\n      href = \"/\" + type + \"/\" + id + \"/\" + entryid;\n    }\n\n    if (this.props.dataOne.highlight !== undefined) {\n      if (typeof this.props.dataOne.highlight === \"string\") {\n        highlight.push(\n          <span className=\"search_snippet_container panel col\">\n            <span className=\"search_snippet_header\">Snippet:</span>\n            <span className=\"search_snippet_result\">\n              {this.props.dataOne.highlight}\n            </span>\n          </span>\n        );\n      } else if ($.isArray(this.props.dataOne.highlight)) {\n        highlight.push(\n          <span className=\"search_snippet_container panel col\">\n            <span className=\"search_snippet_header\">Snippet:</span>\n            <span className=\"search_snippet_result\">\n              {this.props.dataOne.highlight[0]}\n            </span>\n          </span>\n        );\n      } else {\n        for (let key in this.props.dataOne.highlight) {\n          let search_string_array = this.props.searchString.split(\" \");\n          highlight.push(\n            <Highlighter\n              activeClassName={styles.Active}\n              highlightClassName=\"search_snippet_result\"\n              className=\"search_snippet_result\"\n              searchWords={search_string_array}\n              autoEscape={true}\n              textToHighlight={this.props.dataOne.highlight[key][0]}\n              highlightClassName={styles.Highlight}\n              highlightStyle={{ backgroundColor: 'yellow' }}\n            />\n          );\n        }\n      }\n    }\n    return (\n      <div key={Date.now()} className={rowClassName}>\n        <Link to={href} style={{ display: \"flex\" }}>\n          <span\n            className=\"panel panel-default\"\n            style={{\n              display: \"flex\",\n              flexFlow: \"column\",\n              borderColor: \"black\",\n              borderWidth: \"thin\",\n              margin: \"0px\"\n            }}\n          >\n            <div className=\"panel-heading h4 search-heading\">\n              {type} {id} - {score}\n            </div>\n            <div\n              className=\"search-snippet\"\n              style={{\n                display: \"flex\",\n                overflowX: \"hidden\",\n                wordWrap: \"break-word\"\n              }}\n            >\n              <span\n                className=\"container-fluid\"\n                style={{\n                  textAlign: \"left\",\n                  overflow: \"hidden\",\n                  textOverflow: \"ellipsis\",\n                  width: \"600px\"\n                }}\n              >\n                {highlight}\n              </span>\n            </div>\n          </span>\n        </Link>\n      </div>\n    );\n    /*\n        return (\n            <div key={Date.now()} className={rowClassName}>\n                <a href={href} style={{display:'flex'}}>\n                    <div style={{display:'flex'}}>\n                        <span style={{width:'100px', textAlign:'left', overflow:'hidden', textOverflow:'ellipsis', whiteSpace:'nowrap'}}>{id}</span>\n                    </div>\n                    <div style={{display:'flex'}}>\n                        <span style={{width:'100px', textAlign:'left', overflow:'hidden', textOverflow:'ellipsis', whiteSpace:'nowrap'}}>{type}</span>\n                    </div>\n                    <div style={{display:'flex'}}>\n                        <span style={{width:'100px', textAlign:'left', overflow:'hidden', textOverflow:'ellipsis', whiteSpace:'nowrap'}}>{score}</span>\n                    </div>\n                    <div className='search-snippet' style={{display:'flex', overflowX:'hidden',wordWrap:'break-word'}}>\n                        <span className='row' style={{textAlign:'left', overflow:'hidden', textOverflow:'ellipsis', width: '400px'}}>{highlight}</span>\n                    </div>\n                </a>\n            </div>\n        )*/\n  };\n}\n\nfunction isEven(n) {\n  return n % 2 === 0;\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nlet Button = require(\"react-bootstrap/lib/Button\");\n\nexport default class Wall extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      wallMessage: \"\",\n      buttonStatus: \"primary\",\n      buttonText: \"Send\",\n      buttonLoading: false\n    };\n  }\n  sendWallMessage = () => {\n    if (this.state.wallMessage === \"\") {\n      alert(\"Please enter text\");\n      this.setState({ buttonStatus: \"warning\" });\n    } else {\n      this.setState({ buttonText: \"Loading\", buttonLoading: true });\n      let data = { msg: this.state.wallMessage };\n      $.ajax({\n        type: \"post\",\n        url: \"scot/api/v2/wall\",\n        data: data,\n        traditional: true,\n        success: function() {\n          this.setState({\n            buttonStatus: \"success\",\n            buttonText: \"Sent\",\n            buttonLoading: false\n          });\n        }.bind(this),\n        error: function(data) {\n          this.setState({\n            buttonStatus: \"danger\",\n            buttonText: \"Failed - Try Again?\",\n            buttonLoading: false\n          });\n          this.props.errorToggle(\"Failed to send message\", data);\n        }.bind(this)\n      });\n    }\n  };\n\n  inputChange = input => {\n    this.setState({ wallMessage: input.target.value });\n  };\n\n  render = () => {\n    return (\n      <div className=\"allComponents\" style={{ \"margin-left\": \"17px\" }}>\n        <div>\n          <div>\n            <div className=\"main-header-info-child\">\n              <h2 htmlFor=\"message\">Message to all SCOT users:</h2>\n              <input\n                id=\"message\"\n                style={{ width: \"700px\" }}\n                placeholder=\"Enter message to be displayed to everyone using SCOT\"\n                value={this.state.wallMessage}\n                onChange={this.inputChange}\n              />\n              <Button\n                onClick={this.sendWallMessage}\n                bsStyle={this.state.buttonStatus}\n                disabled={this.state.buttonLoading}\n              >\n                {this.state.buttonText}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport $ from \"jquery\";\nimport ScotImage from \"../images/scot_logo_473x473.png\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: \"\",\n      pass: \"\"\n    };\n    this.SSO = this.SSO.bind(this);\n    this.NormalAuth = this.NormalAuth.bind(this);\n    this.isEnterPressed = this.isEnterPressed.bind(this);\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    let origurl = this.props.origurl;\n    let url = \"/sso?orig_url=/#\" + origurl;\n    return (\n      <Modal dialogClassName=\"login-modal\" show={this.props.modalActive}>\n        <Modal.Header>\n          <Modal.Title style={{ textAlign: \"center\" }}>SCOT Login</Modal.Title>\n        </Modal.Header>\n        <Modal.Body style={{ textAlign: \"center\" }}>\n          <img src={ScotImage} alt=\"SCOT Logo\" />\n          <Button type=\"submit\" href={url}>\n            Sign in using SSO\n          </Button>\n          <br />\n          <br />\n          <div\n            className=\"input-group\"\n            style={{\n              marginBottom: \"25px\",\n              marginRight: \"100px\",\n              marginLeft: \"100px\"\n            }}\n          >\n            <span className=\"input-group-addon\">\n              <i className=\"fa fa-user\" />\n            </span>\n            <input\n              id=\"user\"\n              type=\"user\"\n              ref=\"user\"\n              defaultValue=\"\"\n              className=\"form-control\"\n              placeholder=\"Username or Email\"\n            />\n          </div>\n          <div\n            className=\"input-group\"\n            style={{\n              marginBottom: \"25px\",\n              marginRight: \"100px\",\n              marginLeft: \"100px\"\n            }}\n          >\n            <span className=\"input-group-addon\">\n              <i className=\"fa fa-lock\" />\n            </span>\n            <input\n              id=\"pass\"\n              type=\"password\"\n              ref=\"pass\"\n              defaultValue=\"\"\n              placeholder=\"Password\"\n              className=\"form-control\"\n              onKeyPress={this.isEnterPressed}\n            />\n          </div>\n          <Button\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            onClick={this.NormalAuth}\n            style={{ marginBottom: \"25px\", width: \"140px\" }}\n          >\n            Submit\n          </Button>\n          <br />\n        </Modal.Body>\n      </Modal>\n    );\n  }\n  isEnterPressed(e) {\n    if (e.key === \"Enter\") {\n      this.NormalAuth();\n    }\n  }\n\n  SSO() {\n    let data = {};\n    data[\"orig_url\"] = \"%2f\";\n    $.ajax({\n      type: \"get\",\n      url: \"sso\",\n      crossDomain: true,\n      data: data,\n      success: function(data) {\n        console.log(\"success logging in\");\n        //TODO: Run restart code\n        // Actions.restartClient(); //restart the amq client after successful login\n        this.props.WhoAmIQuery(); //get new whoami after successful login\n        this.props.GetHandler(); //get new handler after succesful login\n        this.props.loginToggle(null, true);\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to log in using SSO\");\n      }.bind(this)\n    });\n  }\n\n  NormalAuth() {\n    let data = {};\n    data[\"user\"] = this.refs.user.value;\n    data[\"pass\"] = this.refs.pass.value;\n    data[\"csrf_token\"] = this.props.csrf;\n\n    $.ajax({\n      type: \"post\",\n      url: \"auth\",\n      data: data,\n      success: function() {\n        console.log(\"success logging in\");\n        //TODO: Implemtn restart script\n        //Actions.restartClient(); //restart the amq client after successful login\n        this.props.WhoAmIQuery(); //get new whoami after successful login\n        this.props.GetHandler(); //get new handler after succesful login\n        this.props.loginToggle(null, true);\n      }.bind(this),\n      error: function(data) {\n        if (data.responseText === \"Failed CSRF check\") {\n          this.props.errorToggle(\n            \"Failed to log in due to bad CSRF token. Please reload the page and then log in. Error: \" +\n              data.responseText\n          );\n        } else {\n          this.props.errorToggle(\n            \"Failed to log in using normal auth: \" + data.responseText\n          );\n        }\n      }.bind(this)\n    });\n  }\n}\n\nLogin.propTypes = {\n  modalActive: PropTypes.bool\n};\n\nLogin.defaultProps = {\n  modalActive: true\n};\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactTags from \"react-tag-autocomplete\";\nimport $ from \"jquery\";\n\nclass TagInput extends Component {\n  constructor(props) {\n    super(props);\n\n    let tags = [];\n    if (this.props.value) {\n      tags = this.props.value;\n    }\n\n    let maxTags = undefined;\n    if (this.props.maxTags) {\n      maxTags = this.props.maxTags;\n    }\n    this.state = {\n      suggestions: [],\n      tags: tags,\n      maxTags: maxTags,\n      placeholder: \"\"\n    };\n  }\n\n  handleDelete = i => {\n    const tags = this.state.tags;\n\n    tags.splice(i, 1);\n    if (tags.length === 0) {\n      this.props.onChange(\"\");\n      this.setState({ tags: tags, placeholder: \"\" });\n      return;\n    }\n\n    this.props.onChange(tags);\n    this.setState({ tags: tags, placeholder: \"\" });\n  };\n\n  handleAdd = tag => {\n    const tags = this.state.tags;\n\n    if (this.state.maxTags && tags.length >= this.state.maxTags) {\n      this.setState({\n        placeholder:\n          \"Only \" +\n          this.state.maxTags +\n          \" allowed. Please delete a tag to add another one\"\n      });\n      return;\n    } else {\n      tags.push(tag);\n      this.props.onChange(tags);\n      this.setState({ tags: tags, placeholder: \"\" });\n    }\n  };\n\n  componentDidUpdate() {\n    this.showHideInput();\n  }\n\n  handleInputChange = input => {\n    if (input && input.length >= 2) {\n      let arr = [];\n      $.ajax({\n        type: \"get\",\n        url: \"/scot/api/v2/ac/\" + this.props.type + \"/\" + input,\n        success: function(result) {\n          result = result.records;\n          for (let i = 0; i < result.length; i++) {\n            let obj = {};\n            obj.id = i + 1;\n            obj.name = result[i];\n            arr.push(obj);\n          }\n          this.setState({ suggestions: arr });\n        }.bind(this),\n        error: function(data) {\n          console.log(\"failed to get autocomplete data\");\n        }\n      });\n    }\n  };\n\n  showHideInput = () => {\n    if (\n      this.props.type === \"userdef\" &&\n      this.props.maxTags &&\n      this.state.tags.length >= this.props.maxTags\n    ) {\n      $(\".react-tags__search\").hide();\n    } else {\n      $(\".react-tags__search\").show();\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"TagInput\">\n        <ReactTags\n          tags={this.state.tags}\n          suggestions={this.state.suggestions}\n          handleAddition={this.handleAdd}\n          handleDelete={this.handleDelete}\n          handleInputChange={this.handleInputChange}\n          autoresize={false}\n          autofocus={false}\n          allowBackspace={false}\n          allowNew={true}\n          placeholder={this.state.placeholder}\n          tagComponent={Tag}\n        />\n      </div>\n    );\n  }\n}\n\nconst Tag = ({ classNames, onDelete, tag }) => (\n  <div className={classNames.selectedTag}>\n    <span className={classNames.selectedTagName}>{tag.name}</span>\n    <i className={\"fa fa-remove\"} aria-hidden=\"true\" onClick={onDelete} />\n  </div>\n);\n\nexport default TagInput;\n","import axios from 'axios'\n\nexport async function get_data (endpoint, params) {\n    if (params === null) {\n        return await axios.get(endpoint)\n    } else{\n        return await axios.get(endpoint, {params: params});\n    }\n};\n\nexport async function post_data (endpoint, body) {\n    if (body !== null){\n        return await axios.post(endpoint, body);\n    } else{\n        return await axios.post(endpoint);\n    }\n\n}\n\nexport async function  put_data (endpoint, body){\n    return await axios.put(endpoint, body);\n};\n\nexport async function delete_data (endpoint){\n     return await axios.delete(endpoint);\n};","import React from \"react\";\nimport { OverlayTrigger, ButtonGroup, Button, Popover } from \"react-bootstrap\";\nimport DateRangePicker from \"react-daterange-picker\";\nimport DebounceInput from \"react-debounce-input\";\nimport {\n  epochRangeToString,\n  epochRangeToMoment,\n  momentRangeToEpoch\n} from \"../utils/time\";\nimport * as constants from \"../utils/constants\";\nimport LoadingContainer from \"./LoadingContainer\";\nimport TagInput from \"../components/TagInput\";\nimport Button2 from \"@material-ui/core/Button\";\nimport { get_data } from \"../utils/XHR\";\nimport Add from \"@material-ui/icons/Add\";\nimport stripHtml from \"string-strip-html\";\nimport { Link } from \"react-router-dom\";\n\nconst navigateTo = id => {\n  window.open(\"#/event/\" + id);\n};\n\nconst customFilters = {\n  numberFilter: ({ filter, onChange }) => (\n    <DebounceInput\n      debounceTimeout={200}\n      type=\"number\"\n      minLength={1}\n      min={0}\n      value={filter ? filter.value : \"\"}\n      onChange={e => onChange(e.target.value)}\n      style={{ width: \"100%\" }}\n    />\n  ),\n  stringFilter: ({ filter, onChange }) => (\n    <DebounceInput\n      debounceTimeout={200}\n      minLength={1}\n      value={filter ? filter.value : \"\"}\n      onChange={e => onChange(e.target.value)}\n      style={{ width: \"100%\" }}\n    />\n  ),\n  dropdownFilter: (options = [\"open\", \"closed\", \"promoted\"], align) => ({\n    filter,\n    onChange\n  }) => (\n    <OverlayTrigger\n      trigger=\"focus\"\n      placement=\"bottom\"\n      overlay={\n        <Popover id=\"status_popover\" style={{ maxWidth: \"400px\" }}>\n          <ButtonGroup\n            vertical\n            style={{\n              maxHeight: \"50vh\",\n              overflowY: \"auto\",\n              position: \"relative\"\n            }}\n          >\n            {options.map(option => (\n              <Button\n                key={option}\n                onClick={() => onChange(option)}\n                active={filter && filter.value === option}\n                style={{\n                  textTransform: \"capitalize\",\n                  textAlign: align ? align : null\n                }}\n              >\n                {option}\n              </Button>\n            ))}\n          </ButtonGroup>\n          {filter && (\n            <Button\n              block\n              onClick={() => onChange(\"\")}\n              bsStyle=\"primary\"\n              style={{ marginTop: \"3px\" }}\n            >\n              Clear\n            </Button>\n          )}\n        </Popover>\n      }\n    >\n      <input\n        type=\"text\"\n        value={filter ? filter.value : \"\"}\n        readOnly\n        style={{ width: \"100%\", cursor: \"pointer\" }}\n      />\n    </OverlayTrigger>\n  ),\n  dateRange: ({ filter, onChange }) => (\n    <OverlayTrigger\n      trigger=\"click\"\n      rootClose\n      placement=\"bottom\"\n      overlay={\n        <Popover id=\"daterange_popover\" style={{ maxWidth: \"350px\" }}>\n          <DateRangePicker\n            numberOfCalendars={2}\n            selectionType=\"range\"\n            showLegend={false}\n            singleDateRange={true}\n            onSelect={(range, states) => {\n              onChange(momentRangeToEpoch(range));\n            }}\n            value={filter ? epochRangeToMoment(filter.value) : null}\n          />\n          {filter && (\n            <Button\n              block\n              onClick={() => {\n                onChange(\"\");\n                document.dispatchEvent(new MouseEvent(\"click\"));\n              }}\n              bsStyle=\"primary\"\n            >\n              Clear\n            </Button>\n          )}\n        </Popover>\n      }\n    >\n      <input\n        type=\"text\"\n        value={filter ? epochRangeToString(filter.value) : \"\"}\n        readOnly\n        style={{ width: \"100%\", cursor: \"pointer\" }}\n      />\n    </OverlayTrigger>\n  ),\n  tagFilter: (type = \"tag\") => ({ filter, onChange }) => (\n    <TagInput\n      type={type}\n      onChange={onChange}\n      value={filter ? filter.value : []}\n    />\n  )\n};\n\nexport const customCellRenderers = {\n  dateFormater: row => {\n    let date = new Date(row.value * 1000);\n    return <span>{date.toLocaleString()}</span>;\n  },\n  alertStatus: row => {\n    let [open, closed, promoted] = row.value\n      .split(\"/\")\n      .map(value => parseInt(value.trim(), 10));\n    let className = \"open btn-danger\";\n    if (promoted) {\n      className = \"promoted btn-warning\";\n    } else if (closed) {\n      if (!open) {\n        className = \"closed btn-success\";\n      }\n    }\n\n    return <div className={`alertStatusCell ${className}`}>{row.value}</div>;\n  },\n  textStatus: row => {\n    let color = \"green\";\n    if (\n      row.value === \"open\" ||\n      row.value === \"disabled\" ||\n      row.value === \"assigned\" ||\n      row.value === \"paused\"\n    ) {\n      color = \"red\";\n    } else if (row.value === \"promoted\") {\n      color = \"orange\";\n    }\n\n    return <span style={{ color: color }}>{row.value}</span>;\n  },\n\n  alertStatusAlerts: row => {\n    return (\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n        <PromotionButton row={row} />\n      </div>\n    );\n  },\n  flairCell: row => {\n    if (row !== undefined) {\n      return <FlairObject value={row.value} />;\n    } else {\n      return null;\n    }\n  },\n\n  appliesTo: row => {\n    if (row !== undefined) {\n      if (Array.isArray(row.original.data.applies_to)) {\n        let output = row.original.data.applies_to.map(item => {\n          return item;\n        });\n        return <span>{output.join(\", \")}</span>;\n      } else {\n        return <span>{row.original.data.applies_to}</span>;\n      }\n    }\n  }\n};\n\nconst customTableComponents = {\n  loading: ({ loading }) => (\n    <div className={\"-loading\" + (loading ? \" -active\" : \"\")}>\n      <LoadingContainer loading={loading} />\n    </div>\n  )\n};\n\nconst columnDefinitions = {\n  Id: {\n    Header: \"ID\",\n    accessor: \"id\",\n    width: 80,\n    Filter: customFilters.numberFilter\n  },\n\n  AlertStatus: {\n    Header: \"Status\",\n    accessor: d =>\n      d.open_count + \" / \" + d.closed_count + \" / \" + d.promoted_count,\n    column: [\"open_count\", \"closed_count\", \"promoted_count\"],\n    id: \"status\",\n    width: 150,\n    Filter: customFilters.dropdownFilter(),\n    Cell: customCellRenderers.alertStatus,\n    style: {\n      padding: 0\n    }\n  },\n\n  EventStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter()\n  },\n\n  FeedStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter()\n  },\n  \n  DispatchStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter()\n  },\n\n  IntelStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter()\n  },\n\n  ProductStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter()\n  },\n\n  IncidentStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter([\"open\", \"closed\"])\n  },\n\n  SigStatus: {\n    Header: \"Status\",\n    accessor: \"status\",\n    maxWidth: 100,\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter([\"enabled\", \"disabled\"])\n  },\n\n  TaskStatus: {\n    Header: \"Task Status\",\n    accessor: d => d.metadata.task.status,\n    id: \"metadata.task.status\",\n    column: \"metadata\",\n    Cell: customCellRenderers.textStatus,\n    Filter: customFilters.dropdownFilter([\"open\", \"assigned\", \"closed\"])\n  },\n\n  TaskSummary: {\n    Header: \"Task Summary\",\n    accessor: d =>\n      d.body_plain.length > 200\n        ? d.body_plain.substr(0, 200) + \"...\"\n        : d.body_plain,\n    id: \"summary\",\n    minWidth: 400,\n    maxWidth: 5000,\n    Filter: customFilters.stringFilter\n  },\n\n  Subject: {\n    Header: \"Subject\",\n    accessor: \"subject\",\n    minWidth: 400,\n    maxWidth: 5000,\n    Filter: customFilters.stringFilter\n  },\n\n  Location: {\n    Header: \"Location\",\n    accessor: \"location\",\n    minWidth: 80,\n    maxWidth: 180,\n    Filter: customFilters.stringFilter\n  },\n\n  Created: {\n    Header: \"Created\",\n    accessor: \"created\",\n    minWidth: 100,\n    maxWidth: 180,\n    Filter: customFilters.dateRange,\n    Cell: customCellRenderers.dateFormater\n  },\n\n  Updated: {\n    Header: \"Updated\",\n    accessor: \"updated\",\n    minWidth: 100,\n    maxWidth: 180,\n    Filter: customFilters.dateRange,\n    Cell: customCellRenderers.dateFormater\n  },\n\n  Occurred: {\n    Header: \"When\",\n    accessor: \"when\",\n    minWidth: 100,\n    maxWidth: 180,\n    Filter: customFilters.dateRange,\n    Cell: customCellRenderers.dateFormater\n  },\n  LastAttempt: {\n    Header: \"Last Attempt\",\n    accessor: \"last_attempt\",\n    minWidth: 100,\n    maxWidth: 180,\n    Filter: customFilters.dateRange,\n    Cell: customCellRenderers.dateFormater\n  },\n  LastArticle: {\n    Header: \"Last Article\",\n    accessor: \"last_article\",\n    minWidth: 100,\n    maxWidth: 180,\n    Filter: customFilters.dateRange,\n    Cell: customCellRenderers.dateFormater\n  },\n\n  Sources: {\n    Header: \"Sources\",\n    accessor: \"source\", //d => d.source ? d.source.join( ', ' ) : '',\n    column: \"source\",\n    id: \"source\",\n    minWidth: 120,\n    //maxWidth: 150,\n    Filter: customFilters.tagFilter(\"source\")\n  },\n\n  Tags: {\n    Header: \"Tags\",\n    accessor: \"tag\", //d => d.tag ? d.tag.join( ', ' ) : '',\n    column: \"tag\",\n    id: \"tag\",\n    minWidth: 120,\n    //maxWidth: 150,\n    Filter: customFilters.tagFilter(\"tag\")\n  },\n\n  TaskOwner: {\n    Header: \"Task Owner\",\n    accessor: \"owner\",\n    maxWidth: 80,\n    Filter: customFilters.stringFilter\n  },\n\n  Owner: {\n    Header: \"Owner\",\n    accessor: \"owner\",\n    maxWidth: 80,\n    Filter: customFilters.stringFilter\n  },\n\n  Entries: {\n    Header: \"Entries\",\n    accessor: \"entry_count\",\n    maxWidth: 70,\n    Filter: customFilters.numberFilter\n  },\n\n  Articles: {\n    Header: \"Articles\",\n    accessor: \"article_count\",\n    maxWidth: 70,\n    Filter: customFilters.numberFilter\n  },\n\n  Promotions: {\n    Header: \"Promotions\",\n    accessor: \"promotions\",\n    maxWidth: 70,\n    Filter: customFilters.numberFilter\n  },\n\n  Views: {\n    Header: \"Views\",\n    accessor: \"views\",\n    maxWidth: 70,\n    Filter: customFilters.numberFilter\n  },\n\n  DOE: {\n    Header: \"DOE\",\n    accessor: \"doe_report_id\",\n    maxWidth: 100,\n    Filter: customFilters.stringFilter\n  },\n\n  IncidentType: {\n    Header: \"Type\",\n    accessor: \"type\",\n    minWidth: 200,\n    maxWidth: 250,\n    Filter: customFilters.dropdownFilter(constants.INCIDENT_TYPES, \"left\")\n  },\n\n  AppliesTo: {\n    Header: \"Applies To\",\n    id: \"data.applies_to\",\n    accessor: d => d.data.applies_to,\n    Cell: customCellRenderers.appliesTo,\n    // Filter: customFilters.stringFilter,\n    Filter: customFilters.tagFilter,\n    minWidth: 400,\n    maxWidth: 5000\n  },\n\n  Value: {\n    Header: \"Value\",\n    accessor: \"value\",\n    Filter: customFilters.stringFilter,\n    minWidth: 400,\n    maxWidth: 5000\n  },\n\n  Name: {\n    Header: \"Name\",\n    accessor: \"name\",\n    Filter: customFilters.stringFilter,\n    minWidth: 200,\n    maxWidth: 300\n  },\n\n  Group: {\n    Header: \"Group\",\n    accessor: d =>\n      d.data.signature_group ? d.data.signature_group.join(\", \") : \"\",\n    column: \"signature_group\",\n    id: \"data.signature_group\",\n    Filter: customFilters.stringFilter\n  },\n\n  Type: {\n    Header: \"Type\",\n    accessor: d => d.data.type,\n    id: \"data.type\",\n    Filter: customFilters.stringFilter,\n    minWidth: 100,\n    maxWidth: 150\n  },\n\n  EntityType: {\n    Header: \"Type\",\n    accessor: \"type\",\n    Filter: customFilters.stringFilter,\n    minWidth: 100,\n    maxWidth: 150\n  },\n\n  FeedType: {\n    Header: \"Type\",\n    accessor: \"type\",\n    Filter: customFilters.stringFilter,\n    minWidth: 100,\n    maxWidth: 150\n  },\n\n  Description: {\n    Header: \"Description\",\n    // accessor: 'description',\n    accessor: d => d.data.description,\n    Filter: customFilters.stringFilter,\n    minWidth: 400,\n    id: \"data.description\",\n    maxWidth: 5000\n  },\n\n  Uri: {\n    Header: \"URI\",\n    // accessor: 'description',\n    accessor: d => d.uri,\n    Filter: customFilters.stringFilter,\n    minWidth: 400,\n    id: \"uri\",\n    maxWidth: 5000\n  },\n\n  TargetType: {\n    Header: \"Type\",\n    accessor: d => d.target.type,\n    column: \"target\",\n    id: \"target_type\",\n    Filter: customFilters.stringFilter\n  },\n\n  TargetId: {\n    Header: \"Target Id\",\n    accessor: d => d.target.id,\n    column: \"target\",\n    id: \"target_id\",\n    Filter: customFilters.numberFilter\n  },\n\n  OpenTasks: {\n    Header: \"Open Tasks\",\n    accessor: \"has_tasks\",\n    Filter: customFilters.numberFilter,\n    maxWidth: 90,\n    filterable: false\n  },\n\n  //alert stuff - 2019 - bemonta\n  Status: {\n    accessor: \"status\",\n    Header: \"Status\",\n    width: 100,\n    Cell: customCellRenderers.alertStatusAlerts\n  },\n\n  EntryCountColumn: {\n    width: 50,\n    resizable: true,\n    expander: true,\n    filter: false,\n\n    accessor: \"entry_count\",\n    Header: \"Entries\",\n    Expander: ({ isExpanded, ...rest }) => {\n      return (\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n          {isExpanded ? (\n            <Button2\n              variant=\"contained\"\n              style={{ backgroundColor: \"orange\", color: \"white\" }}\n            >\n              Close entries\n            </Button2>\n          ) : (\n            <div>\n              {rest.original.entry_count == 0 ? (\n                <Add />\n              ) : (\n                <Button2\n                  variant=\"contained\"\n                  size=\"small\"\n                  style={{ backgroundColor: \"#5bc0de\", color: \"white\" }}\n                >\n                  {rest.original.entry_count} entries\n                </Button2>\n              )}\n            </div>\n          )}\n        </div>\n      );\n    },\n    getProps: (state, rowInfo, column) => {\n      return {\n        className: \"show-pointer\"\n      };\n    }\n  }\n};\n\nconst defaultTableSettings = {\n  manual: true,\n  sortable: true,\n  filterable: true,\n  resizable: true,\n  styleName: \"styles.ReactTable\",\n  className: \"-striped -highlight\",\n  minRows: 0,\n\n  LoadingComponent: customTableComponents.loading\n};\n\nexport const defaultTypeTableSettings = {\n  page: 0,\n  pageSize: 50,\n  sorted: [\n    {\n      id: \"id\",\n      desc: true\n    }\n  ],\n  filtered: []\n};\n\nconst defaultColumnSettings = {\n  style: {\n    padding: \"5px 5px\"\n  }\n};\n\nconst typeColumns = {\n  alert: [\"Id\", \"Status\", \"EntryCountColumn\"],\n\n  alertgroup: [\n    \"Id\",\n    \"Location\",\n    \"AlertStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Sources\",\n    \"Tags\",\n    \"Views\",\n    \"OpenTasks\"\n  ],\n  event: [\n    \"Id\",\n    \"Location\",\n    \"EventStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Updated\",\n    \"Sources\",\n    \"Tags\",\n    \"Owner\",\n    \"Entries\",\n    \"Views\",\n    \"OpenTasks\"\n  ],\n  incident: [\n    \"Id\",\n    \"Location\",\n    \"DOE\",\n    \"IncidentStatus\",\n    \"Owner\",\n    \"Subject\",\n    \"Occurred\",\n    \"IncidentType\",\n    {\n      title: \"Tags\",\n      options: { minWidth: 100, maxWidth: 150 }\n    },\n    {\n      title: \"Sources\",\n      options: { minWidth: 100, maxWidth: 150 }\n    }\n  ],\n\n\n  dispatch: [\n    \"Id\",\n    \"Location\",\n    \"DispatchStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Updated\",\n    \"Sources\",\n    {\n      title: \"Tags\",\n      options: { minWidth: 200, maxWidth: 250 }\n    },\n    \"Owner\",\n    \"Entries\",\n    \"Views\"\n  ],\n\n  intel: [\n    \"Id\",\n    \"Location\",\n    \"IntelStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Updated\",\n    \"Sources\",\n    {\n      title: \"Tags\",\n      options: { minWidth: 200, maxWidth: 250 }\n    },\n    \"Owner\",\n    \"Entries\",\n    \"Views\",\n    \"OpenTasks\"\n  ],\n\n  product: [\n    \"Id\",\n    \"Location\",\n    \"ProductStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Updated\",\n    \"Sources\",\n    {\n      title: \"Tags\",\n      options: { minWidth: 200, maxWidth: 250 }\n    },\n    \"Owner\",\n    \"Entries\",\n    \"Views\",\n    \"OpenTasks\"\n  ],\n\n  feed: [\n    \"Id\",\n    \"Name\",\n    \"FeedStatus\",\n    \"FeedType\",\n    \"Uri\",\n    \"LastAttempt\",\n    \"LastArticle\",\n    \"Articles\",\n    \"Promotions\"\n  ],\n\n  task: [\n    \"Id\",\n    \"Location\",\n    \"Subject\",\n    \"TargetType\",\n    \"TargetId\",\n    {\n      title: \"TaskOwner\",\n      options: { minWidth: 150, maxWidth: 500 }\n    },\n    \"TaskStatus\",\n    \"TaskSummary\",\n    {\n      title: \"Updated\",\n      options: { minWidth: 150, maxWidth: 500 }\n    }\n  ],\n  signature: [\n    \"Id\",\n    \"Location\",\n    \"Name\",\n    \"Type\",\n    \"SigStatus\",\n    \"Group\",\n    \"Description\",\n    \"Owner\",\n    \"Tags\",\n    \"Sources\",\n    \"Updated\"\n  ],\n  guide: [\"Id\", \"Location\", \"Subject\", \"AppliesTo\"],\n  entity: [\"Id\", \"Location\", \"Value\", \"EntityType\", \"Entries\"],\n  default: [\n    \"Id\",\n    \"Location\",\n    \"AlertStatus\",\n    \"Subject\",\n    \"Created\",\n    \"Sources\",\n    \"Tags\",\n    \"Views\"\n  ]\n};\n\nexport const buildTypeColumns = (type, rowData, propData, flag) => {\n  function get_current_combined_columnWidths(columns) {\n    let column_total_width = columns.reduce(function(a, b) {\n      if (a.width !== undefined) {\n        return a.width + b.width;\n      } else {\n        return a + b.width;\n      }\n    });\n    return column_total_width;\n  }\n\n  if (!typeColumns.hasOwnProperty(type)) {\n    // throw new Error( 'No columns defined for type: '+ type );\n    type = \"default\";\n  }\n\n  if (flag === false && type === \"alert\") {\n    type = \"alertgroup\";\n  }\n\n  let columns = [];\n  for (let col of typeColumns[type]) {\n    let colOptions = {};\n\n    if (typeof col === \"object\") {\n      colOptions = {\n        ...columnDefinitions[col.title],\n        ...col.options\n      };\n    } else if (typeof col === \"string\") {\n      colOptions = columnDefinitions[col];\n    }\n\n    columns.push({\n      ...defaultColumnSettings,\n      ...colOptions\n    });\n  }\n\n  if (type === \"alert\") {\n    if (propData.length > 0) {\n      if (propData[0].data.columns) {\n        propData[0].data.columns.forEach(\n          function(element, index) {\n            if (element !== \"status\") {\n              let columnobj = {\n                accessor: element,\n                Header: element,\n                filter: true,\n                Cell: row => customCellRenderers.flairCell(row),\n                width: getColumnWidth(rowData, element, element)\n              };\n              columns.push(columnobj);\n            } else {\n              // Had to add space to account for SCOT status column which is a duplicate column.\n              //React table hates duplicate columns. See SelectedEntry - NewAlertTable for data manipulation\n              let status_code_obj = {\n                accessor: \"status \",\n                Header: element,\n                filter: true,\n                Cell: row => customCellRenderers.flairCell(row),\n                width: 80\n              };\n              columns.push(status_code_obj);\n            }\n          }.bind(this)\n        );\n      }\n      columns.forEach(function(column, index) {\n        column[\"getProps\"] = function(state, rowInfo) {\n          return {\n            style: {\n              backgroundColor: index % 2 === 0 ? \"#bababa45\" : \"\"\n            }\n          };\n        };\n      });\n    }\n\n    // this function looks at columns and calculates how many columns were initially set to 90\n    // if it detects a column with width of 90 or time in name, it add an exception, meaning that we should not\n    // increase this column\n    let num_of_exemptions = 3;\n    columns.forEach(function(column) {\n      if (column.width === 90) {\n        num_of_exemptions++;\n      }\n      if (column.accessor.includes(\"time\")) {\n        num_of_exemptions++;\n      }\n    });\n\n    let windowsize = window.innerWidth - 32;\n    //calculate column widths\n    let column_total_width = get_current_combined_columnWidths(columns);\n\n    //if below conditional true, then we have empty white space in table and should increase column widths\n    if (column_total_width < windowsize) {\n      let residual = windowsize - column_total_width;\n      let residual_per_column = residual / (columns.length - num_of_exemptions);\n      columns.forEach(\n        function(column) {\n          //each iteration, we want to calculate the total width of columns\n          column_total_width = get_current_combined_columnWidths(columns);\n          if (column_total_width < windowsize) {\n            if (\n              column.accessor !== \"id\" &&\n              column.accessor !== \"entry_count\" &&\n              column.accessor !== \"status\" &&\n              column.width !== 90 &&\n              column.accessor.includes(\"time\") !== true\n            ) {\n              if (column.width + residual_per_column < residual) {\n                column.width = column.width + residual_per_column;\n                column_total_width = get_current_combined_columnWidths(columns);\n              } else {\n                column.width = column.width + residual;\n              }\n            }\n          }\n        }.bind(this)\n      );\n    }\n  }\n\n  return columns;\n};\n\nclass FlairObject extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { value } = this.props;\n\n    return (\n      <div\n        style={{\n          wordBreak: \"break-word\"\n        }}\n        className=\"alertTableHorizontal\"\n        dangerouslySetInnerHTML={{ __html: value }}\n      />\n    );\n  }\n}\n\nexport const getColumnWidth = (data, accessor, headerText) => {\n  //get calc width of html element, we use this to calculate as accurate as possible, widths of headertext, and data in cellss\n  function calc_width(input) {\n    try {\n      let strip = stripHtml(input);\n      return strip.length;\n    } catch {\n      return input.length;\n    }\n  }\n\n  if (typeof accessor === \"string\" || accessor instanceof String) {\n    accessor = d => d[accessor]; // eslint-disable-line no-param-reassign\n  }\n  const maxWidth = 400;\n  const magicSpacing = 9;\n  const cellLength = Math.max(\n    ...data.map(function(row) {\n      let newtext = row[headerText];\n      if (newtext !== undefined) {\n        return calc_width(newtext);\n      } else {\n        return 0;\n      }\n    }),\n    headerText.length\n  );\n\n  if (cellLength < 13 && headerText !== \"status\") {\n    return 90;\n  } else {\n    return Math.min(maxWidth, cellLength * magicSpacing);\n  }\n};\n\nclass PromotionButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      element: null,\n      loading: true\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.row.value !== this.props.row.value) {\n      this.getPromotionInfo(this.props.row.original.id).then(element => {\n        if (element) {\n          this.setState({ element });\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.getPromotionInfo(this.props.row.original.id).then(element => {\n      if (element) {\n        this.setState({ element });\n      }\n    });\n  }\n\n  getPromotionInfo = id => {\n    let json = get_data(`/scot/api/v2/alert/${id}/event`, {});\n    return json;\n  };\n\n  render() {\n    if (this.props.row.value === \"closed\") {\n      return <p style={{ color: \"green\" }}>{this.props.row.value}</p>;\n    } else if (this.props.row.value === \"open\") {\n      return <p style={{ color: \"red\" }}>{this.props.row.value}</p>;\n    } else if (this.props.row.value === \"promoted\") {\n      if (this.state.element) {\n        return (\n          <Button2\n            variant=\"contained\"\n            onMouseDown={() =>\n              navigateTo(this.state.element.data.records[0].id)\n            }\n            style={{ backgroundColor: \"orange\", color: \"white\" }}\n          >\n            {this.props.row.value}\n          </Button2>\n        );\n      } else {\n        return <span>Loading...</span>;\n      }\n    }\n  }\n}\n\nexport const getEntityPopupColumns = params => {\n  const columns = [\n    {\n      Header: \"Status\",\n      accessor: \"status\",\n      width: 79,\n      Cell: row => {\n        let promotedHref = \"\";\n        if (row.original.status !== undefined) {\n          if (row.original.status === \"closed\") {\n            return (\n              <span style={{ color: \"green\" }}>{row.original.status}</span>\n            );\n          } else if (row.original.status === \"open\") {\n            return <span style={{ color: \"red\" }}>{row.original.status}</span>;\n          } else if (row.original.status === \"promoted\") {\n            if (row.original.type === \"alert\") {\n              promotedHref = `/#/event/${row.original.promotion_id}`;\n            } else if (row.original.type === \"event\") {\n              promotedHref = `/#/incident/${row.original.promotion_id}`;\n            } else if ( row.original.type === \"dispatch\" ) {\n                promotedHref = `/#/intel/${row.original.promotion_id}`;\n            } else if ( row.original.type === \"intel\" ) {\n                promotedHref = `/#/product/${row.original.promotion_id}`;\n            }\n            return (\n              <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                <Button\n                  bsSize=\"xsmall\"\n                  bsStyle={\"warning\"}\n                  // id={this.props.data.id}\n                  href={promotedHref}\n                  target=\"_blank\"\n                  style={{\n                    lineHeight: \"12pt\",\n                    fontSize: \"10pt\",\n                    marginLeft: \"auto\"\n                  }}\n                >\n                  {row.original.status}\n                </Button>\n              </div>\n            );\n          }\n        } else {\n          return <div>N/A</div>;\n        }\n      }\n    },\n    {\n      Header: \"ID\",\n      accessor: \"id\",\n      width: 85,\n      Cell: row => {\n        if (row.original.id) {\n          return (\n            <Link\n              to={`/${row.original.type}/${row.original.id}`}\n              target=\"_blank\"\n            >\n              {row.original.id}\n            </Link>\n          );\n        }\n      }\n    },\n    {\n      Header: \"type\",\n      accessor: \"type\",\n      width: 50\n    },\n    {\n      Header: \"Entries\",\n      accessor: \"entry_count\",\n      width: 66\n    },\n    {\n      Header: \"subject\",\n      accessor: \"subject\"\n    },\n    {\n      Header: \"updated\",\n      accessor: \"updated\",\n      width: 121,\n      Cell: row => {\n        let daysSince = \"Unknown\";\n        if (row.original.updated !== undefined) {\n          daysSince = Math.floor(\n            (Math.round(new Date().getTime() / 1000) - row.original.updated) /\n              86400\n          );\n        }\n        return <span>{daysSince} days ago</span>;\n      }\n    }\n  ];\n  return columns;\n};\n\nexport default defaultTableSettings;\n","\n/*****************************************************/\n/***************    Table Options   *****************/\n/***************************************************/\nexport const INCIDENT_TYPES = [\n    'Type 1 : Root Compromise',\n    'Type 1 : User Compromise',\n    'Type 1 : Loss/Theft/Missing Desktop',\n    'Type 1 : Loss/Theft/Missing Laptop',\n    'Type 1 : Loss/Theft/Missing Media',\n    'Type 1 : Loss/Theft/Missing Other',\n    'Type 1 : Malicious Code Trojan',\n    'Type 1 : Malicious Code Virus',\n    'Type 1 : Malicious Code Worm',\n    'Type 1 : Malicious Code Other',\n    'Type 1 : Web Site Defacement',\n    'Type 1 : Denial of Service',\n    'Type 1 : Critical Infrastructure Protection',\n    'Type 1 : Unauthorized Use',\n    'Type 1 : Information Compromise',\n    'Type 2 : Attempted Intrusion',\n    'Type 2 : Reconnaissance Activity',\n];\n","var listColumnsJSON = {};\nlistColumnsJSON = {\n    columnsDisplay: {\n        alertgroup: ['ID', 'Status', 'Subject', 'Created', 'Sources', 'Tags', 'Views', 'Open Tasks'],\n        alert: ['ID', 'Status', 'Subject', 'Created', 'Sources', 'Tags', 'Views'],\n        event: ['ID', 'Status', 'Subject', 'Created', 'Updated', 'Sources', 'Tags', 'Owner', 'Entries', 'Views', 'Open Tasks'],\n        incident: ['ID', 'DOE', 'Status', 'Owner', 'Subject', 'Occurred', 'Type', 'Tags', 'Sources'],\n        task: [ 'Entry Id', 'Body', 'Type', 'ID', 'Status', 'Owner', 'Updated'],\n        guide: ['ID', 'Subject', 'Applies To'],\n        intel: ['ID', 'Subject', 'Created', 'Updated', 'Source', 'Tags', 'Owner', 'Entries', 'Views'],\n        feed: ['ID', 'Status', 'Name', 'Uri', 'LastAttempt', 'LastArticle', 'Articles', 'Promotions'],\n        signature: ['ID', 'Name', 'Type', 'Status', 'Group', 'Description', 'Owner', 'Tag', 'Source', 'Updated'],\n        entity: ['ID', 'Value', 'Type', 'Entries']\n    },\n    columns: {\n        alertgroup: ['id', 'status', 'subject', 'created', 'source', 'tag', 'views', 'has_tasks'],\n        alert: ['id', 'status', 'subject', 'created', 'source', 'tag', 'views'],\n        event: ['id', 'status', 'subject', 'created', 'updated', 'source', 'tag', 'owner', 'entry_count', 'views', 'has_tasks'],\n        incident: ['id', 'doe_report_id', 'status', 'owner', 'subject', 'occurred', 'type', 'tag', 'source'],\n        task: [ 'id', 'body_plain', 'target.type', 'target.id', 'metadata.status', 'owner', 'updated'],\n        guide: ['id', 'subject', 'applies_to'],\n        intel: ['id', 'subject', 'created', 'updated', 'source', 'tag', 'owner', 'entry_count', 'views'],\n        feed: ['id', 'status', 'name', 'uri', 'last_attempt', 'last_article', 'article_count', 'promotions'],\n        signature: ['id', 'name', 'type', 'status', 'signature_group', 'description', 'owner', 'tag', 'source', 'updated'],\n        entity: ['id', 'value', 'type', 'entry_count']\n    },\n    columnsClassName: {\n        alertgroup: ['id', 'status', 'subject', 'created', 'source', 'tag', 'views', 'has-tasks'],\n        alert: ['id', 'status', 'subject', 'created', 'source', 'tag', 'views'],\n        event: ['id', 'status', 'subject', 'created', 'updated', 'source', 'tag', 'owner', 'entry_count', 'views', 'has-tasks'],\n        incident: ['id', 'doe_report_id', 'status', 'owner', 'subject', 'occurred', 'type', 'tag', 'source'],\n        task: ['id', 'body_plain', 'target_type', 'target_id', 'task_status', 'owner', 'updated'],\n        guide: ['id', 'subject', 'applies_to']   ,\n        intel: ['id', 'subject', 'created', 'updated', 'source', 'tag', 'owner', 'entry_count', 'views'],\n        feed: ['id', 'status', 'name', 'uri', 'last_attempt', 'last_article', 'article_count', 'promotions'],\n        signature: ['id', 'name', 'type', 'status', 'signature_group', 'description', 'owner', 'tag', 'source', 'updated'],\n        entity: ['id', 'value', 'type', 'entry_count']\n    }\n};\nexport default listColumnsJSON;\n","import React from \"react\";\nimport $ from \"jquery\";\nlet ButtonToolbar = require(\"react-bootstrap/lib/ButtonToolbar\");\nlet OverlayTrigger = require(\"react-bootstrap/lib/OverlayTrigger\");\nlet MenuItem = require(\"react-bootstrap/lib/MenuItem\");\nlet DropdownButton = require(\"react-bootstrap/lib/DropdownButton\");\nlet Popover = require(\"react-bootstrap/lib/Popover\");\nlet Link = require(\"react-router-dom\").Link;\n\nexport default class DetailDataStatus extends React.Component {\n  componentDidMount = () => {\n    //Adds open/close hot keys for alertgroup\n    if (this.props.type === \"alertgroup\") {\n      $(\"#list-view\").keydown(\n        function(event) {\n          //prevent from working when in input\n          if ($(\"input\").is(\":focus\")) {\n            return;\n          }\n          //check for character \"o\" for 79 or \"c\" for 67\n          if (this.props.status !== \"promoted\") {\n            if (\n              event.keyCode === 79 &&\n              (event.ctrlKey !== true && event.metaKey !== true)\n            ) {\n              this.statusAjax(\"open\");\n            } else if (\n              event.keyCode === 67 &&\n              (event.ctrlKey !== true && event.metaKey !== true)\n            ) {\n              this.statusAjax(\"closed\");\n            }\n          }\n        }.bind(this)\n      );\n    }\n  };\n\n  componentWillUnmount = () => {\n    $(\"#list-view\").unbind(\"keydown\");\n  };\n\n  /*eventStatusToggle: function () {\n        if (this.props.status == 'open') {\n            this.statusAjax('closed');\n        } else if (this.props.status == 'closed') {\n            this.statusAjax('open');\n        }\n    },*/\n  trackAll = () => {\n    this.statusAjax(\"tracked\");\n  };\n\n  untrackAll = () => {\n    this.statusAjax(\"untracked\");\n  };\n\n  activeAll = () => {\n    this.statusAjax(\"active\");\n  };\n  pauseAll = () => {\n    this.statusAjax(\"paused\");\n  };\n\n  closeAll = () => {\n    this.statusAjax(\"closed\");\n  };\n\n  openAll = () => {\n    this.statusAjax(\"open\");\n  };\n\n  enableAll = () => {\n    this.statusAjax(\"enabled\");\n  };\n\n  disableAll = () => {\n    this.statusAjax(\"disabled\");\n  };\n\n  statusAjax = newStatus => {\n    console.log(newStatus);\n    let json = { status: newStatus };\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"success status change to: \" + data);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to change status\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    let buttonStyle = \"\";\n    let open = \"\";\n    let closed = \"\";\n    let promoted = \"\";\n    let title = \"\";\n    let classStatus = \"\";\n    let href;\n    if (\n      this.props.status === \"open\" ||\n      this.props.status === \"disabled\" ||\n      this.props.status === \"untracked\"\n    ) {\n      buttonStyle = \"danger\";\n      classStatus = \"alertgroup_open\";\n    } else if (\n      this.props.status === \"closed\" ||\n      this.props.status === \"enabled\" ||\n      this.props.status === \"tracked\"\n    ) {\n      buttonStyle = \"success\";\n      classStatus = \"alertgroup_closed\";\n    } else if (this.props.status === \"promoted\") {\n      buttonStyle = \"default\";\n      classStatus = \"alertgroup_promoted\";\n    }\n\n    if (this.props.type === \"alertgroup\") {\n      open = this.props.data.open_count;\n      closed = this.props.data.closed_count;\n      promoted = this.props.data.promoted_count;\n      title = open + \" / \" + closed + \" / \" + promoted;\n    }\n\n    if (this.props.type === \"event\") {\n      href = \"/incident/\" + this.props.data.promotion_id;\n    } else if (this.props.type === \"intel\") {\n      href = \"/product/\" + this.props.data.promotion_id;\n    } else if (this.props.type === \"dispatch\") {\n      href = \"/intel/\" + this.props.data.promotion_id;\n    } \n\n    if (this.props.type === \"guide\" ) { //|| this.props.type === \"intel\") {\n      return <div />;\n    } else if (this.props.type === \"alertgroup\") {\n      return (\n        <ButtonToolbar>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Popover id={this.props.id}>open/closed/promoted alerts</Popover>\n            }\n          >\n            <DropdownButton\n              bsSize=\"xsmall\"\n              bsStyle={buttonStyle}\n              title={title}\n              id=\"dropdown\"\n              className={classStatus}\n            >\n              <MenuItem eventKey=\"1\" onClick={this.openAll} bsSize=\"xsmall\">\n                <b>Open</b> All Alerts\n              </MenuItem>\n              <MenuItem eventKey=\"2\" onClick={this.closeAll}>\n                <b>Close</b> All Alerts\n              </MenuItem>\n            </DropdownButton>\n          </OverlayTrigger>\n        </ButtonToolbar>\n      );\n    } else if (this.props.type === \"incident\") {\n      return (\n        <DropdownButton\n          bsSize=\"xsmall\"\n          bsStyle={buttonStyle}\n          id=\"event_status\"\n          className={classStatus}\n          style={{ fontSize: \"14px\" }}\n          title={this.props.status}\n        >\n          <MenuItem eventKey=\"1\" onClick={this.openAll}>\n            Open Incident\n          </MenuItem>\n          <MenuItem eventKey=\"2\" onClick={this.closeAll}>\n            Close Incident\n          </MenuItem>\n        </DropdownButton>\n      );\n    } else if (this.props.type === \"feed\") {\n      return (\n        <DropdownButton\n          bsSize=\"xsmall\"\n          bsStyle={buttonStyle}\n          id=\"feed_status\"\n          className={classStatus}\n          style={{ fontSize: \"14px\" }}\n          title={this.props.status}\n        >\n          <MenuItem eventKey=\"1\" onClick={this.activeAll}>\n            Active Feed\n          </MenuItem>\n          <MenuItem eventKey=\"2\" onClick={this.pauseAll}>\n            Pause Feed\n          </MenuItem>\n        </DropdownButton>\n      );\n    } else if (this.props.type === \"signature\") {\n      return (\n        <DropdownButton\n          bsSize=\"xsmall\"\n          bsStyle={buttonStyle}\n          id=\"event_status\"\n          className={classStatus}\n          style={{ fontSize: \"14px\" }}\n          title={this.props.status}\n        >\n          <MenuItem eventKey=\"1\" onClick={this.enableAll}>\n            Enable Signature\n          </MenuItem>\n          <MenuItem eventKey=\"2\" onClick={this.disableAll}>\n            Disable Signature\n          </MenuItem>\n        </DropdownButton>\n      );\n    } else if (this.props.type === \"entity\") {\n      return (\n        <DropdownButton\n          bsSize=\"xsmall\"\n          bsStyle={buttonStyle}\n          id=\"event_status\"\n          className={classStatus}\n          style={{ fontSize: \"14px\" }}\n          title={this.props.status}\n        >\n          <MenuItem eventKey=\"1\" onClick={this.trackAll}>\n            Track\n          </MenuItem>\n          <MenuItem eventKey=\"2\" onClick={this.untrackAll}>\n            Untracked\n          </MenuItem>\n        </DropdownButton>\n      );\n    } else {\n      return (\n        <div>\n          {this.props.status === \"promoted\" ? (\n            <Link to={href} role=\"button\" className={\"btn btn-warning\"}>\n              {this.props.status}\n            </Link>\n          ) : (\n            <DropdownButton\n              bsSize=\"xsmall\"\n              bsStyle={buttonStyle}\n              id=\"event_status\"\n              className={classStatus}\n              style={{ fontSize: \"14px\" }}\n              title={this.props.status}\n            >\n              <MenuItem eventKey=\"1\" onClick={this.openAll}>\n                Open\n              </MenuItem>\n              <MenuItem eventKey=\"2\" onClick={this.closeAll}>\n                Close\n              </MenuItem>\n            </DropdownButton>\n          )}\n        </div>\n      );\n    }\n  };\n}\n","import React from \"react\";\n\nimport $ from \"jquery\";\nlet Button = require(\"react-bootstrap/lib/Button.js\");\n\nexport default class Promote extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            newURL: null,\n            newType: null\n        };\n    }\n\n    componentDidMount = () => {\n        if (this.props.type === \"alert\") {\n            this.setState({ newType: \"Event\" });\n            this.setState({ newURL: \"event\" });\n        } else if (this.props.type === \"event\") {\n            this.setState({ newType: \"Incident\" });\n            this.setState({ newURL: \"incident\" });\n        } else if (this.props.type === \"dispatch\") {\n            this.setState({ newType: \"Intel\" });\n            this.setState({ newURL: \"intel\" });\n        } else if (this.props.type === \"intel\") {\n            this.setState({ newType: \"Product\" });\n            this.setState({ newURL: \"product\" });\n        }\n    };\n\n    promote = () => {\n        let data = JSON.stringify({ promote: \"new\" });\n        $.ajax({\n            type: \"put\",\n            url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n            data: data,\n            contentType: \"application/json; charset=UTF-8\",\n            success: function (data) {\n                console.log(\"successfully promoted\");\n                window.location.assign(\"#/\" + this.state.newURL + \"/\" + data.pid);\n            }.bind(this),\n            error: function (data) {\n                this.props.errorToggle(\"error\", \"Failed to promote\", data);\n            }.bind(this)\n        });\n    };\n\n    render = () => {\n        return (\n            <Button\n                bsStyle=\"warning\"\n                eventkey=\"1\"\n                bsSize=\"xsmall\"\n                onClick={this.promote}\n            >\n                <img src=\"/images/megaphone.png\" alt=\"\" />\n                <span>Promote to {this.state.newType}</span>\n            </Button>\n        );\n    };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, MenuItem, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport * as SessionStorage from \"../utils/session_storage\";\n\nexport default class Marker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isMarked: false\n    };\n\n    this.removeMarkedItemsHandler = this.removeMarkedItemsHandler.bind(this);\n    this.getMarkedItemsHandler = this.getMarkedItemsHandler.bind(this);\n    this.setMarkedItemsHandler = this.setMarkedItemsHandler.bind(this);\n    this.getSelectedAlerts = this.getSelectedAlerts.bind(this);\n  }\n\n  componentWillMount() {\n    this.getMarkedItemsHandler();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getMarkedItemsHandler();\n    if (nextProps.isAlert) {\n      //set marked to false if alert since we can't predict if new ones are selected\n      this.setState({ isMarked: false });\n    }\n  }\n\n  render() {\n    if (this.props.type === \"entry\") {\n      return (\n        <MenuItem\n          onClick={\n            this.state.isMarked\n              ? this.removeMarkedItemsHandler\n              : this.setMarkedItemsHandler\n          }\n        >\n          <i\n            style={{ color: `${this.state.isMarked ? \"green\" : \"\"} ` }}\n            className={`fa fa${this.state.isMarked ? \"-check\" : \"\"}-square-o`}\n            aria-hidden=\"true\"\n          />\n          {this.state.isMarked ? <span>Marked</span> : <span>Mark</span>}\n        </MenuItem>\n      );\n    } else {\n      return (\n        <OverlayTrigger\n          placement=\"top\"\n          overlay={\n            <Tooltip id=\"mark_tooltip\">\n              Mark selected{\" \"}\n              {this.props.isAlert ? <span>alerts</span> : this.props.type}\n            </Tooltip>\n          }\n        >\n          <Button\n            bsSize=\"xsmall\"\n            onClick={\n              this.state.isMarked\n                ? this.removeMarkedItemsHandler\n                : this.setMarkedItemsHandler\n            }\n          >\n            <i\n              style={{ color: `${this.state.isMarked ? \"green\" : \"\"} ` }}\n              className={`fa fa${this.state.isMarked ? \"-check\" : \"\"}-square-o`}\n              aria-hidden=\"true\"\n            />\n            {this.props.isAlert ? <span>Mark selected</span> : null}\n\n            {/* { this.state.isMarked ? <span>Marked</span> : <span>Mark</span> }*/}\n          </Button>\n        </OverlayTrigger>\n      );\n    }\n  }\n\n  getMarkedItemsHandler() {\n    let markedItems = getMarkedItems();\n    let isMarked = false;\n\n    if (markedItems) {\n      for (let key of markedItems) {\n        if (key.id === this.props.id && key.type === this.props.type) {\n          isMarked = true;\n          break;\n        }\n      }\n    }\n    this.setState({ isMarked: isMarked });\n  }\n\n  removeMarkedItemsHandler() {\n    if (this.props.isAlert) {\n      let selectedAlerts = this.getSelectedAlerts();\n      for (let i = 0; i < selectedAlerts.length; i++) {\n        removeMarkedItems(\"alert\", selectedAlerts[i]);\n      }\n    } else {\n      removeMarkedItems(this.props.type, this.props.id);\n    }\n    this.setState({ isMarked: false });\n  }\n\n  setMarkedItemsHandler() {\n    if (this.props.isAlert) {\n      //parse alerts then iterate through them to add to marking list\n      let selectedAlerts = this.getSelectedAlerts();\n      for (let i = 0; i < selectedAlerts.length; i++) {\n        setMarkedItems(\"alert\", selectedAlerts[i], this.props.string);\n      }\n    } else {\n      setMarkedItems(this.props.type, this.props.id, this.props.string);\n    }\n    this.setState({ isMarked: true });\n  }\n\n  getSelectedAlerts() {\n    return this.props.alertsSelected.map(alert => alert.id);\n  }\n}\n\nexport const removeMarkedItems = (type, id) => {\n  let currentMarked = getMarkedItems();\n\n  if (currentMarked) {\n    for (let i = 0; i < currentMarked.length; i++) {\n      if (currentMarked[i].type === type && currentMarked[i].id === id) {\n        currentMarked.splice(i, 1);\n        break;\n      }\n    }\n\n    SessionStorage.setLocalStorage(\"marked\", JSON.stringify(currentMarked));\n  }\n};\n\nexport const getMarkedItems = () => {\n  let markedItems = SessionStorage.getLocalStorage(\"marked\");\n  if (markedItems) {\n    markedItems = JSON.parse(markedItems);\n    return markedItems;\n  }\n};\n\nexport const setMarkedItems = (type, id, string) => {\n  let nextMarked = [];\n  let currentMarked = getMarkedItems();\n\n  if (currentMarked) {\n    for (let key of currentMarked) {\n      if (key.type !== type || key.id !== id) {\n        nextMarked.push(key);\n      }\n    }\n  }\n\n  nextMarked.push({ id: id, type: type, subject: string.substring(0, 120) });\n  SessionStorage.setLocalStorage(\"marked\", JSON.stringify(nextMarked));\n};\n\nMarker.propTypes = {\n  isMarked: PropTypes.bool\n};\n\nMarker.defaultProps = {\n  isMarked: false\n};\n","import React from \"react\";\nimport $ from \"jquery\";\nimport SelectedEntry from \"../detail/selected_entry.js\";\nimport Inspector from \"react-inspector\";\nimport Button from \"react-bootstrap/lib/Button\";\nimport Tabs from \"react-bootstrap/lib/Tabs\";\nimport Tab from \"react-bootstrap/lib/Tab\";\nimport AddEntry from \"../components/add_entry\";\nimport Draggable from \"react-draggable\";\nimport DetailDataStatus from \"../components/detail_data_status\";\nimport { Link } from \"react-router-dom\";\nimport Marker from \"../components/marker\";\nimport Frame from \"react-frame-component\";\nimport { get_data } from \"../utils/XHR\";\nimport ReactTable from \"react-table\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { getEntityPopupColumns } from \"../list/tableConfig\";\n\nlet startX;\nlet startY;\nlet startWidth;\nlet startHeight;\n\nexport default class EntityDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    let tabs = [];\n    let processedIdsArray = [];\n    let entityHeight = \"100%\"; //test\n    let entityWidthint = 700;\n    let entityWidth = entityWidthint + \"px\";\n    let entityMaxHeight = \"70vh\";\n    if (this.props.fullScreen === true) {\n      entityHeight = \"95vh\";\n      entityWidth = \"95%\";\n      entityMaxHeight = \"95vh\";\n    }\n    this.state = {\n      entityData: null,\n      entityid: this.props.entityid,\n      entityHeight: entityHeight,\n      entityWidth: entityWidth,\n      entityWidthint: entityWidthint,\n      entityMaxHeight: entityMaxHeight,\n      tabs: tabs,\n      initialLoad: false,\n      processedIds: processedIdsArray,\n      valueClicked: \"\",\n      defaultEntityOffset: this.props.entityoffset,\n      entityobj: this.props.entityobj,\n      height: null,\n      isMounted: false\n    };\n  }\n\n  componentWillMount = () => {};\n\n  onLoad = () => {\n    if (\n      document.getElementById(\"iframe_\" + this.props.id) !== undefined &&\n      document.getElementById(\"iframe_\" + this.props.id) !== null\n    ) {\n      if (\n        document.getElementById(\"iframe_\" + this.props.id).contentDocument\n          .readyState === \"complete\"\n      ) {\n        let ifr = $(\"#iframe_\" + this.props.id);\n        let ifrContents = $(ifr).contents();\n        let ifrContentsHead = $(ifrContents).find(\"head\");\n        if (ifrContentsHead) {\n          if (!$(ifrContentsHead).find(\"link\")) {\n            ifrContentsHead.append(\n              $(\"<link/>\", {\n                rel: \"stylesheet\",\n                href: \"css/sandbox.css\",\n                type: \"text/css\"\n              })\n            );\n          }\n        }\n        setTimeout(\n          function() {\n            if (\n              document.getElementById(\"iframe_\" + this.props.id) !== undefined\n            ) {\n              document\n                .getElementById(\"iframe_\" + this.props.id)\n                .contentWindow.requestAnimationFrame(\n                  function() {\n                    let newheight;\n                    newheight = document.getElementById(\n                      \"iframe_\" + this.props.id\n                    ).contentWindow.document.body.scrollHeight;\n                    newheight = newheight + \"px\";\n                    if (this.state.height !== newheight) {\n                      this.setState({ height: newheight });\n                    }\n                  }.bind(this)\n                );\n            }\n          }.bind(this),\n          250\n        );\n        //}\n      } else {\n        setTimeout(this.onLoad, 0);\n      }\n    }\n  };\n\n  componentDidMount = () => {\n    this.setState({ isMounted: true });\n    let currentTabArray = this.state.tabs;\n    let valueClicked = this.props.entityvalue;\n    if (this.props.entitytype !== \"source\") {\n      if (this.state.entityid === undefined || isNaN(this.state.entityid)) {\n        $.ajax({\n          type: \"GET\",\n          url: \"scot/api/v2/\" + this.props.entitytype + \"/byname\",\n          data: { name: valueClicked },\n          success: function(result) {\n            let entityid = result.id;\n            if (this.state.isMounted) {\n              this.setState({ entityid: entityid });\n              $.ajax({\n                type: \"GET\",\n                url: \"scot/api/v2/\" + this.props.entitytype + \"/\" + entityid,\n                success: function(result) {\n                  //this.setState({entityData:result})\n                  let newTab = {\n                    data: result,\n                    entityid: entityid,\n                    entitytype: this.props.entitytype,\n                    valueClicked: result.value\n                  };\n                  currentTabArray.push(newTab);\n                  if (this.state.isMounted) {\n                    let entityidsarray = [];\n                    entityidsarray.push(entityid);\n                    this.setState({\n                      tabs: currentTabArray,\n                      currentKey: entityid,\n                      initialLoad: true,\n                      processedIds: entityidsarray\n                    });\n                    this.props.createCallback(\n                      this.props.entityid,\n                      this.updated\n                    );\n                  }\n                }.bind(this),\n                error: function(data) {\n                  this.props.errorToggle(\n                    \"failed to get entity detail information\",\n                    data\n                  );\n                }.bind(this)\n              });\n            }\n          }.bind(this),\n          error: function(data) {\n            this.props.errorToggle(\n              \"failed to get entity detail id information \",\n              data\n            );\n          }.bind(this)\n        });\n      } else {\n        let id = this.state.entityid;\n        if (!Array.isArray(id)) {\n          id = [parseInt(id, 10)];\n        }\n\n        for (let i = 0; i < id.length; i++) {\n          $.ajax({\n            type: \"GET\",\n            url: \"scot/api/v2/\" + this.props.entitytype + \"/\" + id[i],\n            success: function(result) {\n              //this.setState({entityData:result})\n              let newTab = {\n                data: result,\n                entityid: result.id,\n                entitytype: this.props.entitytype,\n                valueClicked: result.value\n              };\n              currentTabArray.push(newTab);\n              if (this.state.isMounted) {\n                let entityidsarray = [];\n                entityidsarray.push(result.id);\n                this.setState({\n                  tabs: currentTabArray,\n                  currentKey: result.id,\n                  initialLoad: true,\n                  processedIds: entityidsarray\n                });\n                this.props.createCallback(this.props.entityid, this.updated);\n              }\n            }.bind(this),\n            error: function(data) {\n              this.props.errorToggle(\n                \"failed to get entity detail information\",\n                data\n              );\n            }.bind(this)\n          });\n        }\n      }\n    } else {\n      let newTab = {\n        data: this.props.data,\n        entityid: this.props.entityid,\n        entitytype: this.props.entitytype,\n        valueClicked: this.props.entitytype\n      };\n      currentTabArray.push(newTab);\n      // if (this.state.isMounted) {\n      let entityidsarray = [];\n      entityidsarray.push(this.props.entityid);\n      this.setState({\n        tabs: currentTabArray,\n        currentKey: parseInt(this.props.entityid, 10),\n        initialLoad: true,\n        processedIds: entityidsarray\n      });\n      this.props.createCallback(this.props.entityid, this.updated);\n    }\n    //Esc key closes popup\n    function escHandler(event) {\n      //prevent from working when in input\n      if ($(\"input\").is(\":focus\")) {\n        return;\n      }\n      if ($(\"#main-search-results\")[0] !== undefined) {\n        return;\n      } //close search results before closing entity div\n      //check for esc with keyCode\n      if (event.keyCode === 27) {\n        this.props.flairToolbarOff();\n        event.preventDefault();\n      }\n    }\n\n    $(document).keydown(escHandler.bind(this));\n    this.containerHeightAdjust();\n    window.addEventListener(\"resize\", this.containerHeightAdjust);\n    this.onLoad();\n\n    $(\"iframe\").each(function(index, ifr) {\n      //requestAnimationFrame waits for the frame to be rendered (allowing the iframe to fully render before excuting the next bit of code!!!\n      ifr.contentWindow.requestAnimationFrame(function() {\n        if (ifr.contentDocument != null) {\n          let ifrContents = $(ifr).contents();\n          //This makes all href point to blank so they don't reload the iframe\n          $(ifr.contentDocument.body)\n            .find(\"a\")\n            .attr(\"target\", \"_blank\");\n          //Copies href to a new attribute, url, before we make href an anchor (so it doesn't go anywhere when clicked)\n          ifrContents.find(\"a\").each(function(index, a) {\n            let url = $(a).attr(\"href\");\n            $(a).attr(\"url\", url);\n          });\n        }\n      });\n    });\n  };\n\n  componentWillUnmount = () => {\n    this.setState({ isMounted: false });\n    //removes escHandler bind\n    $(document).off(\"keydown\");\n  };\n\n  componentWillReceiveProps = nextProps => {\n    this.onLoad();\n    let checkForInitialLoadComplete = {\n      checkForInitialLoadComplete: function() {\n        let addNewEntity = {\n          //Initializing Function for adding an entry to be used later.\n          addNewEntity: function() {\n            let currentTabArray = this.state.tabs;\n            if (nextProps.entitytype !== \"source\") {\n              if (\n                nextProps.entityid === undefined ||\n                isNaN(nextProps.entityid)\n              ) {\n                $.ajax({\n                  type: \"GET\",\n                  url: \"scot/api/v2/\" + nextProps.entitytype + \"/byname\",\n                  data: { name: nextProps.entityvalue },\n                  success: function(result) {\n                    let entityid = result.id;\n                    if (this.state.isMounted) {\n                      this.setState({ entityid: entityid });\n                      $.ajax({\n                        type: \"GET\",\n                        url:\n                          \"scot/api/v2/\" +\n                          nextProps.entitytype +\n                          \"/\" +\n                          entityid,\n                        success: function(result) {\n                          let newTab = {\n                            data: result,\n                            entityid: entityid,\n                            entitytype: nextProps.entitytype,\n                            valueClicked: nextProps.entityvalue\n                          };\n                          currentTabArray.push(newTab);\n                          if (this.state.isMounted) {\n                            this.setState({\n                              tabs: currentTabArray,\n                              currentKey: nextProps.entityid\n                            });\n                            this.props.createCallback(\n                              nextProps.entityid,\n                              this.updated\n                            );\n                          }\n                        }.bind(this),\n                        error: function(data) {\n                          this.props.errorToggle(\n                            \"failed to get entity detail information\",\n                            data\n                          );\n                        }.bind(this)\n                      });\n                    }\n                  }.bind(this),\n                  error: function(data) {\n                    this.props.errorToggle(\n                      \"failed to get entity id detail information\",\n                      data\n                    );\n                  }.bind(this)\n                });\n              } else {\n                $.ajax({\n                  type: \"GET\",\n                  url:\n                    \"scot/api/v2/\" +\n                    nextProps.entitytype +\n                    \"/\" +\n                    nextProps.entityid,\n                  success: function(result) {\n                    let newTab = {\n                      data: result,\n                      entityid: nextProps.entityid,\n                      entitytype: nextProps.entitytype,\n                      valueClicked: nextProps.entityvalue\n                    };\n                    currentTabArray.push(newTab);\n                    if (this.state.isMounted) {\n                      this.setState({\n                        tabs: currentTabArray,\n                        currentKey: nextProps.entityid\n                      });\n                      this.props.createCallback(\n                        nextProps.entityid,\n                        this.updated\n                      );\n                    }\n                  }.bind(this),\n                  error: function(data) {\n                    this.props.errorToggle(\n                      \"failed to get entity detail information\",\n                      data\n                    );\n                  }.bind(this)\n                });\n              }\n            } else {\n              let newTab = {\n                data: nextProps.data,\n                entityid: nextProps.entityid,\n                entitytype: nextProps.entitytype,\n                valueClicked: nextProps.entitytype\n              };\n              currentTabArray.push(newTab);\n              // if (this.state.isMounted) {\n              let entityidsarray = [];\n              entityidsarray.push(nextProps.entityid);\n              this.setState({\n                tabs: currentTabArray,\n                currentKey: parseInt(nextProps.entityid, 10),\n                initialLoad: true,\n                processedIds: entityidsarray\n              });\n              this.props.createCallback(nextProps.entityid, this.updated);\n              this.props.watcher();\n            }\n          }.bind(this)\n        };\n        if (this.state.initialLoad === false) {\n          setTimeout(\n            checkForInitialLoadComplete.checkForInitialLoadComplete,\n            50\n          );\n        } else {\n          if (nextProps !== undefined) {\n            //TODO Fix next conditional for undefined that prevents multiple calls for the same ID at load time on a nested entity\n            if (\n              nextProps.entitytype != null &&\n              nextProps.entityid !== undefined\n            ) {\n              let nextPropsEntityIdInt = parseInt(nextProps.entityid, 10);\n              for (let i = 0; i < this.state.tabs.length; i++) {\n                if (\n                  nextPropsEntityIdInt === this.state.tabs[i].entityid ||\n                  (this.state.tabs[i].entitytype === \"guide\" &&\n                    nextProps.entitytype === \"guide\")\n                ) {\n                  if (this.state.isMounted) {\n                    this.setState({ currentKey: nextPropsEntityIdInt });\n                  }\n                  return;\n                } else {\n                  let array = this.state.processedIds;\n                  let addEntity = true;\n                  for (let i = 0; i < array.length; i++) {\n                    if (array[i] === nextPropsEntityIdInt) {\n                      // Check if entity is already being processed so we don't show it twice\n                      addEntity = false;\n                    }\n                  }\n                  if (addEntity) {\n                    addNewEntity.addNewEntity();\n                    array.push(nextPropsEntityIdInt);\n                    this.setState({ processedIds: array });\n                  }\n                }\n              }\n            }\n          }\n        }\n      }.bind(this)\n    };\n    checkForInitialLoadComplete.checkForInitialLoadComplete();\n    this.containerHeightAdjust();\n  };\n\n  updated = () => {\n    let currentTabArray = this.state.tabs;\n    // eslint-disable-line\n    let valueClicked = this.props.entityvalue;\n    for (let j = 0; j < currentTabArray.length; j++) {\n      //TODO: Ask Nick\n      // if ( activemqid == currentTabArray[j].entityid ) {\n      let currentTabArrayIndex = j;\n      $.ajax({\n        type: \"GET\",\n        url:\n          \"scot/api/v2/\" +\n          this.props.entitytype +\n          \"/\" +\n          currentTabArray[j].entityid,\n        success: function(result) {\n          //this.setState({entityData:result})\n          let newTab = {\n            data: result,\n            entityid: result.id,\n            entitytype: this.props.entitytype,\n            valueClicked: result.value\n          };\n          currentTabArray[currentTabArrayIndex] = newTab;\n          if (this.state.isMounted) {\n            let entityidsarray = [];\n            entityidsarray.push(result.id);\n            this.setState({\n              tabs: currentTabArray,\n              currentKey: result.id,\n              initialLoad: true,\n              processedIds: entityidsarray\n            });\n          }\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\n            \"failed to get updated entity detail information\",\n            data\n          );\n        }.bind(this)\n      });\n    }\n  };\n\n  checkFlairHover = ifr => {\n    if (ifr.contentDocument != null) {\n      $(ifr)\n        .contents()\n        .find(\"a\")\n        .each(\n          function(index, a) {\n            if ($(a).css(\"color\") === \"rgb(255, 0, 0)\") {\n              $(a).data(\"state\", \"down\");\n            } else if ($(a).data(\"state\") === \"down\") {\n              $(a).data(\"state\", \"up\");\n              let url = $(a).attr(\"url\");\n              this.props.linkWarningToggle(url);\n            }\n          }.bind(this)\n        );\n    }\n  };\n\n  initDrag = e => {\n    //remove the entityPopUpMaxSizeDefault class so it can be resized.\n    if ($(\"#dragme\").hasClass(\"entityPopUpMaxSizeDefault\")) {\n      let height = $(\"#dragme\").height() + \"px\";\n      $(\"#dragme\").css(\"height\", height);\n      $(\"#dragme\").removeClass(\"entityPopUpMaxSizeDefault\");\n    }\n    let elem = document.getElementById(\"dragme\");\n    startX = e.clientX;\n    startY = e.clientY;\n    startWidth = parseInt(\n      document.defaultView.getComputedStyle(elem).width,\n      10\n    );\n    startHeight = parseInt(\n      document.defaultView.getComputedStyle(elem).height,\n      10\n    );\n    document.documentElement.addEventListener(\"mousemove\", this.doDrag, false);\n    document.documentElement.addEventListener(\"mouseup\", this.stopDrag, false);\n    this.blockiFrameMouseEvent();\n  };\n\n  doDrag = e => {\n    let elem = document.getElementById(\"dragme\");\n    console.log(`elem.style.width before: ${elem.style.width}`);\n    console.log(`e.clientX before: ${e.clientX}`);\n    console.log(`startX before: ${startX}`);\n    console.log(`startwidth before: ${startWidth}`);\n    if (startWidth + e.clientX - startX > 586) {\n      elem.style.width = startWidth + e.clientX - startX + \"px\";\n    }\n    if (startHeight + e.clientY - startY > 386) {\n      elem.style.height = startHeight + e.clientY - startY + \"px\";\n    }\n  };\n\n  stopDrag = e => {\n    document.documentElement.removeEventListener(\n      \"mousemove\",\n      this.doDrag,\n      false\n    );\n    document.documentElement.removeEventListener(\n      \"mouseup\",\n      this.stopDrag,\n      false\n    );\n    this.allowiFrameMouseEvent();\n  };\n\n  moveDivInit = e => {\n    document.documentElement.addEventListener(\n      \"mouseup\",\n      this.moveDivStop,\n      false\n    );\n    this.blockiFrameMouseEvent();\n  };\n\n  moveDivStop = e => {\n    document.documentElement.removeEventListener(\n      \"mouseup\",\n      this.moveDivStop,\n      false\n    );\n    this.allowiFrameMouseEvent();\n  };\n\n  blockiFrameMouseEvent = () => {\n    $(\"iframe\").each(function(index, ifr) {\n      $(ifr).addClass(\"pointerEventsOff\");\n    });\n  };\n\n  allowiFrameMouseEvent = () => {\n    $(\"iframe\").each(function(index, ifr) {\n      $(ifr).removeClass(\"pointerEventsOff\");\n    });\n  };\n\n  handleSelectTab = key => {\n    this.setState({ currentKey: key });\n  };\n\n  positionRightBoundsCheck = e => {\n    if (!e) {\n      return (\n        $(document).width() -\n        this.state.defaultEntityOffset.left -\n        this.state.entityWidthint\n      );\n    } else {\n      return (\n        $(document).width() -\n        (this.state.defaultEntityOffset.left + e) -\n        this.state.entityWidthint\n      );\n    }\n  };\n\n  containerHeightAdjust = () => {\n    //only run this if we're in /#/entity and not as a popup\n    if (this.props.fullScreen === true) {\n      let scrollHeight;\n      if ($(\"#list-view-container\")[0]) {\n        scrollHeight =\n          $(window).height() -\n          $(\"#list-view-container\").height() -\n          $(\"#header\").height() -\n          70;\n        scrollHeight = scrollHeight + \"px\";\n      } else {\n        scrollHeight = $(window).height() - $(\"#header\").height() - 70;\n        scrollHeight = scrollHeight + \"px\";\n      }\n      //$('#detail-container').css('height',scrollHeight);\n      if (this.state.isMounted) {\n        this.setState({ height: scrollHeight });\n      }\n    }\n  };\n\n  render = () => {\n    let defaultOffsetY;\n    let defaultOffsetX;\n    let tabsArr = [];\n    let DragmeClass =\n      \"box react-draggable entityPopUp entityPopUpMaxSizeDefault\";\n    if (this.props.fullScreen === true || $(\"react-draggable-dragged\")) {\n      //Don't readd entityPopUpMaxSizeDefault if full screen or if the box has been dragged\n      DragmeClass = \"box react-draggable entityPopUp\";\n    }\n    if (this.props.fullScreen === true) {\n      DragmeClass = DragmeClass + \" height100percent\";\n    }\n    for (let i = 0; i < this.state.tabs.length; i++) {\n      let z = i + 1;\n      let title = \"tab\";\n      if (this.state.tabs[i].entitytype === \"guide\") {\n        title = \"guide\";\n      } else if (this.state.tabs[i].entitytype === \"source\") {\n        title = \"source\";\n      } else {\n        if (this.state.tabs[i].valueClicked !== undefined) {\n          title = this.state.tabs[i].valueClicked.slice(0, 15);\n        } else {\n          title = \"\";\n        }\n      }\n      tabsArr.push(\n        <Tab\n          className=\"tab-content\"\n          eventKey={this.state.tabs[i].entityid}\n          title={title}\n        >\n          <TabContents\n            addFlair={this.props.addFlair}\n            data={this.state.tabs[i].data}\n            form={this.props.form}\n            type={this.props.type}\n            id={this.props.id}\n            entityid={this.state.tabs[i].entityid}\n            entitytype={this.state.tabs[i].entitytype}\n            valueClicked={this.state.tabs[i].valueClicked}\n            i={z}\n            key={z}\n            errorToggle={this.props.errorToggle}\n            linkWarningToggle={this.props.linkWarningToggle}\n            createCallback={this.props.createCallback}\n            removeCallback={this.props.removeCallback}\n          />\n        </Tab>\n      );\n    }\n    if (this.state.defaultEntityOffset && this.state.entityobj) {\n      let positionRightBoundsValue = this.positionRightBoundsCheck();\n      if (this.positionRightBoundsCheck($(this.state.entityobj).width()) < 0) {\n        defaultOffsetX =\n          this.state.defaultEntityOffset.left - this.state.entityWidthint;\n      } else {\n        defaultOffsetX =\n          this.state.defaultEntityOffset.left + $(this.state.entityobj).width();\n      }\n    } else {\n      defaultOffsetY = 50;\n      defaultOffsetX = 0;\n    }\n    if (this.props.fullScreen === true) {\n      //entity detail is full screen mode\n      return (\n        <div\n          id=\"popup-flex-container\"\n          style={{ height: this.state.height }}\n          className={\"entity-full-screen\"}\n        >\n          <div\n            id=\"entity_detail_container\"\n            style={{ flexFlow: \"column\", display: \"flex\", width: \"100%\" }}\n          >\n            <Tabs\n              className=\"tab-content\"\n              defaultActiveKey={this.props.entityid}\n              activeKey={this.state.currentKey}\n              onSelect={this.handleSelectTab}\n              bsStyle=\"pills\"\n              animation={false}\n            >\n              {tabsArr}\n            </Tabs>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <Draggable handle=\"#handle\" onMouseDown={this.moveDivInit}>\n          <div\n            id=\"dragme\"\n            className={DragmeClass}\n            style={{\n              width: this.state.entityWidth,\n              left: defaultOffsetX,\n              maxHeight: \"90vh\"\n            }}\n          >\n            <div\n              id=\"popup-flex-container\"\n              style={{ height: \"100%\", display: \"flex\", flexFlow: \"row\" }}\n            >\n              <div\n                id=\"entity_detail_container\"\n                style={{ flexFlow: \"column\", display: \"flex\", width: \"100%\" }}\n              >\n                <div\n                  id=\"handle\"\n                  style={{\n                    width: \"100%\",\n                    background: \"#292929\",\n                    color: \"white\",\n                    fontWeight: \"900\",\n                    fontSize: \"large\",\n                    textAlign: \"center\",\n                    cursor: \"move\",\n                    flex: \"0 1 auto\"\n                  }}\n                >\n                  <div>\n                    <span className=\"pull-left\" style={{ paddingLeft: \"5px\" }}>\n                      <i className=\"fa fa-arrows\" aria-hidden=\"true\" />\n                    </span>\n                    <span\n                      className=\"pull-right\"\n                      style={{ cursor: \"pointer\", paddingRight: \"5px\" }}\n                    >\n                      <i\n                        className=\"fa fa-times\"\n                        style={{ color: \"red\" }}\n                        onClick={this.props.flairToolbarOff}\n                      />\n                    </span>\n                  </div>\n                </div>\n                <Tabs\n                  className=\"tab-content\"\n                  defaultActiveKey={this.props.entityid}\n                  activeKey={this.state.currentKey}\n                  onSelect={this.handleSelectTab}\n                  bsStyle=\"pills\"\n                  animation={false}\n                >\n                  {tabsArr}\n                </Tabs>\n              </div>\n              <div\n                id=\"sidebar\"\n                onMouseDown={this.initDrag}\n                style={{\n                  flex: \"0 1 auto\",\n                  backgroundColor: \"black\",\n                  borderTop: \"2px solid black\",\n                  borderBottom: \"2px solid black\",\n                  cursor: \"nwse-resize\",\n                  overflow: \"hidden\",\n                  width: \"5px\"\n                }}\n              />\n            </div>\n            <div\n              id=\"footer\"\n              onMouseDown={this.initDrag}\n              style={{\n                display: \"block\",\n                height: \"5px\",\n                backgroundColor: \"black\",\n                borderTop: \"2px solid black\",\n                borderBottom: \"2px solid black\",\n                cursor: \"nwse-resize\",\n                overflow: \"hidden\"\n              }}\n            />\n          </div>\n        </Draggable>\n      );\n    }\n  };\n}\n\nclass TabContents extends React.Component {\n  render = () => {\n    if (this.props.entitytype === \"entity\") {\n      return (\n        <div className=\"tab-content\">\n          <div style={{ flex: \"0 1 auto\", marginLeft: \"10px\" }}>\n            <h4 id=\"myModalLabel\">\n              {this.props.data != null ? (\n                <EntityValue\n                  value={this.props.valueClicked}\n                  data={this.props.data}\n                  errorToggle={this.props.errorToggle}\n                  createCallback={this.props.createCallback}\n                  removeCallback={this.props.removeCallback}\n                  addFlair={this.props.addFlair}\n                />\n              ) : (\n                <div style={{ display: \"inline-flex\", position: \"relative\" }}>\n                  Loading...\n                </div>\n              )}\n            </h4>\n          </div>\n          <div\n            style={{\n              height: \"100%\",\n              display: \"flex\",\n              flex: \"1 1 auto\",\n              marginLeft: \"10px\",\n              flexFlow: \"inherit\",\n              minHeight: \"1px\"\n            }}\n          >\n            {this.props.data != null ? (\n              <EntityBody\n                data={this.props.data}\n                entityid={this.props.entityid}\n                type={this.props.type}\n                id={this.props.id}\n                errorToggle={this.props.errorToggle}\n                linkWarningToggle={this.props.linkWarningToggle}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                addFlair={this.props.addFlair}\n              />\n            ) : (\n              <div>Loading...</div>\n            )}\n          </div>\n        </div>\n      );\n    } else if (this.props.entitytype === \"guide\") {\n      let guideurl = \"/guide/\" + this.props.entityid;\n      return (\n        <div className=\"tab-content\">\n          <div style={{ flex: \"0 1 auto\", marginLeft: \"10px\" }}>\n            <Link to={guideurl} target=\"_blank\">\n              <h4 id=\"myModalLabel\">\n                {this.props.data != null ? (\n                  <span>\n                    <span>\n                      <EntityValue\n                        value={this.props.entityid}\n                        errorToggle={this.props.errorToggle}\n                        createCallback={this.props.createCallback}\n                        removeCallback={this.props.removeCallback}\n                        addFlair={this.props.addFlair}\n                      />\n                    </span>\n                    <div>\n                      <EntityValue\n                        value={this.props.data.applies_to}\n                        errorToggle={this.props.errorToggle}\n                        createCallback={this.props.createCallback}\n                        removeCallback={this.props.removeCallback}\n                        addFlair={this.props.addFlair}\n                      />\n                    </div>\n                  </span>\n                ) : (\n                  <div style={{ display: \"inline-flex\", position: \"relative\" }}>\n                    Loading...\n                  </div>\n                )}\n              </h4>\n            </Link>\n          </div>\n          <div\n            style={{ overflow: \"auto\", flex: \"1 1 auto\", marginLeft: \"10px\" }}\n          >\n            {this.props.data != null ? (\n              <GuideBody\n                entityid={this.props.entityid}\n                form={this.props.form}\n                data={this.props.data}\n                entitytype={this.props.entitytype}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                addFlair={this.props.addFlair}\n              />\n            ) : (\n              <div>Loading...</div>\n            )}\n          </div>\n        </div>\n      );\n    } else if (this.props.entitytype === \"source\") {\n      return (\n        <div className=\"tab-content\">\n          <div style={{ flex: \"0 1 auto\", marginLeft: \"10px\" }}></div>\n          <div\n            id=\"source-popup\"\n            style={{ overflow: \"auto\", flex: \"1 1 auto\", marginLeft: \"10px\" }}\n          >\n            {this.props.entitytype != null ? (\n              <SourceBody\n                data={this.props.data}\n                entityid={this.props.entityid}\n                entitytype={this.props.entitytype}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n              />\n            ) : (\n              <div>Loading...</div>\n            )}\n          </div>\n        </div>\n      );\n    } else if (this.props.entitytype === \"entry\") {\n      return (\n        <div className=\"tab-content\">\n          <div style={{ flex: \"0 1 auto\", marginLeft: \"10px\" }} />\n          <div\n            id=\"entry-popup\"\n            style={{ overflow: \"auto\", flex: \"1 1 auto\", marginLeft: \"10px\" }}\n          >\n            {this.props.entitytype != null ? (\n              <div>\n                <AddEntry\n                  entryAction={\"Add\"}\n                  type=\"alert\"\n                  targetid={this.props.entityid}\n                  id={\"add_entry\"}\n                  addedentry={this.entryToggle}\n                  errorToggle={this.props.errorToggle}\n                />\n                <SelectedEntry\n                  type={\"alert\"}\n                  id={this.props.entityid}\n                  isPopUp={1}\n                  headerData={this.props.data}\n                  errorToggle={this.props.errorToggle}\n                  createCallback={this.props.createCallback}\n                  removeCallback={this.props.removeCallback}\n                  addFlair={this.props.addFlair}\n                />\n              </div>\n            ) : (\n              <div>Loading...</div>\n            )}\n          </div>\n        </div>\n      );\n    }\n  };\n}\n\nclass EntityValue extends React.Component {\n  render = () => {\n    if (this.props.data !== undefined) {\n      //Entity Detail Popup showing the entity type\n      let entityurl = \"/entity/\" + this.props.data.id;\n\n      return (\n        <div className=\"flair_header\">\n          <div>\n            <Link to={entityurl} target=\"_blank\">\n              Entity {this.props.data.id}\n            </Link>\n            <span>&nbsp;</span>\n            <DetailDataStatus\n              status={this.props.data.status}\n              id={this.props.data.id}\n              type={\"entity\"}\n              errorToggle={this.props.errorToggle}\n            />\n            <span>&nbsp;</span>\n            <Marker\n              type=\"entity\"\n              id={this.props.data.id}\n              string={this.props.value}\n            />\n            <span>&nbsp;</span>\n            {this.props.data.data ? (\n              this.props.data.data.scanner ? (\n                this.props.data.data.scanner.active == \"true\" ? (\n                  <img\n                    class=\"extras\"\n                    title=\"scanner\"\n                    src=\"/images/flair/scanner.png\"\n                  />\n                ) : null\n              ) : null\n            ) : null}\n          </div>\n          <div>\n            <span>{this.props.data.type}:</span>\n            &nbsp;\n            <span>{this.props.value}</span>\n          </div>\n        </div>\n      );\n    } else {\n      //Guide Detail Popup showing the name of the guide that is being applied to\n      return <div className=\"flair_header\">{this.props.value}</div>;\n    }\n  };\n}\n\nclass EntityBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: \"Loading Entries\",\n      entryToolbar: false,\n      appearances: 0,\n      showFullEntityButton: false,\n      isMounted: false\n    };\n  }\n\n  updateAppearances = appearancesNumber => {\n    if (appearancesNumber !== null) {\n      if (appearancesNumber !== 0) {\n        let newAppearancesNumber = this.state.appearances + appearancesNumber;\n        if (this.state.isMounted) {\n          this.setState({ appearances: newAppearancesNumber });\n        }\n      }\n    }\n  };\n\n  entryToggle = () => {\n    if (this.state.entryToolbar === false) {\n      this.setState({ entryToolbar: true });\n    } else {\n      this.setState({ entryToolbar: false });\n    }\n  };\n\n  showFullEntityButton = () => {\n    //don't show the button if in full screen entity view.\n    if (this.props.type !== \"entity\") {\n      this.setState({ showFullEntityButton: true });\n    }\n  };\n\n  linkOnClickIntercept = (e) => {\n\n    this.props.linkWarningToggle(e.target.id, e.target.dataset.nopop);\n  };\n\n  componentDidMount() {\n    this.setState({ isMounted: true });\n  }\n\n  componentWillUnmount() {\n    this.setState({ isMounted: false });\n  }\n\n  render = () => {\n    let entityEnrichmentDataArr = [];\n    let entityEnrichmentLinkArr = [];\n    let entityEnrichmentGeoArr = [];\n    let enrichmentEventKey = 4;\n    if (this.props.data !== undefined) {\n      let entityData = this.props.data[\"data\"];\n      for (let prop in entityData) {\n        if (entityData[prop] !== undefined) {\n          if (prop === \"geoip\") {\n            entityEnrichmentGeoArr.push(\n              <Tab\n                eventKey={enrichmentEventKey}\n                className=\"entityPopUpButtons\"\n                style={{ overflow: \"auto\" }}\n                title={prop}\n              >\n                <GeoView\n                  data={entityData[prop].data}\n                  type={this.props.type}\n                  id={this.props.id}\n                  entityData={this.props.data}\n                  errorToggle={this.props.errorToggle}\n                />\n              </Tab>\n            );\n            enrichmentEventKey++;\n          } else if (entityData[prop].type === \"data\") {\n            entityEnrichmentDataArr.push(\n              <Tab\n                eventKey={enrichmentEventKey}\n                className=\"entityPopUpButtons\"\n                style={{ overflow: \"auto\" }}\n                title={prop}\n              >\n                <EntityEnrichmentButtons\n                  dataSource={entityData[prop]}\n                  type={this.props.type}\n                  id={this.props.id}\n                  errorToggle={this.props.errorToggle}\n                />\n              </Tab>\n            );\n            enrichmentEventKey++;\n          } else if (entityData[prop].type === \"link\") {\n            //added this because we dont need two buttons -2019 bryce\n            if (entityData[prop].data.title !== \"Lookup in Likaboss\") {\n              const nopop  = ( entityData[prop].data.nopopup ) ? true : false;\n              console.log(entityData[prop].data);\n              entityEnrichmentLinkArr.push(\n                <Button\n                  bsSize=\"xsmall\"\n                  id={entityData[prop].data.url}\n                  data-nopop={nopop}\n                  onMouseDown={this.linkOnClickIntercept}\n                  target=\"_blank\"\n                >\n                  {entityData[prop].data.title}\n                </Button>\n              );\n              enrichmentEventKey++;\n            }\n          }\n        }\n      }\n    }\n    //Lazy Loading SelectedEntry as it is not actually loaded when placed at the top of the page due to the calling order.\n\n    //PopOut available\n    //let href = '/#/entity/' + this.props.entityid + '/' + this.props.type + '/' + this.props.id;\n    let href = \"/entity/\" + this.props.entityid;\n    return (\n      <Tabs className=\"tab-content\" defaultActiveKey={1} bsStyle=\"tabs\">\n        <Tab\n          eventKey={1}\n          className=\"entityPopUpButtons\"\n          title={this.state.appearances}\n          style={{ height: \"100%\" }}\n        >\n          <div>{entityEnrichmentLinkArr}</div>\n          <div style={{ maxHeight: \"30vh\", overflowY: \"auto\" }}>\n            <span>\n              <b>Appears: {this.state.appearances} times</b>\n            </span>\n            {this.state.showFullEntityButton === true ? (\n              <span style={{ paddingLeft: \"5px\" }}>\n                <Link to={href} style={{ color: \"#c400ff\" }} target=\"_blank\">\n                  List truncated due to large amount of references. Click to\n                  view the whole entity\n                </Link>\n              </span>\n            ) : null}\n            <br />\n            <EntityReferences\n              entityid={this.props.entityid}\n              updateAppearances={this.updateAppearances}\n              type={this.props.type}\n              showFullEntityButton={this.showFullEntityButton}\n              errorToggle={this.props.errorToggle}\n            />\n            <br />\n          </div>\n          <hr style={{ marginTop: \".5em\", marginBottom: \".5em\" }} />\n          <div style={{ maxHeight: \"50vh\", overflowY: \"auto\" }}>\n            <div>\n              <Button bsSize=\"xsmall\" onClick={this.entryToggle}>\n                Add Entry\n              </Button>\n              <br />\n            </div>\n            {this.state.entryToolbar ? (\n              <AddEntry\n                entryAction={\"Add\"}\n                type=\"entity\"\n                targetid={this.props.entityid}\n                id={\"add_entry\"}\n                addedentry={this.entryToggle}\n                errorToggle={this.props.errorToggle}\n              />\n            ) : null}\n            <SelectedEntry\n              type={\"entity\"}\n              addFlair={this.props.addFlair}\n              id={this.props.entityid}\n              isPopUp={1}\n              errorToggle={this.props.errorToggle}\n              createCallback={this.props.createCallback}\n              removeCallback={this.props.removeCallback}\n            />\n          </div>\n        </Tab>\n        {entityEnrichmentGeoArr}\n        {entityEnrichmentDataArr}\n      </Tabs>\n    );\n  };\n}\n\nclass GeoView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      copyToEntryToolbar: false,\n      copyToEntityToolbar: false\n    };\n  }\n\n  copyToEntry = () => {\n    if (this.state.copyToEntryToolbar === false) {\n      this.setState({ copyToEntryToolbar: true });\n    } else {\n      this.setState({ copyToEntryToolbar: false });\n    }\n  };\n\n  copyToEntity = () => {\n    if (this.state.copyToEntityToolbar === false) {\n      this.setState({ copyToEntityToolbar: true });\n    } else {\n      this.setState({ copyToEntityToolbar: false });\n    }\n  };\n\n  render() {\n    let trArr = [];\n    let copyArr = [];\n    copyArr.push(\"<table>\");\n    for (let prop in this.props.data) {\n      let value = this.props.data[prop];\n      trArr.push(\n        <tr>\n          <td style={{ paddingRight: \"4px\", paddingLeft: \"4px\" }}>\n            <b>{prop}</b>\n          </td>\n          <td style={{ paddingRight: \"4px\", paddingLeft: \"4px\" }}>\n            {this.props.data[prop]}\n          </td>\n        </tr>\n      );\n      copyArr.push(\n        '<tr><td style={{paddingRight:\"4px\", paddingLeft:\"4px\"}}><b>' +\n          prop +\n          '</b></td><td style={{paddingRight:\"4px\", paddingLeft:\"4px\"}}>' +\n          value +\n          \"</td></tr>\"\n      );\n    }\n    copyArr.push(\"</table>\");\n    let copy = copyArr.join(\"\");\n    return (\n      <div>\n        <Button bsSize=\"xsmall\" onClick={this.copyToEntity}>\n          Copy to <b>{\"entity\"}</b> entry\n        </Button>\n        {this.props.type !== \"alertgroup\" ? (\n          <Button bsSize=\"xsmall\" onClick={this.copyToEntry}>\n            Copy to{\" \"}\n            <b>\n              {this.props.type} {this.props.id}\n            </b>{\" \"}\n            entry\n          </Button>\n        ) : null}\n        {this.state.copyToEntryToolbar ? (\n          <AddEntry\n            entryAction=\"Copy To Entry\"\n            type={this.props.type}\n            targetid={this.props.id}\n            id={this.props.id}\n            addedentry={this.copyToEntry}\n            content={copy}\n            errorToggle={this.props.errorToggle}\n          />\n        ) : null}\n        {this.state.copyToEntityToolbar ? (\n          <AddEntry\n            entryAction=\"Copy To Entry\"\n            type={\"entity\"}\n            targetid={this.props.entityData.id}\n            id={this.props.entityData.id}\n            addedentry={this.copyToEntity}\n            content={copy}\n            errorToggle={this.props.errorToggle}\n          />\n        ) : null}\n        <div className=\"entityTableWrapper\">\n          <table\n            className=\"tablesorter entityTableHorizontal\"\n            id={\"sortableentitytable\"}\n            width=\"100%\"\n          >\n            {trArr}\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass EntityEnrichmentButtons extends React.Component {\n  render() {\n    let dataSource = this.props.dataSource;\n    return (\n      <div style={{ overflowY: \"auto\", maxHeight: \"70vh\" }}>\n        <div>\n          <Inspector data={dataSource} expandLevel={4} />\n        </div>\n      </div>\n    );\n  }\n}\n\nclass EntityReferences extends React.Component {\n  constructor(props) {\n    super(props);\n    let maxRecords = 100;\n    //if type == entity then the url is looking for a full screen entity view with all records.\n    if (this.props.type === \"entity\") {\n      maxRecords = undefined;\n    }\n    this.state = {\n      entityReferencesData: [],\n      maxRecords: maxRecords,\n      loadingType: {\n        alert: true,\n        event: true,\n        incident: true,\n        dispatch: true,\n        intel: true,\n        product: true,\n        signature: true,\n        guide: true\n      },\n      loading: true,\n      isMounted: false,\n      order: \"asc\",\n      orderBy: \"id\"\n    };\n  }\n\n  componentDidMount = () => {\n    this.setState({ isMounted: true });\n    const types = [\"incident\", \"event\", \"intel\", \"guide\", \"signature\", \"alert\", \"dispatch\", \"product\"];\n    types.forEach(\n      function(type) {\n        let open = [];\n        let closed = [];\n        let promoted = [];\n        let therest = [];\n        const request = get_data(\n          `scot/api/v2/entity/${this.props.entityid}/${type}`\n        );\n        request.then(\n          function(result) {\n            const result_array = result.data.records;\n            this.props.updateAppearances(result_array.length);\n            //sort into temp arrays\n            result_array.forEach(\n              function(item) {\n                item[\"type\"] = type;\n                if (item.status === \"open\") {\n                  open.push(item);\n                } else if (item.status === \"closed\") {\n                  closed.push(item);\n                } else if (item.status === \"promoted\") {\n                  promoted.push(item);\n                } else {\n                  therest.push(item);\n                }\n              }.bind(this)\n            );\n\n            //sort temp arrays by date\n            open.sort(this.compareUpdatedDate);\n            closed.sort(this.compareUpdatedDate);\n            promoted.sort(this.compareUpdatedDate);\n            therest.sort(this.compareUpdatedDate);\n\n            //set loading types false\n            let loading_type = this.state.loadingType;\n            loading_type[type] = false;\n            this.setState({\n              entityReferencesData: [\n                ...this.state.entityReferencesData,\n                ...promoted,\n                ...open,\n                ...closed,\n                ...therest\n              ],\n              loadingType: loading_type\n            });\n          }.bind(this)\n        );\n      }.bind(this)\n    );\n\n    if (this.state.entityReferencesData.length > 0) {\n      this.props.showFullEntityButton();\n    }\n  };\n\n  componentDidUpdate = () => {};\n\n  componentWillUnmount = () => {\n    this.setState({ isMounted: false });\n  };\n\n  compareUpdatedDate = (a, b) => {\n    //reverse sort with most recent updated at top\n    if (a.updated > b.updated) {\n      return -1;\n    } else {\n      return 1;\n    }\n  };\n\n  render = () => {\n    let loading = this.state.loading;\n    if (\n      !this.state.loadingSignature &&\n      !this.state.loadingEvents &&\n      !this.state.loadingAlerts &&\n      !this.state.loadingIncidents &&\n      !this.state.loadingIncidents\n    ) {\n      loading = false;\n    }\n    let id = \"sortableentitytable\" + this.props.entityid;\n    let maxRows = 5;\n    if (this.state.entityReferencesData.length > 0) {\n      console.log(\"got data\");\n      console.log(this.state.entityReferencesData);\n      maxRows = this.state.entityReferencesData.length;\n    }\n\n    return (\n      <div>\n        {loading ? (\n          <span>\n            Loading: {this.state.loadingAlerts ? <span>Alerts </span> : null}\n            {this.state.loadingEvents ? <span>Events </span> : null}\n            {this.state.loadingIncidents ? <span>Incidents </span> : null}\n            {this.state.loadingIntel ? <span>Intel </span> : null}\n            {this.state.loadingSignature ? <span>Signature </span> : null}\n          </span>\n        ) : null}\n        <Paper>\n          <ReactTable\n            className=\"-striped -highlight\"\n            data={this.state.entityReferencesData}\n            columns={getEntityPopupColumns()}\n            minRows={0}\n            sortable={true}\n          />\n        </Paper>\n      </div>\n    );\n  };\n}\n\nclass GuideBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      entryToolbar: false\n    };\n  }\n\n  entryToggle = () => {\n    if (this.state.entryToolbar === false) {\n      this.setState({ entryToolbar: true });\n    } else {\n      this.setState({ entryToolbar: false });\n    }\n  };\n\n  render() {\n    return (\n      <Tabs className=\"tab-content\" defaultActiveKey={1} bsStyle=\"pills\">\n        <Tab eventKey={1} style={{ overflow: \"auto\", maxHeight: \"70vh\" }}>\n          <div>\n            <Button bsSize=\"xsmall\" onClick={this.entryToggle}>\n              Add Entry\n            </Button>\n            <br />\n          </div>\n          {this.state.entryToolbar ? (\n            <AddEntry\n              entryAction={\"Add\"}\n              type=\"guide\"\n              targetid={this.props.entityid}\n              id={\"add_entry\"}\n              addedentry={this.entryToggle}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n          <SelectedEntry\n            addFlair={this.props.addFlair}\n            type={\"guide\"}\n            form={this.props.form}\n            id={this.props.entityid}\n            isPopUp={1}\n            headerData={this.props.data}\n            errorToggle={this.props.errorToggle}\n            createCallback={this.props.createCallback}\n            removeCallback={this.props.removeCallback}\n          />\n        </Tab>\n      </Tabs>\n    );\n  }\n}\n\nclass SourceBody extends React.Component {\n  render() {\n    return (\n      <div>\n        <h2>Source</h2>\n        <Tabs className=\"tab-content\" defaultActiveKey={1} bsStyle=\"tabs\">\n          <Tab\n            eventKey={1}\n            className=\"entityPopUpButtons\"\n            style={{ overflow: \"auto\", maxHeight: \"70vh\" }}\n            title=\"Rendered\"\n          >\n            <Frame\n              style={{ width: \"100%\" }}\n              head={\n                <link\n                  rel=\"stylesheet\"\n                  type=\"text/css\"\n                  href=\"/css/sandbox.css\"\n                />\n              }\n              frameBorder={\"0\"}\n              id={\"iframe_\" + this.props.entityid}\n              sandbox={\"allow-same-origin\"}\n              height=\"500px\"\n            >\n              <div dangerouslySetInnerHTML={{ __html: this.props.data.body }} />\n            </Frame>\n          </Tab>\n          <Tab\n            eventKey={2}\n            className=\"entityPopUpButtons\"\n            style={{ overflow: \"auto\", maxHeight: \"70vh\" }}\n            title=\"Raw Text\"\n          >\n            <Frame\n              head={\n                <link\n                  rel=\"stylesheet\"\n                  type=\"text/css\"\n                  href=\"/css/sandbox.css\"\n                />\n              }\n              style={{ width: \"100%\" }}\n              frameBorder={\"0\"}\n              id={\"iframe_\" + this.props.entityid}\n              sandbox={\"allow-same-origin\"}\n              styleSheets={[\"/css/sandbox.css\"]}\n              height=\"500px\"\n            >\n              >\n              <div\n                dangerouslySetInnerHTML={{ __html: this.props.data.body_plain }}\n              />\n            </Frame>\n          </Tab>\n        </Tabs>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport Dropdown from \"react-bootstrap/lib/Dropdown\";\nlet MenuItem = require(\"react-bootstrap/lib/MenuItem\");\nlet DropdownToggle = require(\"react-bootstrap/lib/DropdownToggle\");\nlet DropdownMenu = require(\"react-bootstrap/lib/DropdownMenu\");\nlet OverlayTrigger = require(\"react-bootstrap/lib/OverlayTrigger\");\nlet Tooltip = require(\"react-bootstrap/lib/Tooltip\");\n\nexport default class TrafficLightProtocol extends React.Component {\n  selectColor = e => {\n    let data = { tlp: e };\n    this.serverRequest = $.ajax({\n      type: \"put\",\n      url: \"/scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/\",\n      data: JSON.stringify(data),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"set tlp\");\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to set TLP\", data);\n      }\n    });\n    //this.setState({ color: e });\n  };\n\n  render = () => {\n    return (\n      <span\n        style={{ padding: this.props.type === \"entry\" ? \"3px 20px\" : null }}\n      >\n        <OverlayTrigger\n          placement=\"top\"\n          overlay={<Tooltip id=\"tlp-tooltip\">{this.props.tlp}</Tooltip>}\n        >\n          <Dropdown\n            bsSize=\"xsmall\"\n            bsStyle={{\n              padding: this.props.type === \"entry\" ? \"3px 20px\" : null\n            }}\n          >\n            <DropdownToggle>\n              <svg id=\"trafficlight1\" style={{ width: \"12px\", height: \"12px\" }}>\n                <circle\n                  id=\"circle1\"\n                  r=\"5\"\n                  cx=\"6\"\n                  cy=\"6\"\n                  style={{\n                    fill:\n                      this.props.tlp === \"red\" || this.props.tlp === \"white\"\n                        ? this.props.tlp\n                        : \"gray\",\n                    stroke: \"black\",\n                    strokeWidth: \"2\"\n                  }}\n                />\n              </svg>\n              <svg id=\"trafficlight2\" style={{ width: \"12px\", height: \"12px\" }}>\n                <circle\n                  id=\"circle2\"\n                  r=\"5\"\n                  cx=\"6\"\n                  cy=\"6\"\n                  style={{\n                    fill:\n                      this.props.tlp === \"amber\" && this.props.tlp !== \"white\"\n                        ? \"orange\"\n                        : this.props.tlp === \"white\"\n                          ? \"white\"\n                          : \"gray\",\n                    stroke: \"black\",\n                    strokeWidth: \"2\"\n                  }}\n                />\n              </svg>\n              <svg id=\"trafficlight2\" style={{ width: \"12px\", height: \"12px\" }}>\n                <circle\n                  id=\"circle3\"\n                  r=\"5\"\n                  cx=\"6\"\n                  cy=\"6\"\n                  style={{\n                    fill:\n                      this.props.tlp === \"green\" || this.props.tlp === \"white\"\n                        ? this.props.tlp\n                        : \"gray\",\n                    stroke: \"black\",\n                    strokeWidth: \"2\"\n                  }}\n                />\n              </svg>\n            </DropdownToggle>\n            <DropdownMenu>\n              <MenuItem header>Traffic Light Protocol (TLP) Color</MenuItem>\n              <MenuItem eventKey=\"unset\" onSelect={this.selectColor}>\n                Unset\n              </MenuItem>\n              <MenuItem eventKey=\"red\" onSelect={this.selectColor}>\n                Red\n              </MenuItem>\n              <MenuItem eventKey=\"amber\" onSelect={this.selectColor}>\n                Amber\n              </MenuItem>\n              <MenuItem eventKey=\"green\" onSelect={this.selectColor}>\n                Green\n              </MenuItem>\n              <MenuItem eventKey=\"white\" onSelect={this.selectColor}>\n                White\n              </MenuItem>\n              <MenuItem divider />\n              <MenuItem href=\"https://www.us-cert.gov/tlp\">\n                What is TLP?\n              </MenuItem>\n            </DropdownMenu>\n          </Dropdown>\n        </OverlayTrigger>\n      </span>\n    );\n  };\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ButtonGroup from \"react-bootstrap/lib/ButtonGroup.js\";\nimport Button from \"react-bootstrap/lib/Button.js\";\nimport Promote from \"../components/promote.js\";\nimport Marker from \"../components/marker.js\";\nimport TrafficLightProtocol from \"../components/traffic_light_protocol.js\";\nimport { CSVLink } from \"react-csv\";\nimport { put_data } from \"../utils/XHR\";\n\nexport default class SelectedHeaderOptions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      globalFlairState: true,\n      promoteRemaining: null,\n      dataToDownload: []\n    };\n  }\n\n  toggleFlair = () => {\n    let newGlobalFlairState = !this.state.globalFlairState;\n    this.props.toggleFlair();\n    $(\"iframe\").each(\n      function(index, ifr) {\n        if (ifr.contentDocument != null) {\n          let ifrContents = $(ifr).contents();\n          let off = ifrContents.find(\".entity-off\");\n          let on = ifrContents.find(\".entity\");\n          if (this.state.globalFlairState === false) {\n            ifrContents.find(\".extras\").show();\n            ifrContents.find(\".flair-off\").hide();\n            off.each(function(index, entity) {\n              $(entity).addClass(\"entity\");\n              $(entity).removeClass(\"entity-off\");\n            });\n          } else {\n            ifrContents.find(\".extras\").hide();\n            ifrContents.find(\".flair-off\").show();\n            on.each(function(index, entity) {\n              $(entity).addClass(\"entity-off\");\n              $(entity).removeClass(\"entity\");\n            });\n          }\n        }\n      }.bind(this)\n    );\n    this.setState({ globalFlairState: newGlobalFlairState });\n  };\n\n  alertOpenOrCloseSelected = flag => {\n    let iterarray = [];\n    if (this.props.alertsSelected.length > 0) {\n      iterarray = this.props.alertsSelected;\n    } else if (this.props.entryData.length > 0) {\n      iterarray = this.props.entryData;\n    }\n    let array = iterarray.map(function(alert) {\n      let object = { id: alert.id, status: flag };\n      if (flag === \"closed\") {\n        object[\"closed\"] = Math.round(new Date().getTime() / 1000);\n      }\n      return object;\n    });\n\n    let data = { alerts: array };\n\n    this.props.ToggleProcessingMessage(true);\n    let endpoint = `/scot/api/v2/${this.props.type}/${this.props.id}`;\n    let response = put_data(endpoint, data);\n    response\n      .then(\n        function() {\n          console.log(\"success\");\n          this.props.ToggleProcessingMessage(false);\n        }.bind(this)\n      )\n      .catch(\n        function(data) {\n          this.props.errorToggle(`failed to ${flag} selected alerts`, data);\n          this.props.ToggleProcessingMessage(false);\n        }.bind(this)\n      );\n  };\n\n  alertPromoteSelected = () => {\n    let data = JSON.stringify({ promote: \"new\" });\n    let array = this.props.alertsSelected.map(alert => alert.id);\n\n    this.props.ToggleProcessingMessage(true);\n\n    //Start by promoting the first one in the array\n    let endpoint = `/scot/api/v2/alert/${array[0]}`;\n    let response = put_data(endpoint, data);\n    response.then(\n      function(response) {\n        let promoteTo = {\n          promote: response.data.pid\n        };\n        if (array.length === 1) {\n          this.props.ToggleProcessingMessage(false);\n        }\n        array.forEach(\n          function(alert_id, index) {\n            if (index === 0) {\n              console.log(\"promoting rest of alerts\");\n            } else {\n              let endpoint = `/scot/api/v2/alert/${alert_id}`;\n              let response2 = put_data(endpoint, promoteTo);\n              response2\n                .then(\n                  function() {\n                    if (index + 1 === array.length) {\n                      this.props.ToggleProcessingMessage(false);\n                    }\n                  }.bind(this)\n                )\n                .catch(\n                  function(data) {\n                    this.props.errorToggle(\n                      \"failed to promoted selected alerts\",\n                      data\n                    );\n                  }.bind(this)\n                );\n            }\n          }.bind(this)\n        );\n      }.bind(this)\n    );\n  };\n\n  alertSelectExisting = () => {\n    let text = prompt(\"Please Enter Event ID to promote into\");\n    if (text !== \"\" && text !== null) {\n      this.props.alertsSelected.forEach(\n        function(alert) {\n          let data = { promote: parseInt(text, 10) };\n          let endpoint = `/scot/api/v2/alert/${alert.id}`;\n          let response = put_data(endpoint, data);\n          response\n            .then(function() {\n              console.log(`Successfully promoted to event ${text}`);\n            })\n            .catch(\n              function() {\n                prompt(\"Please use numbers only\");\n                this.selectExisting();\n              }.bind(this)\n            );\n        }.bind(this)\n      );\n      window.open(\"#/event/\" + text);\n    }\n  };\n\n  alertExportCSV = () => {\n    const currentRecords = this.props.alertsSelected;\n    var data_to_download = [];\n    currentRecords.forEach(\n      function(row) {\n        Object.keys(row).forEach(function(key) {\n          //here lets strip html tags\n          if (typeof row[key] === \"string\") {\n            let regex = /(<([^>]+)>)/gi;\n            let body = row[key];\n            row[key] = body.replace(regex, \"\");\n          }\n        });\n        data_to_download.push(row);\n      }.bind(this)\n    );\n\n    this.setState({ dataToDownload: data_to_download }, () => {\n      // click the CSVLink component to trigger the CSV download\n      this.csvLink.link.click();\n    });\n  };\n\n  PrintPrepare = () => {\n    $(\"iframe\")\n      .contents()\n      .each(function(x, y) {\n        $(y)\n          .find(\"blockquote\")\n          .each(function(index, block) {\n            $(block).css({ \"max-height\": \"5000px\" });\n          });\n        $(y)\n          .find(\"pre\")\n          .each(function(index, pre) {\n            $(pre).css({ \"max-height\": \"5000px\", \"word-wrap\": \"break-word\" });\n          });\n      });\n    setTimeout(\n      function() {\n        this.forceUpdate();\n      }.bind(this),\n      500\n    );\n    setTimeout(function() {\n      $(\"#print-button\").click();\n    }, 1000);\n  };\n\n  Print = () => {\n    window.print();\n  };\n\n  componentDidMount = () => {\n    //open, close SELECTED alerts\n    if (this.props.type === \"alertgroup\" || this.props.type === \"alert\") {\n      $(\"#main-detail-container\").keydown(\n        function(event) {\n          if ($(\"input\").is(\":focus\")) {\n            return;\n          }\n          if (\n            event.keyCode === 79 &&\n            (event.ctrlKey !== true && event.metaKey !== true)\n          ) {\n            this.alertOpenOrCloseSelected(\"open\");\n          }\n          if (\n            event.keyCode === 67 &&\n            (event.ctrlKey !== true && event.metaKey !== true)\n          ) {\n            this.alertOpenOrCloseSelected(\"closed\");\n          }\n        }.bind(this)\n      );\n    }\n    $(\"#main-detail-container\").keydown(\n      function(event) {\n        if ($(\"input\").is(\":focus\")) {\n          return;\n        }\n        if (\n          event.keyCode === 84 &&\n          (event.ctrlKey !== true && event.metaKey !== true)\n        ) {\n          this.toggleFlair();\n        }\n      }.bind(this)\n    );\n  };\n\n  componentWillUnmount = () => {\n    $(\"#main-detail-container\").unbind(\"keydown\");\n  };\n\n  guideToggle = () => {\n    let entityoffset = { top: 0, left: 0 }; //set to 0 so it appears in a default location.\n    this.props.flairToolbarToggle(\n      this.props.guideID,\n      null,\n      \"guide\",\n      entityoffset,\n      null\n    );\n  };\n\n  sourceToggle = () => {\n    let entityoffset = { top: 0, left: 0 }; //set to 0 so it appears in a default location.\n    this.props.flairToolbarToggle(\n      this.props.id,\n      null,\n      \"source\",\n      entityoffset,\n      null\n    );\n  };\n\n  createGuide = () => {\n    let data = JSON.stringify({\n      subject: \"ENTER A GUIDE NAME\",\n      data: {\n        applies_to: [this.props.subjectName]\n      }\n    });\n    $.ajax({\n      type: \"POST\",\n      url: \"/scot/api/v2/guide\",\n      data: data,\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(response) {\n        window.open(\"/#/guide/\" + response.id);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"failed to create a new guide\", data);\n      }.bind(this)\n    });\n  };\n\n  reparseFlair = () => {\n    $.ajax({\n      type: \"put\",\n      url: \"/scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify({ parsed: 0 }),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"reparsing started\");\n      },\n      error: function(data) {\n        this.props.errorToggle(\"failed to reparse flair\", data);\n      }.bind(this)\n    });\n  };\n\n  createLinkSignature = () => {\n    $.ajax({\n      type: \"POST\",\n      url: \"/scot/api/v2/signature\",\n      data: JSON.stringify({\n        target: { id: this.props.id, type: this.props.type },\n        name: \"Name your Signature\",\n        status: \"disabled\"\n      }),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(response) {\n        const url = \"/#/signature/\" + response.id;\n        window.open(url, \"_blank\");\n      },\n      error: function(data) {\n        this.props.errorToggle(\"failed to create a signature\", data);\n      }.bind(this)\n    });\n  };\n\n  manualUpdate = () => {\n    this.props.updated(null, null);\n  };\n\n  render = () => {\n    let subjectType = this.props.subjectType;\n    let type = this.props.type;\n    let id = this.props.id;\n    let status = this.props.status;\n\n    let string = \"\";\n\n    if (this.props.headerData.subject) {\n      string = this.props.headerData.subject;\n    } else if (this.props.headerData.value) {\n      string = this.props.headerData.value;\n    } else if (this.props.headerData.name) {\n      string = this.props.headerData.name;\n    } else if (this.props.headerData.body) {\n      string = this.props.headerData.body;\n    }\n\n    if (type !== \"alertgroup\") {\n      let newType;\n      let showPromote = true;\n      if (status !== \"promoted\") {\n        if (type === \"alert\") {\n          newType = \"Event\";\n        } else if (type === \"event\") {\n          newType = \"Incident\";\n        } else if ( type === \"dispatch\" ) {\n            newType = \"Intel\";\n        } else if ( type === \"intel\" ) {\n            newType = \"Product\";\n        } else if (\n          type === \"incident\" ||\n          type === \"guide\" ||\n          type === \"signature\" ||\n          type === \"feed\" ||\n          type === \"entity\"\n        ) {\n          showPromote = false;\n        }\n      } else {\n        showPromote = false;\n      }\n      return (\n        <div className=\"entry-header detail-buttons\">\n          {type !== \"entity\" ? (\n            <Button\n              eventkey=\"1\"\n              bsStyle=\"success\"\n              onClick={this.props.entryToggle}\n              bsSize=\"xsmall\"\n            >\n              <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" /> Add Entry\n            </Button>\n          ) : null}\n          {type !== \"entity\" ? (\n            <Button\n              eventkey=\"2\"\n              onClick={this.props.fileUploadToggle}\n              bsSize=\"xsmall\"\n            >\n              <i className=\"fa fa-upload\" aria-hidden=\"true\" /> Upload File\n            </Button>\n          ) : null}\n          <Button eventkey=\"3\" onClick={this.toggleFlair} bsSize=\"xsmall\">\n            <i className=\"fa fa-eye-slash\" aria-hidden=\"true\" /> Toggle Flair\n          </Button>\n          {type === \"alertgroup\" || type === \"event\" || \n           type === \"dispatch\" || type === \"intel\" ? (\n            <Button\n              eventkey=\"4\"\n              onClick={this.props.viewedByHistoryToggle}\n              bsSize=\"xsmall\"\n            >\n              <img src=\"/images/clock.png\" alt=\"\" /> Viewed By History\n            </Button>\n          ) : null}\n          <Button\n            eventkey=\"5\"\n            onClick={this.props.changeHistoryToggle}\n            bsSize=\"xsmall\"\n          >\n            <img src=\"/images/clock.png\" alt=\"\" /> {subjectType} History\n          </Button>\n          {type !== \"entity\" ? (\n            <Button\n              eventkey=\"6\"\n              onClick={this.props.permissionsToggle}\n              bsSize=\"xsmall\"\n            >\n              <i className=\"fa fa-users\" aria-hidden=\"true\" /> Permissions\n            </Button>\n          ) : null}\n          <TrafficLightProtocol\n            type={type}\n            id={id}\n            tlp={this.props.headerData.tlp}\n          />\n          <Button\n            eventkey=\"7\"\n            onClick={this.props.entitiesToggle}\n            bsSize=\"xsmall\"\n          >\n            <span className=\"entity\">__</span> View Entities\n          </Button>\n          {type === \"guide\" ? (\n            <Button\n              eventkey=\"8\"\n              onClick={this.props.guideRedirectToAlertListWithFilter}\n              bsSize=\"xsmall\"\n            >\n              <i className=\"fa fa-table\" aria-hidden=\"true\" /> View Related\n              Alerts\n            </Button>\n          ) : null}\n          <Button onClick={this.props.linksModalToggle} bsSize=\"xsmall\">\n            <i className=\"fa fa-link\" aria-hidden=\"true\" /> Links\n          </Button>\n          {showPromote ? (\n            <Promote\n              type={type}\n              id={id}\n              updated={this.props.updated}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n          {type !== \"signature\" ? (\n            <Button bsSize=\"xsmall\" onClick={this.createLinkSignature}>\n              <i className=\"fa fa-pencil\" aria-hidden=\"true\" /> Create & Link\n              Signature\n            </Button>\n          ) : null}\n          {type === \"signature\" ? (\n            <Button\n              eventkey=\"11\"\n              onClick={this.props.showSignatureOptionsToggle}\n              bsSize=\"xsmall\"\n              bsStyle=\"warning\"\n            >\n              View Custom Options\n            </Button>\n          ) : null}\n          <Button onClick={this.PrintPrepare} bsSize=\"xsmall\" bsStyle=\"info\">\n            <i className=\"fa fa-print\" aria-hidden=\"true\" /> Print\n          </Button>\n          <Button\n            onClick={this.Print}\n            style={{ display: \"none\" }}\n            id=\"print-button\"\n          />\n          <Button\n            onClick={this.props.exportToggle}\n            bsSize=\"xsmall\"\n            id=\"export-button\"\n          >\n            <i className=\"fa fa-share\" aria-hidden=\"true\" /> Export{\" \"}\n            {subjectType}{\" \"}\n          </Button>\n          <Button\n            bsStyle=\"danger\"\n            eventkey=\"9\"\n            onClick={() => this.props.deleteToggle(type)}\n            bsSize=\"xsmall\"\n          >\n            <i className=\"fa fa-trash\" aria-hidden=\"true\" /> Delete{\" \"}\n            {subjectType}\n          </Button>\n          <ButtonGroup style={{ float: \"right\" }}>\n            <Marker type={type} id={id} string={string} />\n            <Button onClick={this.props.markModalToggle} bsSize=\"xsmall\">\n              Marked Objects\n            </Button>\n            <Button\n              id=\"refresh-detail\"\n              bsStyle=\"info\"\n              eventkey=\"10\"\n              onClick={this.manualUpdate}\n              bsSize=\"xsmall\"\n              style={{ float: \"right\" }}\n            >\n              <i className=\"fa fa-refresh\" aria-hidden=\"true\" />\n            </Button>\n          </ButtonGroup>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"entry-header second-menu detail-buttons\">\n          <ButtonGroup style={{ float: \"right\" }}>\n            <Marker type={type} id={id} string={string} />\n            <Button onClick={this.props.markModalToggle} bsSize=\"xsmall\">\n              Marked Actions\n            </Button>\n            <Button\n              bsStyle=\"info\"\n              eventkey=\"16\"\n              onClick={this.manualUpdate}\n              bsSize=\"xsmall\"\n              style={{ float: \"right\" }}\n            >\n              <i className=\"fa fa-refresh\" aria-hidden=\"true\" />\n            </Button>\n          </ButtonGroup>\n          <span className=\"entry-header detail-buttons\">\n            <Button eventkey=\"1\" onClick={this.toggleFlair} bsSize=\"xsmall\">\n              <i className=\"fa fa-eye-slash\" aria-hidden=\"true\" /> Toggle Flair\n            </Button>\n            <Button eventkey=\"2\" onClick={this.reparseFlair} bsSize=\"xsmall\">\n              <i className=\"fa fa-refresh\" aria-hidden=\"true\" /> Reparse Flair\n            </Button>\n            <span>\n              {this.props.guideID !== null ? (\n                <Button eventkey=\"3\" onClick={this.guideToggle} bsSize=\"xsmall\">\n                  <img src=\"/images/guide.png\" alt=\"\" /> Guide\n                </Button>\n              ) : (\n                <Button eventkey=\"3\" onClick={this.createGuide} bsSize=\"xsmall\">\n                  <img src=\"/images/guide.png\" alt=\"\" /> Create Guide\n                </Button>\n              )}\n            </span>\n            {this.props.headerData == null ? null : (\n              <Button eventkey=\"4\" onClick={this.sourceToggle} bsSize=\"xsmall\">\n                <img src=\"/images/code.png\" alt=\"\" /> View Source\n              </Button>\n            )}\n            <Button\n              eventkey=\"5\"\n              onClick={this.props.entitiesToggle}\n              bsSize=\"xsmall\"\n            >\n              <span className=\"entity\">__</span> View Entities\n            </Button>\n            {type === \"alertgroup\" || type === \"event\" || type === \"intel\" ? (\n              <Button\n                eventkey=\"6\"\n                onClick={this.props.viewedByHistoryToggle}\n                bsSize=\"xsmall\"\n              >\n                <img src=\"/images/clock.png\" alt=\"\" /> Viewed By History\n              </Button>\n            ) : null}\n            <Button\n              eventkey=\"7\"\n              onClick={this.props.changeHistoryToggle}\n              bsSize=\"xsmall\"\n            >\n              <img src=\"/images/clock.png\" alt=\"\" /> {subjectType} History\n            </Button>\n            <TrafficLightProtocol\n              type={type}\n              id={id}\n              tlp={this.props.headerData.tlp}\n            />\n            <Button onClick={this.props.linksModalToggle} bsSize=\"xsmall\">\n              <i className=\"fa fa-link\" aria-hidden=\"true\" /> Links\n            </Button>\n            <Button bsSize=\"xsmall\" onClick={this.createLinkSignature}>\n              <i className=\"fa fa-pencil\" aria-hidden=\"true\" /> Create & Link\n              Signature\n            </Button>\n\n            <Button\n              onClick={this.Print}\n              style={{ display: \"none\" }}\n              id=\"print-button\"\n            />\n            <Button\n              bsStyle=\"danger\"\n              eventkey=\"8\"\n              onClick={() => this.props.deleteToggle(type)}\n              bsSize=\"xsmall\"\n            >\n              <i className=\"fa fa-trash\" aria-hidden=\"true\" /> Delete{\" \"}\n              {subjectType}\n            </Button>\n          </span>\n          {this.props.alertsSelected.length > 0 ? (\n            <span>\n              <Button\n                eventkey=\"8\"\n                onClick={() => this.alertOpenOrCloseSelected(\"open\")}\n                bsSize=\"xsmall\"\n                bsStyle=\"danger\"\n              >\n                <img src=\"/images/open.png\" alt=\"\" /> Open Selected\n              </Button>\n              <Button\n                eventkey=\"9\"\n                onClick={() => this.alertOpenOrCloseSelected(\"closed\")}\n                bsSize=\"xsmall\"\n                bsStyle=\"success\"\n              >\n                <i className=\"fa fa-flag-checkered\" aria-hidden=\"true\" /> Close\n                Selected\n              </Button>\n              <Button\n                eventkey=\"10\"\n                onClick={this.alertPromoteSelected}\n                bsSize=\"xsmall\"\n                bsStyle=\"warning\"\n              >\n                <img src=\"/images/megaphone.png\" alt=\"\" /> Promote Selected\n              </Button>\n              <Button\n                eventkey=\"11\"\n                onClick={this.alertSelectExisting}\n                bsSize=\"xsmall\"\n              >\n                <img src=\"/images/megaphone_plus.png\" alt=\"\" /> Add Selected to{\" \"}\n                <b>Existing Event</b>\n              </Button>\n              <CSVLink\n                data={this.state.dataToDownload}\n                filename=\"data.csv\"\n                className=\"hidden\"\n                ref={r => (this.csvLink = r)}\n                target=\"_blank\"\n              />\n              <Button\n                eventkey=\"14\"\n                onClick={this.alertExportCSV}\n                bsSize=\"xsmall\"\n              >\n                <img src=\"/images/csv_text.png\" alt=\"\" /> Export to CSV\n              </Button>\n              <Marker\n                type={type}\n                id={id}\n                string={string}\n                isAlert={true}\n                getSelectedAlerts={this.getSelectedAlerts}\n                alertsSelected={this.props.alertsSelected}\n              />\n              <Button\n                onClick={this.PrintPrepare}\n                bsSize=\"xsmall\"\n                bsStyle=\"info\"\n              >\n                <i className=\"fa fa-print\" aria-hidden=\"true\" /> Print\n              </Button>\n              <Button\n                onClick={this.Print}\n                style={{ display: \"none\" }}\n                id=\"print-button\"\n              />\n              <Button\n                eventkey=\"15\"\n                onClick={() => this.props.deleteToggle(\"alert\")}\n                bsSize=\"xsmall\"\n                bsStyle=\"danger\"\n              >\n                <i className=\"fa fa-trash\" aria-hidden=\"true\" /> Delete Selected\n              </Button>\n            </span>\n          ) : null}\n        </div>\n      );\n    }\n  };\n}\n","import React, { PureComponent } from \"react\";\nimport Modal from \"react-modal\";\nimport { Button } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport $ from \"jquery\";\nimport { withSnackbar } from \"notistack\";\nimport { delete_data } from \"../utils/XHR\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  },\n  overlay: {\n    zIndex: \"1101\"\n  }\n};\n\nconst ACTION_BUTTONS = {\n  READY: {\n    style: \"danger\"\n  },\n  LOADING: {\n    text: \"Processing...\",\n    style: \"default\",\n    disabled: true\n  },\n  SUCCESS: {\n    text: \"Success!\",\n    style: \"success\"\n  },\n  ERROR: {\n    text: \"Error!\",\n    style: \"warning\"\n  }\n};\n\nclass DeleteThing extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      key: props.id\n    };\n  }\n\n  deleteItems = () => {\n    const { deleteType } = this.props;\n    let iterator = [];\n    if (deleteType !== \"alert\") {\n      iterator = [parseInt(this.props.id, 10)];\n    } else {\n      iterator = this.props.alertsSelected.map(alert => alert.id);\n    }\n    iterator.forEach(\n      function(id, index) {\n        const { enqueueSnackbar } = this.props;\n        let url = `/scot/api/v2/${deleteType}/${id}`;\n\n        const response = delete_data(url);\n        this.props.removeCallback(parseInt(this.props.id, 10));\n        response\n          .then(\n            function() {\n              if (index === iterator.length - 1 && deleteType === \"alert\") {\n                this.props.updated();\n              }\n              if (deleteType !== \"alert\") {\n                this.props.history.push(\"/\" + deleteType);\n                enqueueSnackbar(`Successfully deleted ${this.props.id}.`, {\n                  variant: \"success\"\n                });\n              } else if (deleteType === \"alert\") {\n                enqueueSnackbar(`Successfully deleted ${id}.`, {\n                  variant: \"success\"\n                });\n              }\n            }.bind(this)\n          )\n          .catch(function(error) {\n            enqueueSnackbar(\"Failed deleting exception.\", {\n              variant: \"error\"\n            });\n          });\n      }.bind(this)\n    );\n    this.props.deleteToggle(deleteType);\n  };\n\n  render() {\n    const { deleteType } = this.props;\n    let deleteText = \"\";\n    if (deleteType !== \"alert\") {\n      deleteText = ` ${deleteType}: ${this.props.id}`;\n    } else if (deleteType === \"alert\") {\n      let deleteTempArray = this.props.alertsSelected.map(function(alert) {\n        return <span style={{ paddingRight: 10 }}>{alert.id}</span>;\n      });\n      deleteText = (\n        <span>\n          {deleteType}(s) : {deleteTempArray}\n        </span>\n      );\n    }\n    return (\n      <Modal\n        isOpen={true}\n        onRequestClose={this.props.deleteToggle}\n        style={customStyles}\n      >\n        <div className=\"modal-header\">\n          <img\n            alt=\"\"\n            src=\"images/close_toolbar.png\"\n            className=\"close_toolbar\"\n            onClick={this.props.deleteToggle}\n          />\n\n          <h3 id=\"myModalLabel\">\n            Are you sure you want to delete {deleteText}?\n          </h3>\n        </div>\n        <div className=\"modal-footer\">\n          <Button id=\"cancel-delete\" onClick={this.props.deleteToggle}>\n            Cancel\n          </Button>\n          <Button bsStyle=\"danger\" id=\"delete\" onClick={this.deleteItems}>\n            Delete\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport class DeleteEntry extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      key: props.id\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    $.ajax({\n      type: \"delete\",\n      url: \"scot/api/v2/entry/\" + this.props.entryid,\n      success: function(data) {\n        console.log(\"success: \" + data);\n        let key = this.state.key;\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to delete entry\", data);\n      }.bind(this)\n    });\n    this.props.deleteToggle();\n  }\n\n  render() {\n    return (\n      <Modal\n        isOpen={true}\n        onRequestClose={this.props.deleteToggle}\n        style={customStyles}\n      >\n        <div className=\"modal-header\">\n          <img\n            alt=\"\"\n            src=\"images/close_toolbar.png\"\n            className=\"close_toolbar\"\n            onClick={this.props.deleteToggle}\n          />\n          <h3 id=\"myModalLabel\">\n            Are you sure you want to delete Entry: {this.props.entryid}?\n          </h3>\n        </div>\n        <div className=\"modal-footer\">\n          <Button id=\"cancel-delete\" onClick={this.props.deleteToggle}>\n            Cancel\n          </Button>\n          <Button bsStyle=\"danger\" id=\"delete\" onClick={this.toggle}>\n            Delete\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n}\n\n// The type signature for things to be deleted\nconst thingType = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired\n});\n\nexport default class DeleteModal extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deleteButton: ACTION_BUTTONS.READY\n    };\n\n    this.deleteAll = this.deleteAll.bind(this);\n  }\n\n  static propTypes = {\n    things: PropTypes.oneOfType([thingType, PropTypes.arrayOf(thingType)])\n      .isRequired,\n    errorToggle: PropTypes.func.isRequired,\n    callback: PropTypes.func.isRequired\n  };\n\n  deleteAll() {\n    this.setState({\n      deleteButton: ACTION_BUTTONS.LOADING\n    });\n\n    let success = true;\n\n    let { things } = this.props;\n    if (!Array.isArray(things)) {\n      things = [things];\n    }\n\n    $.when(...things.map(thing => this.deleteAjax(thing)))\n      .then(\n        // Success\n        () => {\n          this.setState({\n            deleteButton: ACTION_BUTTONS.SUCCESS\n          });\n        },\n        // Failure\n        error => {\n          console.error(error);\n          this.setState({\n            deleteButton: ACTION_BUTTONS.ERROR\n          });\n          this.props.errorToggle(\"error deleting\", error);\n          success = false;\n        }\n      )\n      .always(() => {\n        setTimeout(() => {\n          this.setState({\n            deleteButton: ACTION_BUTTONS.READY\n          });\n\n          this.props.callback(success);\n        }, 2000);\n      });\n  }\n\n  deleteAjax(thing) {\n    return $.ajax({\n      type: \"delete\",\n      url: \"/scot/api/v2/\" + thing.type + \"/\" + thing.id,\n      contentType: \"application/json; charset=UTF-8\"\n    });\n  }\n\n  render() {\n    let { things } = this.props;\n    let confirmText = \"\";\n\n    if (Array.isArray(things)) {\n      confirmText = things\n        .map(thing => `${thing.type}: ${thing.id}`)\n        .join(\", \");\n    } else {\n      confirmText = `${things.type}: ${things.id}`;\n    }\n\n    const { deleteButton } = this.state;\n\n    return (\n      <Modal\n        isOpen={true}\n        onRequestClose={this.props.callback}\n        style={customStyles}\n      >\n        <div className=\"modal-header\">\n          <img\n            alt=\"\"\n            src=\"images/close_toolbar.png\"\n            className=\"close_toolbar\"\n            onClick={this.props.callback}\n          />\n          <h3 id=\"myModalLabel\">\n            Are you sure you want to delete {confirmText}?\n          </h3>\n        </div>\n        <div className=\"modal-footer\">\n          <Button id=\"cancel-delete\" onClick={this.props.callback}>\n            Cancel\n          </Button>\n          <Button\n            bsStyle={deleteButton.style}\n            id=\"delete\"\n            onClick={this.deleteAll}\n            disabled={deleteButton.disabled}\n          >\n            {deleteButton.text ? deleteButton.text : \"Delete\"}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nconst DeleteThingComponent = withSnackbar(DeleteThing);\nexport { DeleteThingComponent };\n","import $ from \"jquery\";\nimport * as SessionStorage from \"../utils/session_storage\";\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport Button from \"react-bootstrap/lib/Badge\";\nimport DropdownButton from \"react-bootstrap/lib/DropdownButton\";\nimport MenuItem from \"react-bootstrap/lib/MenuItem\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nexport default class Owner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentOwner: this.props.data,\n      whoami: undefined,\n      ownerToolbar: false\n    };\n  }\n\n  componentDidMount = () => {\n    let whoami = SessionStorage.getSessionStorage(\"whoami\");\n    if (whoami) {\n      this.setState({ whoami: whoami });\n    }\n  };\n\n  componentWillReceiveProps = () => {\n    this.setState({ currentOwner: this.props.data });\n  };\n\n  toggle = () => {\n    if (this.state.whoami !== undefined) {\n      let json = { owner: this.state.whoami };\n      $.ajax({\n        type: \"put\",\n        url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n        data: JSON.stringify(json),\n        contentType: \"application/json; charset=UTF-8\",\n        success: function(data) {},\n        error: function(data) {\n          this.props.errorToggle(\"Failed to change owner\", data);\n        }.bind(this)\n      });\n    } else {\n      this.props.errorToggle(\"Failed to detect current user\");\n    }\n    this.ownerToggle();\n  };\n\n  ownerToggle = () => {\n    if (this.state.ownerToolbar === false) {\n      this.setState({ ownerToolbar: true });\n    } else {\n      this.setState({ ownerToolbar: false });\n    }\n  };\n\n  render = () => {\n    return (\n      <div>\n        <DropdownButton\n          bsSize=\"xsmall\"\n          id=\"event_owner\"\n          title={this.state.currentOwner}\n        >\n          <MenuItem eventKey=\"1\" onClick={this.ownerToggle}>\n            Take Ownership\n          </MenuItem>\n        </DropdownButton>\n        {this.state.ownerToolbar ? (\n          <Modal\n            isOpen={true}\n            onRequestClose={this.ownerToggle}\n            style={customStyles}\n          >\n            <div className=\"modal-header\">\n              <img\n                src=\"images/close_toolbar.png\"\n                alt=\"\"\n                className=\"close_toolbar\"\n                onClick={this.ownerToggle}\n              />\n              <h3 id=\"myModalLabel\">Take Ownership</h3>\n            </div>\n            <div className=\"modal-body\">\n              Are you sure you want to take ownership of this event?\n            </div>\n            <div className=\"modal-footer\">\n              <Button id=\"cancel-ownership\" onClick={this.ownerToggle}>\n                Cancel\n              </Button>\n              <Button bsStyle=\"info\" id=\"take-ownership\" onClick={this.toggle}>\n                Take Ownership\n              </Button>\n            </div>\n          </Modal>\n        ) : null}\n      </div>\n    );\n  };\n}\n","import React from \"react\";\nlet Modal = require(\"react-modal\");\nlet Button = require(\"react-bootstrap/lib/Button\");\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nexport default class Entities extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      entitiesBody: true\n    };\n  }\n\n  render = () => {\n    return (\n      <div>\n        <Modal\n          isOpen={true}\n          onRequestClose={this.props.entitiesToggle}\n          style={customStyles}\n        >\n          <div className=\"modal-header\">\n            <img\n              src=\"/images/close_toolbar.png\"\n              className=\"close_toolbar\"\n              alt=\"\"\n              onClick={this.props.entitiesToggle}\n            />\n            <h3 id=\"myModalLabel\">List of Entities</h3>\n          </div>\n          <div\n            className=\"modal-body\"\n            style={{ maxHeight: \"50vh\", overflowY: \"auto\" }}\n          >\n            {this.state.entitiesBody ? (\n              <EntitiesData\n                data={this.props.entityData}\n                flairToolbarToggle={this.props.flairToolbarToggle}\n              />\n            ) : null}\n          </div>\n          <div className=\"modal-footer\">\n            <Button onClick={this.props.entitiesToggle}>Done</Button>\n          </div>\n        </Modal>\n      </div>\n    );\n  };\n}\n\nclass EntitiesData extends React.Component {\n  render = () => {\n    let rows = [];\n    let data = this.props.data;\n    let originalobj = {};\n    originalobj[\"entities\"] = {};\n    let obj = originalobj.entities;\n    for (let prop in data) {\n      let subobj = {};\n      let type = data[prop].type;\n      let id = data[prop].id;\n      let value = prop;\n      subobj[id] = value;\n      if (obj.hasOwnProperty(type)) {\n        obj[type].push(subobj);\n      } else {\n        let arr = [];\n        arr.push(subobj);\n        obj[type] = arr;\n      }\n    }\n    for (let prop in obj) {\n      let type = prop;\n      let value = obj[prop];\n      rows.push(\n        <EntitiesDataHeaderIterator\n          type={type}\n          value={value}\n          flairToolbarToggle={this.props.flairToolbarToggle}\n        />\n      );\n    }\n    return <div>{rows}</div>;\n  };\n}\n\nclass EntitiesDataHeaderIterator extends React.Component {\n  render = () => {\n    let rows = [];\n    let type = this.props.type;\n    let value = this.props.value;\n    for (let i = 0; i < value.length; i++) {\n      let eachValue = value[i];\n      let entityId = null;\n      let entityValue = null;\n      for (let prop in eachValue) {\n        entityId = prop;\n        entityValue = eachValue[prop];\n      }\n      rows.push(\n        <EntitiesDataValueIterator\n          entityValue={entityValue}\n          entityId={entityId}\n          flairToolbarToggle={this.props.flairToolbarToggle}\n        />\n      );\n    }\n    return (\n      <div style={{ border: \"1px solid black\", width: \"500px\" }}>\n        <h3>{type}</h3>\n        <div\n          style={{\n            fontWeight: \"normal\",\n            maxHeight: \"300px\",\n            overflowY: \"auto\"\n          }}\n        >\n          {rows}\n        </div>\n      </div>\n    );\n  };\n}\n\nclass EntitiesDataValueIterator extends React.Component {\n  toggle = () => {\n    this.props.flairToolbarToggle(\n      this.props.entityId,\n      this.props.entityValue,\n      \"entity\"\n    );\n  };\n\n  render = () => {\n    let entityValue = this.props.entityValue;\n    return (\n      <a href=\"javascript: void(0)\" onClick={this.toggle}>\n        {entityValue}\n        <br />\n      </a>\n    );\n  };\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ReactTime from \"react-time\";\nimport Modal from \"react-modal\";\nimport Button from \"react-bootstrap/lib/Button\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nexport default class ChangeHistory extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      historyBody: false,\n      data: \"\"\n    };\n  }\n\n  componentDidMount = () => {\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/history\",\n      success: function(result) {\n        this.setState({ historyBody: true, data: result.records });\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to get change history\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    return (\n      <div>\n        <Modal\n          isOpen={true}\n          onRequestClose={this.props.changeHistoryToggle}\n          style={customStyles}\n        >\n          <div className=\"modal-header\">\n            <img\n              alt=\"\"\n              src=\"/images/close_toolbar.png\"\n              className=\"close_toolbar\"\n              onClick={this.props.changeHistoryToggle}\n            />\n            <h3 id=\"myModalLabel\">{this.props.subjectType} Change History</h3>\n          </div>\n          <div\n            className=\"modal-body\"\n            style={{ maxHeight: \"30vh\", width: \"700px\", overflowY: \"auto\" }}\n          >\n            {this.state.historyBody ? (\n              <ChangeHistoryData data={this.state.data} />\n            ) : null}\n          </div>\n          <div className=\"modal-footer\">\n            <Button onClick={this.props.changeHistoryToggle}>Done</Button>\n          </div>\n        </Modal>\n      </div>\n    );\n  };\n}\n\nclass ChangeHistoryData extends React.Component {\n  render = () => {\n    let rows = [];\n    let data = this.props.data;\n    for (let prop in data) {\n      rows.push(<ChangeHistoryDataIterator data={data[prop]} />);\n    }\n    return <div>{rows}</div>;\n  };\n}\n\nclass ChangeHistoryDataIterator extends React.Component {\n  render = () => {\n    let data = this.props.data;\n    return (\n      <div>\n        ID: {data.id} -{\" \"}\n        <ReactTime value={data.when * 1000} format=\"MM/DD/YYYY hh:mm:ss a\" /> -{\" \"}\n        {data.who} - {data.what}\n      </div>\n    );\n  };\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ReactTime from 'react-time'\nimport Modal from 'react-modal'\nimport Button from 'react-bootstrap/lib/Button'\nlet type;\nconst customStyles = {\n    content: {\n        top: \"50%\",\n        left: \"50%\",\n        right: \"auto\",\n        bottom: \"auto\",\n        marginRight: \"-50%\",\n        transform: \"translate(-50%, -50%)\"\n    }\n};\n\nexport default class ViewedByHistory extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            historyBody: false,\n            data: \"\"\n        };\n    }\n    componentDidMount() {\n        $.ajax({\n            type: \"get\",\n            url: \"/scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n            success: function (result) {\n                this.setState({ historyBody: true, data: result });\n            }.bind(this),\n            error: function (data) {\n                this.props.errorToggle(\"failed to get user change history\", data);\n            }.bind(this)\n        });\n    };\n\n    render() {\n        return (\n            <div>\n                <Modal\n                    isOpen={true}\n                    onRequestClose={this.props.viewedByHistoryToggle}\n                    style={customStyles}\n                >\n                    <div className=\"modal-header\">\n                        <img\n                            alt=\"\"\n                            src=\"/images/close_toolbar.png\"\n                            className=\"close_toolbar\"\n                            onClick={this.props.viewedByHistoryToggle}\n                        />\n                        <h3 id=\"myModalLabel\">{this.props.subjectType} Viewed By</h3>\n                    </div>\n                    <div\n                        className=\"modal-body\"\n                        style={{ maxHeight: \"30vh\", overflowY: \"auto\" }}\n                    >\n                        {this.state.historyBody ? (\n                            <ViewedByHistoryData data={this.state.data} />\n                        ) : null}\n                    </div>\n                    <div className=\"modal-footer\">\n                        <Button onClick={this.props.viewedByHistoryToggle}>Done</Button>\n                    </div>\n                </Modal>\n            </div>\n        );\n    };\n}\n\nclass ViewedByHistoryData extends React.Component {\n    render() {\n        let rows = [];\n        let data = this.props.data;\n        for (let prop in data.view_history) {\n            rows.push(\n                <ViewedByHistoryDataIterator\n                    data={data.view_history[prop]}\n                    prop={prop}\n                />\n            );\n        }\n        return (\n            <div>{rows}</div>\n        );\n    };\n}\n\nclass ViewedByHistoryDataIterator extends React.Component {\n    render() {\n        let data = this.props.data;\n        let prop = this.props.prop;\n        return (\n            <div>\n                <b>{prop}</b> at{\" \"}\n                <ReactTime value={data.when * 1000} format=\"MM/DD/YYYY hh:mm:ss a\" />{\" \"}\n                from IP: {data.where}\n            </div>\n        );\n    };\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport Button from \"react-bootstrap/lib/Button\";\nconst ReactTags = require('react-tag-input').WithContext;\n\nexport default class SelectedPermission extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { readPermissionEntry: false, modifyPermissionEntry: false };\n  }\n\n  toggleNewReadPermission = () => {\n    if (this.state.readPermissionEntry === false) {\n      this.setState({ readPermissionEntry: true });\n    } else if (this.state.readPermissionEntry === true) {\n      this.setState({ readPermissionEntry: false });\n    }\n  };\n\n  toggleNewModifyPermission = () => {\n    if (this.state.modifyPermissionEntry === false) {\n      this.setState({ modifyPermissionEntry: true });\n    } else if (this.state.modifyPermissionEntry === true) {\n      this.setState({ modifyPermissionEntry: false });\n    }\n  };\n\n  permissionsfunc = permissionData => {\n    console.log(permissionData.groups);\n    let writepermissionsarr = [];\n    let readpermissionsarr = [];\n    let readwritepermissionsarr = [];\n    for (let prop in permissionData.groups) {\n      let fullprop = permissionData.groups[prop];\n      if (prop === \"read\") {\n        permissionData.groups[prop].forEach(function (fullprop) {\n          readpermissionsarr.push(fullprop);\n        });\n      } else if (prop === \"modify\") {\n        permissionData.groups[prop].forEach(function (fullprop) {\n          writepermissionsarr.push(fullprop);\n        });\n      }\n    }\n    readwritepermissionsarr.push(readpermissionsarr);\n    readwritepermissionsarr.push(writepermissionsarr);\n    return readwritepermissionsarr;\n  };\n\n  render = () => {\n    let modifyRows = [];\n    let readRows = [];\n    let permissionData = this.props.permissionData;\n    let data = this.permissionsfunc(permissionData); //pos 0 is read and pos 1 is write\n    let id = this.props.id;\n    let type = this.props.type;\n    if (data[0] !== undefined) {\n      for (let i = 0; i < data[0].length; i++) {\n        let read_modify = \"read\";\n        readRows.push(\n          <PermissionIterator\n            data={data[0][i]}\n            dataRead={data[0]}\n            dataModify={data[1]}\n            updateid={this.props.updateid}\n            id={id}\n            type={type}\n            read_modify={read_modify}\n            updated={this.props.updated}\n          />\n        );\n      }\n    }\n    if (data[1] !== undefined) {\n      for (let i = 0; i < data[1].length; i++) {\n        let read_modify = \"modify\";\n        modifyRows.push(\n          <PermissionIterator\n            data={data[1][i]}\n            dataRead={data[0]}\n            dataModify={data[1]}\n            updateid={this.props.updateid}\n            id={id}\n            type={type}\n            read_modify={read_modify}\n            updated={this.props.updated}\n          />\n        );\n      }\n    }\n    if (type === \"entry\") {\n      return (\n        <div id=\"\" className=\"\">\n          <span style={{ display: \"inline-flex\" }}>\n            Read Groups: {readRows}\n            {this.state.readPermissionEntry ? (\n              <span style={{ display: \"inherit\", color: \"white\" }}>\n                <NewPermission\n                  readUpdate={1}\n                  modifyUpdate={0}\n                  dataRead={data[0]}\n                  dataModify={data[1]}\n                  type={type}\n                  updateid={this.props.updateid}\n                  id={id}\n                  toggleNewReadPermission={this.toggleNewReadPermission}\n                  updated={this.props.updated}\n                  permissionsToggle={this.props.permissionsToggle}\n                />\n              </span>\n            ) : null}\n            {this.state.readPermissionEntry ? (\n              <Button\n                bsSize=\"xsmall\"\n                bsStyle={\"danger\"}\n                onClick={this.toggleNewReadPermission}\n              >\n                <span\n                  className=\"glyphicon glyphicon-minus\"\n                  aria-hidden=\"true\"\n                />\n              </Button>\n            ) : (\n                <Button\n                  bsSize=\"xsmall\"\n                  bsStyle={\"success\"}\n                  onClick={this.toggleNewReadPermission}\n                >\n                  <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\" />\n                </Button>\n              )}\n            <span style={{ paddingLeft: \"5px\" }}>Modify Groups: </span>\n            {modifyRows}\n            {this.state.modifyPermissionEntry ? (\n              <span style={{ display: \"inherit\", color: \"white\" }}>\n                <NewPermission\n                  readUpdate={0}\n                  modifyUpdate={1}\n                  dataRead={data[0]}\n                  dataModify={data[1]}\n                  type={type}\n                  updateid={this.props.updateid}\n                  id={id}\n                  toggleNewModifyPermission={this.toggleNewModifyPermission}\n                  updated={this.props.updated}\n                  permissionsToggle={this.props.permissionsToggle}\n                />\n              </span>\n            ) : null}\n            {this.state.modifyPermissionEntry ? (\n              <Button\n                bsSize=\"xsmall\"\n                bsStyle={\"danger\"}\n                onClick={this.toggleNewModifyPermission}\n              >\n                <span\n                  className=\"glyphicon glyphicon-minus\"\n                  aria-hidden=\"true\"\n                />\n              </Button>\n            ) : (\n                <Button\n                  bsSize=\"xsmall\"\n                  bsStyle={\"success\"}\n                  onClick={this.toggleNewModifyPermission}\n                >\n                  <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\" />\n                </Button>\n              )}\n          </span>\n        </div>\n      );\n    } else {\n      return (\n        <div\n          id=\"\"\n          className=\"toolbar entry-header-info-null\"\n          style={{ paddingTop: \"0px\" }}\n        >\n          <span\n            style={{\n              display: \"inline-flex\",\n              paddingRight: \"10px\",\n              paddingLeft: \"5px\"\n            }}\n          >\n            <h4>Permissions:</h4>\n          </span>\n          Read Groups: {readRows}\n          {this.state.readPermissionEntry ? (\n            <NewPermission\n              readUpdate={1}\n              modifyUpdate={0}\n              dataRead={data[0]}\n              dataModify={data[1]}\n              type={type}\n              updateid={this.props.updateid}\n              id={id}\n              toggleNewReadPermission={this.toggleNewReadPermission}\n              updated={this.props.updated}\n              permissionsToggle={this.props.permissionsToggle}\n            />\n          ) : null}\n          {this.state.readPermissionEntry ? (\n            <Button\n              bsSize={\"xsmall\"}\n              bsStyle={\"danger\"}\n              onClick={this.toggleNewReadPermission}\n            >\n              <span className=\"glyphicon glyphicon-minus\" aria-hidden=\"true\" />\n            </Button>\n          ) : (\n              <Button\n                bsSize={\"xsmall\"}\n                bsStyle={\"success\"}\n                onClick={this.toggleNewReadPermission}\n              >\n                <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\" />\n              </Button>\n            )}\n          <span style={{ paddingLeft: \"5px\" }}>Modify Groups: </span>\n          {modifyRows}\n          {this.state.modifyPermissionEntry ? (\n            <NewPermission\n              readUpdate={0}\n              modifyUpdate={1}\n              dataRead={data[0]}\n              dataModify={data[1]}\n              type={type}\n              updateid={this.props.updateid}\n              id={id}\n              toggleNewModifyPermission={this.toggleNewModifyPermission}\n              updated={this.props.updated}\n              permissionsToggle={this.props.permissionsToggle}\n            />\n          ) : null}\n          {this.state.modifyPermissionEntry ? (\n            <Button\n              bsSize={\"xsmall\"}\n              bsStyle={\"danger\"}\n              onClick={this.toggleNewModifyPermission}\n            >\n              <span className=\"glyphicon glyphicon-minus\" aria-hidden=\"true\" />\n            </Button>\n          ) : (\n              <Button\n                bsSize={\"xsmall\"}\n                bsStyle={\"success\"}\n                onClick={this.toggleNewModifyPermission}\n              >\n                <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\" />\n              </Button>\n            )}\n          <img\n            src=\"/images/close_toolbar.png\"\n            alt=\"\"\n            className=\"close_toolbar\"\n            onClick={this.props.permissionsToggle}\n          />\n        </div>\n      );\n    }\n  };\n}\n\nclass PermissionIterator extends React.Component {\n  permissionDelete = () => {\n    let newPermission = {};\n    let tempArr = [];\n    let data = this.props.data;\n    let dataRead = this.props.dataRead;\n    let dataModify = this.props.dataModify;\n    if (this.props.read_modify === \"read\") {\n      for (let i = 0; i < dataRead.length; i++) {\n        if (dataRead[i] !== data) {\n          tempArr.push(dataRead[i]);\n        }\n      }\n      newPermission.read = tempArr;\n      newPermission.modify = dataModify;\n    } else if (this.props.read_modify === \"modify\") {\n      for (let j = 0; j < dataModify.length; j++) {\n        if (dataModify[j] !== data) {\n          tempArr.push(dataModify[j]);\n        }\n      }\n      newPermission.read = dataRead;\n      newPermission.modify = tempArr;\n    }\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify({ groups: newPermission }),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function () {\n        console.log(\"success\");\n      },\n      error: function (data) {\n        this.props.errorToggle(\"error Failed to delete group\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    let data = this.props.data;\n    let type = this.props.type;\n    if (type === \"entry\") {\n      return (\n        <span id=\"permission_source\" className=\"permissionButton\">\n          {data}\n          <span\n            className=\"fa fa-times permissionButtonClose\"\n            aria-hidden=\"true\"\n            onClick={this.permissionDelete}\n          />\n        </span>\n      );\n    } else {\n      return (\n        <span id=\"permission_source\" className=\"permissionButton\">\n          {data}\n          <span\n            className=\"fa fa-times permissionButtonClose\"\n            aria-hidden=\"true\"\n            onClick={this.permissionDelete}\n          />\n        </span>\n      );\n    }\n  };\n}\n\nclass NewPermission extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestions: this.props.options,\n      key: this.props.updateid,\n    };\n\n  }\n  handleAddition = tag => {\n    let newPermission = {};\n    let dataRead = this.props.dataRead;\n    let dataModify = this.props.dataModify;\n    let toggle = this.props.permissionsToggle;\n    if (this.props.readUpdate === 1) {\n      dataRead.push(tag['text']);\n    } else if (this.props.modifyUpdate === 1) {\n      dataModify.push(tag['text']);\n    }\n    if (this.props.toggleNewModifyPermission !== undefined) {\n      toggle = this.props.toggleNewModifyPermission;\n    } else if (this.props.toggleNewReadPermission !== undefined) {\n      toggle = this.props.toggleNewReadPermission;\n    }\n    newPermission.read = dataRead;\n    newPermission.modify = dataModify;\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify({ groups: newPermission }),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function () {\n        console.log(\"success: permission added\");\n        toggle();\n      },\n      error: function (data) {\n        toggle();\n        this.props.errorToggle(\"error Failed to add group\", data);\n      }.bind(this)\n    });\n  };\n\n  handleInputChange = input => {\n    //blank until there's a lookup for group permissions\n    /*let arr = [];\n        this.serverRequest = $.get('/scot/api/v2/ac/source/' + input, function (result) {\n            let result = result.records;\n            console.log(result);\n            for (let prop in result) {\n                arr.push(result[prop].value)\n            }\n            this.setState({suggestions:arr})\n        }.bind(this));*/\n  };\n\n  handleDelete = () => {\n    //blank since buttons are handled outside of this\n  };\n\n  handleDrag = () => {\n    //blank since buttons are handled outside of this\n  };\n\n  render() {\n    let suggestions = this.state.suggestions;\n    return (\n      <span className=\"tag-new\">\n        <ReactTags\n          suggestions={suggestions}\n          handleAddition={this.handleAddition}\n          handleInputChange={this.handleInputChange}\n          handleDelete={this.handleDelete}\n          handleDrag={this.handleDrag}\n          minQueryLength={1}\n          customCSS={1}\n        />\n      </span>\n    );\n  };\n}\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios'\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nimport { Editor } from '@tinymce/tinymce-react';\n\nconst styles = theme => ({\n  card: {\n    minWidth: 700,\n    marginBottom: 20\n  },\n});\n\nclass Conflict extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n\n      editedtext: \"\"\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ editedtext: this.props.localconflict })\n  }\n\n  handlePUT = () => {\n    const { enqueueSnackbar, id } = this.props;\n    let data = {\n      body: this.state.editedtext,\n      target_id: this.props.targetid,\n      parent: this.props.parent,\n      target_type: this.props.type,\n      parsed: 0\n    }\n    let url = `/scot/api/v2/entry/${id}`;\n    axios.put(url, data)\n      .then(function () {\n        enqueueSnackbar(`Successfully updated entry`, { variant: 'success' });\n        this.props.handleClose();\n        this.props.addedEntry();\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n        enqueueSnackbar(`Failed updated entry.`, { variant: 'error' });\n        this.props.handleClose();\n      });\n  }\n  handleEditorChange = (e) => {\n    this.setState({ editedtext: e })\n    console.log(`State is now: ${this.state.editedtext}`)\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div>\n        <Card className={classes.card}>\n          <CardContent>\n            <Typography variant=\"h5\" component=\"h2\">Uh-oh! It looks like there was a conflict between your {this.props.type} and the one cached saved on server.</Typography>\n            <br />\n            <div>\n              <div id='remote' className='remote'>\n                <b>Changes on server: </b>\n                <Editor\n                  className=\"remote\"\n                  initialValue={this.props.remoteconflict}\n                  disabled={true}\n                />\n              </div>\n              <br />\n              <div id='local' className='local'>\n                <b>Your changes: </b>\n                <Editor\n                  initialValue={this.state.editedtext}\n                  plugins={'advlist lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template paste textcolor colorpicker textpattern imagetools'}\n                  onEditorChange={this.handleEditorChange}\n                  value={this.state.editedtext}\n                  init={{\n                    selector: \"textarea\",\n                    plugins:\n                      \"advlist lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template paste textcolor colorpicker textpattern imagetools\",\n                    table_clone_elements:\n                      \"strong em b i font h1 h2 h3 h4 h5 h6 p div\",\n                    paste_retain_style_properties: \"all\",\n                    paste_data_images: true,\n                    paste_preprocess: function (plugin, args) {\n                      function replaceA(string) {\n                        return string.replace(/<(\\/)?a([^>]*)>/g, \"<$1span$2>\");\n                      }\n                      args.content = replaceA(args.content) + \" \";\n                    },\n                    relative_urls: false,\n                    remove_script_host: false,\n                    link_assume_external_targets: true,\n                    toolbar1:\n                      \"full screen spellchecker | undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | forecolor backcolor fontsizeselect fontselect formatselect | blockquote code link image insertdatetime | customBlockquote\",\n                    theme: \"modern\",\n                    content_css: \"/css/entryeditor.css\",\n                    height: 250,\n                    verify_html: false,\n                    setup: function (editor) {\n                      function blockquote() {\n                        return \"<blockquote><p><br></p></blockquote>\";\n                      }\n\n                      function insertBlockquote() {\n                        let html = blockquote();\n                        editor.insertContent(html);\n                      }\n\n                      editor.addButton(\"customBlockquote\", {\n                        text: \"500px max-height blockquote\",\n                        //image: 'http://p.yusukekamiyamane.com/icons/search/fugue/icons/calendar-blue.png',\n                        tooltip: \"Insert a 500px max-height div (blockquote)\",\n                        onclick: insertBlockquote\n                      });\n                    }\n                  }}\n                />\n              </div>\n            </div>\n            <div>\n              <br />\n              <Button style={{ marginLeft: 5, backgroundColor: 'red', color: 'white' }} onClick={this.handlePUT} variant=\"contained\" >Send Update to Server</Button>\n              <Button style={{ marginLeft: 5 }} onClick={this.props.handleClose} variant=\"contained\" >Cancel</Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(withStyles(styles)(Conflict));","import React from \"react\";\nimport $ from \"jquery\";\nimport * as SessionStorage from \"../utils/session_storage\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport Conflict from \"./conflict\";\nimport Dialog from \"@material-ui/core/Dialog\";\n\nlet Button = require(\"react-bootstrap/lib/Button.js\");\nlet Prompt = require(\"react-router-dom\").Prompt;\nlet Link = require(\"react-router-dom\").Link;\n\nexport default class AddEntryModal extends React.Component {\n  constructor(props) {\n    super(props);\n    let key = new Date();\n    key = key.getTime();\n    let tinyID = \"tiny_\" + key;\n    let content;\n    let asyncContentLoaded;\n    switch (this.props.entryAction) {\n      case \"Add\":\n        content = \"\";\n        asyncContentLoaded = true;\n        break;\n      case \"Reply\":\n        content = \"\";\n        asyncContentLoaded = true;\n        break;\n      case \"Copy To Entry\":\n        content = this.props.content;\n        asyncContentLoaded = true;\n        break;\n      case \"Edit\":\n        content = \"\";\n        asyncContentLoaded = false;\n        break;\n      case \"Export\":\n        content = this.props.content;\n        asyncContentLoaded = true;\n        break;\n      default:\n        content = \"\";\n        asyncContentLoaded = true;\n        break;\n    }\n\n    this.state = {\n      tinyID: tinyID,\n      key: key,\n      content: content,\n      asyncContentLoaded: asyncContentLoaded,\n      leaveCatch: true,\n      whoami: undefined,\n      recentlyUpdated: 0,\n      showConflict: false,\n      localcontent: \"\"\n    };\n  }\n\n  componentDidMount = () => {\n    let whoami = SessionStorage.getSessionStorage(\"whoami\");\n    if (whoami) {\n      this.setState({ whoami: whoami });\n    }\n\n    if (this.props.entryAction === \"Edit\") {\n      $.ajax({\n        type: \"GET\",\n        url: \"/scot/api/v2/entry/\" + this.props.id,\n        success: function(response) {\n          this.setState({\n            content: response.body,\n            asyncContentLoaded: true,\n            recentlyUpdated: response.updated\n          });\n          this.forceUpdate();\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\n            \"Error getting original data from source. Copy/Paste original\",\n            data\n          );\n          this.setState({\n            content:\n              \"Error getting original data from source. Copy/Paste original\",\n            asyncContentLoaded: true\n          });\n          this.forceUpdate();\n        }.bind(this)\n      });\n    }\n    if ($(\"#not_saved_entry_\" + this.state.key).position()) {\n      $(\".entry-wrapper\").scrollTop(\n        $(\".entry-wrapper\").scrollTop() +\n          $(\"#not_saved_entry_\" + this.state.key).position().top\n      );\n    }\n  };\n\n  // shouldComponentUpdate = () => {\n  //   return false; //prevent updating this component because it causes the page container to scroll upwards and lose focus due to a bug in paste_preprocess. If this is removed it will cause abnormal scrolling.\n  // };\n\n  onCancel = () => {\n    this.setState({ leaveCatch: false });\n    this.props.addedentry();\n    this.setState({ change: false });\n  };\n\n  submit = () => {\n    if (\n      $(\"#tiny_\" + this.state.key + \"_ifr\")\n        .contents()\n        .find(\"#tinymce\")\n        .text() === \"\" &&\n      $(\"#\" + this.state.key + \"_ifr\")\n        .contents()\n        .find(\"#tinymce\")\n        .find(\"img\").length === 0\n    ) {\n      alert(\"Please Add Some Text\");\n    } else {\n      if (this.props.entryAction === \"Reply\") {\n        var data = {};\n        $(\"#tiny_\" + this.state.key + \"_ifr\")\n          .contents()\n          .find(\"#tinymce\")\n          .each(function(x, y) {\n            $(y)\n              .find(\"img\")\n              .each(function(key, value) {\n                if ($(value)[0].src.startsWith(\"blob\")) {\n                  //Checking to see if it's a locally copied file\n                  let canvas = document.createElement(\"canvas\");\n                  let set = new Image();\n                  set = $(value);\n                  canvas.width = set[0].width;\n                  canvas.height = set[0].height;\n                  let ctx = canvas.getContext(\"2d\");\n                  ctx.drawImage(set[0], 0, 0);\n                  let dataURL = canvas.toDataURL(\"image/png\");\n                  $(value).attr(\"src\", dataURL);\n                }\n              });\n          });\n        data = JSON.stringify({\n          parent: Number(this.props.id),\n          body: $(\"#tiny_\" + this.state.key + \"_ifr\")\n            .contents()\n            .find(\"#tinymce\")\n            .html(),\n          target_id: Number(this.props.targetid),\n          target_type: this.props.type,\n          tlp: \"unset\"\n        });\n        $.ajax({\n          type: \"post\",\n          url: \"/scot/api/v2/entry\",\n          data: data,\n          contentType: \"application/json; charset=UTF-8\",\n          dataType: \"json\",\n          success: function(response) {\n            this.setState({ leaveCatch: false });\n            this.props.addedentry();\n          }.bind(this),\n          error: function(response) {\n            this.props.errorToggle(\"Failed to add entry.\", response);\n          }.bind(this)\n        });\n      } else if (this.props.entryAction === \"Edit\") {\n        $.ajax({\n          type: \"GET\",\n          url: \"/scot/api/v2/entry/\" + this.props.id,\n          success: function(response) {\n            if (this.state.recentlyUpdated !== response.updated) {\n              this.forEdit(false);\n              this.setState({\n                showConflict: true,\n                remoteconflict: response.body\n              });\n            } else {\n              this.forEdit(true);\n            }\n          }.bind(this),\n          error: function(data) {\n            this.props.errorToggle(\"failed to get data for edit\", data);\n          }.bind(this)\n        });\n      } else if (this.props.type === \"alert\") {\n        $(\"#tiny_\" + this.state.key + \"_ifr\")\n          .contents()\n          .find(\"#tinymce\")\n          .each(function(x, y) {\n            $(y)\n              .find(\"img\")\n              .each(function(key, value) {\n                if ($(value)[0].src.startsWith(\"blob\")) {\n                  //Checking if it's a locally copied file\n                  let canvas = document.createElement(\"canvas\");\n                  let set = new Image();\n                  set = $(value);\n                  canvas.width = set[0].width;\n                  canvas.height = set[0].height;\n                  let ctx = canvas.getContext(\"2d\");\n                  ctx.drawImage(set[0], 0, 0);\n                  let dataURL = canvas.toDataURL(\"image/png\");\n                  $(value).attr(\"src\", dataURL);\n                }\n              });\n          });\n        data = JSON.stringify({\n          body: $(\"#tiny_\" + this.state.key + \"_ifr\")\n            .contents()\n            .find(\"#tinymce\")\n            .html(),\n          target_id: Number(this.props.targetid),\n          target_type: \"alert\",\n          tlp: \"unset\",\n          parent: 0\n        });\n        $.ajax({\n          type: \"post\",\n          url: \"/scot/api/v2/entry\",\n          data: data,\n          contentType: \"application/json; charset=UTF-8\",\n          dataType: \"json\",\n          success: function(response) {\n            this.setState({ leaveCatch: false });\n            this.props.addedentry();\n            this.props.toggleVisibility();\n          }.bind(this),\n          error: function(response) {\n            this.props.errorToggle(\"Failed to add entry.\", response);\n          }.bind(this)\n        });\n      } else {\n        $(\"#tiny_\" + this.state.key + \"_ifr\")\n          .contents()\n          .find(\"#tinymce\")\n          .each(function(x, y) {\n            $(y)\n              .find(\"img\")\n              .each(function(key, value) {\n                if ($(value)[0].src.startsWith(\"blob\")) {\n                  //Checking if its a locally copied file\n                  let canvas = document.createElement(\"canvas\");\n                  let set = new Image();\n                  set = $(value);\n                  canvas.width = set[0].width;\n                  canvas.height = set[0].height;\n                  let ctx = canvas.getContext(\"2d\");\n                  ctx.drawImage(set[0], 0, 0);\n                  let dataURL = canvas.toDataURL(\"image/png\");\n                  $(value).attr(\"src\", dataURL);\n                }\n              });\n          });\n        data = {\n          parent: 0,\n          body: $(\"#tiny_\" + this.state.key + \"_ifr\")\n            .contents()\n            .find(\"#tinymce\")\n            .html(),\n          target_id: Number(this.props.targetid),\n          target_type: this.props.type,\n          tlp: \"unset\"\n        };\n        $.ajax({\n          type: \"post\",\n          url: \"/scot/api/v2/entry\",\n          data: JSON.stringify(data),\n          contentType: \"application/json; charset=UTF-8\",\n          dataType: \"json\",\n          success: function(response) {\n            this.setState({ leaveCatch: false });\n            this.props.addedentry();\n          }.bind(this),\n          error: function(response) {\n            this.props.errorToggle(\"Failed to add entry.\", response);\n          }.bind(this)\n        });\n      }\n    }\n  };\n\n  exportContent = () => {\n    if (this.props.recipients.length > 0) {\n      var data = {};\n      $(\"#tiny_\" + this.state.key + \"_ifr\")\n        .contents()\n        .find(\"#tinymce\")\n        .each(function(x, y) {\n          $(y)\n            .find(\"img\")\n            .each(function(key, value) {\n              if ($(value)[0].src.startsWith(\"blob\")) {\n                //Checking to see if it's a locally copied file\n                let canvas = document.createElement(\"canvas\");\n                let set = new Image();\n                set = $(value);\n                canvas.width = set[0].width;\n                canvas.height = set[0].height;\n                let ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(set[0], 0, 0);\n                let dataURL = canvas.toDataURL(\"image/png\");\n                $(value).attr(\"src\", dataURL);\n              }\n            });\n        });\n      data = JSON.stringify({\n        body: $(\"#tiny_\" + this.state.key + \"_ifr\")\n          .contents()\n          .find(\"#tinymce\")\n          .html(),\n        to: this.props.recipients,\n        thing: this.props.type\n      });\n      $.ajax({\n        type: \"post\",\n        url: \"/scot/api/v2/sendexport\",\n        data: data,\n        contentType: \"application/json; charset=UTF-8\",\n        dataType: \"json\",\n        success: function() {\n          this.setState({ leaveCatch: false });\n          this.props.exportResponse(\"success\");\n        }.bind(this),\n        error: function(response) {\n          this.props.errorToggle(\n            \"Failed to export \" + this.props.type,\n            response\n          );\n          this.props.exportResponse(\"error\");\n        }.bind(this)\n      });\n    } else {\n      this.props.errorToggle(\"Please enter a valid email address\");\n    }\n  };\n\n  handleClose = () => {\n    this.setState({ showConflict: false });\n  };\n\n  forEdit = set => {\n    if (set) {\n      $(\"#tiny_\" + this.state.key + \"_ifr\")\n        .contents()\n        .find(\"#tinymce\")\n        .each(function(x, y) {\n          $(y)\n            .find(\"img\")\n            .each(function(key, value) {\n              if ($(value)[0].src.startsWith(\"blob\")) {\n                //Checking if its a lcoally copied file\n                let canvas = document.createElement(\"canvas\");\n                let set = new Image();\n                set = $(value);\n                canvas.width = set[0].width;\n                canvas.height = set[0].height;\n                let ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(set[0], 0, 0);\n                let dataURL = canvas.toDataURL(\"image/png\");\n                $(value).attr(\"src\", dataURL);\n              }\n            });\n        });\n      let data = {\n        parent: Number(this.props.parent),\n        body: $(\"#tiny_\" + this.state.key + \"_ifr\")\n          .contents()\n          .find(\"#tinymce\")\n          .html(),\n        target_id: Number(this.props.targetid),\n        target_type: this.props.type,\n        parsed: 0\n      };\n      $.ajax({\n        type: \"put\",\n        url: \"/scot/api/v2/entry/\" + this.props.id,\n        data: JSON.stringify(data),\n        contentType: \"application/json; charset=UTF-8\",\n        dataType: \"json\",\n        success: function(response) {\n          this.setState({ leaveCatch: false });\n          this.props.addedentry();\n        }.bind(this),\n        error: function(response) {\n          this.props.errorToggle(\"Failed to edit entry.\", response);\n        }.bind(this)\n      });\n    }\n  };\n\n  handleEditorChange = e => {\n    this.setState({ localcontent: e });\n  };\n\n  render = () => {\n    let not_saved_entry_id = \"not_saved_entry_\" + this.state.key;\n    return (\n      <div id={not_saved_entry_id} className={\"not_saved_entry\"}>\n        {this.state.showConflict ? (\n          <Dialog\n            fullWidth={true}\n            maxWidth={\"md\"}\n            open={this.state.showConflict}\n            onClose={this.handleClose}\n            aria-labelledby=\"simple-dialog-title\"\n          >\n            <Conflict\n              targetid={this.props.targetid}\n              type={this.props.type}\n              parent={this.props.parent}\n              addedEntry={this.props.addedentry}\n              id={this.props.id}\n              localconflict={this.state.localcontent}\n              handleClose={this.handleClose}\n              remoteconflict={this.state.remoteconflict}\n            />\n          </Dialog>\n        ) : null}\n        <div\n          className={\"row-fluid entry-outer\"}\n          style={{\n            border: \"3px solid blue\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            width: \"99.3%\"\n          }}\n        >\n          <div className={\"row-fluid entry-header\"}>\n            <div className=\"entry-header-inner\">\n              [\n              <Link style={{ color: \"black\" }} to={\"not_saved_0\"}>\n                Not_Saved_0\n              </Link>\n              ]by {this.state.whoami}\n              <span\n                className=\"pull-right\"\n                style={{ display: \"inline-flex\", paddingRight: \"3px\" }}\n              >\n                {this.props.entryAction === \"Export\" ? (\n                  <Button\n                    bsSize={\"xsmall\"}\n                    onClick={this.exportContent}\n                    bsStyle={\"success\"}\n                  >\n                    Export\n                  </Button>\n                ) : (\n                  <Button\n                    bsSize={\"xsmall\"}\n                    onClick={this.submit}\n                    bsStyle={\"success\"}\n                  >\n                    Submit\n                  </Button>\n                )}\n                <Button bsSize={\"xsmall\"} onClick={this.onCancel}>\n                  Cancel\n                </Button>\n              </span>\n            </div>\n          </div>\n          {this.state.asyncContentLoaded ? (\n            <Editor\n              id={this.state.tinyID}\n              className={\"inputtext\"}\n              initialValue={this.state.content}\n              plugins={\n                \"advlist lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template paste textpattern imagetools\"\n              }\n              onEditorChange={this.handleEditorChange}\n              init={{\n                table_default_attributes: {\n                  border: \"5\",\n                  borderStyle: \"solid\",\n                  borderColor: \"blue\"\n                },\n                auto_focus: this.state.tinyID,\n                // selector: \"textarea\",\n                browser_spellcheck: true,\n                contextmenu: false,\n                codesample_languages: [\n                  { text: \"C\", value: \"c\" },\n                  { text: \"C#\", value: \"csharp\" },\n                  { text: \"C++\", value: \"cpp\" },\n                  { text: \"Docker\", value: \"docker\" },\n                  { text: \"HTTP\", value: \"http\" },\n                  { text: \"JavaScript\", value: \"javascript\" },\n                  { text: \"Java\", value: \"java\" },\n                  { text: \"JSON\", value: \"json\" },\n                  { text: \"Markdown\", value: \"md\" },\n                  { text: \"Perl\", value: \"perl\" },\n                  { text: \"PHP\", value: \"php\" },\n                  { text: \"Powershell\", value: \"powershell\" },\n                  { text: \"Python\", value: \"python\" },\n                  { text: \"Ruby\", value: \"ruby\" },\n                  { text: \"Bash / Shell\", value: \"bash\" },\n                  { text: \"Splunk SPL \", value: \"splunk-spl\" },\n                  { text: \"Visual Basic\", value: \"visual-basic\" },\n                  { text: \"HTML/XML\", value: \"markup\" }\n                  //powershell, shell, javascript, http, visual basic, splunk spll, json, perl\n                ],\n                plugins:\n                  \"advlist lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template paste textpattern imagetools codesample\",\n                table_clone_elements:\n                  \"strong em b i font h1 h2 h3 h4 h5 h6 p div\",\n                paste_retain_style_properties: \"all\",\n                paste_data_images: true,\n                paste_preprocess: function(plugin, args) {\n                  function replaceA(string) {\n                    return string.replace(/<(\\/)?a([^>]*)>/g, \"<$1span$2>\");\n                  }\n                  args.content = replaceA(args.content) + \" \";\n                },\n                paste_postprocess: (plugin, args) => {\n                  args.node.querySelectorAll(\"table\").forEach(tableNode => {\n                    tableNode.setAttribute(\"border\", \"1\");\n                    tableNode.setAttribute(\"cellpadding\", \"1\");\n                    tableNode.setAttribute(\"cellspacing\", \"0\");\n                  });\n                },\n                relative_urls: false,\n                remove_script_host: false,\n                link_assume_external_targets: true,\n                toolbar1:\n                  \"full screen  | undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | forecolor backcolor fontsizeselect fontselect formatselect | blockquote code link image insertdatetime | customBlockquote | codesample\",\n                content_css: \"/css/entryeditor.css\",\n                height: 250,\n                verify_html: false,\n                setup: function(editor) {\n                  function blockquote() {\n                    return \"<blockquote><p><br></p></blockquote>\";\n                  }\n\n                  function insertBlockquote() {\n                    let html = blockquote();\n                    editor.insertContent(html);\n                  }\n                  editor.ui.registry.addMenuButton(\"customBlockquote\", {\n                    text: \"500px max-height blockquote\",\n                    //image: 'http://p.yusukekamiyamane.com/icons/search/fugue/icons/calendar-blue.png',\n                    tooltip: \"Insert a 500px max-height div (blockquote)\",\n                    fetch: insertBlockquote\n                    // onclick: insertBlockquote\n                  });\n                }\n              }}\n            />\n          ) : (\n            <div>Loading Editor...</div>\n          )}\n        </div>\n        <Prompt\n          when={this.state.leaveCatch}\n          message=\"Unsubmitted entry detected. You may want to submit or copy the contents of the entry before navigating elsewhere. Click CANCEL to prevent navigation elsewhere.\"\n        />\n      </div>\n    );\n  };\n}\n","import React from \"react\";\nimport * as SessionStorage from \"../utils/session_storage\";\nimport $ from \"jquery\";\nimport Dropzone from \"react-dropzone\";\nlet Button = require(\"react-bootstrap/lib/Button.js\");\nlet Link = require(\"react-router-dom\").Link;\nlet finalfiles = [];\n\nexport default class FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      edit: false,\n      stagecolor: \"#000\",\n      enable: true,\n      addentry: true,\n      saved: true,\n      enablesave: true,\n      whoami: undefined\n    };\n  }\n\n  componentDidMount() {\n    let whoami = SessionStorage.getSessionStorage(\"whoami\");\n    if (whoami) {\n      this.setState({ whoami: whoami });\n    }\n\n    $(\".entry-wrapper\").scrollTop(\n      $(\".entry-wrapper\").scrollTop() +\n        $(\"#not_saved_entry_\" + this.props.id).position().top\n    );\n  }\n\n  render() {\n    let not_saved_entry_id = \"not_saved_entry_\" + this.props.id;\n    return (\n      <div id={not_saved_entry_id}>\n        <div\n          className={\"row-fluid entry-outer\"}\n          style={{\n            border: \"3px solid blue\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            width: \"99.3%\"\n          }}\n        >\n          <div className={\"row-fluid entry-header\"}>\n            <div className=\"entry-header-inner\">\n              [\n              <Link style={{ color: \"black\" }} to={\"not_saved_0\"}>\n                Not_Saved_0\n              </Link>\n              ]by {this.state.whoami}\n              <span\n                className=\"pull-right\"\n                style={{ display: \"inline-flex\", paddingRight: \"3px\" }}\n              >\n                <Button bsSize={\"xsmall\"} onClick={this.submit}>\n                  Submit\n                </Button>\n                <Button bsSize={\"xsmall\"} onClick={this.onCancel}>\n                  Cancel\n                </Button>\n              </span>\n            </div>\n          </div>\n          <Dropzone onDrop={this.onDrop}>\n            {({ getRootProps, getInputProps }) => (\n              <section>\n                <div\n                  style={{\n                    \"border-width\": \"2px\",\n                    \"border-color\": \"#000\",\n                    \"border-radius\": \"4px\",\n                    \"border-style\": \"dashed\",\n                    \"text-align\": \"center\",\n                    \"background-color\": \"azure\"\n                  }}\n                  {...getRootProps()}\n                >\n                  <input {...getInputProps()} />\n                  <p>Drag 'n' drop some files here, or click to select files</p>\n                </div>\n              </section>\n            )}\n          </Dropzone>\n          {this.state.files ? (\n            <div>\n              {\" \"}\n              {this.state.files.map(\n                function(file) {\n                  return (\n                    <ul\n                      style={{\n                        \"list-style-type\": \"none\",\n                        margin: \"0\",\n                        padding: \"0\"\n                      }}\n                    >\n                      <li>\n                        <p style={{ display: \"inline\" }}>{file.name}</p>\n                        <button\n                          style={{ \"line-height\": \"1px\" }}\n                          className=\"btn btn-info\"\n                          id={file.name}\n                          onClick={this.Close}\n                        >\n                          x\n                        </button>\n                      </li>\n                    </ul>\n                  );\n                }.bind(this)\n              )}\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n\n  onCancel = () => {\n    finalfiles = [];\n    this.props.fileUploadToggle();\n  };\n\n  Close = i => {\n    for (let x = 0; x < finalfiles.length; x++) {\n      if (i.target.id === finalfiles[x].name) {\n        finalfiles.splice(x, 1);\n      }\n    }\n    this.setState({ files: finalfiles });\n  };\n\n  onDrop = files => {\n    for (let i = 0; i < files.length; i++) {\n      finalfiles.push(files[i]);\n    }\n    console.log(files);\n    this.setState({ files: finalfiles });\n  };\n\n  submit = () => {\n    if (finalfiles.length > 0) {\n      for (let i = 0; i < finalfiles.length; i++) {\n        let data = new FormData();\n        data.append(\"upload\", finalfiles[i]);\n        data.append(\"target_type\", this.props.type);\n        data.append(\"target_id\", Number(this.props.targetid));\n        if (this.props.entryid != null) {\n          data.append(\"entry_id\", this.props.entryid);\n        }\n        let xhr = new XMLHttpRequest();\n        xhr.addEventListener(\"progress\", this.uploadProgress);\n        xhr.addEventListener(\"load\", this.uploadComplete);\n        xhr.addEventListener(\"error\", this.uploadFailed);\n        xhr.addEventListener(\"abord\", this.uploadCancelled);\n        xhr.open(\"POST\", \"/scot/api/v2/file\");\n        console.log(data);\n        xhr.send(data);\n      }\n    } else {\n      alert(\"Select a file to upload before submitting.\");\n    }\n  };\n\n  uploadComplete = () => {\n    this.onCancel();\n  };\n\n  uploadFailed = () => {\n    this.props.errorToggle(\"An error occured. Upload failed.\");\n  };\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nexport default class Summary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      key: this.props.id\n    };\n  }\n\n  toggle = () => {\n    let newClass;\n    if (this.props.summary === 1) {\n      newClass = \"entry\";\n    } else if (this.props.summary === 0) {\n      newClass = \"summary\";\n    }\n    let json = { class: newClass };\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/entry/\" + this.props.entryid,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"success: \" + data);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to make summary\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    let summaryDisplay = \"Summary Loading...\";\n    let onClick;\n    if (this.props.summary === 0) {\n      summaryDisplay = \"Make Summary\";\n      onClick = this.toggle;\n    } else if (this.props.summary === 1) {\n      summaryDisplay = \"Remove Summary\";\n      onClick = this.toggle;\n    }\n    return (\n      <span style={{ display: \"block\" }} onClick={onClick}>\n        {summaryDisplay}\n      </span>\n    );\n  };\n}\n","import React from \"react\";\nimport * as SessionStorage from \"../utils/session_storage\";\nimport $ from \"jquery\";\n\nexport default class Task extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      whoami: undefined\n    };\n  }\n\n  componentDidMount = () => {\n    let whoami = SessionStorage.getSessionStorage(\"whoami\");\n    this.setState({ whoami: whoami });\n  };\n\n  makeTask = () => {\n    let json = { make_task: 1 };\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/entry/\" + this.props.entryid,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"success: \" + data);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to close task\", data);\n      }.bind(this)\n    });\n  };\n\n  closeTask = () => {\n    let json = { close_task: 1 };\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/entry/\" + this.props.entryid,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"success: \" + data);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to close task\", data);\n      }.bind(this)\n    });\n  };\n\n  takeTask = () => {\n    let json = { take_task: 1 };\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/entry/\" + this.props.entryid,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"success: \" + data);\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to make Task owner\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    let taskDisplay = \"Task Loading...\";\n    let onClick;\n    if (this.props.taskData.class === \"task\") {\n      if (\n        this.props.taskData.metadata.task.status === undefined ||\n        this.props.taskData.metadata.task.status === null ||\n        this.props.taskData.class !== \"task\"\n      ) {\n        taskDisplay = \"Make Task\";\n        onClick = this.makeTask;\n      } else if (\n        this.state.whoami !== this.props.taskData.metadata.task.who &&\n        this.props.taskData.metadata.task.status === \"open\"\n      ) {\n        taskDisplay = \"Assign task to me\";\n        onClick = this.takeTask;\n      } else if (\n        this.state.whoami === this.props.taskData.metadata.task.who &&\n        this.props.taskData.metadata.task.status === \"open\"\n      ) {\n        taskDisplay = \"Close Task\";\n        onClick = this.closeTask;\n      } else if (\n        this.props.taskData.metadata.task.status === \"closed\" ||\n        this.props.taskData.metadata.task.status === \"completed\"\n      ) {\n        taskDisplay = \"Reopen Task\";\n        onClick = this.makeTask;\n      } else if (\n        this.state.whoami === this.props.taskData.metadata.task.who &&\n        this.props.taskData.metadata.task.status === \"assigned\"\n      ) {\n        taskDisplay = \"Close Task\";\n        onClick = this.closeTask;\n      } else if (\n        this.state.whoami !== this.props.taskData.metadata.task.who &&\n        this.props.taskData.metadata.task.status === \"assigned\"\n      ) {\n        taskDisplay = \"Assign task to me\";\n        onClick = this.takeTask;\n      }\n    } else {\n      taskDisplay = \"Make Task\";\n      onClick = this.makeTask;\n    }\n    return (\n      <span style={{ display: \"block\" }} onClick={onClick}>\n        {taskDisplay}\n      </span>\n    );\n  };\n}\n","import React from \"react\";\nimport Modal from \"react-modal\";\nimport Button from \"react-bootstrap/lib/Button\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nexport default class LinkWarning extends React.Component {\n  proceed = () => {\n    window.open(this.props.link, '_blank' ).opener = null;\n    this.props.linkWarningToggle();\n  };\n\n  apiOnly = () => {\n    this.props.linkWarningToggle();\n    fetch(this.props.link);\n    alert(\"Request Submitted. Refresh entity display to see results\");\n};\n\n  componentWillMount = () => {\n    if ( this.props.nopop === \"true\" ) { \n        this.apiOnly();\n        return; \n    }\n    let myDomain = window.location.href;\n    let reg = new RegExp(\n      /((https?|ftp):\\/\\/[a-zA-Z0-9\\-_\\.]+\\.)?([a-zA-Z0-9\\-_\\.]+\\.([a-zA-Z]{1,63}))/,\n      \"i\"\n    );\n    let linkRegResult = this.props.link.match(reg);\n    let myDomainRegResult = myDomain.match(reg);\n    if (linkRegResult != undefined && myDomainRegResult != undefined) {\n      let linkDomain = linkRegResult[3];\n      let myDomain = myDomainRegResult[3];\n      if (linkDomain === myDomain) {\n        this.proceed();\n      }\n    } else if (linkRegResult == undefined) {\n      this.proceed();\n    }\n    /*\n        if ($.isUrlInternal(this.props.link)) {\n            this.proceed();\n        }*/\n  };\n  render = () => {\n    return (\n      <div>\n        <Modal\n          isOpen={true}\n          onRequestClose={this.props.linkWarningToggle}\n          style={customStyles}\n        >\n          <div className=\"modal-header\">\n            <img\n              src=\"/images/close_toolbar.png\"\n              className=\"close_toolbar\"\n              alt=\"\"\n              onClick={this.props.linkWarningToggle}\n            />\n            <h3 id=\"myModalLabel\">Browse to site?</h3>\n          </div>\n          <div className=\"modal-body\">\n            The link you clicked may take you to a site outside SCOT. If this is\n            a link an attacker controls you may be tipping your hand.\n            <br />\n            <b>{this.props.link}</b>\n          </div>\n          <div className=\"modal-footer\">\n            <Button id=\"cancel-delete\" onClick={this.props.linkWarningToggle}>\n              Cancel\n            </Button>\n            <Button bsStyle=\"info\" id=\"proceed\" onClick={this.proceed}>\n              Proceed\n            </Button>\n          </div>\n        </Modal>\n      </div>\n    );\n  };\n}\n","import React from 'react';\nimport brace from 'brace';\nimport AceEditor from 'react-ace';\nimport Button from 'react-bootstrap/lib/Button.js';\nimport DropdownButton from 'react-bootstrap/lib/DropdownButton.js';\nimport OverlayTrigger from 'react-bootstrap/lib/OverlayTrigger.js';\nimport ButtonGroup from 'react-bootstrap/lib/ButtonGroup.js';\nimport MenuItem from 'react-bootstrap/lib/MenuItem.js';\nimport Popover from 'react-bootstrap/lib/Popover.js';\nimport $ from 'jquery'\nimport 'brace/mode/bro';\nimport 'brace/mode/javascript';\nimport 'brace/mode/java';\nimport 'brace/mode/python';\nimport 'brace/mode/xml';\nimport 'brace/mode/ruby';\nimport 'brace/mode/sass';\nimport 'brace/mode/markdown';\nimport 'brace/mode/mysql';\nimport 'brace/mode/json';\nimport 'brace/mode/html';\nimport 'brace/mode/c_cpp';\nimport 'brace/mode/csharp';\nimport 'brace/mode/perl';\nimport 'brace/mode/powershell';\nimport 'brace/mode/yaml';\nimport 'brace/theme/github';\nimport 'brace/theme/monokai';\nimport 'brace/theme/kuroir';\nimport 'brace/theme/solarized_dark';\nimport 'brace/theme/solarized_light';\nimport 'brace/theme/terminal';\nimport 'brace/theme/textmate';\nimport 'brace/theme/tomorrow';\nimport 'brace/theme/twilight';\nimport 'brace/theme/xcode';\nimport 'brace/keybinding/vim';\nimport 'brace/keybinding/emacs';\nimport * as Cookies from \"../utils/cookies\"\n\n\nexport default class SignatureTable extends React.Component {\n  constructor(props) {\n    super(props);\n    let key = new Date();\n    key = key.getTime();\n    let value = '';\n    let currentKeyboardHandler = 'none';\n    let currentLanguageMode = 'java';\n    let currentEditorTheme = 'github';\n    let viewVersionid = this.props.headerData.prod_sigbody_id;\n    let viewSigBodyid;\n    if (Cookies.checkCookie('signatureKeyboardHandler') != undefined) {\n      currentKeyboardHandler = Cookies.checkCookie('signatureKeyboardHandler');\n    }\n    if (Cookies.checkCookie('signatureLanguageMode') != undefined) {\n      currentLanguageMode = Cookies.checkCookie('signatureLanguageMode');\n    }\n    if (Cookies.checkCookie('signatureEditorTheme') != undefined) {\n      currentEditorTheme = Cookies.checkCookie('signatureEditorTheme');\n    }\n    if (Object.keys(this.props.headerData.version).length !== 0) {\n      if (this.props.headerData.version[this.props.headerData.prod_sigbody_id] != undefined || this.props.headerData.version[this.props.headerData.prod_sigbody_id] == 0) {\n        value = this.props.headerData.version[this.props.headerData.prod_sigbody_id].body;\n        viewSigBodyid = this.props.headerData.version[this.props.headerData.prod_sigbody_id].id;\n      } else {\n        for (let key in this.props.headerData.version) {\n          if (key < viewVersionid) {\n            continue;\n          } else {\n            viewVersionid = key;\n            value = this.props.headerData.version[key].body;\n            viewSigBodyid = this.props.headerData.version[key].id;\n          }\n        }\n      }\n    }\n    this.state = {\n      readOnly: true,\n      value: value,\n      signatureData: this.props.headerData,\n      loaded: true,\n      viewSigBodyid: viewSigBodyid,\n      viewVersionid: viewVersionid,\n      lastViewVersionid: null,\n      key: key,\n      cursorEnabledDisabled: \"cursorDisabled\",\n      keyboardHandlers: [\"none\", \"vim\", \"emacs\"],\n      currentKeyboardHandler: currentKeyboardHandler,\n      languageModes: [\n        \"bro\",\n        \"csharp\",\n        \"c_cpp\",\n        \"html\",\n        \"javascript\",\n        \"java\",\n        \"json\",\n        \"markdown\",\n        \"mysql\",\n        \"perl\",\n        \"powershell\",\n        \"python\",\n        \"ruby\",\n        \"sass\",\n        \"xml\",\n        \"yaml\"\n      ],\n      currentLanguageMode: currentLanguageMode,\n      editorThemes: [\n        \"github\",\n        \"monokai\",\n        \"kuroir\",\n        \"solarized_dark\",\n        \"solarized_light\",\n        \"terminal\",\n        \"textmate\",\n        \"tomorrow\",\n        \"twilight\",\n        \"xcode\"\n      ],\n      currentEditorTheme: currentEditorTheme,\n      ajaxType: null\n    };\n\n  }\n  onChange = value => {\n    this.setState({ value: value });\n  }\n\n  submitSigBody = e => {\n    let url = 'scot/api/v2/sigbody/';\n    let versionid = this.state.viewVersionid;  //version revision if creating a new sigbody\n    if (this.state.ajaxType == 'put') {\n      versionid = this.state.viewSigBodyid;  //version id (not revision id) if editing an existing sigbody \n      url = 'scot/api/v2/sigbody/' + versionid;\n    }\n    $.ajax({\n      type: this.state.ajaxType,\n      url: url,\n      data: JSON.stringify({ signature_id: parseInt(this.props.id), body: this.state.value }),\n      contentType: 'application/json; charset=UTF-8',\n      success: function (data) {\n        console.log('successfully changed signature data');\n        let viewVersionid;\n        if (data.revision == undefined) { viewVersionid = this.state.viewVersionid; } else { viewVersionid = data.revision; }\n        this.setState({ readOnly: true, cursorEnabledDisabled: 'cursorDisabled', ajaxType: null, viewVersionid: viewVersionid, viewSigBodyid: data.id });\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('Failed to create/update sigbody', data);\n      }.bind(this)\n    });\n  }\n\n  componentWillReceiveProps = nextProps => {\n    this.setState({ signatureData: nextProps.headerData });\n  }\n\n  editSigBody = e => {\n    this.setState({ readOnly: false, lastViewVersionid: this.state.viewVersionid, cursorEnabledDisabled: 'cursorEnabled', ajaxType: 'put' });\n  }\n\n  createNewSigBody = () => {\n    this.setState({ readOnly: false, viewVersionid: null, lastViewVersionid: this.state.viewVersionid, value: '', cursorEnabledDisabled: 'cursorEnabled', ajaxType: 'post' });\n  }\n\n  createNewSigBodyFromSig = () => {\n    this.setState({ readOnly: false, lastViewVersionid: this.state.viewVersionid, cursorEnabledDisabled: 'cursorEnabled', ajaxType: 'post', viewVersionid: null });\n  }\n\n  Cancel = () => {\n    let value = '';\n    if (Object.keys(this.state.signatureData.version).length !== 0) {\n      if (this.state.signatureData.version[this.state.signatureData.prod_sigbody_id] != undefined) {\n        value = this.state.signatureData.version[this.state.lastViewVersionid].body;\n      }\n    }\n    this.setState({ readOnly: true, value: value, viewVersionid: this.state.lastViewVersionid, cursorEnabledDisabled: 'cursorDisabled', ajaxType: null });\n  }\n\n  viewSigBody = e => {\n    if (this.state.readOnly === true) {\n      //only allow button click if you can't edit the signature\n      this.setState({\n        value: this.state.signatureData.version[e.target.id].body,\n        viewVersionid: e.target.id,\n        viewSigBodyid: e.target.viewSigBodyid\n      });\n    }\n  };\n\n  keyboardHandlerUpdate = e => {\n    Cookies.setCookie(\"signatureKeyboardHandler\", e.target.text, 1000);\n    this.setState({ currentKeyboardHandler: e.target.text });\n  };\n\n  languageModeUpdate = e => {\n    Cookies.setCookie(\"signatureLanguageMode\", e.target.text, 1000);\n    this.setState({ currentLanguageMode: e.target.text });\n  };\n\n  editorThemeUpdate = e => {\n    Cookies.setCookie(\"signatureEditorTheme\", e.target.text, 1000);\n    this.setState({ currentEditorTheme: e.target.text });\n  };\n\n\n  render() {\n    let versionsArray = [];\n    let keyboardHandlersArray = [];\n    let languageModesArray = [];\n    let editorThemesArray = [];\n    let not_saved_signature_entry_id = 'not_saved_signature_entry_' + this.state.key;\n    let currentKeyboardHandlerApplied = this.state.currentKeyboardHandler;\n    let viewVersionid = [];\n    let highestVersionid = 0;\n    if (Object.keys(this.state.signatureData).length !== 0) {\n      if (Object.keys(this.state.signatureData.version).length !== 0) {\n        for (let key in this.state.signatureData.version) {\n          let versionidrevision = this.state.signatureData.version[key].revision;\n          let versionidrevisionprodqual = this.state.signatureData.version[key].revision;\n          let versionidSigBodyid = this.state.signatureData.version[key].id;\n          if (this.state.signatureData.prod_sigbody_id == versionidrevision) { versionidrevisionprodqual = versionidrevision + ' - Production'; } else if (this.state.signatureData.qual_sigbody_id == versionidrevision) { versionidrevisionprodqual = versionidrevision + ' - Quality'; } //add production and quality text to identify current status on the menu\n          let disabled;\n          if (this.state.readOnly == true) { disabled = false; } else { disabled = true; }\n          versionsArray.push(<MenuItem id={versionidrevision} key={versionidrevision} onClick={this.viewSigBody} eventKey={versionidrevision} viewSigBodyid={versionidSigBodyid} bsSize={'xsmall'} disabled={disabled}>{versionidrevisionprodqual}</MenuItem>);\n          if (versionidrevision > highestVersionid) { highestVersionid = versionidrevision; }\n        }\n      }\n    }\n\n    if (this.state.keyboardHandlers != undefined) {\n      for (let i = 0; i < this.state.keyboardHandlers.length; i++) {\n        keyboardHandlersArray.push(<MenuItem id={i} key={i} onClick={this.keyboardHandlerUpdate} eventKey={i} bsSize={'xsmall'}>{this.state.keyboardHandlers[i]}</MenuItem>);\n      }\n    }\n\n    if (this.state.currentKeyboardHandler == 'none') {\n      currentKeyboardHandlerApplied = null;\n    }\n\n    if (this.state.languageModes != undefined) {\n      for (let i = 0; i < this.state.languageModes.length; i++) {\n        languageModesArray.push(<MenuItem id={i} key={i} onClick={this.languageModeUpdate} eventKey={i} bsSize={'xsmall'}>{this.state.languageModes[i]}</MenuItem>);\n      }\n    }\n\n    if (this.state.editorThemes != undefined) {\n      for (let i = 0; i < this.state.editorThemes.length; i++) {\n        editorThemesArray.push(<MenuItem id={i} key={i} onClick={this.editorThemeUpdate} eventKey={i} bsSize={'xsmall'}>{this.state.editorThemes[i]}</MenuItem>);\n      }\n    }\n    if (this.state.signatureData.prod_sigbody_id == this.state.viewVersionid) {\n      viewVersionid.push(<span className='signature_production_color'>{this.state.viewVersionid} - Production</span>);\n    } else if (this.state.signatureData.qual_sigbody_id == this.state.viewVersionid) {\n      viewVersionid.push(<span className='signature_quality_color'>{this.state.viewVersionid} - Quality</span>);\n    } else {\n      viewVersionid.push(<span>{this.state.viewVersionid}</span>);\n    }\n    return (\n      <div id={'signatureDetail'} className='signatureDetail'>\n        {this.state.loaded ?\n          <div>\n            <SignatureMetaData signatureData={this.state.signatureData} type={this.props.type} id={this.props.id} currentLanguageMode={this.state.currentLanguageMode} currentEditorTheme={this.state.currentEditorTheme} currentKeyboardHandlerApplied={currentKeyboardHandlerApplied} errorToggle={this.props.errorToggle} showSignatureOptions={this.props.showSignatureOptions} />\n            <div id={not_saved_signature_entry_id} className={'not_saved_signature_entry'}>\n              <div className={'row-fluid signature-entry-outer'} style={{ marginLeft: 'auto', marginRight: 'auto' }}>\n                <div className={'row-fluid signature-entry-header'}>\n                  <div className=\"signature-entry-header-inner\">\n                    Signature Body: {viewVersionid}\n                    <span className='pull-right' style={{ display: 'inline-flex', paddingRight: '3px' }}>\n                      Editor Theme:\n                                            <DropdownButton bsSize={'xsmall'} title={this.state.currentEditorTheme} id='bg-nested-dropdown' style={{ marginRight: '10px' }}>\n                        {editorThemesArray}\n                      </DropdownButton>\n                      Language Handler:\n                                            <DropdownButton bsSize={'xsmall'} title={this.state.currentLanguageMode} id='bg-nested-dropdown' style={{ marginRight: '10px' }}>\n                        {languageModesArray}\n                      </DropdownButton>\n\n                      Keyboard Handler:\n                                            <DropdownButton bsSize={'xsmall'} title={this.state.currentKeyboardHandler} id='bg-nested-dropdown' style={{ marginRight: '10px' }}>\n                        {keyboardHandlersArray}\n                      </DropdownButton>\n\n                      Signature Body Version:\n                                            <DropdownButton bsSize={'xsmall'} title={viewVersionid} id='bg-nested-dropdown' style={{ marginRight: '10px' }}>\n                        {versionsArray}\n                      </DropdownButton>\n                      {this.state.readOnly ?\n                        <span>\n                          <Button bsSize={'xsmall'} onClick={this.createNewSigBody} bsStyle={'success'}>Create new version</Button>\n                          {this.state.viewVersionid != 0 ?\n                            <span><Button bsSize={'xsmall'} onClick={this.createNewSigBodyFromSig}>Create new version using this base</Button>\n                              <Button bsSize={'xsmall'} onClick={this.editSigBody}>Update displayed version</Button></span>\n                            :\n                            null\n                          }\n                        </span>\n                        :\n                        <span>\n                          <Button bsSize={'xsmall'} onClick={this.submitSigBody}>Submit</Button>\n                          <Button bsSize={'xsmall'} onClick={this.Cancel}>Cancel</Button>\n                        </span>\n                      }\n                    </span>\n                  </div>\n                </div>\n                <AceEditor\n                  mode={this.state.currentLanguageMode}\n                  theme={this.state.currentEditorTheme}\n                  onChange={this.onChange}\n                  name=\"signatureEditor\"\n                  editorProps={{ $blockScrolling: true }}\n                  keyboardHandler={currentKeyboardHandlerApplied}\n                  value={this.state.value}\n                  width='100%'\n                  maxLines={50}\n                  minLines={10}\n                  readOnly={this.state.readOnly}\n                  className={this.state.cursorEnabledDisabled}\n                  showPrintMargin={false}\n                />\n              </div>\n            </div>\n          </div>\n          :\n          <div>\n            Loading Signature Data...\n                    </div>\n        }\n      </div>\n    );\n  }\n}\n\nclass SignatureMetaData extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      optionsValue: JSON.stringify(this.props.signatureData.options)\n    };\n  }\n\n\n  submitMetaData = event => {\n    let k = event.target.id;\n    let v = event.target.value;\n    if (k == 'options' || k == 'target') {\n      try { v = JSON.parse(v); }\n      catch (err) { this.props.errorToggle('Failed to convert string to object. Try adding quotation marks around the key and values'); return; }\n      let optionsType = typeof (v);\n      if (optionsType !== 'object') { this.props.errorToggle('options need to be an object but were detected as: ' + optionsType); return; }\n    } //Convery v to JSON for options as its type is JSON\n    let json = {};\n    json[k] = v;\n    $.ajax({\n      type: 'put',\n      url: 'scot/api/v2/signature/' + this.props.id,\n      data: JSON.stringify(json),\n      contentType: 'application/json; charset=UTF-8',\n      success: function (data) {\n        console.log('successfully changed signature data');\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('Failed to update signature metadata', data);\n      }.bind(this)\n    });\n  }\n\n  onOptionsChange = optionsValue => {\n    this.setState({ optionsValue: optionsValue });\n  };\n\n  render() {\n\n    return (\n      <div>\n        {this.props.showSignatureOptions ?\n          <div id='signatureTable2' className='signatureTableOptions'>\n            <div className={'row-fluid signature-entry-outer'} style={{ marginLeft: 'auto', marginRight: 'auto' }}>\n              <div className={'row-fluid signature-entry-header'}>\n                <div className=\"signature-entry-header-inner\">\n                  Signature Options\n                                    <Button type='submit' bsSize='xsmall' bsStyle='success' onClick={this.submitMetaData} id={'options'} value={this.state.optionsValue}>Apply</Button>\n                </div>\n              </div>\n              <AceEditor\n                mode='json'\n                theme={this.props.currentEditorTheme}\n                onChange={this.onOptionsChange}\n                name=\"signatureEditorOptions\"\n                editorProps={{ $blockScrolling: true }}\n                keyboardHandler={this.props.currentKeyboardHandlerApplied}\n                value={this.state.optionsValue}\n                minLines={10}\n                maxLines={25}\n                width='100%'\n                readOnly={false}\n                showPrintMargin={false}\n              />\n            </div>\n          </div>\n          :\n          null\n        }\n      </div>\n    );\n  }\n};\n\nclass SignatureGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signatureGroupValue: \"\"\n    };\n  }\n\n  handleAddition = signature_group => {\n    let newSignatureGroupArr = [];\n    let data = this.props.data;\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] != undefined) {\n        if (typeof data[i] == \"string\") {\n          newSignatureGroupArr.push(data[i]);\n        } else {\n          newSignatureGroupArr.push(data[i].value);\n        }\n      }\n    }\n    newSignatureGroupArr.push(signature_group.target.value);\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/signature/\" + this.props.id,\n      data: JSON.stringify({ signature_group: newSignatureGroupArr }),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function (data) {\n        console.log(\"success: signature_group added\");\n        this.setState({ signatureGroupValue: \"\" });\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle(\"Failed to add signature_group\", data);\n      }.bind(this)\n    });\n  };\n\n  InputChange = event => {\n    this.setState({ signatureGroupValue: event.target.value });\n  };\n\n  handleDelete = event => {\n    let data = this.props.data;\n    let clickedThing = event.target.id;\n    let newSignatureGroupArr = [];\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] != undefined) {\n        if (typeof (data[i]) == 'string') {\n          if (data[i] != clickedThing) {\n            newSignatureGroupArr.push(data[i]);\n          }\n        } else {\n          if (data[i].value != clickedThing) {\n            newSignatureGroupArr.push(data[i].value);\n          }\n        }\n      }\n    }\n    $.ajax({\n      type: 'put',\n      url: 'scot/api/v2/signature/' + this.props.id,\n      data: JSON.stringify({ 'signature_group': newSignatureGroupArr }),\n      contentType: 'application/json; charset=UTF-8',\n      success: function (data) {\n        console.log('deleted signature_group success: ' + data);\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('Failed to delete signature_group', data);\n      }.bind(this)\n    });\n  }\n\n\n  render() {\n    let data = this.props.data;\n    let signatureGroupArr = [];\n    let value;\n    for (let i = 0; i < data.length; i++) {\n      if (typeof (data[i]) == 'string') {\n        value = data[i];\n      } else if (typeof (data[i]) == 'object') {\n        if (data[i] != undefined) {\n          value = data[i].value;\n        }\n      }\n      signatureGroupArr.push(<span id=\"event_signature\" className='tagButton'>{value} <i id={value} onClick={this.handleDelete} className=\"fa fa-times tagButtonClose\" /></span>);\n    }\n    return (\n      <div className='col-lg-2 col-md-4'>\n        <span className='signatureTableWidth'>\n          Signature Group:\n                </span>\n        <span className='signatureTableWidth'>\n          <input id={this.props.metaType} onChange={this.InputChange} value={this.state.signatureGroupValue} />\n          {this.state.signatureGroupValue != '' ? <Button bsSize='xsmall' bsStyle='success' onClick={this.handleAddition} value={this.state.signatureGroupValue}>Submit</Button> : <Button bsSize='xsmall' bsType='submit' disabled>Submit</Button>}\n        </span>\n        {signatureGroupArr}\n      </div>\n    );\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport AutoComplete from \"react-autocomplete\";\nimport $ from \"jquery\";\n\nclass AutoCompleteInput extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      suggestions: [],\n      value: \"\"\n    };\n\n    this.HandleAdd = this.HandleAdd.bind(this);\n    this.HandleInputChange = this.HandleInputChange.bind(this);\n  }\n\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    value: PropTypes.array.isRequired\n  };\n\n  componentWillMount() {\n    if (this.props.value) {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  HandleAdd(value) {\n    this.setState({ value: value });\n    this.props.OnChange(value);\n  }\n\n  HandleInputChange(input) {\n    this.props.OnChange(input.target.value);\n\n    this.setState({ value: input.target.value });\n\n    if (input.target && input.target.value.length >= 1) {\n      let arr = [];\n      $.ajax({\n        type: \"get\",\n        url: \"/scot/api/v2/ac/\" + this.props.type + \"/\" + input.target.value,\n        success: function(result) {\n          result = result.records;\n          for (let i = 0; i < result.length; i++) {\n            if (typeof result[i] === \"string\") {\n              let obj = {};\n              obj.label = result[i];\n              arr.push(obj);\n            }\n          }\n\n          this.setState({ suggestions: arr });\n        }.bind(this),\n        error: function() {\n          console.log(\"failed to get autocomplete data\");\n        }\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"AutoCompleteInput\">\n        <AutoComplete\n          getItemValue={item => item.label}\n          items={this.state.suggestions}\n          renderItem={(item, isHighlighted) => (\n            <div style={{ background: isHighlighted ? \"lightgray\" : \"white\" }}>\n              {item.label}\n            </div>\n          )}\n          value={this.state.value}\n          onChange={this.HandleInputChange}\n          onSelect={this.HandleAdd}\n          menuStyle={{\n            borderRadius: \"3px\",\n            boxShadow: \"0 2px 12px rgba(0, 0, 0, 0.1)\",\n            background: \"rgba(255, 255, 255, 0.9)\",\n            padding: \"2px 0\",\n            fontSize: \"90%\",\n            overflow: \"auto\",\n            maxHeight: \"200px\", // TODO: don't cheat, let it flow to the bottom\n            top: \"unset\",\n            left: \"unset\",\n            position: \"absolute\"\n          }}\n          inputProps={{ style: { width: \"100%\" } }}\n          wrapperProps={{ style: { width: \"300px\" } }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default AutoCompleteInput;\n","import React, { Component } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport $ from \"jquery\";\n//import TagInput from '../components/TagInput';\nimport AutoCompleteInput from \"../components/autocomplete_input.js\";\n\nclass EntityCreateModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: \"\",\n      match: \"\",\n      userdef: true,\n      status: \"tracked\",\n      multiword: \"yes\",\n      confirmation: false,\n      countLoading: false\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.match) {\n      this.setState({ match: this.props.match });\n    }\n\n    this.mounted = true;\n  }\n\n  componentDidMount() {\n    // $(document).keypress(\n    //   function (event) {\n    //     if ($(\"input\").is(\":focus\")) {\n    //       return;\n    //     }\n\n    //     if (\n    //       event.keyCode === 13 &&\n    //       this.state.match.length >= 1 &&\n    //       this.state.value >= 1\n    //     ) {\n    //       if (this.state.confirmation === false) {\n    //         this.Confirmation();\n    //       } else {\n    //         this.Submit();\n    //       }\n    //     }\n    //     return;\n    //   }.bind(this)\n    // ).bind(this);\n    this.HasSpacesCheck(this.props.match);\n  }\n\n  componentWillUnmount() {\n    $(document).unbind(\"keypress\");\n    this.mounted = false;\n  }\n\n  HasSpacesCheck = (match) => {\n    if (/\\s/g.test(match) === true) {\n      this.setState({ multiword: \"yes\" });\n    } else {\n      this.setState({ multiword: \"no\" });\n    }\n  }\n\n  GetCount = () => {\n    this.setState({ countLoading: true });\n    let match = encodeURIComponent(this.state.match);\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/hitsearch?match=\" + match,\n      success: function (data) {\n        this.setState({ count: data.count, countLoading: false });\n      }.bind(this),\n      error: function (data) {\n        this.setState({ count: \"unable to get count\", countLoading: false });\n      }.bind(this)\n    });\n  }\n\n  Confirmation = () => {\n    if (this.state.confirmation === false) {\n      this.GetCount();\n      this.setState({ confirmation: true });\n    } else {\n      this.setState({ confirmation: false, value: \"\" });\n    }\n  }\n\n  Submit = () => {\n    let json = {\n      value: this.state.value,\n      match: this.state.match,\n      status: \"active\",\n      options: { multiword: this.state.multiword }\n    };\n    $.ajax({\n      type: \"POST\",\n      url: \"/scot/api/v2/entitytype\",\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function (data) {\n        console.log(\"success: \" + data);\n        this.props.ToggleCreateEntity();\n      }.bind(this),\n      error: function (data) {\n        if (data.responseJSON.error_msg) {\n          this.props.errorToggle(\n            \"failed to create user defined entity: error_message: \" +\n            data.responseJSON.error_msg,\n            data\n          );\n        } else {\n          this.props.errorToggle(\"failed to create user defined entity\", data);\n        }\n      }.bind(this)\n    });\n  }\n\n  OnChangeMatch = (e) => {\n    this.setState({ match: e.target.value });\n    this.HasSpacesCheck(e.target.value);\n  }\n\n  OnChangeValue = (e) => {\n    this.setState({ value: e });\n  }\n\n  render() {\n    return (\n      <Modal\n        dialogClassName=\"entity-create-modal\"\n        show={this.props.modalActive}\n        onHide={this.props.ToggleCreateEntity}\n      >\n        <Modal.Header closeButton={true}>\n          <Modal.Title>\n            {!this.state.confirmation ? (\n              <span>Create a user defined entity</span>\n            ) : (\n                <span>Confirm and submit user defined entity</span>\n              )}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {!this.state.confirmation ? (\n            <span>\n              <span style={{ display: \"flex\" }}>\n                <span style={{ width: \"150px\" }}>\n                  <b>New Entity Name:</b>\n                </span>\n                <span style={{ width: \"300px\" }}>\n                  <input\n                    type={\"tag\"}\n                    onChange={this.OnChangeMatch}\n                    value={this.state.match}\n                    style={{ width: \"100%\" }}\n                  />\n                </span>\n              </span>\n              <span style={{ display: \"flex\" }}>\n                <span style={{ width: \"150px\" }}>\n                  <b>Entity Type:</b>\n                </span>\n                <span>\n                  <AutoCompleteInput\n                    type={\"entitytype\"}\n                    OnChange={this.OnChangeValue}\n                    value={this.state.value}\n                  />\n                </span>\n              </span>\n            </span>\n          ) : (\n              <span>\n                <div>\n                  Entity Name: <b>{this.state.match}</b>\n                </div>\n                <div>\n                  Entity Type: <b>{this.state.value}</b>\n                </div>\n                <div>\n                  Multiword: <b>{this.state.multiword}</b>\n                </div>\n              </span>\n            )}\n        </Modal.Body>\n        <Modal.Footer>\n          {!this.state.confirmation ? (\n            <span>\n              {this.state.value.length >= 1 && this.state.match.length >= 1 ? (\n                <Button\n                  onClick={this.Confirmation}\n                  bsStyle={\"primary\"}\n                  type={\"submit\"}\n                  active={true}\n                >\n                  Continue\n                </Button>\n              ) : null}\n              <Button onClick={this.props.ToggleCreateEntity}>Cancel</Button>\n            </span>\n          ) : (\n              <span>\n                <span style={{ color: \"red\", float: \"left\" }}>\n                  {this.state.countLoading ? (\n                    <span>Count: is loading...</span>\n                  ) : (\n                      <span>Count: {this.state.count}</span>\n                    )}\n                </span>\n                <span>\n                  <Button onClick={this.Submit} bsStyle={\"success\"}>\n                    Submit\n                </Button>\n                  <Button onClick={this.Confirmation}>Go Back</Button>\n                </span>\n              </span>\n            )}\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default EntityCreateModal;\n","import React from \"react\";\nimport ReactDateTime from \"react-datetime\";\nimport { Button, Tooltip, OverlayTrigger, FormControl } from \"react-bootstrap\";\nimport $ from \"jquery\";\n\n//Add data into this metadata field by entering in the form layout in scot.cfg.pl.\n\nexport default class CustomMetaDataTable extends React.Component {\n  onChange = event => {\n    let k = event.target.id;\n    let v = event.target.value;\n    let data_string = \"data.\" + k;\n    let data = {};\n    data[data_string] = v;\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(data),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"successfully changed custom table data\");\n        this.forceUpdate();\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to updated custom table data\", data);\n      }.bind(this)\n    });\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //Only update the metadata if the headerData is different\n    if (this.props.headerData === nextProps.headerData) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  render() {\n    let multiSelectArr = [];\n    let dropdownArr = [];\n    let datesArr = [];\n    let inputArr = [];\n    let textAreaArr = [];\n    let inputMultiArr = [];\n    let booleanArr = [];\n    let formType = this.props.form[this.props.headerData[\"data_fmt_ver\"]];\n    if (formType) {\n      for (let i = 0; i < formType.length; i++) {\n        let value = formType[i][\"value\"];\n        let url = formType[i][\"value_type\"][\"url\"];\n        if (url) {\n          url = url.replace(\"%s\", this.props.id);\n        }\n        if (\n          formType[i][\"value_type\"][\"key\"]\n            .split(\".\")\n            .reduce((o, i) => o[i], this.props.headerData.data)\n        ) {\n          value = formType[i][\"value_type\"][\"key\"]\n            .split(\".\")\n            .reduce((o, i) => o[i], this.props.headerData.data);\n        }\n\n        switch (formType[i][\"type\"]) {\n          case \"dropdown\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              dropdownArr.push(\n                <DropdownComponent\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  id={formType[i].key}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  value={value}\n                  dropdownValues={formType[i][\"value\"]}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              dropdownArr.push(\n                <DropdownComponent\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  id={formType[i].key}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  fetchURL={url}\n                  dynamic={true}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"input\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              inputArr.push(\n                <InputComponent\n                  onBlur={this.onChange}\n                  value={value}\n                  id={formType[i].key}\n                  label={formType[i].label}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              inputArr.push(\n                <InputComponent\n                  onBlur={this.onChange}\n                  id={formType[i].key}\n                  label={formType[i].label}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  fetchURL={url}\n                  dynamic={true}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"calendar\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              let calendarValue = value * 1000;\n              datesArr.push(\n                <Calendar\n                  typeTitle={formType[i].label}\n                  value={calendarValue}\n                  typeLower={formType[i].key}\n                  type={this.props.type}\n                  id={this.props.id}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              datesArr.push(\n                <Calendar\n                  typeTitle={formType[i].label}\n                  typeLower={formType[i].key}\n                  type={this.props.type}\n                  id={this.props.id}\n                  fetchURL={url}\n                  dynamic={true}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"textarea\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              textAreaArr.push(\n                <TextAreaComponent\n                  id={formType[i].key}\n                  value={value}\n                  onBlur={this.onChange}\n                  label={formType[i].label}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              textAreaArr.push(\n                <TextAreaComponent\n                  id={formType[i].key}\n                  onBlur={this.onChange}\n                  label={formType[i].label}\n                  fetchURL={url}\n                  dynamic={true}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"input_multi\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              inputMultiArr.push(\n                <InputMultiComponent\n                  id={formType[i].key}\n                  value={value}\n                  errorToggle={this.props.errorToggle}\n                  mainType={this.props.type}\n                  mainId={this.props.id}\n                  label={formType[i].label}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              inputMultiArr.push(\n                <InputMultiComponent\n                  id={formType[i].key}\n                  errorToggle={this.props.errorToggle}\n                  mainType={this.props.type}\n                  mainId={this.props.id}\n                  label={formType[i].label}\n                  fetchURL={url}\n                  dynamic={true}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"boolean\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              booleanArr.push(\n                <BooleanComponent\n                  id={formType[i].key}\n                  value={value}\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  help={formType[i].help}\n                />\n              );\n            } else {\n              booleanArr.push(\n                <BooleanComponent\n                  id={formType[i].key}\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  fetchURL={url}\n                  dynamic={true}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  help={formType[i].help}\n                />\n              );\n            }\n            break;\n\n          case \"multi_select\":\n            if (formType[i][\"value_type\"][\"type\"] == \"static\") {\n              multiSelectArr.push(\n                <MultiSelectComponent\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  id={formType[i].key}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  value={value}\n                  dropdownValues={formType[i][\"value\"]}\n                  help={formType[i].help}\n                  mainType={this.props.type}\n                  mainId={this.props.id}\n                />\n              );\n            } else {\n              multiSelectArr.push(\n                <MultiSelectComponent\n                  onChange={this.onChange}\n                  label={formType[i].label}\n                  id={formType[i].key}\n                  referenceKey={formType[i][\"value_type\"][\"key\"]}\n                  fetchURL={url}\n                  dynamic={true}\n                  help={formType[i].help}\n                  mainType={this.props.type}\n                  mainId={this.props.id}\n                />\n              );\n            }\n            break;\n        }\n      }\n    }\n\n    return (\n      <div>\n        {formType ? (\n          <div className=\"custom-metadata-table container\">\n            <div className=\"row\">\n              {dropdownArr}\n              {datesArr}\n              {inputArr}\n              {textAreaArr}\n              {inputMultiArr}\n              {booleanArr}\n              {multiSelectArr}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nclass DropdownComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: null,\n      options: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      let arr = [];\n      let selected = \"\";\n\n      for (let j = 0; j < this.props.dropdownValues.length; j++) {\n        if (this.props.value == this.props.dropdownValues[j][\"value\"]) {\n          selected = this.props.value;\n        }\n\n        arr.push(<option>{this.props.dropdownValues[j][\"value\"]}</option>);\n      }\n\n      this.setState({ selected: selected, options: arr });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let arr = [];\n        let selected = \"\";\n        let referenceKey = this.props.referenceKey;\n        if (\n          referenceKey == \"qual_sigbody_id\" ||\n          referenceKey == \"prod_sigbody_id\"\n        ) {\n          arr.push(<option>0</option>);\n          for (let key in result[\"version\"]) {\n            if (\n              result[\"version\"][key][\"revision\"] == result.data[referenceKey]\n            ) {\n              selected = result.data[referenceKey];\n            }\n            arr.push(<option>{result[\"version\"][key][\"revision\"]}</option>);\n          }\n        } else {\n          for (let j = 0; j < result[this.props.referenceKey].length; j++) {\n            if (result[this.props.referenceKey][j].selected == 1) {\n              selected = result[this.props.referenceKey][j].value;\n            }\n\n            arr.push(\n              <option>{result[this.props.referenceKey][j].value}</option>\n            );\n          }\n        }\n\n        this.setState({ selected: selected, options: arr });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ selected: nextProps.value });\n    }\n  }\n\n  onChange = event => {\n    this.props.onChange(event);\n    this.setState({ selected: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <select\n            id={this.props.id}\n            value={this.state.selected}\n            onChange={this.onChange}\n          >\n            {this.state.options}\n          </select>\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass InputComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = \"\";\n        value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  inputOnChange = event => {\n    this.setState({ value: event.target.value });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            onBlur={this.props.onBlur}\n            onChange={this.inputOnChange}\n            value={this.state.value}\n          />\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass Calendar extends React.Component {\n  constructor(props) {\n    super(props);\n    let loading = false;\n    if (this.props.dynamic) {\n      loading = true;\n    }\n    this.state = {\n      showCalendar: false,\n      loading: loading,\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey] * 1000;\n        this.setState({ value: value, loading: false });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  onChange = event => {\n    let data_string = \"data.\" + this.props.typeLower;\n    let v = event._d.getTime() / 1000;\n    let json = {};\n    json[data_string] = v;\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"successfully changed custom table data\");\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to updated custom table data\", data);\n      }.bind(this)\n    });\n  };\n\n  showCalendar = () => {\n    if (this.state.showCalendar == false) {\n      this.setState({ showCalendar: true });\n    } else {\n      this.setState({ showCalendar: false });\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className=\"custom-metadata-table-component-div\"\n        style={{ display: \"flex\", flexFlow: \"row\" }}\n      >\n        <span className=\"custom-metadata-tableWidth\">\n          {this.props.typeTitle}\n        </span>\n        {!this.state.loading ? (\n          <ReactDateTime\n            className=\"custom-metadata-input-width\"\n            value={this.state.value}\n            onChange={this.onChange}\n          />\n        ) : (\n          <span>Loading...</span>\n        )}\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass TextAreaComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  inputOnChange = event => {\n    this.setState({ value: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">\n          {this.props.label}\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n        <span>\n          <textarea\n            id={this.props.id}\n            onBlur={this.props.onBlur}\n            onChange={this.inputOnChange}\n            value={this.state.value}\n            className=\"custom-metadata-textarea-width\"\n          />\n        </span>\n      </div>\n    );\n  }\n}\n\nclass InputMultiComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: \"\",\n      value: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  handleAddition = group => {\n    if (this.state.value !== undefined) {\n      let groupArr = [];\n      let data = this.state.value;\n      for (let i = 0; i < data.length; i++) {\n        if (data[i] != undefined) {\n          if (typeof data[i] == \"string\") {\n            groupArr.push(data[i]);\n          } else {\n            groupArr.push(data[i].value);\n          }\n        }\n      }\n      groupArr.push(group.target.value);\n\n      let newData = {};\n      let data_string = \"data.\" + this.props.id;\n      newData[data_string] = groupArr;\n\n      // newData[this.props.id] = groupArr;\n\n      $.ajax({\n        type: \"put\",\n        url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n        data: JSON.stringify(newData),\n        contentType: \"application/json; charset=UTF-8\",\n        success: function() {\n          console.log(\"success: group added\");\n          this.setState({ inputValue: \"\", value: newData[this.props.id] });\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\"Failed to add group\", data);\n        }.bind(this)\n      });\n    }\n  };\n\n  InputChange = event => {\n    this.setState({ inputValue: event.target.value });\n  };\n\n  handleDelete = event => {\n    let data = this.state.value;\n    let clickedThing = event.target.id;\n    let groupArr = [];\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] != undefined) {\n        if (typeof data[i] == \"string\") {\n          if (data[i] != clickedThing) {\n            groupArr.push(data[i]);\n          }\n        } else {\n          if (data[i].value != clickedThing) {\n            groupArr.push(data[i].value);\n          }\n        }\n      }\n    }\n\n    let newData = {\n      data: {\n        [this.props.id]: groupArr\n      }\n    };\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n      data: JSON.stringify(newData),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        this.setState({ value: newData[this.props.id] });\n        console.log(\"deleted group success: \" + data);\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to delete group\", data);\n      }.bind(this)\n    });\n  };\n\n  render() {\n    let data = this.state.value;\n    let groupArr = [];\n    let value;\n    if (data !== undefined) {\n      for (let i = 0; i < data.length; i++) {\n        if (typeof data[i] == \"string\") {\n          value = data[i];\n        } else if (typeof data[i] == \"object\") {\n          if (data[i] != undefined) {\n            value = data[i].value;\n          }\n        }\n        groupArr.push(\n          <span id=\"event_signature\" className=\"tagButton\">\n            {value}{\" \"}\n            <i\n              id={value}\n              onClick={this.handleDelete}\n              className=\"fa fa-times tagButtonClose\"\n            />\n          </span>\n        );\n      }\n    }\n\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            onChange={this.InputChange}\n            value={this.state.inputValue}\n          />\n          {this.state.inputValue != \"\" ? (\n            <Button\n              bsSize=\"xsmall\"\n              bsStyle=\"success\"\n              onClick={this.handleAddition}\n              value={this.state.inputValue}\n            >\n              Submit\n            </Button>\n          ) : (\n            <Button bsSize=\"xsmall\" bsType=\"submit\" disabled>\n              Submit\n            </Button>\n          )}\n        </span>\n        <span className=\"custom-metadata-multi-input-tags\">{groupArr}</span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass BooleanComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: false\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps = nextProps => {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  };\n\n  onChange = e => {\n    let value;\n    if (e.target.value == \"true\") {\n      value = 1;\n    } else {\n      value = 0;\n    }\n\n    let obj = {};\n    obj[\"target\"] = {};\n    obj[\"target\"][\"id\"] = this.props.id;\n    obj[\"target\"][\"value\"] = value;\n\n    this.props.onChange(obj);\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            type=\"checkbox\"\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            name={this.props.id}\n            value={this.state.value}\n            onClick={this.onChange}\n          />\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass MultiSelectComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.makeForm();\n    }\n  }\n\n  makeForm = nextProps => {\n    let props = this.props;\n    if (nextProps) {\n      props = nextProps;\n    }\n\n    let arr = [];\n    for (let j = 0; j < props.dropdownValues.length; j++) {\n      if (props.value.includes(props.dropdownValues[j][\"value\"])) {\n        arr.push(<option selected>{props.dropdownValues[j][\"value\"]}</option>);\n      } else {\n        arr.push(<option>{props.dropdownValues[j][\"value\"]}</option>);\n      }\n    }\n\n    this.setState({ options: arr });\n  };\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let arr = [];\n        for (let j = 0; j < result[this.props.referenceKey].length; j++) {\n          if (result[this.props.referenceKey][j].selected == 1) {\n            arr.push(\n              <option selected>\n                {result[this.props.referenceKey][j].value}\n              </option>\n            );\n          } else {\n            arr.push(\n              <option>{result[this.props.referenceKey][j].value}</option>\n            );\n          }\n        }\n\n        this.setState({ options: arr });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps = nextProps => {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.makeForm(nextProps);\n    }\n  };\n\n  onChange = event => {\n    let multiSelectArr = [];\n    for (let i = 0; i < event.target.options.length; i++) {\n      if (event.target.options[i] != undefined) {\n        if (event.target.options[i].selected == true) {\n          multiSelectArr.push(event.target.options[i].value);\n        } else {\n          continue;\n        }\n      }\n    }\n\n    let newData = {};\n    let data_string = \"data.\" + this.props.id;\n    newData[data_string] = multiSelectArr;\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n      data: JSON.stringify(newData),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"success: multi select added\");\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to add multi select\", data);\n      }.bind(this)\n    });\n    this.setState({ selected: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <FormControl\n            id={this.props.id}\n            componentClass=\"select\"\n            placeholder=\"select\"\n            bsClass=\"custom-metadata-multi-select-width\"\n            multiple\n            onChange={this.onChange}\n            size={this.state.options.length}\n          >\n            {this.state.options}\n          </FormControl>\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDateTime from \"react-datetime\";\nimport { Button, Tooltip, OverlayTrigger, FormControl } from \"react-bootstrap\";\nimport $ from \"jquery\";\n\n//Add data into this metadata field by entering in the form layout in scot.cfg.pl.\n\nexport default class FeedDataTable extends React.Component {\n  onChange = event => {\n    let attribute_name = event.target.id;\n    let value = event.target.value;\n\n    let data = {};\n    data[attribute_name] = value;\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(data),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"successfully changed feed table data\");\n        this.forceUpdate();\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to updated feed table data\", data);\n      }.bind(this)\n    });\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    //Only update the metadata if the headerData is different\n    if (this.props.headerData === nextProps.headerData) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  render() {\n    let formType = [\n        { \n            \"label\": \"Status\", \n            \"key\": \"status\",\n            \"type\": \"dropdown\",\n            \"value\": [\n                { \"value\": \"active\", \"selected\": 1 },\n                { \"value\": \"paused\", \"selected\": 0 },\n            ],\n            \"help\": \"Activate or Pause fetches from Feed\"\n        },\n        {\n            \"label\": \"Feed Name\",\n            \"key\": \"name\",\n            \"type\": \"input\",\n            \"value\": \"enter feed name\",\n            \"help\": \"Name to reference feed by\"\n        },\n        {\n            \"label\": \"URI of Feed\",\n            \"key\": \"uri\",\n            \"type\": \"input\",\n            \"value\": \"https://uri.goes.here\",\n            \"help\": \"Enter the URI to access the Feed\"\n        },\n        {\n            \"label\": \"Feed type\",\n            \"key\": \"type\",\n            \"type\": \"dropdown\",\n            \"value\": [\n                { \"value\": \"RSS\", \"selected\": 1 },\n                { \"value\": \"Twitter\", \"selected\": 0 },\n                { \"value\": \"Email\", \"selected\": 0 }\n            ],\n            \"help\": \"Select type of feed\"\n        }\n    ];\n    let rowElements = [];\n    for (let i = 0; i < formType.length; i++) {\n\n        //console.log(\"header Data = \",this.props.headerData);\n        let value = formType[i][\"value\"];\n        let thiskey = formType[i][\"key\"];\n\n\n        if ( this.props.headerData[thiskey] ) {\n            value = this.props.headerData[thiskey];\n        }\n        // console.log(\"value is \",value);\n\n        switch (formType[i][\"type\"]) {\n            case \"dropdown\":\n                rowElements.push(\n                    <DropdownComponent\n                        onChange={this.onChange}\n                        label={formType[i].label}\n                        id={formType[i].key}\n                        referenceKey={formType[i][\"key\"]}\n                        value={value}\n                        dropdownValues={formType[i][\"value\"]}\n                        help={formType[i].help}\n                    />\n                );\n            break;\n\n            case \"input\":\n                rowElements.push(\n                <InputComponent\n                    onBlur={this.onChange}\n                    value={value}\n                    id={formType[i].key}\n                    label={formType[i].label}\n                    help={formType[i].help}\n                />\n                );\n            break;\n\n            case \"calendar\":\n                let calendarValue = value * 1000;\n                rowElements.push(\n                <Calendar\n                    typeTitle={formType[i].label}\n                    value={calendarValue}\n                    typeLower={formType[i].key}\n                    type={this.props.type}\n                    id={this.props.id}\n                    help={formType[i].help}\n                />\n                );\n            break;\n\n            case \"textarea\":\n                rowElements.push(\n                <TextAreaComponent\n                    id={formType[i].key}\n                    value={value}\n                    onBlur={this.onChange}\n                    label={formType[i].label}\n                    help={formType[i].help}\n                />\n                );\n            break;\n\n            case \"input_multi\":\n                rowElements.push(\n                <InputMultiComponent\n                    id={formType[i].key}\n                    value={value}\n                    errorToggle={this.props.errorToggle}\n                    mainType={this.props.type}\n                    mainId={this.props.id}\n                    label={formType[i].label}\n                    help={formType[i].help}\n                />\n                );\n            break;\n\n            case \"boolean\":\n                rowElements.push(\n                <BooleanComponent\n                    id={formType[i].key}\n                    value={value}\n                    onChange={this.onChange}\n                    label={formType[i].label}\n                    help={formType[i].help}\n                />\n                );\n            break;\n\n            case \"multi_select\":\n                rowElements.push(\n                <MultiSelectComponent\n                    onChange={this.onChange}\n                    label={formType[i].label}\n                    id={formType[i].key}\n                    referenceKey={formType[i][\"key\"]}\n                    value={value}\n                    dropdownValues={formType[i][\"value\"]}\n                    help={formType[i].help}\n                    mainType={this.props.type}\n                    mainId={this.props.id}\n                />\n                );\n            break;\n        }\n    }\n\n    return (\n      <div>\n        {formType ? (\n          <div className=\"custom-metadata-table container\">\n            <div className=\"row\">\n              {rowElements}\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nclass DropdownComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: null,\n      options: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      let arr = [];\n      let selected = \"\";\n\n      for (let j = 0; j < this.props.dropdownValues.length; j++) {\n        //console.log(\"props value = \",this.props.value);\n        //console.log(\"props dropdownvalue = \",this.props.dropdownValues[j][\"value\"]);\n        if (this.props.value == this.props.dropdownValues[j][\"value\"]) {\n          selected = this.props.value;\n        }\n\n        arr.push(<option>{this.props.dropdownValues[j][\"value\"]}</option>);\n      }\n\n      this.setState({ selected: selected, options: arr });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let arr = [];\n        let selected = \"\";\n        let referenceKey = this.props.referenceKey;\n        if (\n          referenceKey == \"qual_sigbody_id\" ||\n          referenceKey == \"prod_sigbody_id\"\n        ) {\n          arr.push(<option>0</option>);\n          for (let key in result[\"version\"]) {\n            if (\n              result[\"version\"][key][\"revision\"] == result.data[referenceKey]\n            ) {\n              selected = result.data[referenceKey];\n            }\n            arr.push(<option>{result[\"version\"][key][\"revision\"]}</option>);\n          }\n        } else {\n          for (let j = 0; j < result[this.props.referenceKey].length; j++) {\n            if (result[this.props.referenceKey][j].selected == 1) {\n              selected = result[this.props.referenceKey][j].value;\n            }\n\n            arr.push(\n              <option>{result[this.props.referenceKey][j].value}</option>\n            );\n          }\n        }\n\n        this.setState({ selected: selected, options: arr });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ selected: nextProps.value });\n    }\n  }\n\n  onChange = event => {\n    this.props.onChange(event);\n    this.setState({ selected: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <select\n            id={this.props.id}\n            value={this.state.selected}\n            onChange={this.onChange}\n          >\n            {this.state.options}\n          </select>\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass InputComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = \"\";\n        value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  inputOnChange = event => {\n    this.setState({ value: event.target.value });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            onBlur={this.props.onBlur}\n            onChange={this.inputOnChange}\n            value={this.state.value}\n          />\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass Calendar extends React.Component {\n  constructor(props) {\n    super(props);\n    let loading = false;\n    if (this.props.dynamic) {\n      loading = true;\n    }\n    this.state = {\n      showCalendar: false,\n      loading: loading,\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey] * 1000;\n        this.setState({ value: value, loading: false });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  onChange = event => {\n    let data_string = this.props.typeLower;\n    let v = event._d.getTime() / 1000;\n    let json = {};\n    json[data_string] = v;\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(json),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"successfully changed custom table data\");\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to updated custom table data\", data);\n      }.bind(this)\n    });\n  };\n\n  showCalendar = () => {\n    if (this.state.showCalendar == false) {\n      this.setState({ showCalendar: true });\n    } else {\n      this.setState({ showCalendar: false });\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className=\"custom-metadata-table-component-div\"\n        style={{ display: \"flex\", flexFlow: \"row\" }}\n      >\n        <span className=\"custom-metadata-tableWidth\">\n          {this.props.typeTitle}\n        </span>\n        {!this.state.loading ? (\n          <ReactDateTime\n            className=\"custom-metadata-input-width\"\n            value={this.state.value}\n            onChange={this.onChange}\n          />\n        ) : (\n          <span>Loading...</span>\n        )}\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={\n              <Tooltip id={this.props.id}>\n                <div\n                  dangerouslySetInnerHTML={{ __html: this.props.help }}\n                  bsClass=\"popover helpPopup\"\n                />\n              </Tooltip>\n            }\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass TextAreaComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\"\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  inputOnChange = event => {\n    this.setState({ value: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">\n          {this.props.label}\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n        <span>\n          <textarea\n            id={this.props.id}\n            onBlur={this.props.onBlur}\n            onChange={this.inputOnChange}\n            value={this.state.value}\n            className=\"custom-metadata-textarea-width\"\n          />\n        </span>\n      </div>\n    );\n  }\n}\n\nclass InputMultiComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: \"\",\n      value: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  }\n\n  handleAddition = group => {\n    if (this.state.value !== undefined) {\n      let groupArr = [];\n      let data = this.state.value;\n      console.log(\"handleAddition data is \",data);\n      for (let i = 0; i < data.length; i++) {\n        if (data[i] != undefined) {\n          if (typeof data[i] == \"string\") {\n            groupArr.push(data[i]);\n          } else {\n            groupArr.push(data[i].value);\n          }\n        }\n      }\n      groupArr.push(group.target.value);\n\n      let newData = {};\n      let data_string = this.props.id;\n      newData[data_string] = groupArr;\n\n      // newData[this.props.id] = groupArr;\n\n      $.ajax({\n        type: \"put\",\n        url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n        data: JSON.stringify(newData),\n        contentType: \"application/json; charset=UTF-8\",\n        success: function() {\n          console.log(\"success: group added\");\n          this.setState({ inputValue: \"\", value: newData[this.props.id] });\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\"Failed to add group\", data);\n        }.bind(this)\n      });\n    }\n  };\n\n  InputChange = event => {\n    this.setState({ inputValue: event.target.value });\n  };\n\n  handleDelete = event => {\n    let data = this.state.value;\n    let clickedThing = event.target.id;\n    let groupArr = [];\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] != undefined) {\n        if (typeof data[i] == \"string\") {\n          if (data[i] != clickedThing) {\n            groupArr.push(data[i]);\n          }\n        } else {\n          if (data[i].value != clickedThing) {\n            groupArr.push(data[i].value);\n          }\n        }\n      }\n    }\n\n    let newData = {\n      data: {\n        [this.props.id]: groupArr\n      }\n    };\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n      data: JSON.stringify(newData),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        this.setState({ value: newData[this.props.id] });\n        console.log(\"deleted group success: \" + data);\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to delete group\", data);\n      }.bind(this)\n    });\n  };\n\n  render() {\n    let data = this.state.value;\n    let groupArr = [];\n    let value;\n    if (data !== undefined) {\n      for (let i = 0; i < data.length; i++) {\n        if (typeof data[i] == \"string\") {\n          value = data[i];\n        } else if (typeof data[i] == \"object\") {\n          if (data[i] != undefined) {\n            value = data[i].value;\n          }\n        }\n        groupArr.push(\n          <span id=\"event_signature\" className=\"tagButton\">\n            {value}{\" \"}\n            <i\n              id={value}\n              onClick={this.handleDelete}\n              className=\"fa fa-times tagButtonClose\"\n            />\n          </span>\n        );\n      }\n    }\n\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            onChange={this.InputChange}\n            value={this.state.inputValue}\n          />\n          {this.state.inputValue != \"\" ? (\n            <Button\n              bsSize=\"xsmall\"\n              bsStyle=\"success\"\n              onClick={this.handleAddition}\n              value={this.state.inputValue}\n            >\n              Submit\n            </Button>\n          ) : (\n            <Button bsSize=\"xsmall\" bsType=\"submit\" disabled>\n              Submit\n            </Button>\n          )}\n        </span>\n        <span className=\"custom-metadata-multi-input-tags\">{groupArr}</span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass BooleanComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: false\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: this.props.value });\n    }\n  }\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let value = result[this.props.referenceKey];\n        this.setState({ value: value });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps = nextProps => {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.setState({ value: nextProps.value });\n    }\n  };\n\n  onChange = e => {\n    let value;\n    if (e.target.value == \"true\") {\n      value = 1;\n    } else {\n      value = 0;\n    }\n\n    let obj = {};\n    obj[\"target\"] = {};\n    obj[\"target\"][\"id\"] = this.props.id;\n    obj[\"target\"][\"value\"] = value;\n\n    this.props.onChange(obj);\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <input\n            type=\"checkbox\"\n            className=\"custom-metadata-input-width\"\n            id={this.props.id}\n            name={this.props.id}\n            value={this.state.value}\n            onClick={this.onChange}\n          />\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n\nclass MultiSelectComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.dynamic) {\n      this.getDynamic();\n    } else {\n      this.makeForm();\n    }\n  }\n\n  makeForm = nextProps => {\n    let props = this.props;\n    if (nextProps) {\n      props = nextProps;\n    }\n\n    let arr = [];\n    for (let j = 0; j < props.dropdownValues.length; j++) {\n      if (props.value.includes(props.dropdownValues[j][\"value\"])) {\n        arr.push(<option selected>{props.dropdownValues[j][\"value\"]}</option>);\n      } else {\n        arr.push(<option>{props.dropdownValues[j][\"value\"]}</option>);\n      }\n    }\n\n    this.setState({ options: arr });\n  };\n\n  getDynamic = () => {\n    $.ajax({\n      type: \"get\",\n      url: this.props.fetchURL,\n      success: function(result) {\n        let arr = [];\n        for (let j = 0; j < result[this.props.referenceKey].length; j++) {\n          if (result[this.props.referenceKey][j].selected == 1) {\n            arr.push(\n              <option selected>\n                {result[this.props.referenceKey][j].value}\n              </option>\n            );\n          } else {\n            arr.push(\n              <option>{result[this.props.referenceKey][j].value}</option>\n            );\n          }\n        }\n\n        this.setState({ options: arr });\n      }.bind(this)\n    });\n  };\n\n  componentWillReceiveProps = nextProps => {\n    if (nextProps.dynamic) {\n      this.getDynamic();\n    } else {\n      this.makeForm(nextProps);\n    }\n  };\n\n  onChange = event => {\n    let multiSelectArr = [];\n    for (let i = 0; i < event.target.options.length; i++) {\n      if (event.target.options[i] != undefined) {\n        if (event.target.options[i].selected == true) {\n          multiSelectArr.push(event.target.options[i].value);\n        } else {\n          continue;\n        }\n      }\n    }\n\n    let newData = {};\n    let data_string = this.props.id;\n    newData[data_string] = multiSelectArr;\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.mainType + \"/\" + this.props.mainId,\n      data: JSON.stringify(newData),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function() {\n        console.log(\"success: multi select added\");\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to add multi select\", data);\n      }.bind(this)\n    });\n    this.setState({ selected: event.target.value });\n  };\n\n  render() {\n    return (\n      <div className=\"custom-metadata-table-component-div\">\n        <span className=\"custom-metadata-tableWidth\">{this.props.label}</span>\n        <span>\n          <FormControl\n            id={this.props.id}\n            componentClass=\"select\"\n            placeholder=\"select\"\n            bsClass=\"custom-metadata-multi-select-width\"\n            multiple\n            onChange={this.onChange}\n            size={this.state.options.length}\n          >\n            {this.state.options}\n          </FormControl>\n        </span>\n        <span>\n          <OverlayTrigger\n            placement=\"top\"\n            overlay={<Tooltip id={this.props.id}> {this.props.help}</Tooltip>}\n          >\n            <i\n              className=\"fa fa-question-circle-o\"\n              aria-hidden=\"true\"\n              style={{ paddingLeft: \"5px\" }}\n            ></i>\n          </OverlayTrigger>\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport AddEntry from \"../components/add_entry.js\";\nimport SelectedEntry from \"./selected_entry\";\nimport Button from \"@material-ui/core/Button\";\n\nfunction AddEntryToAlert({ ...props }) {\n  const [visible, setVisibility] = useState(true);\n\n  function toggleVisibility() {\n    setVisibility(!visible);\n    props.updated();\n  }\n\n  return (\n    <div>\n      {!visible ? (\n        <div style={{ justifyContent: \"center\", padding: 5, display: \"flex\" }}>\n          <br />\n\n          <Button\n            style={{ backgroundColor: \"#5bc0de\", color: \"white\" }}\n            onClick={toggleVisibility}\n            variant=\"contained\"\n          >\n            Add Entry\n          </Button>\n          <br />\n        </div>\n      ) : null}\n      {visible ? (\n        <AddEntry\n          entryAction={\"Add\"}\n          type=\"alert\"\n          targetid={props.row.id}\n          id={\"add_entry\"}\n          addedentry={setVisibility}\n          errorToggle={props.errorToggle}\n          toggleVisibility={toggleVisibility}\n        />\n      ) : null}\n      {props.entryData.length > 0 ? (\n        <SelectedEntry\n          entryData={props.entryData}\n          type=\"alert\"\n          id={props.row.id}\n          showEntryData={props.showEntryData}\n          errorToggle={props.errorToggle}\n          createCallback={props.createCallback}\n          removeCallback={props.removeCallback}\n          entityData={props.entityData}\n          addFlair={props.addFlair}\n        />\n      ) : null}\n    </div>\n  );\n}\nexport default AddEntryToAlert;\n","import React from \"react\";\nimport $ from \"jquery\";\nimport EntityDetail from \"../modal/entity_detail\";\nimport ReactTime from \"react-time\";\nimport SplitButton from \"react-bootstrap/lib/SplitButton.js\";\nimport MenuItem from \"react-bootstrap/lib/MenuItem.js\";\nimport Button from \"react-bootstrap/lib/Button.js\";\nimport AddEntry from \"../components/add_entry.js\";\nimport FileUpload from \"../components/file_upload.js\";\nimport { DeleteEntry } from \"../modal/delete\";\nimport Summary from \"../components/summary\";\nimport Task from \"../components/task\";\nimport SelectedPermission from \"../components/permission.js\";\nimport Frame from \"react-frame-component\";\nimport LinkWarning from \"../modal/link_warning\";\nimport { Link } from \"react-router-dom\";\nimport SignatureTable from \"../components/signature_table\";\nimport TrafficLightProtocol from \"../components/traffic_light_protocol\";\nimport Marker from \"../components/marker\";\nimport EntityCreateModal from \"../modal/entity_create\";\nimport CustomMetaDataTable from \"../components/custom_metadata_table\";\nimport FeedDataTable from \"../components/feed_table\";\nimport ReactTable from \"react-table\";\nimport { get_data, put_data, post_data } from \"../utils/XHR\";\nimport AlertSubComponent from \"./alert_subcomponent\";\nimport {\n  buildTypeColumns,\n  customCellRenderers,\n  getColumnWidth,\n} from \"../list/tableConfig\";\nimport Button2 from \"@material-ui/core/Button\";\n\nexport default class SelectedEntry extends React.Component {\n  constructor(props) {\n    super(props);\n    let entityDetailKey = Math.floor(Math.random() * 1000);\n    this.state = {\n      showEntryData: this.props.showEntryData,\n      showEntityData: this.props.showEntityData,\n      entryData: this.props.entryData,\n      entityData:\n        this.props.entityData === undefined ? null : this.props.entityData,\n      entityid: null,\n      entitytype: null,\n      entityoffset: null,\n      entityobj: null,\n      key: this.props.id,\n      flairToolbar: false,\n      notificationType: null,\n      notificationMessage: \"\",\n      height: null,\n      entityDetailKey: entityDetailKey,\n      isMounted: false,\n    };\n  }\n\n  componentDidMount() {\n    const { type, id, addFlair } = this.props;\n    this.getEntryData();\n    if (this.state.entityData !== null) {\n      addFlair(this.state.entityData, null, type, null, id);\n    }\n    this.props.createCallback(this.props.id, this.updatedCB);\n    this.containerHeightAdjust();\n\n    window.addEventListener(\"resize\", this.containerHeightAdjust);\n    let table = document.querySelector(\".ReactTable\");\n    table.onresize = function () {\n      this.containerHeightAdjust();\n    }.bind(this);\n  }\n\n  componentWillReceiveProps() {\n    this.containerHeightAdjust();\n  }\n\n  componentDidUpdate() {\n    if (this.state.runWatcher == true) {\n      this.Watcher();\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState({ isMounted: false });\n  }\n\n  getEntryData = () => {\n    const { type, id } = this.props;\n    this.setState({ isMounted: true });\n    if (type === \"alert\" || type === \"entity\" || this.props.isPopUp === 1) {\n      let entry_url = `scot/api/v2/${type}/${id}/entry`;\n      let entry_response = get_data(entry_url, null);\n      entry_response\n        .then(\n          function (response) {\n            if (this.state.isMounted) {\n              this.setState({\n                showEntryData: true,\n                entryData: response.data.records,\n              });\n              response.data.records.forEach(\n                function (element, i) {\n                  this.props.createCallback(\n                    response.data.records[i].id,\n                    this.updatedCB\n                  );\n                }.bind(this)\n              );\n              this.Watcher();\n            }\n          }.bind(this)\n        )\n        .catch(\n          function (error) {\n            if (this.state.isMounted) {\n              this.setState({ showEntryData: true });\n              this.props.errorToggle(\"Failed to load entry data.\", error);\n            }\n          }.bind(this)\n        );\n    }\n  };\n\n  getEntityData = () => {\n    const { addFlair, type, id } = this.props;\n    if (\n      type === \"alert\" ||\n      type === \"entity\" ||\n      type === \"incident\" ||\n      type === \"alertgroup\" ||\n      this.props.isPopUp === 1\n    ) {\n      const entity_url = `scot/api/v2/${type}/${id}/entity`;\n      let entity_response = get_data(entity_url, null);\n      entity_response\n        .then(\n          function (response) {\n            let entityResult = response.data.records;\n            if (this.state.isMounted) {\n              this.setState({ showEntityData: true, entityData: entityResult });\n              let waitForEntry = {\n                waitEntry: function () {\n                  if (this.state.showEntryData === false) {\n                    setTimeout(waitForEntry.waitEntry, 50);\n                  } else {\n                    setTimeout(\n                      function () {\n                        addFlair(entityResult, null, type, null, id);\n                      }.bind(this)\n                    );\n                  }\n                }.bind(this),\n              };\n              waitForEntry.waitEntry();\n            }\n          }.bind(this)\n        )\n        .catch(\n          function (data) {\n            if (this.state.isMounted) {\n              this.setState({ showEntityData: true });\n              this.props.errorToggle(\"Failed to load entity data.\", data);\n            }\n          }.bind(this)\n        );\n    }\n  };\n\n  updatedCB = () => {\n    this.getEntityData();\n    this.getEntryData();\n  };\n\n  flairToolbarToggle = (id, value, type, entityoffset, entityobj) => {\n    if (this.state.isMounted) {\n      this.setState({\n        flairToolbar: true,\n        entityid: id,\n        entityvalue: value,\n        entitytype: type,\n        entityoffset: entityoffset,\n        entityobj: entityobj,\n      });\n    }\n  };\n\n  flairToolbarOff = () => {\n    if (this.state.isMounted) {\n      let newEntityDetailKey = this.state.entityDetailKey + 1;\n      this.setState({\n        flairToolbar: false,\n        entityDetailKey: newEntityDetailKey,\n      });\n    }\n  };\n\n  linkWarningToggle = (href,nopop=false) => {\n    if (this.state.isMounted) {\n      if (this.state.linkWarningToolbar === false) {\n        this.setState({ linkWarningToolbar: true, link: href, nopop: nopop });\n      } else {\n        this.setState({ linkWarningToolbar: false, nopop: nopop });\n      }\n    }\n  };\n\n  Watcher = () => {\n    let containerid = this.props.type + \"-detail-container\";\n    if (this.props.type != \"alertgroup\") {\n      let selector = `iframe`;\n      let iframes = document.querySelectorAll(selector);\n      iframes.forEach(\n        function (ifr, index) {\n          ifr.contentWindow.requestAnimationFrame(\n            function () {\n              if (ifr.contentDocument != null) {\n                let arr = [];\n                arr.push(this.checkFlairHover);\n                ifr.addEventListener(\"mouseenter\", function (v, type) {\n                  let intervalID = setInterval(this[0], 50, ifr); // this.flairToolbarToggle, type, this.props.linkWarningToggle, this.props.id);\n                  console.log(\"Now watching iframe \" + intervalID);\n                });\n\n                ifr.addEventListener(\"mouseleave\", function () {\n                  let intervalID = $(ifr).data(\"intervalID\");\n                  window.clearInterval(intervalID);\n                  console.log(\"No longer watching iframe \" + intervalID);\n                });\n              }\n            }.bind(this)\n          );\n        }.bind(this)\n      );\n    } else {\n      $(containerid)\n        .find(\"a, .entity\")\n        .not(\".not_selectable\")\n        .each(\n          function (index, tr) {\n            $(tr).off(\"mousedown\");\n            $(tr).on(\n              \"mousedown\",\n              function (index) {\n                let thing = index.target;\n                if ($(thing)[0].className == \"extras\") {\n                  thing = $(thing)[0].parentNode;\n                } //if an extra is clicked reference the parent element\n                if ($(thing).attr(\"url\")) {\n                  //link clicked\n                  let url = $(thing).attr(\"url\");\n                  this.linkWarningToggle(url);\n                } else {\n                  //entity clicked\n                  let entityid = $(thing).attr(\"data-entity-id\");\n                  let entityvalue = $(thing).attr(\"data-entity-value\");\n                  let entityoffset = $(thing).offset();\n                  let entityobj = $(thing);\n                  this.flairToolbarToggle(\n                    entityid,\n                    entityvalue,\n                    \"entity\",\n                    entityoffset,\n                    entityobj\n                  );\n                }\n              }.bind(this)\n            );\n          }.bind(this)\n        );\n    }\n  };\n\n  checkFlairHover = (ifr) => {\n    function returnifr() {\n      return ifr;\n    }\n    if (this.props.type != \"alertgroup\") {\n      if (ifr.contentDocument != null) {\n        $(ifr)\n          .contents()\n          .find(\".entity\")\n          .each(\n            function (index, entity) {\n              if ($(entity).css(\"background-color\") == \"rgb(255, 0, 0)\") {\n                $(entity).data(\"state\", \"down\");\n              } else if ($(entity).data(\"state\") == \"down\") {\n                $(entity).data(\"state\", \"up\");\n                let entityid = $(entity).attr(\"data-entity-id\");\n                let entityvalue = $(entity).attr(\"data-entity-value\");\n                let entityobj = $(entity);\n                let ifr = returnifr();\n                let entityoffset = {\n                  top: $(entity).offset().top + $(ifr).offset().top,\n                  left: $(entity).offset().left + $(ifr).offset().left,\n                };\n                this.flairToolbarToggle(\n                  entityid,\n                  entityvalue,\n                  \"entity\",\n                  entityoffset,\n                  entityobj\n                );\n              }\n            }.bind(this)\n          );\n      }\n      if (ifr.contentDocument != null) {\n        $(ifr)\n          .contents()\n          .find(\"a\")\n          .each(\n            function (index, a) {\n              if ($(a).css(\"color\") == \"rgb(255, 0, 0)\") {\n                $(a).data(\"state\", \"down\");\n              } else if ($(a).data(\"state\") == \"down\") {\n                $(a).data(\"state\", \"up\");\n                let url = $(a).attr(\"url\");\n                this.linkWarningToggle(url);\n              }\n            }.bind(this)\n          );\n      }\n    }\n  };\n\n  containerHeightAdjust = () => {\n    //Using setTimeout so full screen toggle animation has time to finish before resizing detail section\n    setTimeout(\n      function () {\n        let scrollHeight;\n        let ListViewTableHeight;\n        ListViewTableHeight = document.getElementsByClassName(\n            \"ReactTable\"\n        )[0].clientHeight;\n        if (ListViewTableHeight !== undefined) {\n          if (ListViewTableHeight !== 0) {\n            scrollHeight =\n              window.innerHeight -\n              ListViewTableHeight -\n              $(\"#header\").height() -\n              90;\n            scrollHeight = scrollHeight + \"px\";\n          } else {\n            scrollHeight = $(window).height() - $(\"#header\").height() - 78;\n            scrollHeight = scrollHeight + \"px\";\n          }\n          //$('#detail-container').css('height',scrollHeight);\n          if (this.state.isMounted) {\n            this.setState({ height: scrollHeight });\n          }\n        }\n      }.bind(this),\n      500\n    );\n  };\n\n  render = () => {\n    let divid = \"detail-container\";\n    let height = this.state.height;\n    let data = this.props.entryData;\n    let type = this.props.type;\n    let id = this.props.id;\n    let showEntryData = this.props.showEntryData;\n    let divClass = \"row-fluid entry-wrapper entry-wrapper-main\";\n    if (type === \"alert\") {\n      //divClass = 'row-fluid entry-wrapper entry-wrapper-main-300'\n      divClass = \"row-fluid entry-wrapper entry-wrapper-main-nh\";\n      data = this.state.entryData;\n      showEntryData = this.state.showEntryData;\n    } else if (type === \"alertgroup\") {\n      divClass = \"row-fluid alert-wrapper entry-wrapper-main\";\n    } else if (type === \"entity\" || this.props.isPopUp === 1) {\n      divClass = \"row-fluid entry-wrapper-entity\";\n      data = this.state.entryData;\n      showEntryData = this.state.showEntryData;\n    }\n    //lazy loading flair - this needs to be done here because it is not initialized when this function is called by itself (alerts and entities)\n    if (type === \"alert\" || this.props.isPopUp === 1) {\n      divid = this.props.type + \"-detail-container\";\n      height = null;\n    }\n    return (\n      <div id={divid} key={id} className={divClass} style={{ height: height }}>\n        {type !== \"entity\" && type !== \"alert\" && type !== \"feed\" ? (\n          <CustomMetaDataTable\n            type={type}\n            id={id}\n            errorToggle={this.props.errorToggle}\n            form={this.props.form}\n            headerData={this.props.headerData}\n          />\n        ) : null}\n        {type === \"feed\" ? (\n          <FeedDataTable\n            type={type}\n            id={id}\n            errorToggle={this.props.errorToggle}\n            form={this.props.form}\n            headerData={this.props.headerData}\n          />\n        ) : null}\n        {/*{(type == 'incident' && this.props.headerData != null) ? <IncidentTable type={type} id={id} headerData={this.props.headerData} errorToggle={this.props.errorToggle}/> : null}*/}\n        {type === \"signature\" && this.props.headerData !== null ? (\n          <SignatureTable\n            type={type}\n            id={id}\n            headerData={this.props.headerData}\n            errorToggle={this.props.errorToggle}\n            showSignatureOptions={this.props.showSignatureOptions}\n          />\n        ) : null}\n        {showEntryData ? (\n          <EntryIterator\n            updated={this.updatedCB}\n            removeCallback={this.props.removeCallback}\n            createCallback={this.props.createCallback}\n            data={data}\n            type={type}\n            id={id}\n            entityData={this.state.entityData}\n            entryToggle={this.props.entryToggle}\n            subcomponent={this.props.subcomponent}\n            setAlertColumns={this.props.setAlertColumns}\n            setEntryEntities={this.props.setEntryEntities}\n            {...this.props}\n          />\n        ) : (\n          <span>Loading...</span>\n        )}\n        {this.props.entryToolbar ? (\n          <div>\n            <AddEntry\n              entryAction={\"Add\"}\n              type={this.props.type}\n              targetid={this.props.id}\n              id={null}\n              addedentry={this.props.entryToggle}\n              updated={this.updatedCB}\n              errorToggle={this.props.errorToggle}\n            />\n          </div>\n        ) : null}\n        {this.props.fileUploadToolbar ? (\n          <div>\n            <FileUpload\n              type={this.props.type}\n              targetid={this.props.id}\n              id={\"file_upload\"}\n              fileUploadToggle={this.props.fileUploadToggle}\n              updated={this.updatedCB}\n              errorToggle={this.props.errorToggle}\n            />\n          </div>\n        ) : null}\n        {this.state.flairToolbar ? (\n          <EntityDetail\n            key={this.state.entityDetailKey}\n            flairToolbarToggle={this.flairToolbarToggle}\n            flairToolbarOff={this.flairToolbarOff}\n            entityid={this.state.entityid}\n            entityvalue={this.state.entityvalue}\n            entitytype={this.state.entitytype}\n            type={this.props.type}\n            id={this.props.id}\n            entityoffset={this.state.entityoffset}\n            entityobj={this.state.entityobj}\n            linkWarningToggle={this.linkWarningToggle}\n            errorToggle={this.props.errorToggle}\n            createCallback={this.props.createCallback}\n            removeCallback={this.props.removeCallback}\n            addFlair={this.props.addFlair}\n          />\n        ) : null}\n        {this.state.linkWarningToolbar ? (\n          <LinkWarning\n            linkWarningToggle={this.linkWarningToggle}\n            link={this.state.link}\n            nopop={this.state.nopop}\n          />\n        ) : null}\n      </div>\n    );\n  };\n}\n\nclass EntryIterator extends React.Component {\n  render = () => {\n    let rows = [];\n    let data = this.props.data;\n    let type = this.props.type;\n    let items = this.props.items;\n    let linkToSearch = [];\n    let id = this.props.id;\n    let entityData = this.props.entityData;\n    let search = null;\n    if (this.props.items !== undefined) {\n      if (\n        this.props.items[0].data_with_flair !== undefined &&\n        !this.props.flairOff\n      ) {\n        search = items[0].data_with_flair.search;\n      } else {\n        search = items[0].data.search;\n      }\n      for (let y = 0; y < this.props.headerData.ahrefs.length; y++) {\n        linkToSearch.push(\n          <a href={this.props.headerData.ahrefs[y].link}>\n            {this.props.headerData.ahrefs[y].subject}\n          </a>\n        );\n        linkToSearch.push(<br />);\n      }\n    }\n\n    if (data === undefined || data[0] === undefined) {\n      if (type !== \"alertgroup\") {\n        return (\n          <div>\n            <div style={{ color: \"blue\" }}>\n              No entries found. Click the green Add Entry button if you would\n              like to create one\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            <div style={{ color: \"blue\" }}>\n              No alerts found or they are unable to be rendered. Please check\n              the source and correct the formatting of the alert if necessary\n            </div>\n          </div>\n        );\n      }\n    } else {\n      if (type !== \"alertgroup\") {\n        let key = 0;\n        data.forEach(\n          function (data) {\n            rows.push(\n              <EntryParent\n                subcomponent={this.props.subcomponent}\n                key={key}\n                items={data}\n                type={type}\n                id={id}\n                isPopUp={this.props.isPopUp}\n                errorToggle={this.props.errorToggle}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                entityData={entityData}\n                entryToggle={this.props.entryToggle}\n                setEntryEntities={this.props.setEntryEntities}\n              />\n            );\n            key = key + 1;\n          }.bind(this)\n        );\n        return <div>{rows}</div>;\n      } else {\n        return (\n          <div>\n            <NewAlertTable\n              subcomponent={this.props.subcomponent}\n              {...this.props}\n              key={id}\n              type={type}\n              id={id}\n              items={data}\n              entityData={entityData}\n              entryToggle={this.props.entryToggle}\n              createCallback={this.props.createCallback}\n              removeCallback={this.props.removeCallback}\n              addFlair={this.props.addFlair}\n              setAlertColumns={this.props.setAlertColumns}\n              updated={this.props.updated}\n            />\n          </div>\n        );\n      }\n    }\n  };\n}\n\nclass NewAlertTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: [],\n      data: [],\n      entityData: [],\n      type: \"\",\n      addFlair: null,\n      promotionId: null,\n      selected: [],\n      flairOff: false,\n      expanded: {},\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.items.length > 0) {\n      const data = this.createData();\n      const columns = buildTypeColumns(\"alert\", data, this.props.items, true);\n      this.setState({ data, columns });\n    }\n    if (this.props.type) {\n      this.setState({\n        type: this.props.type,\n        entityData: this.props.entityData,\n      });\n    }\n    if (this.props.addFlair) {\n      this.setState({ addFlair: this.props.addFlair });\n    }\n\n    //handle alertselection from SelectedHeader\n    if (this.props.alertsSelected) {\n      this.setState({ selected: this.props.alertsSelected });\n    }\n\n    $(\"#main-detail-container\").keydown(\n      function (event) {\n        //prevent from working when in input\n        if ($(\"input\").is(\":focus\")) {\n          return;\n        }\n        //check for ctrl + a with keyCode\n        if (\n          event.keyCode === 65 &&\n          (event.ctrlKey === true || event.metaKey === true)\n        ) {\n          this.handleSelectAll();\n          event.preventDefault();\n        }\n      }.bind(this)\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.entityData !== this.props.entityData) {\n      this.setState({\n        entityData: this.props.entityData,\n        columns: buildTypeColumns(\n          \"alert\",\n          this.state.data,\n          this.props.items,\n          true,\n          this.props.entityData\n        ),\n      });\n    }\n    if (prevState.flairOff !== this.state.flairOff) {\n      let data = this.createData();\n      this.setState({ data });\n    }\n    if (prevProps.items !== this.props.items) {\n      let data = this.createData();\n      this.setState({ data });\n    }\n\n    if (\n      this.props.alertsSelected !== prevState.selected &&\n      this.props.alertsSelected !== undefined\n    ) {\n      this.setState({ selected: this.props.alertsSelected });\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.flairOff !== prevState.flairOff) {\n      return { flairOff: nextProps.flairOff };\n    }\n    if (nextProps.alertsSelected !== prevState.selected) {\n      return { selected: nextProps.alertsSelected };\n    } else return null;\n  }\n\n  createData = () => {\n    const dataarray = [];\n    this.props.items.forEach(\n      function (element) {\n        let dataitem = {};\n        if (\n          !this.state.flairOff &&\n          Object.entries(element.data_with_flair).length !== 0\n        ) {\n          dataitem = element.data_with_flair;\n          //we have to do this in order to not conflict SCOT status column with Splunk http status columns\n          dataitem[\"status \"] = element.data_with_flair.status;\n        } else {\n          dataitem = element.data;\n          //we have to do this in order to not conflict SCOT status column with Splunk http status columns\n          dataitem[\"status \"] = element.data.status;\n        }\n        dataitem[\"id\"] = element.id;\n        dataitem[\"status\"] = element.status;\n        dataitem[\"entry_count\"] = element.entry_count;\n        dataarray.push(dataitem);\n      }.bind(this)\n    );\n    return dataarray;\n  };\n\n  render() {\n    const { columns, data } = this.state;\n    const { addFlair, type, headerData, entityData, updated } = this.props;\n\n    return (\n      <div>\n        <ReactTable\n          styleName=\"styles.ReactTable\"\n          ref={(r) => (this.reactTable = r)}\n          key={2}\n          data={data}\n          columns={columns}\n          filterable={true}\n          expanded={this.state.expanded}\n          onExpandedChange={(expanded, index, event) => {\n            this.setState({ expanded });\n            addFlair(entityData, null, \"entry\", null, null);\n          }}\n          defaultFilterMethod={(filter, row) => {\n            if (row[filter.id].includes(filter.value)) {\n              return row;\n            }\n          }}\n          SubComponent={({ row }) => {\n            return (\n              <AlertSubComponent\n                flag={this.props.subcomponent}\n                row={row}\n                entryToggle={this.props.entryToggle}\n                errorToggle={this.props.errorToggle}\n                entryData={this.props.entryData}\n                showEntryData={this.props.showEntryData}\n                errorToggle={this.props.errorToggle}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                entityData={this.props.entityData}\n                addFlair={this.props.addFlair}\n                updated={this.props.updated}\n              />\n            );\n          }}\n          onFilteredChange={(filter, column) => {\n            addFlair(entityData, null, type, null, null);\n          }}\n          onSortedChange={(newSorted, column, shiftKey) => {\n            addFlair(entityData, null, type, null, null);\n          }}\n          showPagination={false}\n          pageSize={data.length}\n          getTdProps={(state, rowInfo) => {\n            return {\n              style: {\n                maxWidth: \"fit-content\",\n              },\n            };\n          }}\n          getTrProps={(state, rowInfo) => {\n            if (\n              rowInfo &&\n              rowInfo.row &&\n              this.props.alertsSelected !== undefined\n            ) {\n              return {\n                onClick: (e) => {\n                  if (e.ctrlKey || (e.metaKey && e.keyCode === 83)) {\n                    this.props.handleSelectAll(state.sortedData);\n                  }\n                  if (e.ctrlKey || e.metaKey) {\n                    e.preventDefault();\n                    this.props.handleMultiSelection(rowInfo.original);\n                  } else if (e.shiftKey) {\n                    document.getSelection().removeAllRanges();\n                    this.props.handleShiftSelect(\n                      this.state.selected[0].id,\n                      rowInfo.original.id,\n                      state.sortedData\n                    );\n                  } else {\n                    this.props.handleSelection(rowInfo.original);\n                  }\n                },\n                style: {\n                  background: this.state.selected.some(\n                    (item) => rowInfo.original.id === item.id\n                  )\n                    ? \"#a7c6a5\"\n                    : \"\",\n                  borderBottom: \"1px solid black\",\n                  maxHeight: 200,\n                  overflowY: \"auto\",\n                },\n              };\n            } else {\n              return { style: { maxHeight: 200, overflowY: \"auto\" } };\n            }\n          }}\n        />\n        <AlertTableSearchDiv\n          items={this.props.items}\n          flairOff={this.props.flairOff}\n          headerData={this.props.headerData}\n        />\n      </div>\n    );\n  }\n}\n\n//div underneath alert table\nclass AlertTableSearchDiv extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let search = null;\n    const { items } = this.props;\n    if (items[0].data_with_flair !== undefined && !this.props.flairOff) {\n      search = items[0].data_with_flair.search;\n    } else {\n      search = items[0].data.search;\n    }\n\n    let linkToSearch = this.props.headerData.ahrefs.map((item, index) => (\n      <div key={index}>\n        <a href={this.props.headerData.ahrefs[index].link}>\n          {this.props.headerData.ahrefs[index].subject}\n        </a>\n        <br />\n      </div>\n    ));\n\n    return (\n      <div>\n        {search !== undefined ? (\n          <div\n            className=\"alertTableHorizontal\"\n            style={{\n              outline: \"1px solid black\",\n              borderRadius: 5,\n              padding: 3,\n              margin: \"10px 0 15px\",\n            }}\n          >\n            {linkToSearch}\n            <div dangerouslySetInnerHTML={{ __html: search }} />\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nclass EntryParent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editEntryToolbar: false,\n      replyEntryToolbar: false,\n      deleteToolbar: false,\n      permissionsToolbar: false,\n      fileUploadToolbar: false,\n      showEntityCreateModal: false,\n      highlightedText: null,\n      items: {},\n    };\n  }\n\n  // componentWillUnmount() {\n  //   this.props.removeCallback(this.props.items.id);\n  // }\n\n  componentDidMount = () => {\n    this.props.createCallback(this.props.items.id, this.refreshButton);\n  };\n\n  //TODO modify manual entry refresh to be done on automatically based on STOMP single entry update. This works for now.\n  refreshButton = () => {\n    if ($(\"#refresh-detail\")) {\n      $(\"#refresh-detail\").click();\n    }\n  };\n\n  editEntryToggle = () => {\n    if (this.state.editEntryToolbar === false) {\n      this.setState({ editEntryToolbar: true });\n    } else {\n      this.setState({ editEntryToolbar: false });\n    }\n  };\n\n  replyEntryToggle = () => {\n    if (this.state.replyEntryToolbar === false) {\n      this.setState({ replyEntryToolbar: true });\n    } else {\n      this.setState({ replyEntryToolbar: false });\n    }\n  };\n\n  deleteToggle = () => {\n    if (this.state.deleteToolbar === false) {\n      this.setState({ deleteToolbar: true });\n    } else {\n      this.setState({ deleteToolbar: false });\n    }\n  };\n\n  permissionsToggle = () => {\n    if (this.state.permissionsToolbar === false) {\n      this.setState({ permissionsToolbar: true });\n    } else {\n      this.setState({ permissionsToolbar: false });\n    }\n  };\n\n  reparseFlair = () => {\n    let reparse_flair_endpoint = `/scot/api/v2/entry/${this.props.items.id}`;\n    let put_response = put_data(reparse_flair_endpoint);\n    put_response\n      .then(function (data) {\n        console.log(\"reparsing started\");\n      })\n      .catch(\n        function (data) {\n          this.props.errorToggle(\"failed to start reparsing of data\", data);\n        }.bind(this)\n      );\n  };\n\n  fileUploadToggle = () => {\n    if (this.state.fileUploadToolbar === false) {\n      this.setState({ fileUploadToolbar: true });\n    } else {\n      this.setState({ fileUploadToolbar: false });\n    }\n  };\n\n  getEntryEntityData = (id) => {\n    const entity_url = `scot/api/v2/entry/${id}/entity`;\n    let entity_response = get_data(entity_url, null);\n    entity_response\n      .then(\n        function (response) {\n          let entityResult = response.data.records;\n          this.props.setEntryEntities(entityResult);\n        }.bind(this)\n      )\n      .catch(\n        function (data) {\n          console.log(`Couldnt get entry entity data: ${data}`);\n        }.bind(this)\n      );\n  };\n\n  render = () => {\n    let itemarr = [];\n    let subitemarr = [];\n    let items = this.props.items;\n    let type = this.props.type;\n    let id = this.props.id;\n    let isPopUp = this.props.isPopUp;\n    let itemsClass = this.props.items.class;\n    let summary = 0; //define Summary as false unless itemsClass is \"summary\"\n    let editEntryToolbar = this.state.editEntryToolbar;\n    let editEntryToggle = this.editEntryToggle;\n    let errorToggle = this.props.errorToggle;\n    let outerClassName = \"row-fluid entry-outer\";\n    let innerClassName = \"row-fluid entry-header\";\n    let taskOwner = \"\";\n    if (itemsClass === \"summary\") {\n      outerClassName += \" summary_entry\";\n      summary = 1;\n    }\n    if (itemsClass === \"task\") {\n      if (\n        items.metadata.task.status === \"open\" ||\n        items.metadata.task.status === \"assigned\"\n      ) {\n        taskOwner = \"-- Task Owner \" + items.metadata.task.who + \" \";\n        outerClassName += \" todo_open_outer\";\n        innerClassName += \" todo_open\";\n      } else if (\n        (items.metadata.task.status === \"closed\" ||\n          items.metadata.task.status === \"completed\") &&\n        items.metadata.task.who != null\n      ) {\n        taskOwner = \"-- Task Owner \" + items.metadata.task.who + \" \";\n        outerClassName += \" todo_completed_outer\";\n        innerClassName += \" todo_completed\";\n      } else if (\n        items.metadata.task.status === \"closed\" ||\n        items.metadata.task.status === \"completed\"\n      ) {\n        outerClassName += \" todo_undefined_outer\";\n        innerClassName += \" todo_undefined\";\n      }\n    }\n    if (itemsClass === \"alert\") {\n      outerClassName += \" event_entry_container_alert\";\n    }\n    itemarr.push(\n      <EntryData\n        id={items.id}\n        key={items.id}\n        subitem={items}\n        type={type}\n        targetid={id}\n        editEntryToolbar={editEntryToolbar}\n        editEntryToggle={editEntryToggle}\n        isPopUp={isPopUp}\n        errorToggle={this.props.errorToggle}\n        setEntryEntities={this.props.setEntryEntities}\n      />\n    );\n    for (let prop in items) {\n      let childfunc = (prop) => {\n        if (prop === \"children\") {\n          let childobj = items[prop];\n          items[prop].forEach(\n            function (childobj) {\n              subitemarr.push(\n                new Array(\n                  (\n                    <EntryParent\n                      items={childobj}\n                      id={id}\n                      type={type}\n                      editEntryToolbar={editEntryToolbar}\n                      editEntryToggle={editEntryToggle}\n                      isPopUp={isPopUp}\n                      errorToggle={errorToggle}\n                      createCallback={this.props.createCallback}\n                      removeCallback={this.props.removeCallback}\n                      setEntryEntities={this.props.setEntryEntities}\n                    />\n                  )\n                )\n              );\n            }.bind(this)\n          );\n        }\n      };\n      childfunc(prop);\n    }\n    itemarr.push(subitemarr);\n\n    let entryActions = [];\n    if (this.props.items) {\n      if (this.props.items.actions) {\n        for (let i = 0; i < this.props.items.actions.length; i++) {\n          if (\n            this.props.items.actions[i].send_to_name &&\n            this.props.items.actions[i].send_to_url\n          ) {\n            entryActions.push(\n              <EntryAction\n                id={this.props.items.actions[i].send_to_name}\n                datahref={this.props.items.actions[i].send_to_url}\n                errorToggle={this.props.errorToggle}\n              />\n            );\n          }\n        }\n      }\n    }\n\n    let header1 = \"[\" + items.id + \"] \";\n    let header2 = \" by \" + items.owner + \" \" + taskOwner + \"(updated on \";\n    let header3 = \")\";\n    let createdTime = items.created;\n    let updatedTime = items.updated;\n    let entryHeaderInnerId =\n      \"entry-header-inner-\" + this.props.id + \" entry-header-inner\";\n    let tlpBorder;\n    let tlpColorCSS;\n    if (items.tlp !== \"unset\") {\n      if (items.tlp !== \"amber\") {\n        tlpColorCSS = items.tlp;\n      } else {\n        tlpColorCSS = \"orange\";\n      }\n      tlpBorder = \"3px solid \" + tlpColorCSS;\n    }\n    return (\n      <div>\n        {this.state.showEntityCreateModal ? (\n          <EntityCreateModal\n            match={this.state.highlightedText}\n            modalActive={this.state.showEntityCreateModal}\n            ToggleCreateEntity={this.ToggleCreateEntity}\n            errorToggle={this.props.errorToggle}\n            createCallback={this.props.createCallback}\n            removeCallback={this.props.removeCallback}\n          />\n        ) : null}\n        <div\n          className={outerClassName}\n          style={{\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            width: \"99.3%\",\n            border: tlpBorder,\n          }}\n        >\n          <span\n            className=\"anchor\"\n            id={\"/\" + type + \"/\" + id + \"/\" + items.id}\n          />\n          <div className={innerClassName}>\n            <div id={entryHeaderInnerId} className={entryHeaderInnerId}>\n              [\n              <Link\n                style={{ color: \"black\" }}\n                to={\"/\" + type + \"/\" + id + \"/\" + items.id}\n              >\n                {items.id}\n              </Link>\n              ]{\" \"}\n              <ReactTime\n                value={items.created * 1000}\n                format=\"MM/DD/YYYY hh:mm:ss a\"\n              />{\" \"}\n              by {items.owner} {taskOwner}\n              (updated on{\" \"}\n              <ReactTime\n                value={items.updated * 1000}\n                format=\"MM/DD/YYYY hh:mm:ss a\"\n              />\n              )\n              {this.state.highlightedText !== \"\" &&\n              this.state.highlightedText != null ? (\n                <Button\n                  bsSize=\"xsmall\"\n                  bsStyle=\"success\"\n                  onClick={this.ToggleCreateEntity}\n                >\n                  Create Entity\n                </Button>\n              ) : null}\n              {this.props.items.body_flair !== \"\" &&\n              this.props.items.parsed === 0 ? (\n                <span style={{ color: \"green\", fontWeight: \"bold\" }}>\n                  {\" \"}\n                  Entry awaiting flair engine. Content may be inaccurate.\n                </span>\n              ) : null}\n              <span\n                className=\"pull-right\"\n                style={{ display: \"inline-flex\", paddingRight: \"3px\" }}\n              >\n                {this.state.permissionsToolbar ? (\n                  <SelectedPermission\n                    updateid={id}\n                    id={items.id}\n                    type={\"entry\"}\n                    permissionData={items}\n                    permissionsToggle={this.permissionsToggle}\n                  />\n                ) : null}\n                {items.tlp !== \"unset\" && items.tlp !== undefined ? (\n                  <span>\n                    TLP:{\" \"}\n                    <span style={{ color: tlpColorCSS }}>{items.tlp} </span>\n                  </span>\n                ) : null}\n                <SplitButton\n                  bsSize=\"xsmall\"\n                  title=\"Reply\"\n                  key={items.id}\n                  id={\"Reply \" + items.id}\n                  onClick={this.replyEntryToggle}\n                  pullRight\n                >\n                  {type !== \"entity\" ? (\n                    <MenuItem eventKey=\"1\" onClick={this.fileUploadToggle}>\n                      Upload File\n                    </MenuItem>\n                  ) : null}\n                  {entryActions}\n                  <MenuItem eventKey=\"3\">\n                    <Summary\n                      type={type}\n                      id={id}\n                      entryid={items.id}\n                      summary={summary}\n                      errorToggle={this.props.errorToggle}\n                    />\n                  </MenuItem>\n                  <MenuItem eventKey=\"4\">\n                    <Task\n                      type={type}\n                      id={id}\n                      entryid={items.id}\n                      taskData={items}\n                      errorToggle={this.props.errorToggle}\n                    />\n                  </MenuItem>\n                  <Marker\n                    type={\"entry\"}\n                    id={items.id}\n                    string={items.body_plain}\n                  />\n                  <MenuItem onClick={this.permissionsToggle}>\n                    Permissions\n                  </MenuItem>\n                  <MenuItem onClick={this.reparseFlair}>Reparse Flair</MenuItem>\n                  <TrafficLightProtocol\n                    type={\"entry\"}\n                    id={items.id}\n                    tlp={items.tlp}\n                    errorToggle={this.props.errorToggle}\n                  />\n                  <MenuItem\n                    onClick={() => {\n                      this.getEntryEntityData(items.id);\n                    }}\n                  >\n                    Get entities for Entry\n                  </MenuItem>\n\n                  <MenuItem divider />\n                  <MenuItem eventKey=\"2\" onClick={this.deleteToggle}>\n                    Delete\n                  </MenuItem>\n                </SplitButton>\n                <Button bsSize=\"xsmall\" onClick={this.editEntryToggle}>\n                  Edit\n                </Button>\n              </span>\n            </div>\n          </div>\n          {itemarr}\n          {this.state.replyEntryToolbar ? (\n            <AddEntry\n              entryAction={\"Reply\"}\n              type={type}\n              header1={header1}\n              header2={header2}\n              header3={header3}\n              createdTime={createdTime}\n              updatedTime={updatedTime}\n              targetid={id}\n              id={items.id}\n              addedentry={this.replyEntryToggle}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n          {this.state.fileUploadToolbar ? (\n            <FileUpload\n              type={this.props.type}\n              targetid={this.props.id}\n              entryid={this.props.items.id}\n              fileUploadToggle={this.fileUploadToggle}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n        </div>\n        {this.state.deleteToolbar ? (\n          <DeleteEntry\n            type={type}\n            id={id}\n            deleteToggle={this.deleteToggle}\n            entryid={items.id}\n            errorToggle={this.props.errorToggle}\n          />\n        ) : null}\n      </div>\n    );\n  };\n\n  componentWillReceiveProps = () => {\n    this.checkHighlight();\n  };\n\n  checkHighlight = () => {\n    let content;\n    let iframe = document.getElementById(\"iframe_\" + this.props.items.id);\n    if (iframe) {\n      if (iframe.contentWindow.getSelection() !== null) {\n        content = iframe.contentWindow.getSelection().toString();\n        if (this.state.highlightedText !== content) {\n          console.log(iframe + \" has highlighted text: \" + content);\n          this.setState({ highlightedText: content });\n        } else {\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n  };\n\n  ToggleCreateEntity = () => {\n    this.setState({ showEntityCreateModal: !this.state.showEntityCreateModal });\n  };\n}\n\nclass EntryAction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      [this.props.id]: false,\n      disabled: false,\n    };\n  }\n\n  submit = () => {\n    let url = this.props.datahref;\n    let id = this.props.id;\n\n    let post_response = post_data(url, null);\n    post_response\n      .then(\n        function (data) {\n          this.setState({ [id]: true, disabled: false });\n        }.bind(this)\n      )\n      .catch(\n        function (data) {\n          this.props.errorToggle(\"failed to submit the entry action\", data);\n          this.setState({ disabled: false });\n        }.bind(this)\n      );\n  };\n\n  render = () => {\n    return (\n      <MenuItem disabled={this.state.disabled}>\n        <span\n          id={this.props.id}\n          data-href={this.props.datahref}\n          onClick={this.submit}\n          style={{ display: \"block\" }}\n        >\n          {this.props.id}{\" \"}\n          {this.state[this.props.id] ? (\n            <span style={{ color: \"green\" }}>success</span>\n          ) : null}\n        </span>\n      </MenuItem>\n    );\n  };\n}\n\nclass EntryData extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: \"1px\",\n    };\n  }\n\n  componentWillReceiveProps() {\n    this.setHeight();\n  }\n\n  componentDidMount() {\n    this.setHeight();\n  }\n  setHeight = () => {\n    setTimeout(\n      function () {\n        if (document.getElementById(\"iframe_\" + this.props.id) != undefined) {\n          document\n            .getElementById(\"iframe_\" + this.props.id)\n            .contentWindow.requestAnimationFrame(\n              function () {\n                let newheight;\n                newheight = document.getElementById(\"iframe_\" + this.props.id)\n                  .contentWindow.document.body.scrollHeight;\n                newheight = newheight + 35 + \"px\";\n                if (this.state.height != newheight) {\n                  this.setState({ height: newheight });\n                }\n              }.bind(this)\n            );\n        }\n      }.bind(this),\n      250\n    );\n  };\n\n  render() {\n    let rawMarkup = this.props.subitem.body_flair;\n    if (this.props.subitem.body_flair == \"\") {\n      rawMarkup = this.props.subitem.body;\n    }\n    let id = this.props.id;\n    let entry_body_id = \"entry-body-\" + this.props.id;\n    let entry_body_inner_id = \"entry-body-inner-\" + this.props.id;\n    return (\n      <div\n        id={entry_body_id}\n        key={this.props.id}\n        className={\"row-fluid entry-body\"}\n      >\n        <div\n          id={entry_body_inner_id}\n          className={\"row-fluid entry-body-inner\"}\n          style={{ marginLeft: \"auto\", marginRight: \"auto\", width: \"99.3%\" }}\n        >\n          {this.props.editEntryToolbar ? (\n            <AddEntry\n              entryAction={\"Edit\"}\n              type={this.props.type}\n              targetid={this.props.targetid}\n              id={id}\n              addedentry={this.props.editEntryToggle}\n              parent={this.props.subitem.parent}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : (\n            <Frame\n              //Here is new stuff\n              key={id}\n              contentDidMount={this.setHeight}\n              head={[\n                <link\n                  rel=\"stylesheet\"\n                  type=\"text/css\"\n                  href=\"/css/sandbox.css\"\n                />,\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/prism.css\" />,\n                <script src=\"/libs/prism.js\" />,\n              ]}\n              //end of new stuff\n              frameBorder={\"0\"}\n              id={\"iframe_\" + id}\n              sandbox={\"allow-same-origin\"}\n              style={{ width: \"100%\", height: this.state.height }}\n            >\n              <div dangerouslySetInnerHTML={{ __html: rawMarkup }} />\n            </Frame>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Button from \"react-bootstrap/lib/Button\";\nimport $ from \"jquery\";\nimport { WithContext as ReactTags } from \"react-tag-input\";\nimport { get_data, put_data } from \"../utils/XHR\";\n\nexport default class Badge extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      source: false,\n      tag: false\n    };\n  }\n\n  toggleBadgeEntry = badgetype => {\n    if (this.state[badgetype] == false) {\n      this.setState({ [badgetype]: true });\n    } else if (this.state[badgetype] == true) {\n      this.setState({ [badgetype]: false });\n    }\n  };\n\n  render() {\n    let rows = [];\n    let id = this.props.id;\n    let type = this.props.type;\n    let data = this.props.data;\n    let badgevar = \"\";\n\n    if (this.props.badgeType === \"tag\") {\n      badgevar = \"Tags\";\n    } else if (this.props.badgeType === \"source\") {\n      badgevar = \"Sources\";\n    }\n\n    //Don't show if guide\n    if (this.props.type == \"guide\") {\n      return <th />;\n    }\n\n    if (data != undefined) {\n      for (let i = 0; i < data.length; i++) {\n        rows.push(\n          <BadgeDataIterator\n            data={data}\n            badgeType={this.props.badgeType}\n            dataOne={data[i]}\n            id={id}\n            type={type}\n            updated={this.props.updated}\n            key={i}\n            errorToggle={this.props.errorToggle}\n          />\n        );\n      }\n    }\n    return (\n      //TODO: THIS CODE IS STUPID. USE GRID\n      <th>\n        <th>{badgevar}:</th>\n        <td>\n          {rows}\n          {this.state.source ? (\n            <NewBadge\n              data={data}\n              type={type}\n              id={id}\n              badgeType={this.props.badgeType}\n              toggleBadgeEntry={this.toggleBadgeEntry}\n              updated={this.props.updated}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n          {this.state.tag ? (\n            <NewBadge\n              data={data}\n              type={type}\n              id={id}\n              badgeType={this.props.badgeType}\n              toggleBadgeEntry={this.toggleBadgeEntry}\n              updated={this.props.updated}\n              errorToggle={this.props.errorToggle}\n            />\n          ) : null}\n          {this.props.badgeType === \"tag\" ? (\n            this.state.tag ? (\n              <span className=\"add-tag-button\">\n                <Button\n                  bsSize={\"xsmall\"}\n                  bsStyle={\"danger\"}\n                  onClick={() => {\n                    this.toggleBadgeEntry(this.props.badgeType);\n                  }}\n                >\n                  <span\n                    className=\"glyphicon glyphicon-minus\"\n                    aria-hidden=\"true\"\n                  />\n                </Button>\n              </span>\n            ) : (\n              <span className=\"remove-tag-button\">\n                <Button\n                  bsSize={\"xsmall\"}\n                  bsStyle={\"success\"}\n                  onClick={() => {\n                    this.toggleBadgeEntry(this.props.badgeType);\n                  }}\n                >\n                  <span\n                    className=\"glyphicon glyphicon-plus\"\n                    aria-hidden=\"true\"\n                  />\n                </Button>\n              </span>\n            )\n          ) : this.props.badgeType === \"source\" ? (\n            this.state.source ? (\n              <span className=\"add-source-button\">\n                <Button\n                  bsSize={\"xsmall\"}\n                  bsStyle={\"danger\"}\n                  onClick={() => {\n                    this.toggleBadgeEntry(this.props.badgeType);\n                  }}\n                >\n                  <span\n                    className=\"glyphicon glyphicon-minus\"\n                    aria-hidden=\"true\"\n                  />\n                </Button>\n              </span>\n            ) : (\n              <span className=\"remove-source-button\">\n                <Button\n                  bsSize={\"xsmall\"}\n                  bsStyle={\"success\"}\n                  onClick={() => {\n                    this.toggleBadgeEntry(this.props.badgeType);\n                  }}\n                >\n                  <span\n                    className=\"glyphicon glyphicon-plus\"\n                    aria-hidden=\"true\"\n                  />\n                </Button>\n              </span>\n            )\n          ) : null}\n        </td>\n      </th>\n    );\n  }\n}\n\nclass BadgeDataIterator extends React.Component {\n  badgeDelete = () => {\n    let badgeType = this.props.badgeType;\n    let data = this.props.data;\n    let newBadgeArr = [];\n    for (let i = 0; i < data.length; i++) {\n      if (data[i] != undefined) {\n        if (typeof data[i] == \"string\") {\n          if (data[i] != this.props.dataOne) {\n            newBadgeArr.push(data[i]);\n          }\n        } else {\n          if (data[i].value != this.props.dataOne.value) {\n            newBadgeArr.push(data[i].value);\n          }\n        }\n      }\n    }\n\n    let newobject = {};\n    newobject[badgeType] = newBadgeArr;\n\n    $.ajax({\n      type: \"put\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      data: JSON.stringify(newobject),\n      contentType: \"application/json; charset=UTF-8\",\n      success: function(data) {\n        console.log(\"deleted\" + this.props.badgeType + \" data\");\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to delete\" + badgeType + \", data \");\n      }.bind(this)\n    });\n  };\n\n  render() {\n    let dataOne = this.props.dataOne;\n    let value;\n    if (typeof dataOne == \"string\") {\n      value = dataOne;\n    } else if (typeof dataOne == \"object\") {\n      if (dataOne != undefined) {\n        value = dataOne.value;\n      }\n    }\n\n    return this.props.badgeType === \"tag\" ? (\n      <span id=\"event_tag\" className=\"tagButton\">\n        {value}{\" \"}\n        <span className=\"tagButtonClose\">\n          <i onClick={this.badgeDelete} className=\"fa fa-times\" />\n        </span>\n      </span>\n    ) : this.props.badgeType === \"source\" ? (\n      <span id=\"event_source\" className=\"sourceButton\">\n        {value}{\" \"}\n        <span className=\"sourceButtonClose\">\n          <i onClick={this.badgeDelete} className=\"fa fa-times\" />\n        </span>\n      </span>\n    ) : null;\n  }\n}\n\nclass NewBadge extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestions: []\n    };\n  }\n\n  handleAddition = tag => {\n    let badgeType = this.props.badgeType;\n    let data = this.props.data;\n    if ( Array.isArray(data) && data.length ) {\n        console.log(\"data is ok\");\n    } else {\n        console.log(\"Null this.props.data!\");\n        data = [];\n    }\n\n    let newBadgeArr = data.map(function(item) {\n      if (typeof item === \"string\") {\n        return item;\n      } else {\n        return item.value;\n      }\n    });\n\n    if (!newBadgeArr.includes(tag[\"text\"])) {\n      newBadgeArr.push(tag[\"text\"]);\n      let newobject = {};\n      newobject[badgeType] = newBadgeArr;\n      const endpoint = `scot/api/v2/${this.props.type}/${this.props.id}`;\n      const data_response = put_data(endpoint, newobject);\n      data_response\n        .then(\n          function(response) {\n            this.props.toggleBadgeEntry();\n          }.bind(this)\n        )\n        .catch(\n          function(response) {\n            this.props.errorToggle(\n              \"Failed to add \" + this.props.badgeType + \" data \"\n            );\n            this.props.toggleBadgeEntry();\n          }.bind(this)\n        );\n    } else {\n      this.props.errorToggle(this.props.badgeType + \" already exists\");\n    }\n  };\n\n  handleSuggestionOrTagConversion = oldarray => {\n    let formattedSuggArray = oldarray.map(function(item) {\n      let newobj = {};\n      newobj[\"id\"] = item;\n      newobj[\"text\"] = item;\n      return newobj;\n    });\n    return formattedSuggArray;\n  };\n\n  handleInputChange = input => {\n    if (input.length > 0) {\n      let arr = [];\n      let type = this.props.badgeType;\n      const endpoint = `/scot/api/v2/ac/${type}/${input}`;\n      const get_response = get_data(endpoint, null);\n      get_response\n        .then(\n          function(response) {\n            arr = response.data.records.map(item => item);\n            this.setState({ suggestions: arr });\n          }.bind(this)\n        )\n        .catch(\n          function(error) {\n            this.props.errorToggle(\n              \"Failed to get autocomplete data for tag\",\n              error\n            );\n          }.bind(this)\n        );\n    }\n  };\n\n  render() {\n    let suggestions = this.state.suggestions;\n    suggestions = this.handleSuggestionOrTagConversion(suggestions);\n\n    return (\n      <span className=\"tag-new\">\n        <ReactTags\n          suggestions={suggestions}\n          handleAddition={this.handleAddition}\n          handleInputChange={this.handleInputChange}\n          tags={[]}\n        />\n      </span>\n    );\n  }\n}\n","import $ from \"jquery\";\nexport const AddFlair = {\n  entityUpdate: function (\n    entityData,\n    flairToolbarToggle,\n    type,\n    linkWarningToggle,\n    id,\n    scrollTo\n  ) {\n    setTimeout(\n      function () {\n        let entityResult = {};\n        for (let key in entityData) {\n          entityResult[$(\"<span />\", { html: key }).html()] = entityData[key];\n        }\n\n        if (type !== \"alertgroup\") {\n          $(\"iframe\").each(\n            function (index, ifr) {\n              //requestAnimationFrame waits for the frame to be rendered (allowing the iframe to fully render before excuting the next bit of code!!!\n              ifr.contentWindow.requestAnimationFrame(function () {\n                if (ifr.contentDocument != null) {\n                  let ifrContents = $(ifr).contents();\n                  //This makes all href point to blank so they don't reload the iframe\n                  $(ifr.contentDocument.body)\n                    .find(\"a\")\n                    .attr(\"target\", \"_blank\");\n                  //Copies href to a new attribute, url, before we make href an anchor (so it doesn't go anywhere when clicked)\n                  ifrContents.find(\"a\").each(function (index, a) {\n                    let url = $(a).attr(\"href\");\n                    $(a).attr(\"url\", url);\n                  });\n                  //Make href an anchor so it doesn't go anywhere when clicked and instead opens up the modal in linkWarningPopup\n                  //$(ifr.contentDocument.body).find('a').find('.entity').wrap(\"<a href='about:blank' target='targ'></a>\");\n                  ifrContents.find(\".entity\").each(function (index, entity) {\n                    if ($(entity).find(\".extras\")[0] == null) {\n                      //var currentEntityValue = $(entity).attr('data-entity-value');\n                      let currentEntityValue = $(\"<span />\", {\n                        html: $(entity).attr(\"data-entity-value\"),\n                      }).html();\n                      if (\n                        currentEntityValue !== undefined &&\n                        entityResult !== undefined\n                      ) {\n                        let entityMatched = entityResult;\n                        if (\n                          entityMatched[currentEntityValue.toLowerCase()] !==\n                          undefined\n                        ) {\n                          entityMatched =\n                            entityMatched[currentEntityValue.toLowerCase()];\n                        } else {\n                          entityMatched = entityMatched[currentEntityValue];\n                        }\n\n                        if (entityMatched !== undefined) {\n                          console.log(\"entity matched!\");\n                          let entityid = entityMatched.id;\n                          let entityCount = abbreviateNumber(\n                            parseInt(entityMatched.count, 10),\n                            0\n                          );\n                          let entitydata = entityMatched.data;\n                          console.log(\"entitydata for \"+ entityMatched.id);\n                          console.log(entitydata);\n                          let entityEntryCount = entityMatched.entry;\n                          let circle = $('<span class=\"noselect\">');\n                          circle.addClass(\"circleNumber\");\n                          circle.addClass(\"extras\");\n                          circle.text(entityCount);\n                          $(entity).append(circle);\n                          $(entity).attr(\"data-entity-id\", entityid);\n                          $(entity).unbind(\"click\");\n                          if (entitydata !== undefined) {\n                            if (entitydata.scanner !== undefined) {\n                              if (entitydata.scanner.active === \"true\") {\n                                $(entity).append(\n                                  $(\n                                    '<img class=\"extras\" title=\"scanner\">'\n                                  ).attr(\"src\", \"/images/flair/scanner.png\")\n                                );\n                              }\n                            }\n\n                            if (entitydata.geoip !== undefined) {\n                              if (entitydata.geoip.data.isocode) {\n                                let country_code;\n                                if (\n                                  entitydata.geoip.data.isp ===\n                                  \"Sandia National Laboratories\"\n                                ) {\n                                  country_code = \"sandia\";\n                                } else {\n                                  country_code = entitydata.geoip.data.isocode;\n                                }\n                                if (country_code !== null) {\n                                  let flag = $(\n                                    '<img title=\"' +\n                                      country_code.toLowerCase() +\n                                      '\">'\n                                  ).attr(\n                                    \"src\",\n                                    \"/images/flags/\" +\n                                      country_code.toLowerCase() +\n                                      \".png\"\n                                  );\n                                  flag.addClass(\"extras\");\n                                  $(entity).append(flag);\n                                }\n                              }\n                            }\n\n                            if (entitydata.sidd !== undefined) {\n                              if (\n                                Object.keys(entitydata.sidd.data).length !==\n                                  0 &&\n                                entitydata.sidd.data.constructor === Object\n                              ) {\n                                $(entity).append(\n                                  $('<img class=\"extras\" title=\"sidd\">').attr(\n                                    \"src\",\n                                    \"/images/flair/sidd.png\"\n                                  )\n                                );\n                              }\n                            }\n\n                            // display flair icons based on blocklist\n                            if ( entitydata.blocklist3 !== undefined) {\n                                if ( entitydata.blocklist3.data.firewall !== 0 ) {\n                                $(entity).append(\n                                    $(\n                                    '<img class=\"extras\" title=\"firewall block\">'\n                                    ).attr(\n                                    \"src\",\n                                    \"/images/flair/firewalled.png\"\n                                    )\n                                );\n                                }\n                                if ( entitydata.blocklist3.data.watch !==0 ) {\n                                $(entity).append(\n                                    $(\n                                    '<img class=\"extras\" title=\"watch list\">'\n                                    ).attr(\"src\", \"/images/flair/watch.png\")\n                                );\n                                }\n                                if ( entitydata.blocklist3.data.whitelist !== 0 ) {\n                                $(entity).append(\n                                    $(\n                                    '<img class=\"extras\" title=\"white list\">'\n                                    ).attr(\n                                    \"src\",\n                                    \"/images/flair/white_list.jpg\"\n                                    )\n                                );\n                                }\n                                if ( entitydata.blocklist3.data.blackhole !== 0 ) {\n                                $(entity).append(\n                                    $(\n                                    '<img class=\"extras\" title=\"dns black hole\">'\n                                    ).attr(\n                                    \"src\",\n                                    \"/images/flair/blackholed.png\"\n                                    )\n                                );\n                                }\n                                if ( entitydata.blocklist3.data.proxy_block !== 0 ) {\n                                console.log(\"proxy block detected!\");\n                                $(entity).append(\n                                    $(\n                                    '<img class=\"extras\" title=\"proxy block\">'\n                                    ).attr(\"src\", \"/images/flair/blocked.png\")\n                                );\n                                }\n                                else {\n                                console.log(\"proxy where art thou\"+ entitydata.blocklist3.data);\n                                }\n                            }\n                          }\n\n                          if (entityEntryCount !== undefined) {\n                            if (entityEntryCount !== 0) {\n                              let entityEntry =\n                                entityMatched.entries[0].body_plain;\n                              $(entity).append(\n                                $(\n                                  '<img class=\"extras\" title=\"' +\n                                    entityEntry +\n                                    '\">'\n                                ).attr(\"src\", \"/images/flair/note.png\")\n                              );\n                            }\n                          }\n                        }\n                      }\n                    }\n                  });\n                  //}\n                  //pentry(ifr,flairToolbarToggle,type,linkWarningToggle,id);\n                }\n              });\n            }.bind(this)\n          );\n        } else if (type === \"alertgroup\") {\n          $(document.body)\n            .find(\".alertTableHorizontal\")\n            .find(\".entity\")\n            .each(function (index, entity) {\n              if ($(entity).find(\".extras\")[0] == null) {\n                let subtable = $(document.body).find(\".alertTableHorizontal\");\n                subtable.find(\"a\").attr(\"target\", \"_blank\");\n                subtable\n                  .find(\"a\")\n                  .find(\".entity\")\n                  .wrap(\"<a href='about:blank' target='targ'></a>\");\n                //Copies href to a new attribute, url, before we make href an anchor (so it doesn't go anywhere when clicked)\n                subtable.find(\"a\").each(function (index, a) {\n                  let url = $(a).attr(\"href\");\n                  $(a).attr(\"url\", url);\n                });\n                //var currentEntityValue = $(entity).attr('data-entity-value');\n                let currentEntityValue = $(\"<span />\", {\n                  html: $(entity).attr(\"data-entity-value\"),\n                }).html();\n                if (\n                  currentEntityValue !== undefined &&\n                  entityResult !== undefined\n                ) {\n                  let entityMatched = entityResult;\n                  if (\n                    entityMatched[currentEntityValue.toLowerCase()] !==\n                    undefined\n                  ) {\n                    entityMatched =\n                      entityMatched[currentEntityValue.toLowerCase()];\n                  } else {\n                    entityMatched = entityMatched[currentEntityValue];\n                  }\n\n                  if (entityMatched !== undefined) {\n                    let entityid = entityMatched.id;\n                    let entityCount = abbreviateNumber(entityMatched.count);\n                    let entitydata = entityMatched.data;\n                    console.log(\"entitydata for \"+ entityMatched.id);\n                    console.log(entitydata);\n                    let entityEntryCount = entityMatched.entry;\n                    let circle = $('<span class=\"noselect\">');\n                    circle.addClass(\"circleNumber\");\n                    circle.addClass(\"extras\");\n                    circle.text(entityCount);\n                    $(entity).append(circle);\n                    $(entity).attr(\"data-entity-id\", entityid);\n                    $(entity).unbind(\"click\");\n                    if (entitydata !== undefined) {\n                      if (entitydata.scanner !== undefined) {\n                        if (entitydata.scanner.active === \"true\") {\n                           $(entity).append(\n                             $(\n                               '<img class=\"extras\" title=\"scanner\">'\n                             ).attr(\"src\", \"/images/flair/scanner.png\")\n                           );\n                        }\n                      }\n\n                      if (entitydata.sidd !== undefined) {\n                         if (\n                            Object.keys(entitydata.sidd.data).length !==\n                              0 &&\n                            entitydata.sidd.data.constructor === Object\n                          ) {\n                            $(entity).append(\n                              $('<img class=\"extras\" title=\"sidd\">').attr(\n                                \"src\",\n                                \"/images/flair/sidd.png\"\n                              )\n                            );\n                         }\n                      }\n                      if (entitydata.geoip !== undefined) {\n                        if (entitydata.geoip.data.isocode) {\n                          let country_code;\n                          if (\n                            entitydata.geoip.data.isp ===\n                            \"Sandia National Laboratories\"\n                          ) {\n                            country_code = \"sandia\";\n                          } else {\n                            country_code = entitydata.geoip.data.isocode;\n                          }\n                          let flag = $(\n                            '<img title=\"' + country_code.toLowerCase() + '\">'\n                          ).attr(\n                            \"src\",\n                            \"/images/flags/\" +\n                              country_code.toLowerCase() +\n                              \".png\"\n                          );\n                          flag.addClass(\"extras\");\n                          $(entity).append(flag);\n                        }\n                      }\n                      // now in blocklist3 \n                      if ( entitydata.blocklist3 !== undefined) {\n                        if ( entitydata.blocklist3.data.firewall !== 0) {\n                            $(entity).append(\n                            $(\n                                '<img class=\"extras\" title=\"firewall block\">'\n                            ).attr(\"src\", \"/images/flair/firewalled.png\")\n                            );\n                        }\n                        if ( entitydata.blocklist3.data.watch !== 0) {\n                            $(entity).append(\n                            $(\n                                '<img class=\"extras\" title=\"watch list\">'\n                            ).attr(\"src\", \"/images/flair/watch.png\")\n                            );\n                        }\n                        if ( entitydata.blocklist3.data.whitelist !== 0) {\n                            $(entity).append(\n                            $(\n                                '<img class=\"extras\" title=\"white list\">'\n                            ).attr(\"src\", \"/images/flair/white_list.jpg\")\n                            );\n                        }\n                        if ( entitydata.blocklist3.data.blackhole !== 0) {\n                            $(entity).append(\n                            $(\n                                '<img class=\"extras\" title=\"dns black hole\">'\n                            ).attr(\"src\", \"/images/flair/blackholed.png\")\n                            );\n                        }\n                        if ( entitydata.blocklist3.data.proxy_block !== 0) {\n                            console.log(\"proxy_block detected!\");\n                            $(entity).append(\n                            $(\n                                '<img class=\"extras\" title=\"proxy block\">'\n                            ).attr(\"src\", \"/images/flair/blocked.png\")\n                            );\n                        }\n                        else {\n                            console.log(\"Why no pblock? \"+entitydata.blocklist3.data);\n                        }\n                      }\n                    }\n\n                    if (entityEntryCount !== undefined) {\n                      if (entityEntryCount !== 0) {\n                        let entityEntry = entityMatched.entries[0].body_plain;\n                        $(entity).append(\n                          $(\n                            '<img class=\"extras\" title=\"' + entityEntry + '\">'\n                          ).attr(\"src\", \"/images/flair/note.png\")\n                        );\n                      }\n                    }\n                  }\n                }\n              }\n            });\n        }\n        if (scrollTo !== undefined && scrollTo !== null) {\n          scrollTo();\n        }\n      }.bind(this),\n      1000\n    );\n  },\n};\n\nfunction abbreviateNumber(num, fixed) {\n  if (num === null) {\n    return null;\n  } // terminate early\n  if (num === 0) {\n    return \"0\";\n  } // terminate early\n  fixed = !fixed || fixed < 0 ? 0 : fixed; // number of decimal places to show\n  let b = num.toPrecision(2).split(\"e\"), // get power\n    k = b.length === 1 ? 0 : Math.floor(Math.min(b[1].slice(1), 14) / 3), // floor at decimals, ceiling at trillions\n    c =\n      k < 1\n        ? num.toFixed(0 + fixed)\n        : (num / Math.pow(10, k * 3)).toFixed(1 + fixed), // divide by power\n    d = c < 0 ? c : Math.abs(c), // enforce -0 is 0\n    e = d + [\"\", \"K\", \"M\", \"B\", \"T\"][k]; // append power\n  return e;\n}\nexport default AddFlair;\n//module.exports = {AddFlair, Watcher}\n","import React, { Component } from \"react\";\nimport { Modal, Button, ButtonGroup } from \"react-bootstrap\";\nimport ReactTable from \"react-table\";\nimport $ from \"jquery\";\n\nexport default class Links extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data: [],\n            allSelected: false,\n            loading: false\n        };\n\n        this.getLinks = this.getLinks.bind(this);\n        this.handleTHeadCheckboxSelection = this.handleTHeadCheckboxSelection.bind(\n            this\n        );\n        this.handleRowSelection = this.handleRowSelection.bind(this);\n        this.handleCheckboxSelection = this.handleCheckboxSelection.bind(this);\n    }\n\n    componentWillMount() {\n        this.getLinks();\n        this.mounted = true;\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n\n    render() {\n        const columns = [\n            {\n                Header: cell => {\n                    return (\n                        <div>\n                            <div className=\"links-checkbox\">\n                                <i\n                                    className={`fa fa${\n                                        this.state.allSelected ? \"-check\" : \"\"\n                                        }-square-o`}\n                                    aria-hidden=\"true\"\n                                />\n                            </div>\n                        </div>\n                    );\n                },\n                id: \"selected\",\n                accessor: d => d.selected,\n                Cell: row => {\n                    return (\n                        <div>\n                            <div className=\"links-checkbox\">\n                                <i\n                                    className={`fa fa${\n                                        row.row.selected ? \"-check\" : \"\"\n                                        }-square-o`}\n                                    aria-hidden=\"true\"\n                                />\n                            </div>\n                        </div>\n                    );\n                },\n                maxWidth: 100,\n                filterable: false\n            },\n            {\n                Header: \"Type\",\n                accessor: \"type\",\n                maxWidth: 150,\n                sortable: true\n            },\n            {\n                Header: \"ID\",\n                accessor: \"id\",\n                maxWidth: 100,\n                sortable: true\n            },\n            {\n                Header: \"Context\",\n                accessor: \"context\",\n                minWidth: 100,\n                maxWidth: 800,\n                sortable: true\n            },\n            {\n                Header: \"Memo\",\n                accessor: \"memo\",\n                minWidth: 100,\n                maxWidth: 800,\n                sortable: true\n            },\n            {\n                Header: \"Link ID\",\n                accessor: \"linkid\",\n                maxWidth: 100,\n                sortable: true\n            }\n        ];\n\n        return (\n            <Modal\n                dialogClassName=\"links-modal\"\n                show={this.props.modalActive}\n                onHide={this.props.linksModalToggle}\n            >\n                <Modal.Header closeButton={true}>\n                    <Modal.Title>\n                        {this.state.data.length} items linked to {this.props.type}{\" \"}\n                        {this.props.id}\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <ReactTable\n                        columns={columns}\n                        data={this.state.data}\n                        defaultPageSize={10}\n                        getTdProps={this.handleCheckboxSelection}\n                        getTheadThProps={this.handleTHeadCheckboxSelection}\n                        getTrProps={this.handleRowSelection}\n                        minRows={0}\n                        noDataText=\"No items Linked.\"\n                        loading={this.state.loading}\n                        style={{\n                            maxHeight: \"60vh\"\n                        }}\n                        filterable\n                    />\n                </Modal.Body>\n                <Modal.Footer>\n                    <Actions\n                        data={this.state.data}\n                        id={this.props.id}\n                        type={this.props.type}\n                        getLinks={this.getLinks}\n                        errorToggle={this.props.errorToggle}\n                    />\n                </Modal.Footer>\n            </Modal>\n        );\n    }\n\n    getLinks() {\n        this.setState({ loading: true });\n\n        $.ajax({\n            type: \"get\",\n            url: \"/scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/link\",\n            success: function (data) {\n                let arr = [];\n\n                for (let i = 0; i < data.records.length; i++) {\n                    let verticeObject = {};\n                    verticeObject.linkid = data.records[i].id;\n                    verticeObject.context = data.records[i].context;\n                    for (let j = 0; j < data.records[i].vertices.length; j++) {\n                        //if ids are equal, check if the type is equal. If so, it's what is displayed so don't show it.\n                        if (data.records[i].vertices[j].id === this.props.id) {\n                            if (data.records[i].vertices[j].type !== this.props.type) {\n                                verticeObject.id = data.records[i].vertices[j].id;\n                                verticeObject.type = data.records[i].vertices[j].type;\n                                verticeObject.memo = data.records[i].memo[j];\n                                arr.push(verticeObject);\n                            } else {\n                                continue;\n                            }\n                        } else {\n                            verticeObject.id = data.records[i].vertices[j].id;\n                            verticeObject.type = data.records[i].vertices[j].type;\n                            verticeObject.memo = data.records[i].memo[j];\n                            arr.push(verticeObject);\n                        }\n                    }\n                }\n\n                this.setState({ data: arr, loading: false });\n            }.bind(this),\n            error: function (data) {\n                this.setState({ loading: false });\n                this.props.errorToggle(\"failed to get links\", data);\n            }.bind(this)\n        });\n    }\n\n    handleRowSelection(state, rowInfo, column) {\n        return {\n            onClick: event => {\n                let data = this.state.data;\n\n                for (let row of data) {\n                    if (rowInfo.row.id === row.id && rowInfo.row.type === row.type) {\n                        row.selected = true;\n                    } else {\n                        row.selected = false;\n                    }\n                }\n\n                this.setState({ data: data, allSelected: false });\n                return;\n            },\n            style: {\n                background:\n                    rowInfo !== undefined\n                        ? rowInfo.row.selected\n                            ? \"rgb(174, 218, 255)\"\n                            : null\n                        : null\n            }\n        };\n    }\n\n    handleCheckboxSelection(state, rowInfo, column) {\n        if (column.id === \"selected\") {\n            return {\n                onClick: event => {\n                    let data = this.state.data;\n\n                    for (let row of data) {\n                        if (rowInfo.row.id === row.id && rowInfo.row.type === row.type) {\n                            row.selected = !row.selected;\n                            break;\n                        }\n                    }\n\n                    this.setState({\n                        data: data,\n                        allSelected: this.checkAllSelected(data)\n                    });\n                    event.stopPropagation();\n                    return;\n                }\n            };\n        } else {\n            return {};\n        }\n    }\n\n    handleTHeadCheckboxSelection(state, rowInfo, column, instance) {\n        if (column.id === \"selected\") {\n            return {\n                onClick: event => {\n                    let data = this.state.data;\n                    let allSelected = !this.state.allSelected;\n\n                    for (let row of data) {\n                        for (let pageRow of state.pageRows) {\n                            if (row.id === pageRow.id && row.type === pageRow.type) {\n                                //compare displayed rows to rows in dataset and only select those\n                                row.selected = allSelected;\n                                break;\n                            }\n                        }\n                    }\n\n                    this.setState({ data: data, allSelected: allSelected });\n                    return;\n                }\n            };\n        } else {\n            return {};\n        }\n    }\n\n    checkAllSelected(data) {\n        for (let row of data) {\n            if (!row.selected) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nclass Actions extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            entry: false,\n            thing: false,\n            actionSuccess: false\n        };\n\n        this.RemoveLink = this.RemoveLink.bind(this);\n        this.RemoveLinkAjax = this.RemoveLinkAjax.bind(this);\n        this.ToggleActionSuccess = this.ToggleActionSuccess.bind(this);\n    }\n\n    componentWillMount() {\n        this.mounted = true;\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n\n    render() {\n        let entry = false;\n        let thing = false;\n\n        for (let key of this.props.data) {\n            if (key.type && key.selected) {\n                if (key.type === \"entry\") {\n                    entry = true;\n                } else {\n                    thing = true;\n                }\n            }\n        }\n\n        return (\n            <div>\n                {this.state.actionSuccess ? (\n                    <div>\n                        <span bsStyle={{ color: \"green\" }}>Action Successful!</span>\n                    </div>\n                ) : null}\n                <div>\n                    {thing || entry ? (\n                        <h4 style={{ float: \"left\" }}>Actions</h4>\n                    ) : (\n                            <div>\n                                {\" \"}\n                                {this.props.data.length > 0 ? (\n                                    <h4 style={{ float: \"left\" }}>Select a link for options</h4>\n                                ) : null}{\" \"}\n                            </div>\n                        )}\n                    <ButtonGroup style={{ float: \"right\" }}>\n                        {thing || entry ? (\n                            <Button onClick={this.RemoveLink}>Remove Link</Button>\n                        ) : null}\n                    </ButtonGroup>\n                </div>\n            </div>\n        );\n    }\n\n    RemoveLink() {\n        for (let key of this.props.data) {\n            if (key.selected) {\n                // eslint-disable-next-line\n                this.RemoveLinkAjax(parseInt(key.linkid));\n            }\n        }\n    }\n\n    RemoveLinkAjax(id) {\n        $.ajax({\n            type: \"delete\",\n            url: \"/scot/api/v2/link/\" + id,\n            success: function (response) {\n                console.log(\"successfully removed link\");\n                this.ToggleActionSuccess();\n            }.bind(this),\n            error: function (data) {\n                this.props.errorToggle(\"failed to remove link\", data);\n            }.bind(this)\n        });\n    }\n\n    ToggleActionSuccess() {\n        let newActionSuccess = !this.state.actionSuccess;\n        this.props.getLinks();\n        this.setState({ actionSuccess: newActionSuccess });\n    }\n}\n\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Modal,\n  Button,\n  ButtonGroup,\n  Panel,\n  FormControl,\n  Form,\n  Col\n} from \"react-bootstrap\";\nimport ReactTable from \"react-table\";\nimport { removeMarkedItems } from \"../components/marker\";\nimport DeleteModal from \"./delete\";\nimport $ from \"jquery\";\nimport * as SessionStorage from \"../utils/session_storage\";\n\nconst ACTION_BUTTONS = {\n  READY: {\n    style: \"default\"\n  },\n  LOADING: {\n    text: \"Processing...\",\n    style: \"default\",\n    disabled: true\n  },\n  SUCCESS: {\n    text: \"Success!\",\n    style: \"success\"\n  },\n  ERROR: {\n    text: \"Error!\",\n    style: \"danger\"\n  }\n};\n\nexport default class Mark extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      allSelected: false\n    };\n\n    this.handleTHeadCheckboxSelection = this.handleTHeadCheckboxSelection.bind(\n      this\n    );\n    this.handleRowSelection = this.handleRowSelection.bind(this);\n    this.handleCheckboxSelection = this.handleCheckboxSelection.bind(this);\n    this.getMarkedItems = this.getMarkedItems.bind(this);\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n\n    this.getMarkedItems();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    const columns = [\n      {\n        Header: cell => {\n          return (\n            <div>\n              <div className=\"mark-checkbox\">\n                <i\n                  className={`fa fa${\n                    this.state.allSelected ? \"-check\" : \"\"\n                  }-square-o`}\n                  aria-hidden=\"true\"\n                />\n              </div>\n            </div>\n          );\n        },\n        id: \"selected\",\n        accessor: d => d.selected,\n        Cell: row => {\n          return (\n            <div>\n              <div className=\"mark-checkbox\">\n                <i\n                  className={`fa fa${\n                    row.row.selected ? \"-check\" : \"\"\n                  }-square-o`}\n                  aria-hidden=\"true\"\n                />\n              </div>\n            </div>\n          );\n        },\n        maxWidth: 100,\n        filterable: false\n      },\n      {\n        Header: \"Type\",\n        accessor: \"type\",\n        maxWidth: 150,\n        sortable: true\n      },\n      {\n        Header: \"ID\",\n        accessor: \"id\",\n        maxWidth: 100,\n        sortable: true\n      },\n      {\n        Header: \"Subject\",\n        accessor: \"subject\",\n        maxWidth: \"100%\",\n        sortable: true\n      }\n    ];\n\n    return (\n      <Modal\n        dialogClassName=\"mark-modal\"\n        show={this.props.modalActive}\n        onHide={this.props.markModalToggle}\n      >\n        <Modal.Header closeButton={true}>\n          <Modal.Title>Marked Objects</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {this.state.data.length > 0 ? (\n            <ReactTable\n              columns={columns}\n              data={this.state.data}\n              defaultPageSize={10}\n              getTdProps={this.handleCheckboxSelection}\n              getTheadThProps={this.handleTHeadCheckboxSelection}\n              getTrProps={this.handleRowSelection}\n              minRows={0}\n              noDataText=\"No items marked.\"\n              style={{\n                maxHeight: \"60vh\"\n              }}\n              filterable\n            />\n          ) : (\n            <h3>No marked items detected.</h3>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Actions\n            data={this.state.data}\n            id={this.props.id}\n            type={this.props.type}\n            getMarkedItems={this.getMarkedItems}\n            errorToggle={this.props.errorToggle}\n          />\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  handleRowSelection = (state, rowInfo, column) => {\n    return {\n      onClick: event => {\n        let data = this.state.data;\n\n        for (let row of data) {\n          if (rowInfo.row.id === row.id && rowInfo.row.type === row.type) {\n            row.selected = true;\n          } else {\n            row.selected = false;\n          }\n        }\n\n        this.setState({ data: data, allSelected: false });\n        return;\n      },\n      style: {\n        background:\n          rowInfo !== undefined\n            ? rowInfo.row.selected\n              ? \"rgb(174, 218, 255)\"\n              : null\n            : null\n      }\n    };\n  };\n\n  handleCheckboxSelection = (state, rowInfo, column) => {\n    if (column.id === \"selected\") {\n      return {\n        onClick: event => {\n          let data = this.state.data;\n\n          for (let row of data) {\n            if (rowInfo.row.id === row.id && rowInfo.row.type === row.type) {\n              row.selected = !row.selected;\n              break;\n            }\n          }\n\n          this.setState({\n            data: data,\n            allSelected: this.checkAllSelected(data)\n          });\n          event.stopPropagation();\n          return;\n        }\n      };\n    } else {\n      return {};\n    }\n  };\n\n  handleTHeadCheckboxSelection = (state, rowInfo, column, instance) => {\n    if (column.id === \"selected\") {\n      return {\n        onClick: event => {\n          let data = this.state.data;\n          let allSelected = !this.state.allSelected;\n\n          for (let row of data) {\n            for (let pageRow of state.pageRows) {\n              if (row.id === pageRow.id && row.type === pageRow.type) {\n                //compare displayed rows to rows in dataset and only select those\n                row.selected = allSelected;\n                break;\n              }\n            }\n          }\n\n          this.setState({ data: data, allSelected: allSelected });\n          return;\n        }\n      };\n    } else {\n      return {};\n    }\n  };\n\n  checkAllSelected = data => {\n    for (let row of data) {\n      if (!row.selected) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  getMarkedItems = () => {\n    let markedItems = SessionStorage.getLocalStorage(\"marked\");\n    let currentItem = {\n      id: this.props.id,\n      type: this.props.type,\n      subject: this.props.string\n    };\n\n    if (markedItems) {\n      markedItems = JSON.parse(markedItems);\n      markedItems.unshift(currentItem); //Add currently viewed item to the top of the list\n      this.setState({ data: markedItems });\n    } else {\n      return; //return if no items are marked\n    }\n  };\n}\n\nclass Actions extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      entry: false,\n      thing: false,\n      actionSuccess: false,\n      linkContextString: null,\n      linkPanel: false,\n      pendingDelete: false,\n\n      reparseButton: ACTION_BUTTONS.READY,\n      deleteButton: ACTION_BUTTONS.READY,\n      promoteButton: ACTION_BUTTONS.READY\n    };\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  deleteCallback = success => {\n    if (success === true) {\n      this.RemoveSelected();\n    }\n\n    this.setState({\n      pendingDelete: false\n    });\n  };\n\n  render() {\n    let entry = false,\n      thing = false,\n      alert = true;\n\n    let numSelected = 0;\n    for (let key of this.props.data) {\n      if (key.type && key.selected) {\n        numSelected++;\n\n        if (key.type === \"entry\") {\n          entry = true;\n        } else {\n          thing = true;\n        }\n\n        if (key.type !== \"alert\") {\n          alert = false;\n        }\n      }\n    }\n\n    const addToEvent =\n      numSelected !== 0 && alert && this.props.type === \"event\";\n\n    const {\n      reparseButton,\n      deleteButton,\n      promoteButton,\n      pendingDelete\n    } = this.state;\n\n    let deleteThings = null;\n    if (pendingDelete) {\n      deleteThings = this.props.data\n        .filter(thing => thing.selected)\n        .map(thing => {\n          return { type: thing.type, id: thing.id };\n        });\n    }\n\n    return (\n      <div>\n        {this.state.actionSuccess ? (\n          <div>\n            <Button bsStyle=\"success\" onClick={this.RemoveSelected}>\n              Action Successful! Remove Mark?\n            </Button>\n            <Button onClick={this.ToggleActionSuccess}>Keep Marked</Button>\n          </div>\n        ) : (\n          <div style={{ display: \"grid\" }}>\n            <div>\n              {thing || entry ? (\n                <h4 style={{ float: \"left\" }}>Actions</h4>\n              ) : (\n                <div>\n                  {\" \"}\n                  {this.props.data.length > 0 ? (\n                    <h4 style={{ float: \"left\" }}>Select a Marked Object</h4>\n                  ) : null}{\" \"}\n                </div>\n              )}\n              <ButtonGroup style={{ float: \"right\" }}>\n                {entry && !thing && this.props.type !== \"alertgroup\" ? (\n                  <Button onClick={this.MoveEntry}>\n                    Move to {this.props.type} {this.props.id}\n                  </Button>\n                ) : null}\n                {entry && !thing && this.props.type !== \"alertgroup\" ? (\n                  <Button onClick={this.CopyEntry}>\n                    Copy to {this.props.type} {this.props.id}\n                  </Button>\n                ) : null}\n                {thing || entry ? (\n                  <Button onClick={this.ExpandLinkToggle}>\n                    Link to {this.props.type} {this.props.id}\n                  </Button>\n                ) : null}\n                {addToEvent && (\n                  <Button\n                    bsStyle={promoteButton.style}\n                    onClick={this.Promote}\n                    disabled={promoteButton.disabled}\n                  >\n                    {promoteButton.text\n                      ? promoteButton.text\n                      : `Add to ${this.props.type} ${this.props.id}`}\n                  </Button>\n                )}\n                {(thing || entry) && (\n                  <Button\n                    bsStyle={reparseButton.style}\n                    onClick={this.Reparse}\n                    disabled={reparseButton.disabled}\n                  >\n                    {reparseButton.text ? reparseButton.text : \"Reparse Flair\"}\n                  </Button>\n                )}\n                {(thing || entry) && (\n                  <Button bsStyle=\"warning\" onClick={this.RemoveSelected}>\n                    Unmark\n                  </Button>\n                )}\n                {(thing || entry) && (\n                  <Button\n                    bsStyle=\"danger\"\n                    onClick={this.StartDelete}\n                    disabled={deleteButton.disabled}\n                  >\n                    {deleteButton.text ? deleteButton.text : \"Delete\"}\n                  </Button>\n                )}\n              </ButtonGroup>\n            </div>\n            {this.state.linkPanel && (thing || entry) ? (\n              <Panel collapsible expanded={this.state.linkPanel}>\n                <Form horizontal>\n                  <Col sm={2}>Provide context to this link:</Col>\n                  <Col sm={9}>\n                    <FormControl\n                      type=\"text\"\n                      value={this.state.linkContextString}\n                      placeholder=\"optional\"\n                      onChange={this.LinkContextChange}\n                    />\n                  </Col>\n                  <Col sm={1}>\n                    <Button onClick={this.Link} bsStyle={\"success\"}>\n                      Submit\n                    </Button>\n                  </Col>\n                </Form>\n              </Panel>\n            ) : null}\n            {pendingDelete && (\n              <DeleteModal\n                things={deleteThings}\n                errorToggle={this.props.errorToggle}\n                callback={this.deleteCallback}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  LinkContextChange = e => {\n    this.setState({ linkContextString: e.target.value });\n  };\n\n  ExpandLinkToggle = newState => {\n    if (newState === true || newState === false) {\n      this.setState({ linkPanel: newState, linkContextString: \"\" });\n    } else {\n      let linkPanel = !this.state.linkPanel;\n      this.setState({ linkPanel: linkPanel, linkContextString: \"\" });\n    }\n  };\n\n  RemoveSelected = () => {\n    for (let key of this.props.data) {\n      if (key.selected) {\n        removeMarkedItems(key.type, key.id);\n      }\n    }\n\n    //update marked items after removal\n    this.props.getMarkedItems();\n\n    //turn off the action success buttons after removal\n    if (this.state.actionSuccess) {\n      this.setState({ actionSuccess: false });\n    }\n  };\n\n  StartDelete = () => {\n    this.setState({\n      pendingDelete: true\n    });\n  };\n\n  MoveEntry = () => {\n    for (let key of this.props.data) {\n      if (key.selected && key.type === \"entry\") {\n        this.EntryAjax(key.id, true);\n      }\n    }\n  };\n\n  CopyEntry = () => {\n    for (let key of this.props.data) {\n      if (key.selected && key.type === \"entry\") {\n        this.EntryAjax(key.id, false);\n      }\n    }\n  };\n\n  Link = () => {\n    for (let key of this.props.data) {\n      if (key.selected) {\n        let arrayToLink = [];\n        let obj = {};\n        let currentobj = {};\n\n        //assign new thing to link\n        // eslint-disable-next-line\n        obj.id = parseInt(key.id);\n        obj.type = key.type;\n\n        //assign current thing to link to\n        // eslint-disable-next-line\n        currentobj.id = parseInt(this.props.id);\n        currentobj.type = this.props.type;\n\n        arrayToLink.push(obj);\n        arrayToLink.push(currentobj);\n\n        this.LinkAjax(arrayToLink);\n      }\n\n      /*\n                      if ( arrayToLink.length > 0 ) {\n                      //add current thing to be linked to\n                      let obj = {};\n                      obj.id = parseInt( this.props.id );\n                      obj.type = this.props.type;\n      \n                      arrayToLink.push( obj );\n                      this.LinkAjax( arrayToLink );\n                  }*/\n    }\n  };\n\n  Reparse = () => {\n    this.setState({\n      reparseButton: ACTION_BUTTONS.LOADING\n    });\n\n    $.when(\n      ...this.props.data\n        .filter(thing => thing.selected)\n        .map(thing => {\n          return this.ReparseAjax(thing);\n        })\n    )\n      .then(\n        // Success\n        () => {\n          this.setState({\n            reparseButton: ACTION_BUTTONS.SUCCESS\n          });\n        },\n        // Failure\n        error => {\n          console.error(error);\n          this.setState({\n            reparseButton: ACTION_BUTTONS.ERROR\n          });\n          this.props.errorToggle(\"error reparsing\", error);\n        }\n      )\n      .always(() => {\n        setTimeout(() => {\n          this.setState({\n            reparseButton: ACTION_BUTTONS.READY\n          });\n        }, 2000);\n      });\n  };\n\n  ReparseAjax = thing => {\n    return $.ajax({\n      type: \"put\",\n      url: \"/scot/api/v2/\" + thing.type + \"/\" + thing.id,\n      data: JSON.stringify({ parsed: 0 }),\n      contentType: \"application/json; charset=UTF-8\"\n    });\n  };\n\n  Promote = () => {\n    this.setState({\n      promoteButton: ACTION_BUTTONS.LOADING\n    });\n\n    let success = true;\n\n    $.when(\n      ...this.props.data\n        .filter(thing => thing.selected)\n        .map(thing => {\n          return this.PromoteAjax(thing);\n        })\n    )\n      .then(\n        // Success\n        () => {\n          this.setState({\n            promoteButton: ACTION_BUTTONS.SUCCESS\n          });\n        },\n        // Failure\n        error => {\n          success = false;\n          console.error(error);\n          this.setState({\n            promoteButton: ACTION_BUTTONS.ERROR\n          });\n          this.props.errorToggle(\"error adding alerts to event\", error);\n        }\n      )\n      .always(() => {\n        setTimeout(() => {\n          this.setState({\n            promoteButton: ACTION_BUTTONS.READY\n          });\n\n          if (success) {\n            window.location.reload();\n          }\n        }, 2000);\n      });\n  };\n\n  PromoteAjax = thing => {\n    return $.ajax({\n      type: \"put\",\n      url: \"/scot/api/v2/alert/\" + thing.id,\n      // eslint-disable-next-line\n      data: JSON.stringify({ promote: parseInt(this.props.id) }),\n      contentType: \"application/json; charset=UTF-8\"\n    });\n  };\n\n  LinkAjax = arrayToLink => {\n    let data = {};\n    data.weight = 1; //passed in object\n    data.vertices = arrayToLink; //link to current thing\n\n    if (this.state.linkContextString) {\n      //add context string if one was submitted\n      data.context = this.state.linkContextString;\n    }\n\n    $.ajax({\n      type: \"post\",\n      url: \"/scot/api/v2/link\",\n      data: JSON.stringify(data),\n      contentType: \"application/json; charset=UTF-8\",\n      dataType: \"json\",\n      success: function(response) {\n        console.log(\"successfully linked\");\n        this.ExpandLinkToggle(false); //disable link panel\n        this.ToggleActionSuccess(true);\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"failed to link\", data);\n      }.bind(this)\n    });\n  };\n\n  EntryAjax = (id, removeOriginal) => {\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/entry/\" + id,\n      success: function(response) {\n        let data = {};\n        data = {\n          parent: 0,\n          body: response.body,\n          // eslint-disable-next-line\n          target_id: parseInt(this.props.id),\n          target_type: this.props.type\n        };\n        $.ajax({\n          type: \"post\",\n          url: \"/scot/api/v2/entry\",\n          data: JSON.stringify(data),\n          contentType: \"application/json; charset=UTF-8\",\n          dataType: \"json\",\n          success: function(response) {\n            if (removeOriginal) {\n              this.RemoveEntryAfterMove(id);\n              this.RemoveSelected();\n            } else {\n              if (!this.state.actionSuccess) {\n                this.ToggleActionSuccess(true);\n              }\n            }\n          }.bind(this),\n          error: function(data) {\n            this.props.errorToggle(\"failed to create new entry\", data);\n          }.bind(this)\n        });\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"failed to get entry data\", data);\n      }.bind(this)\n    });\n  };\n\n  RemoveEntryAfterMove = id => {\n    $.ajax({\n      type: \"delete\",\n      url: \"/scot/api/v2/entry/\" + id,\n      success: function(response) {\n        console.log(\"removed original entry\");\n      },\n      error: function(data) {\n        this.props.errorToggle(\"Failed to remove original entry\", data);\n      }\n    });\n  };\n\n  ToggleActionSuccess = status => {\n    if (status === true || status === false) {\n      this.setState({ actionSuccess: status });\n    } else {\n      let newActionSuccess = !this.state.actionSuccess;\n      this.setState({ actionSuccess: newActionSuccess });\n    }\n  };\n}\n\nActions.propTypes = {\n  data: PropTypes.object\n};\n\nActions.defaultProps = {\n  data: {}\n};\n\nMark.propTypes = {\n  modalActive: PropTypes.bool\n};\n\nMark.defaultProps = {\n  modalActive: true\n};\n","import React from \"react\";\nimport $ from \"jquery\";\nimport DetailDataStatus from \"../components/detail_data_status\";\nimport ReactTime from \"react-time\";\nimport SelectedHeaderOptions from \"./selected_header_options.js\";\nimport { DeleteThingComponent } from \"../modal/delete.js\";\nimport Owner from \"../modal/owner.js\";\nimport Entities from \"../modal/entities.js\";\nimport ChangeHistory from \"../modal/change_history.js\";\nimport ViewedByHistory from \"../modal/viewed_by_history.js\";\nimport SelectedPermission from \"../components/permission.js\";\nimport SelectedEntry from \"./selected_entry.js\";\nimport Badge from \"../components/badge.js\";\nimport Notification from \"react-notification-system\";\nimport AddFlair from \"../components/add_flair.js\";\nimport EntityDetail from \"../modal/entity_detail.js\";\nimport LinkWarning from \"../modal/link_warning.js\";\nimport Links from \"../modal/links.js\";\nimport Mark from \"../modal/mark.js\";\nimport ExportModal from \"../modal/export_event.js\";\nimport PromotedData from \"../modal/promoted_data.js\";\nlet InitialAjaxLoad;\n\nexport default class SelectedHeader extends React.Component {\n  constructor(props) {\n    super(props);\n    let entityDetailKey = Math.floor(Math.random() * 1000);\n    this.state = {\n      showEventData: false,\n      headerData: {},\n      sourceData: \"\",\n      tagData: \"\",\n      permissionsToolbar: false,\n      entitiesToolbar: false,\n      changeHistoryToolbar: false,\n      viewedByHistoryToolbar: false,\n      entryToolbar: false,\n      deleteToolbar: false,\n      deleteType: null,\n      promoteToolbar: false,\n      notificationType: null,\n      notificationMessage: null,\n      key: this.props.id,\n      showEntryData: false,\n      entryData: \"\",\n      showEntityData: false,\n      entityData: [],\n      entryEntityData: null,\n      entityid: null,\n      entitytype: null,\n      entityoffset: null,\n      entityobj: null,\n      flairToolbar: false,\n      linkWarningToolbar: false,\n      exportModal: false,\n      refreshing: false,\n      loading: false,\n      eventLoaded: false,\n      entryLoaded: false,\n      entityLoaded: false,\n      guideID: null,\n      fileUploadToolbar: false,\n      isNotFound: false,\n      runWatcher: false,\n      entityDetailKey: entityDetailKey,\n      processing: false,\n      showSignatureOptions: false,\n      showMarkModal: false,\n      showLinksModal: false,\n      flairOff: false,\n      highlightedText: \"\",\n      flairing: false,\n      isMounted: false,\n      alertsSelected: [],\n      isDeleted: false\n    };\n  }\n\n  componentWillMount() {\n    this.setState({ loading: true });\n  }\n\n  componentDidMount() {\n    this.setState({ isMounted: true });\n    let delayFunction = {\n      delay: function() {\n        let entryType = \"entry\";\n        if (this.props.type === \"alertgroup\") {\n          entryType = \"alert\";\n        }\n        //Main Type Load\n        $.ajax({\n          type: \"get\",\n          url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n          success: function(result) {\n            if (this.state.isMounted) {\n              let eventResult = result;\n              this.setState({\n                headerData: eventResult,\n                showEventData: true,\n                isNotFound: false,\n                tagData: eventResult.tag,\n                sourceData: eventResult.source\n              });\n              if (\n                this.state.showEventData === true &&\n                this.state.showEntryData === true &&\n                this.state.showEntityData === true\n              ) {\n                this.setState({ loading: false });\n              }\n              if (\n                this.props.type === \"alertgroup\" &&\n                eventResult.parsed === -1\n              ) {\n                this.setState({ flairing: true });\n              } else {\n                this.setState({ flairing: false });\n              }\n            }\n          }.bind(this),\n          error: function(result) {\n            this.setState({ showEventData: true, isNotFound: true });\n            if (\n              this.state.showEventData === true &&\n              this.state.showEntryData === true &&\n              this.state.showEntityData === true\n            ) {\n              this.setState({ loading: false });\n            }\n            this.props.errorToggle(\n              \"Error: Failed to load detail data. Error message: \" +\n                result.responseText,\n              result\n            );\n          }.bind(this)\n        });\n        //entry load\n        $.ajax({\n          type: \"get\",\n          url:\n            \"scot/api/v2/\" +\n            this.props.type +\n            \"/\" +\n            this.props.id +\n            \"/\" +\n            entryType,\n          success: function(result) {\n            if (this.state.isMounted) {\n              let entryResult = result.records;\n              // entryResult.forEach(\n              //   function(item) {\n              //     this.props.createCallback(item.id, this.updated);\n              //   }.bind(this)\n              // );\n              this.setState({\n                showEntryData: true,\n                entryData: entryResult,\n                runWatcher: true\n              });\n              this.Watcher();\n              if (\n                this.state.showEventData === true &&\n                this.state.showEntryData === true &&\n                this.state.showEntityData === true\n              ) {\n                this.setState({ loading: false });\n              }\n            }\n          }.bind(this),\n          error: function(result) {\n            this.setState({ showEntryData: true });\n            if (\n              this.state.showEventData == true &&\n              this.state.showEntryData == true &&\n              this.state.showEntityData == true\n            ) {\n              this.setState({ loading: false });\n            }\n            this.props.errorToggle(\n              \"Error: Failed to load entry data. Error message: \" +\n                result.responseText,\n              result\n            );\n          }\n        });\n        //entity load\n        $.ajax({\n          type: \"get\",\n          url:\n            \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/entity\",\n          success: function(result) {\n            if (this.state.isMounted) {\n              let entityResult = result.records;\n              this.setState({ showEntityData: true, entityData: entityResult });\n              var waitForEntry = {\n                waitEntry: function() {\n                  if (this.state.showEntryData == false) {\n                    setTimeout(waitForEntry.waitEntry, 50);\n                  } else {\n                    setTimeout(\n                      function() {\n                        AddFlair.entityUpdate(\n                          entityResult,\n                          this.flairToolbarToggle,\n                          this.props.type,\n                          this.linkWarningToggle,\n                          this.props.id,\n                          this.scrollTo\n                        );\n                      }.bind(this)\n                    );\n                    if (\n                      this.state.showEventData == true &&\n                      this.state.showEntryData == true &&\n                      this.state.showEntityData == true\n                    ) {\n                      this.setState({ loading: false });\n                    }\n                  }\n                }.bind(this)\n              };\n              waitForEntry.waitEntry();\n            }\n          }.bind(this),\n          error: function(result) {\n            this.setState({ showEntityData: true });\n            if (\n              this.state.showEventData == true &&\n              this.state.showEntryData == true &&\n              this.state.showEntityData == true\n            ) {\n              this.setState({ loading: false });\n            }\n            this.props.errorToggle(\n              \"Error: Failed to load entity data.\",\n              result\n            );\n          }.bind(this)\n        });\n        //guide load\n        if (this.props.type == \"alertgroup\") {\n          $.ajax({\n            type: \"get\",\n            url:\n              \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/guide\",\n            success: function(result) {\n              if (this.state.isMounted) {\n                let arr = [];\n                for (let i = 0; i < result.records.length; i++) {\n                  arr.push(result.records[i].id);\n                }\n                if (arr.length === 0) {\n                  arr = null;\n                }\n                this.setState({ guideID: arr });\n              }\n            }.bind(this),\n            error: function(result) {\n              this.setState({ guideID: null });\n              this.props.errorToggle(\n                \"Error: Failed to load guide data. Error message:\" +\n                  result.responseText,\n                result\n              );\n            }.bind(this)\n          });\n        }\n        this.props.createCallback(this.props.id, this.updated);\n      }.bind(this)\n    };\n    InitialAjaxLoad = setTimeout(delayFunction.delay, 400);\n  }\n\n  componentWillUnmount() {\n    this.setState({ isMounted: false });\n    clearTimeout(InitialAjaxLoad);\n    if (this.state.entryData.forEach === \"function\") {\n      this.state.entryData.forEach(\n        function(entry) {\n          this.props.removeCallback(entry.id);\n        }.bind(this)\n      );\n    }\n  }\n\n  componentDidUpdate() {\n    //This runs the watcher which handles the entity popup and link warning.\n    if (this.state.runWatcher === true) {\n      this.Watcher();\n    }\n  }\n\n  updated = (_type, _message) => {\n    this.setState({\n      refreshing: true,\n      eventLoaded: false,\n      entryLoaded: false,\n      entityLoaded: false\n    });\n    let entryType = \"entry\";\n    if (this.props.type == \"alertgroup\") {\n      entryType = \"alert\";\n    }\n    //main type load\n    $.ajax({\n      type: \"get\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n      success: function(result) {\n        if (this.state.isMounted) {\n          let eventResult = result;\n          this.setState({\n            headerData: eventResult,\n            showEventData: true,\n            eventLoaded: true,\n            isNotFound: false,\n            tagData: eventResult.tag,\n            sourceData: eventResult.source\n          });\n          if (\n            this.state.eventLoaded == true &&\n            this.state.entryLoaded == true &&\n            this.state.entityLoaded == true\n          ) {\n            this.setState({ refreshing: false });\n          }\n          if (this.props.type == \"alertgroup\" && eventResult.parsed === -1) {\n            this.setState({ flairing: true });\n          } else {\n            this.setState({ flairing: false });\n          }\n        }\n      }.bind(this),\n      error: function(result) {\n        this.setState({\n          showEventData: true,\n          eventLoaded: true,\n          isNotFound: true\n        });\n        if (\n          this.state.eventLoaded == true &&\n          this.state.entryLoaded == true &&\n          this.state.entityLoaded == true\n        ) {\n          this.setState({ refreshing: false });\n        }\n        this.props.errorToggle(\n          \"Error: Failed to reload detail data. Error message: \" +\n            result.responseText,\n          result\n        );\n      }.bind(this)\n    });\n    //entry load\n    $.ajax({\n      type: \"get\",\n      url:\n        \"scot/api/v2/\" +\n        this.props.type +\n        \"/\" +\n        this.props.id +\n        \"/\" +\n        entryType,\n      success: function(result) {\n        if (this.state.isMounted) {\n          let entryResult = result.records;\n          this.setState({\n            showEntryData: true,\n            entryLoaded: true,\n            entryData: entryResult,\n            runWatcher: true\n          });\n          this.Watcher();\n          if (\n            this.state.eventLoaded == true &&\n            this.state.entryLoaded == true &&\n            this.state.entityLoaded == true\n          ) {\n            this.setState({ refreshing: false });\n          }\n        }\n      }.bind(this),\n      error: function(result) {\n        this.setState({ showEntryData: true, entryLoaded: true });\n        if (\n          this.state.eventLoaded == true &&\n          this.state.entryLoaded == true &&\n          this.state.entityLoaded == true\n        ) {\n          this.setState({ refreshing: false });\n        }\n        this.props.errorToggle(\n          \"Error: Failed to reload entry data. Error message: \" +\n            result.responseText,\n          result\n        );\n      }\n    });\n    //entity load\n    $.ajax({\n      type: \"get\",\n      url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id + \"/entity\",\n      success: function(result) {\n        if (this.state.isMounted) {\n          let entityResult = result.records;\n          this.setState({\n            showEntityData: true,\n            entityLoaded: true,\n            entityData: entityResult\n          });\n          var waitForEntry = {\n            waitEntry: function() {\n              if (this.state.entryLoaded == false) {\n                setTimeout(waitForEntry.waitEntry, 50);\n              } else {\n                setTimeout(\n                  function() {\n                    AddFlair.entityUpdate(\n                      entityResult,\n                      this.flairToolbarToggle,\n                      this.props.type,\n                      this.linkWarningToggle,\n                      this.props.id\n                    );\n                  }.bind(this)\n                );\n                if (\n                  this.state.eventLoaded == true &&\n                  this.state.entryLoaded == true &&\n                  this.state.entityLoaded == true\n                ) {\n                  this.setState({ refreshing: false });\n                }\n              }\n            }.bind(this)\n          };\n          waitForEntry.waitEntry();\n        }\n      }.bind(this),\n      error: function(result) {\n        this.setState({ showEntityData: true });\n        if (\n          this.state.eventLoaded == true &&\n          this.state.entryLoaded == true &&\n          this.state.entityLoaded == true\n        ) {\n          this.setState({ refreshing: false });\n        }\n        this.props.errorToggle(\"Error: Failed to reload entity data.\", result);\n      }.bind(this)\n    });\n    //error popup if an error occurs\n    if (_type != undefined && _message != undefined) {\n      this.props.errorToggle(_message);\n    }\n  };\n\n  flairToolbarToggle = (id, value, type, entityoffset, entityobj) => {\n    this.setState({\n      flairToolbar: true,\n      entityid: id,\n      entityvalue: value,\n      entitytype: type,\n      entityoffset: entityoffset,\n      entityobj: entityobj\n    });\n  };\n\n  flairToolbarOff = () => {\n    if (this.state.isMounted) {\n      let newEntityDetailKey = this.state.entityDetailKey + 1;\n      this.setState({\n        flairToolbar: false,\n        entityDetailKey: newEntityDetailKey\n      });\n    }\n  };\n\n  linkWarningToggle = (href, nopop=false) => {\n    if (this.state.linkWarningToolbar === false) {\n      this.setState({ linkWarningToolbar: true, link: href, nopop: nopop });\n    } else {\n      this.setState({ linkWarningToolbar: false, nopop: nopop });\n    }\n  };\n\n  exportToggle = () => {\n    if (this.state.exportModal === false) {\n      this.setState({ exportModal: true });\n    } else {\n      this.setState({ exportModal: false });\n    }\n  };\n\n  viewedbyfunc = headerData => {\n    let viewedbyarr = [];\n    if (headerData !== null) {\n      for (let prop in headerData.view_history) {\n        viewedbyarr.push(prop);\n      }\n    }\n    return viewedbyarr;\n  };\n\n  entryToggle = () => {\n    if (this.state.entryToolbar === false) {\n      this.setState({ entryToolbar: true });\n    } else {\n      this.setState({ entryToolbar: false });\n    }\n  };\n\n  deleteToggle = (type, isDeleted) => {\n    if (this.state.deleteToolbar === false) {\n      this.setState({ deleteToolbar: true, deleteType: type });\n    } else {\n      this.setState({ deleteToolbar: false, deleteType: type });\n    }\n    if (isDeleted) {\n      this.setState({ isDeleted: true });\n    }\n  };\n\n  changeHistoryToggle = () => {\n    if (this.state.changeHistoryToolbar === false) {\n      this.setState({ changeHistoryToolbar: true });\n    } else {\n      this.setState({ changeHistoryToolbar: false });\n    }\n  };\n\n  viewedByHistoryToggle = () => {\n    if (this.state.viewedByHistoryToolbar === false) {\n      this.setState({ viewedByHistoryToolbar: true });\n    } else {\n      this.setState({ viewedByHistoryToolbar: false });\n    }\n  };\n\n  permissionsToggle = () => {\n    if (this.state.permissionsToolbar === false) {\n      this.setState({ permissionsToolbar: true });\n    } else {\n      this.setState({ permissionsToolbar: false });\n    }\n  };\n\n  entitiesToggle = () => {\n    if (this.state.entitiesToolbar === false) {\n      this.setState({ entitiesToolbar: true });\n    } else {\n      this.setState({ entitiesToolbar: false, entryEntityData: null });\n    }\n  };\n\n  promoteToggle = () => {\n    if (this.state.promoteToolbar === false) {\n      this.setState({ promoteToolbar: true });\n    } else {\n      this.setState({ promoteToolbar: false });\n    }\n  };\n\n  fileUploadToggle = () => {\n    if (this.state.fileUploadToolbar === false) {\n      this.setState({ fileUploadToolbar: true });\n    } else {\n      this.setState({ fileUploadToolbar: false });\n    }\n  };\n\n  titleCase = string => {\n    let newstring = string.charAt(0).toUpperCase() + string.slice(1);\n    return newstring;\n  };\n\n  Watcher = () => {\n    $(\"iframe\").each(\n      function(index, ifr) {\n        //requestAnimationFrame waits for the frame to be rendered (allowing the iframe to fully render before excuting the next bit of code!!!\n        ifr.contentWindow.requestAnimationFrame(\n          function() {\n            if (ifr.contentDocument !== null) {\n              let arr = [];\n              //arr.push(this.props.type);\n              arr.push(this.checkFlairHover);\n              arr.push(this.checkHighlight);\n              $(ifr).off(\"mouseenter\");\n              $(ifr).off(\"mouseleave\");\n              $(ifr).on(\n                \"mouseenter\",\n                function(v, type) {\n                  let intervalID = setInterval(this[0], 50, ifr); // this.flairToolbarToggle, type, this.props.linkWarningToggle, this.props.id);\n                  let intervalID1 = setInterval(this[1], 50, ifr); // this.flairToolbarToggle, type, this.props.linkWarningToggle, this.props.id);\n                  $(ifr).data(\"intervalID\", intervalID);\n                  $(ifr).data(\"intervalID1\", intervalID1);\n                  console.log(\"Now watching iframe \" + intervalID);\n                }.bind(arr)\n              );\n              $(ifr).on(\"mouseleave\", function() {\n                let intervalID = $(ifr).data(\"intervalID\");\n                let intervalID1 = $(ifr).data(\"intervalID1\");\n                window.clearInterval(intervalID);\n                window.clearInterval(intervalID1);\n                console.log(\"No longer watching iframe \" + intervalID);\n              });\n            }\n          }.bind(this)\n        );\n      }.bind(this)\n    );\n    if (this.props.type == \"alertgroup\") {\n      $(\"#detail-container\")\n        .find(\"a, .entity\")\n        .not(\".not_selectable\")\n        .each(\n          function(index, tr) {\n            $(tr).off(\"mousedown\");\n            $(tr).on(\n              \"mousedown\",\n              function(index) {\n                let thing = index.target;\n                if ($(thing)[0].className == \"extras\") {\n                  thing = $(thing)[0].parentNode;\n                } //if an extra is clicked reference the parent element\n                if ($(thing).attr(\"url\")) {\n                  //link clicked\n                  let url = $(thing).attr(\"url\");\n                  this.linkWarningToggle(url);\n                } else {\n                  //entity clicked\n                  let entityid = $(thing).attr(\"data-entity-id\");\n                  let entityvalue = $(thing).attr(\"data-entity-value\");\n                  let entityoffset = $(thing).offset();\n                  let entityobj = $(thing);\n                  this.flairToolbarToggle(\n                    entityid,\n                    entityvalue,\n                    \"entity\",\n                    entityoffset,\n                    entityobj\n                  );\n                }\n              }.bind(this)\n            );\n          }.bind(this)\n        );\n    }\n  };\n\n  checkHighlight = ifr => {\n    let content;\n    if (ifr.contentWindow !== null) {\n      content = ifr.contentWindow.getSelection().toString();\n      if (this.state.highlightedText != content) {\n        //this only tells the lower components to run their componentWIllReceiveProps methods to check for highlighted text.\n        this.setState({ highlightedText: content });\n      } else {\n        return;\n      }\n    } else {\n    }\n  };\n\n  checkFlairHover = (ifr, nicktype) => {\n    function returnifr() {\n      return ifr;\n    }\n    if (ifr.contentDocument != null) {\n      $(ifr)\n        .contents()\n        .find(\".entity\")\n        .each(\n          function(index, entity) {\n            if ($(entity).css(\"background-color\") == \"rgb(255, 0, 0)\") {\n              $(entity).data(\"state\", \"down\");\n            } else if ($(entity).data(\"state\") == \"down\") {\n              $(entity).data(\"state\", \"up\");\n              let entityid = $(entity).attr(\"data-entity-id\");\n              let entityvalue = $(entity).attr(\"data-entity-value\");\n              let entityobj = $(entity);\n              let ifr = returnifr();\n              let entityoffset = {\n                top: $(entity).offset().top + $(ifr).offset().top,\n                left: $(entity).offset().left + $(ifr).offset().left\n              };\n              this.flairToolbarToggle(\n                entityid,\n                entityvalue,\n                \"entity\",\n                entityoffset,\n                entityobj\n              );\n            }\n          }.bind(this)\n        );\n      $(ifr)\n        .contents()\n        .find(\"a\")\n        .each(\n          function(index, a) {\n            if ($(a).css(\"color\") == \"rgb(255, 0, 0)\") {\n              $(a).data(\"state\", \"down\");\n            } else if ($(a).data(\"state\") == \"down\") {\n              $(a).data(\"state\", \"up\");\n              let url = $(a).attr(\"url\");\n              this.linkWarningToggle(url);\n            }\n          }.bind(this)\n        );\n    }\n  };\n\n  summaryUpdate = () => {\n    this.forceUpdate();\n  };\n\n  scrollTo = () => {\n    if (this.props.taskid !== undefined) {\n      $(\".entry-wrapper\").scrollTop(\n        $(\".entry-wrapper\").scrollTop() +\n          $(\"#iframe_\" + this.props.taskid).position().top -\n          30\n      );\n    }\n  };\n\n  guideRedirectToAlertListWithFilter = () => {\n    RegExp.escape = function(text) {\n      return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n    };\n    //column, string, clearall (bool), type\n    this.props.handleFilter(null, null, true, \"alertgroup\");\n    this.props.handleFilter(\n      [\n        {\n          id: \"subject\",\n          value: RegExp.escape(this.state.headerData.data.applies_to[0])\n        }\n      ],\n      null,\n      false,\n      \"alertgroup\"\n    );\n    window.open(\"#/alertgroup/\");\n  };\n\n  setEntryEntities = data => {\n    this.entitiesToggle();\n    this.setState({ entryEntityData: data });\n  };\n\n  showSignatureOptionsToggle = () => {\n    if (this.state.showSignatureOptions === false) {\n      this.setState({ showSignatureOptions: true });\n    } else {\n      this.setState({ showSignatureOptions: false });\n    }\n  };\n  markModalToggle = () => {\n    if (this.state.showMarkModal === false) {\n      this.setState({ showMarkModal: true });\n    } else {\n      this.setState({ showMarkModal: false });\n    }\n  };\n\n  ToggleProcessingMessage = status => {\n    this.setState({ processing: status });\n    this.props.togglePreventClick();\n  };\n\n  linksModalToggle = () => {\n    let showLinksModal = !this.state.showLinksModal;\n    this.setState({ showLinksModal: showLinksModal });\n  };\n\n  toggleFlair = () => {\n    if (this.state.flairOff) {\n      this.setState({ flairOff: false, runWatcher: true });\n      setTimeout(\n        function() {\n          AddFlair.entityUpdate(\n            this.state.entityData,\n            this.flairToolbarToggle,\n            this.props.type,\n            this.linkWarningToggle,\n            this.props.id\n          );\n        }.bind(this)\n      );\n    } else {\n      this.setState({ flairOff: true });\n    }\n  };\n\n  //2019 new alert table stuff\n  checkSelection(rowid) {\n    if (this.state.alertsSelected.some(item => rowid === item.id)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  handleSelection = row => {\n    console.log(\"Got selection click!\");\n    this.setState({\n      alertsSelected: [row]\n    });\n  };\n\n  handleMultiSelection = row => {\n    if (!this.checkSelection(row.id)) {\n      let temparray = [...this.state.alertsSelected, row];\n      this.setState({\n        alertsSelected: temparray\n      });\n    } else {\n      /** item already selected, lets filter out item (uncheck and reset state\n      with new array returned from filter**/\n      this.setState({\n        alertsSelected: this.state.alertsSelected.filter(function(alert) {\n          return alert[\"id\"] !== row.id;\n        })\n      });\n    }\n  };\n\n  handleSelectAll = data => {\n    const selection = data.map(object => object.id);\n    this.setState({\n      alertsSelected: selection\n    });\n  };\n\n  handleShiftSelect = (startIndex, endIndex, data) => {\n    if (startIndex > endIndex) {\n      startIndex = [endIndex, (endIndex = startIndex)][0];\n    }\n    let temparray = [];\n    data.forEach(\n      function(row) {\n        if (row.id <= endIndex && row.id >= startIndex) {\n          if (!this.checkSelection(row)) {\n            temparray.push(row);\n          }\n        }\n      }.bind(this)\n    );\n    this.setState({\n      alertsSelected: [...this.state.alertsSelected, ...temparray]\n    });\n  };\n\n  render() {\n    let headerData = this.state.headerData;\n    let viewedby = this.viewedbyfunc(headerData);\n    let type = this.props.type;\n    let subjectType = this.titleCase(this.props.type); //in signatures  and feeds we're using the key \"name\"\n    let id = this.props.id;\n    let string = \"\";\n\n    if (this.state.headerData.subject) {\n      string = this.state.headerData.subject;\n    } else if (this.state.headerData.value) {\n      string = this.state.headerData.value;\n    } else if (this.state.headerData.name) {\n      string = this.state.headerData.name;\n    } else if (this.state.headerData.body) {\n      string = this.state.headerData.body;\n    }\n\n    return (\n      <div>\n        {\" \"}\n        {this.state.isNotFound ? (\n          <h1>No record found.</h1>\n        ) : (\n          <div>\n            <div id=\"header\">\n              <div id=\"NewEventInfo\" className=\"entry-header-info-null\">\n                <div\n                  className=\"details-subject\"\n                  style={{ display: \"inline-flex\", paddingLeft: \"5px\" }}\n                >\n                  {this.state.showEventData ? (\n                    <EntryDataSubject\n                      data={this.state.headerData}\n                      subjectType={subjectType}\n                      type={type}\n                      id={this.props.id}\n                      errorToggle={this.props.errorToggle}\n                    />\n                  ) : null}\n                  {this.state.refreshing ? (\n                    <span style={{ color: \"lightblue\" }}>\n                      Refreshing Data...\n                    </span>\n                  ) : null}\n                  {this.state.loading ? (\n                    <span style={{ color: \"lightblue\" }}>Loading...</span>\n                  ) : null}\n                  {this.state.processing ? (\n                    <span style={{ color: \"lightblue\" }}>\n                      Processing Actions...\n                    </span>\n                  ) : null}\n                  {this.state.flairing ? (\n                    <span style={{ color: \"lightblue\" }}>Flairing...</span>\n                  ) : null}\n                </div>\n                {type !== \"entity\" ? (\n                  <div\n                    className=\"details-table toolbar\"\n                    style={{ display: \"flex\" }}\n                  >\n                    <table>\n                      <tbody>\n                        <tr>\n                          <th />\n                          <td>\n                            <div style={{ marginLeft: \"5px\" }}>\n                              {this.state.showEventData ? (\n                                <DetailDataStatus\n                                  data={this.state.headerData}\n                                  status={this.state.headerData.status}\n                                  id={id}\n                                  type={type}\n                                  errorToggle={this.props.errorToggle}\n                                />\n                              ) : null}\n                            </div>\n                          </td>\n                          {type !== \"entity\" ? <th>Owner: </th> : null}\n                          {type !== \"entity\" ? (\n                            <td>\n                              <span>\n                                {this.state.showEventData ? (\n                                  <Owner\n                                    key={id}\n                                    data={this.state.headerData.owner}\n                                    type={type}\n                                    id={id}\n                                    updated={this.updated}\n                                    errorToggle={this.props.errorToggle}\n                                  />\n                                ) : null}\n                              </span>\n                            </td>\n                          ) : null}\n                          {type !== \"entity\" ? <th>Updated: </th> : null}\n                          {type !== \"entity\" ? (\n                            <td>\n                              <span id=\"event_updated\">\n                                {this.state.showEventData ? (\n                                  <EntryDataUpdated\n                                    data={this.state.headerData.updated}\n                                  />\n                                ) : null}\n                              </span>\n                            </td>\n                          ) : null}\n                          {(type === \"event\" || type === \"incident\" || type === \"intel\" || type === \"product\") &&\n                          this.state.showEventData &&\n                          this.state.headerData.promoted_from.length > 0 ? (\n                            <th>Promoted From:</th>\n                          ) : null}\n                          {(type === \"event\" || type === \"incident\" || type === \"intel\" || type === \"product\") &&\n                          this.state.showEventData &&\n                          this.state.headerData.promoted_from.length > 0 ? (\n                            <PromotedData\n                              data={this.state.headerData.promoted_from}\n                              type={type}\n                              id={id}\n                            />\n                          ) : null}\n                          {type !== \"entity\" && this.state.showEventData ? (\n                            <Badge\n                              data={this.state.tagData}\n                              id={id}\n                              type={type}\n                              updated={this.updated}\n                              errorToggle={this.props.errorToggle}\n                              badgeType=\"tag\"\n                            />\n                          ) : null}\n                          {type !== \"entity\" && this.state.showEventData ? (\n                            <Badge\n                              data={this.state.sourceData}\n                              id={id}\n                              type={type}\n                              updated={this.updated}\n                              errorToggle={this.props.errorToggle}\n                              badgeType=\"source\"\n                            />\n                          ) : null}\n                        </tr>\n                      </tbody>\n                    </table>\n                    {/*<DetailHeaderMoreOptions type={type} id={id} data={this.state.headerData} errorToggle={this.props.errorToggle} showData={this.state.showEventData} />*/}\n                  </div>\n                ) : null}\n              </div>\n              <Notification ref=\"notificationSystem\" />\n              {this.state.exportModal ? (\n                <ExportModal\n                  type={type}\n                  errorToggle={this.props.errorToggle}\n                  exportToggle={this.exportToggle}\n                  id={id}\n                />\n              ) : null}\n              {this.state.linkWarningToolbar ? (\n                <LinkWarning\n                  linkWarningToggle={this.linkWarningToggle}\n                  link={this.state.link}\n                  nopop={this.state.nopop}\n                />\n              ) : null}\n              {this.state.viewedByHistoryToolbar ? (\n                <ViewedByHistory\n                  viewedByHistoryToggle={this.viewedByHistoryToggle}\n                  id={id}\n                  type={type}\n                  subjectType={subjectType}\n                  viewedby={viewedby}\n                  errorToggle={this.props.errorToggle}\n                />\n              ) : null}\n              {this.state.changeHistoryToolbar ? (\n                <ChangeHistory\n                  changeHistoryToggle={this.changeHistoryToggle}\n                  id={id}\n                  type={type}\n                  subjectType={subjectType}\n                  errorToggle={this.props.errorToggle}\n                />\n              ) : null}\n              {this.state.entitiesToolbar ? (\n                <span>\n                  {this.state.entryEntityData !== null ? (\n                    <Entities\n                      entitiesToggle={this.entitiesToggle}\n                      entityData={this.state.entryEntityData}\n                      flairToolbarToggle={this.flairToolbarToggle}\n                      flairToolbarOff={this.flairToolbarOff}\n                    />\n                  ) : (\n                    <Entities\n                      entitiesToggle={this.entitiesToggle}\n                      entityData={this.state.entityData}\n                      flairToolbarToggle={this.flairToolbarToggle}\n                      flairToolbarOff={this.flairToolbarOff}\n                    />\n                  )}\n                </span>\n              ) : null}\n\n              {this.state.deleteToolbar ? (\n                <div>\n                  {this.state.deleteType !== \"alert\" ? (\n                    <DeleteThingComponent\n                      deleteType={this.state.deleteType}\n                      subjectType={subjectType}\n                      id={id}\n                      deleteToggle={this.deleteToggle}\n                      updated={this.updated}\n                      errorToggle={this.props.errorToggle}\n                      history={this.props.history}\n                      removeCallback={this.props.removeCallback}\n                    />\n                  ) : (\n                    <DeleteThingComponent\n                      deleteType={this.state.deleteType}\n                      type={type}\n                      deleteToggle={this.deleteToggle}\n                      updated={this.updated}\n                      errorToggle={this.props.errorToggle}\n                      history={this.props.history}\n                      alertsSelected={this.state.alertsSelected}\n                      removeCallback={this.props.removeCallback}\n                    />\n                  )}\n                </div>\n              ) : null}\n              {this.state.showMarkModal ? (\n                <Mark\n                  modalActive={true}\n                  type={type}\n                  id={id}\n                  string={string}\n                  errorToggle={this.props.errorToggle}\n                  markModalToggle={this.markModalToggle}\n                />\n              ) : null}\n              {this.state.showLinksModal ? (\n                <Links\n                  modalActive={true}\n                  type={type}\n                  id={id}\n                  errorToggle={this.props.errorToggle}\n                  linksModalToggle={this.linksModalToggle}\n                />\n              ) : null}\n              {this.state.showEventData ? (\n                <SelectedHeaderOptions\n                  type={type}\n                  subjectType={subjectType}\n                  id={id}\n                  entryData={this.state.entryData}\n                  headerData={this.state.headerData}\n                  status={this.state.headerData.status}\n                  promoteToggle={this.promoteToggle}\n                  permissionsToggle={this.permissionsToggle}\n                  entryToggle={this.entryToggle}\n                  entitiesToggle={this.entitiesToggle}\n                  changeHistoryToggle={this.changeHistoryToggle}\n                  viewedByHistoryToggle={this.viewedByHistoryToggle}\n                  exportToggle={this.exportToggle}\n                  deleteToggle={this.deleteToggle}\n                  updated={this.updated}\n                  flairToolbarToggle={this.flairToolbarToggle}\n                  flairToolbarOff={this.flairToolbarOff}\n                  sourceToggle={this.sourceToggle}\n                  subjectName={this.state.headerData.subject}\n                  fileUploadToggle={this.fileUploadToggle}\n                  fileUploadToolbar={this.state.fileUploadToolbar}\n                  guideRedirectToAlertListWithFilter={\n                    this.guideRedirectToAlertListWithFilter\n                  }\n                  showSignatureOptionsToggle={this.showSignatureOptionsToggle}\n                  markModalToggle={this.markModalToggle}\n                  linksModalToggle={this.linksModalToggle}\n                  ToggleProcessingMessage={this.ToggleProcessingMessage}\n                  errorToggle={this.props.errorToggle}\n                  toggleFlair={this.toggleFlair}\n                  alertsSelected={this.state.alertsSelected}\n                  guideID={this.state.guideID}\n                />\n              ) : null}\n              {this.state.permissionsToolbar ? (\n                <SelectedPermission\n                  updateid={id}\n                  id={id}\n                  type={type}\n                  permissionData={this.state.headerData}\n                  permissionsToggle={this.permissionsToggle}\n                  updated={this.updated}\n                  errorToggle={this.props.errorToggle}\n                />\n              ) : null}\n            </div>\n            {this.state.showEventData && type !== \"entity\" ? (\n              <SelectedEntry\n                id={id}\n                type={type}\n                entryToggle={this.entryToggle}\n                updated={this.updated}\n                entryData={this.state.entryData}\n                headerData={this.state.headerData}\n                showEntryData={this.state.showEntryData}\n                showEntityData={this.state.showEntityData}\n                summaryUpdate={this.summaryUpdate}\n                flairToolbarToggle={this.flairToolbarToggle}\n                flairToolbarOff={this.flairToolbarOff}\n                linkWarningToggle={this.linkWarningToggle}\n                entryToolbar={this.state.entryToolbar}\n                alertPreSelectedId={this.props.alertPreSelectedId}\n                errorToggle={this.props.errorToggle}\n                fileUploadToggle={this.fileUploadToggle}\n                fileUploadToolbar={this.state.fileUploadToolbar}\n                showSignatureOptions={this.state.showSignatureOptions}\n                flairOff={this.state.flairOff}\n                highlightedText={this.state.highlightedText}\n                form={this.props.form}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                addFlair={AddFlair.entityUpdate}\n                handleSelection={this.handleSelection}\n                handleShiftSelect={this.handleShiftSelect}\n                handleMultiSelection={this.handleMultiSelection}\n                handleSelectAll={this.handleSelectAll}\n                alertsSelected={this.state.alertsSelected}\n                setEntryEntities={this.setEntryEntities}\n              />\n            ) : null}\n            {this.state.showEventData && type === \"entity\" ? (\n              <EntityDetail\n                entityid={id}\n                form={this.props.form}\n                entitytype={\"entity\"}\n                id={id}\n                type={\"entity\"}\n                fullScreen={true}\n                errorToggle={this.props.errorToggle}\n                linkWarningToggle={this.linkWarningToggle}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                addFlair={AddFlair.entityUpdate}\n              />\n            ) : null}\n            {this.state.flairToolbar ? (\n              <EntityDetail\n                key={this.state.entityDetailKey}\n                form={this.props.form}\n                flairToolbarToggle={this.flairToolbarToggle}\n                flairToolbarOff={this.flairToolbarOff}\n                linkWarningToggle={this.linkWarningToggle}\n                entityid={parseInt(this.state.entityid, 10)}\n                data={this.state.headerData}\n                entityvalue={this.state.entityvalue}\n                entitytype={this.state.entitytype}\n                type={this.props.type}\n                id={this.props.id}\n                errorToggle={this.props.errorToggle}\n                entityoffset={this.state.entityoffset}\n                watcher={this.Watcher}\n                entityobj={this.state.entityobj}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                addFlair={AddFlair.entityUpdate}\n              />\n            ) : null}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nclass EntryDataUpdated extends React.Component {\n  render() {\n    let data = this.props.data;\n    return (\n      <div>\n        <ReactTime value={data * 1000} format=\"MM/DD/YY hh:mm:ss a\" />\n      </div>\n    );\n  }\n}\n\nclass EntryDataSubject extends React.Component {\n  constructor(props) {\n    super(props);\n    let keyName = \"subject\";\n    let value = this.props.data.subject;\n    if (this.props.type === \"signature\" || this.props.type === \"feed\") {\n      keyName = \"name\";\n      value = this.props.data.name;\n    } else if (this.props.type === \"entity\") {\n      keyName = \"value\";\n      value = this.props.data.value;\n    }\n    this.state = {\n      value: value,\n      width: \"\",\n      keyName: keyName\n    };\n  }\n\n  handleChange = event => {\n    if (event !== null) {\n      let keyName = this.state.keyName;\n      let json = { [keyName]: event.target.value };\n      let newValue = event.target.value;\n      $.ajax({\n        type: \"put\",\n        url: \"scot/api/v2/\" + this.props.type + \"/\" + this.props.id,\n        data: JSON.stringify(json),\n        contentType: \"application/json; charset=UTF-8\",\n        success: function(data) {\n          console.log(\"success: \" + data);\n          this.setState({ value: newValue });\n          this.calculateWidth(newValue);\n        }.bind(this),\n        error: function(result) {\n          this.props.errorToggle(\n            \"error: Failed to update the subject/name\",\n            result\n          );\n        }.bind(this)\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.calculateWidth(this.state.value);\n  }\n\n  onChange = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  handleEnterKey = e => {\n    if (e.key === \"Enter\") {\n      this.handleChange(e);\n    }\n  };\n\n  calculateWidth = input => {\n    let newWidth;\n    $(\"#invisible\").html($(\"<span></span>\").text(input));\n    newWidth = $(\"#invisible\").width() + 25 + \"px\";\n    this.setState({ width: newWidth });\n  };\n\n  componentWillReceiveProps = nextProps => {\n    let value = nextProps.data.subject;\n    if (nextProps.type === \"signature\" || nextProps.type === \"feed\") {\n      value = nextProps.data.name;\n    } else if (nextProps.type === \"entity\") {\n      value = nextProps.data.value;\n    }\n    this.setState({ value: value });\n    this.calculateWidth(value);\n  };\n\n  render() {\n    //only disable the subject editor on an entity with a non-blank subject as editing it could damage flair.\n    let isDisabled = false;\n    if (this.props.type === \"entity\" && this.state.value !== \"\") {\n      isDisabled = true;\n    }\n    return (\n      <div>\n        {this.props.subjectType} {this.props.id}:{\" \"}\n        <input\n          type=\"text\"\n          value={this.state.value}\n          onKeyPress={this.handleEnterKey}\n          onChange={this.onChange}\n          onBlur={this.handleChange}\n          style={{ width: this.state.width, lineHeight: \"normal\" }}\n          className=\"detail-header-input\"\n          disabled={isDisabled}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactTable from \"react-table\";\nimport { buildTypeColumns } from \"./tableConfig\";\nimport $ from \"jquery\";\nimport * as Cookies from \"../utils/cookies\";\nimport listColumnsJSON from \"../utils/list-columns\";\nimport SelectedContainer from \"../detail/selected_container\";\nimport Button from \"react-bootstrap/lib/Button\";\nimport LoadingContainer from \"./LoadingContainer/index\";\nimport EntityCreateModal from \"../modal/entity_create\";\nlet datasource;\nlet listStartY;\nlet listStartHeight;\nlet listQuery;\n\nexport default class ListView extends React.Component {\n  constructor(props) {\n    super(props);\n    let type = this.props.type;\n    let id = this.props.id;\n    let queryType = this.props.type;\n    let alertPreSelectedId = null;\n    let scrollHeight = $(window).height() - 170 + \"px\";\n    let scrollWidth = \"650px\";\n    let showSelectedContainer = false;\n    let sort = [{ id: \"id\", desc: true }];\n    let activepage = { page: 0, limit: 50 };\n    let filter = [];\n\n    let columnsDisplay = listColumnsJSON.columnsDisplay[this.props.type];\n    let columns = listColumnsJSON.columns[this.props.type];\n    let columnsClassName = listColumnsJSON.columnsClassName[this.props.type];\n\n    if (this.props.listViewSort != null) {\n      sort = JSON.parse(this.props.listViewSort);\n    }\n\n    if (this.props.listViewPage != null) {\n      activepage = JSON.parse(this.props.listViewPage);\n    }\n\n    if (this.props.listViewFilter != null) {\n      filter = JSON.parse(this.props.listViewFilter);\n    }\n\n    if (this.props.type === \"alert\") {\n      showSelectedContainer = false;\n      typeCapitalized = \"Alertgroup\";\n      type = \"alertgroup\";\n      queryType = \"alertgroup\";\n      alertPreSelectedId = id;\n    }\n\n    if (this.props.type === \"task\") {\n      type = \"task\";\n      queryType = this.props.queryType;\n    }\n\n    let typeCapitalized = this.titleCase(this.props.type);\n    this.state = {\n      togglePreventClick: false,\n      splitter: true,\n      selectedColor: \"#AEDAFF\",\n      sourcetags: [],\n      tags: [],\n      startepoch: \"\",\n      endepoch: \"\",\n      idtext: \"\",\n      totalCount: 0,\n      activepage: activepage,\n      statustext: \"\",\n      subjecttext: \"\",\n      idsarray: [],\n      classname: [\" \", \" \", \" \", \" \"],\n      alldetail: true,\n      viewsarrow: [0, 0],\n      idarrow: [-1, -1],\n      subjectarrow: [0, 0],\n      statusarrow: [0, 0],\n      resize: \"horizontal\",\n      createdarrow: [0, 0],\n      sourcearrow: [0, 0],\n      tagsarrow: [0, 0],\n      viewstext: \"\",\n      entriestext: \"\",\n      scrollheight: scrollHeight,\n      display: \"flex\",\n      differentviews: \"\",\n      maxwidth: \"915px\",\n      maxheight: scrollHeight,\n      minwidth: \"650px\",\n      suggestiontags: [],\n      suggestionssource: [],\n      sourcetext: \"\",\n      tagstext: \"\",\n      scrollwidth: scrollWidth,\n      reload: false,\n      viewfilter: false,\n      viewevent: false,\n      showevent: true,\n      objectarray: [],\n      csv: true,\n      fsearch: \"\",\n      listViewOrientation: \"landscape-list-view\",\n      columns: listColumnsJSON.columns[this.props.type],\n      columnsDisplay: listColumnsJSON.columnsDisplay[this.props.type],\n      columnsClassName: listColumnsJSON.columnsClassName[this.props.type],\n      typeCapitalized: typeCapitalized,\n      type: type,\n      queryType: queryType,\n      id: id,\n      showSelectedContainer: showSelectedContainer,\n      listViewContainerDisplay: null,\n      viewMode: this.props.viewMode,\n      offset: 0,\n      sort: sort,\n      filter: filter,\n      match: null,\n      alertPreSelectedId: alertPreSelectedId,\n      entryid: this.props.id2,\n      listViewKey: 1,\n      loading: true,\n      initialAutoScrollToId: false,\n      manualScrollHeight: null,\n      showEntityCreateModal: false,\n      form: []\n    };\n    this.handleRowSelection = this.handleRowSelection.bind(this);\n  }\n\n  componentWillMount = () => {\n    if (\n      this.props.viewMode === undefined ||\n      this.props.viewMode === \"default\"\n    ) {\n      this.Landscape();\n    } else if (this.props.viewMode === \"landscape\") {\n      this.Landscape();\n    } else if (this.props.viewMode === \"portrait\") {\n      this.Portrait();\n    }\n    //If alert id is passed, convert the id to its alertgroup id.\n    if (this.props.id) {\n      this.ConvertAlertIdToAlertgroupId(this.props.id);\n    }\n\n    //if the type is entry, convert the id and type to the actual type and id\n    this.ConvertEntryIdToType(this.props.id);\n\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/form\",\n      success: function(data) {\n        this.setState({ form: data });\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"Failed to get form structure\", data);\n      }.bind(this)\n    });\n  };\n\n  componentDidMount = () => {\n    let height = this.state.scrollheight;\n    let sortBy = this.state.sort;\n    let filterBy = this.state.filter;\n    let pageLimit = this.state.activepage.limit;\n    let pageNumber = this.state.activepage.page;\n    let idsarray = [];\n    let newPage;\n    if (this.props.id !== undefined) {\n      if (this.props.id.length > 0) {\n        array = this.props.id;\n        //scrolled = $('.container-fluid2').scrollTop()\n        if (this.state.viewMode === \"landscape\") {\n          height = \"30vh\";\n        }\n      }\n    }\n\n    let array = [];\n    let finalarray = [];\n    //register for creation\n    let storeKey = this.props.type + \":listview\";\n    this.props.createCallback(storeKey, this.reloadactive);\n    // Store.storeKey(storeKey);\n    // Store.addChangeListener(this.reloadactive);\n    //List View code\n    let url = \"/scot/api/v2/\" + this.state.type;\n    if (this.props.type === \"alert\") {\n      url = \"/scot/api/v2/alertgroup\";\n    }\n\n    //get page number\n    newPage = pageNumber * pageLimit;\n    let data = { limit: pageLimit, offset: newPage };\n\n    //add sort to the data object\n    if (sortBy !== undefined || sortBy === null) {\n      let sortObj = {};\n      $.each(sortBy, function(key, value) {\n        let sortInt = -1;\n        if (!value.desc) {\n          sortInt = 1;\n        }\n        sortObj[value.id] = sortInt;\n      });\n      data[\"sort\"] = JSON.stringify(sortObj);\n    }\n\n    //add filter to the data object\n    if (sortBy !== undefined || sortBy === null) {\n      $.each(filterBy, function(key, value) {\n        if (value.id === \"source\" || value.id === \"tag\") {\n          let stringArr = [];\n          for (let each of value.value) {\n            stringArr.push(each.name);\n          }\n          data[value.id] = JSON.stringify(stringArr);\n        } else if (value.id === \"created\" || value.id === \"updated\") {\n          let arr = [];\n          arr.push(value.value.start);\n          arr.push(value.value.end);\n          data[value.id] = JSON.stringify(arr);\n        } else {\n          data[value.id] = JSON.stringify(value.value);\n        }\n      });\n    }\n\n    listQuery = $.ajax({\n      type: \"GET\",\n      url: url,\n      data: data,\n      traditional: true,\n      success: function(response) {\n        datasource = response;\n        $.each(\n          datasource.records,\n          function(key, value) {\n            finalarray[key] = {};\n            $.each(\n              value,\n              function(num, item) {\n                if (num === \"sources\" || num === \"source\") {\n                  if (item !== undefined) {\n                    let sourcearr = item.join(\", \");\n                    finalarray[key][\"source\"] = sourcearr;\n                  }\n                } else if (num === \"tags\" || num === \"tag\") {\n                  if (item !== undefined) {\n                    let tagarr = item.join(\", \");\n                    finalarray[key][\"tag\"] = tagarr;\n                  }\n                } else {\n                  finalarray[key][num] = item;\n                }\n                if (num === \"id\") {\n                  this.props.createCallback(item, this.reloadactive);\n                  idsarray.push(item);\n                }\n              }.bind(this)\n            );\n            if (key % 2 === 0) {\n              finalarray[key][\"classname\"] = \"table-row roweven\";\n            } else {\n              finalarray[key][\"classname\"] = \"table-row rowodd\";\n            }\n          }.bind(this)\n        );\n\n        let totalPages = this.getPages(response.totalRecordCount); //get pages for list view\n\n        this.setState({\n          scrollheight: height,\n          objectarray: finalarray,\n          totalCount: response.totalRecordCount,\n          loading: false,\n          idsarray: idsarray,\n          totalPages: totalPages\n        });\n        if (\n          this.props.type === \"alert\" &&\n          this.state.showSelectedContainer === false\n        ) {\n          this.setState({ showSelectedContainer: false });\n        } else if (this.state.id === undefined || this.state.id === null) {\n          this.setState({ showSelectedContainer: false });\n        } else {\n          this.setState({ showSelectedContainer: true });\n        }\n      }.bind(this),\n      error: function(data) {\n        if (!data.statusText === \"abort\") {\n          this.props.errorToggle(\"failed to get list data\", data);\n        }\n      }.bind(this)\n    });\n\n    $(\"#list-view-container\").keydown(this.keyNavigate);\n\n    $(document.body).keydown(\n      function(e) {\n        if ($(\"input\").is(\":focus\")) {\n          return;\n        }\n        if ($(\"textarea\").is(\":focus\")) {\n          return;\n        }\n        if (e.keyCode === 70 && (e.ctrlKey !== true && e.metaKey !== true)) {\n          this.toggleView();\n        }\n      }.bind(this)\n    );\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyNavigate);\n  };\n\n  togglePreventClick = () => {\n    this.setState({ preventClick: !this.state.preventClick });\n  };\n\n  keyNavigate = event => {\n    if (event.type !== \"click\") {\n      if (![\"j\", \"k\", \"ArrowUp\", \"ArrowDown\"].includes(event.key)) {\n        return;\n      }\n\n      let target = event.target || event.srcElement;\n      let targetType = target.tagName.toLowerCase();\n      if (targetType === \"input\" || targetType === \"textarea\") {\n        return;\n      }\n    }\n\n    let curRow = document.querySelector(\n      \".ReactTable .rt-tbody .rt-tr.selected\"\n    );\n    if (!curRow) {\n      return;\n    }\n    let nextRow = null;\n\n    switch (event.key) {\n      case \"j\":\n      case \"ArrowDown\":\n      default:\n        nextRow = curRow.parentElement.nextElementSibling;\n        break;\n      case \"k\":\n      case \"ArrowUp\":\n        nextRow = curRow.parentElement.previousElementSibling;\n        break;\n    }\n\n    if (!nextRow) {\n      return;\n    }\n    let nextId = nextRow.children[0].children[0].innerHTML;\n\n    this.props.history.push(`/${this.state.type}/${nextId}`);\n\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  //Callback for AMQ updates\n  reloadactive = () => {\n    this.getNewData();\n  };\n\n  ToggleCreateEntity = () => {\n    this.setState({ showEntityCreateModal: !this.state.showEntityCreateModal });\n  };\n\n  render = () => {\n    let listViewContainerHeight;\n    let showClearFilter = false;\n    let scrollheight = this.state.scrollheight;\n\n    if (this.state.listViewContainerDisplay == null) {\n      listViewContainerHeight = null;\n    } else {\n      listViewContainerHeight = \"0px\";\n    }\n\n    if (this.state.id != null && this.state.typeCapitalized != null) {\n      document.title =\n        this.state.typeCapitalized.charAt(0) + \"-\" + this.state.id;\n    }\n\n    if (\n      Cookies.checkCookie(\"listViewFilter\" + this.props.type) != null ||\n      Cookies.checkCookie(\"listViewSort\" + this.props.type) != null ||\n      Cookies.checkCookie(\"listViewPage\" + this.props.type) != null\n    ) {\n      showClearFilter = true;\n    }\n\n    let columns = buildTypeColumns(this.props.type, {}, {}, false);\n\n    return (\n      <div>\n        {this.state.type !== \"entry\" ? (\n          <div key={this.state.listViewKey} className=\"allComponents\">\n            <div className=\"black-border-line\">\n              <div className=\"mainview\">\n                <div>\n                  <div className=\"list-buttons\">\n                    {this.props.notificationSetting === \"on\" ? (\n                      <Button\n                        eventkey=\"1\"\n                        onClick={this.props.notificationToggle}\n                        bsSize=\"xsmall\"\n                      >\n                        Mute Notifications\n                      </Button>\n                    ) : (\n                      <Button\n                        eventkey=\"2\"\n                        onClick={this.props.notificationToggle}\n                        bsSize=\"xsmall\"\n                      >\n                        Turn On Notifications\n                      </Button>\n                    )}\n                    {this.props.type === \"event\" ||\n                    this.props.type === \"intel\" ||\n                    this.props.type === \"incident\" ||\n                    this.props.type === \"signature\" ||\n                    this.props.type === \"guide\" ||\n                    this.props.type === \"dispatch\" ||\n                    this.props.type === \"feed\" ||\n                    this.props.type === \"product\" ||\n                    this.props.type === \"entity\" ? (\n                      <Button\n                        onClick={this.createNewThing}\n                        eventkey=\"6\"\n                        bsSize=\"xsmall\"\n                      >\n                        Create {this.state.typeCapitalized}\n                      </Button>\n                    ) : null}\n                    <Button\n                      eventkey=\"5\"\n                      bsSize=\"xsmall\"\n                      onClick={this.exportCSV}\n                    >\n                      Export to CSV\n                    </Button>\n                    <Button bsSize=\"xsmall\" onClick={this.toggleView}>\n                      Full Screen Toggle (f)\n                    </Button>\n                    {showClearFilter ? (\n                      <Button\n                        onClick={this.clearAll}\n                        eventkey=\"3\"\n                        bsSize=\"xsmall\"\n                        bsStyle={\"info\"}\n                      >\n                        Clear All Filters\n                      </Button>\n                    ) : null}\n                  </div>\n                  <div id=\"list-view-container\" tabIndex=\"1\">\n                    <div id=\"list-view\" tabIndex=\"2\">\n                      <ReactTable\n                        columns={columns}\n                        data={this.state.objectarray}\n                        style={{\n                          maxHeight: scrollheight\n                        }}\n                        page={this.state.activepage.page}\n                        pages={this.state.totalPages}\n                        defaultPageSize={50}\n                        onPageChange={this.handlePageChange}\n                        onPageSizeChange={this.handlePageSizeChange}\n                        pageSize={this.state.activepage.limit}\n                        onFilteredChange={this.handleFilter}\n                        filtered={this.state.filter}\n                        onSortedChange={this.handleSort}\n                        sorted={this.state.sort}\n                        manual={true}\n                        sortable={true}\n                        filterable={true}\n                        resizable={true}\n                        styleName=\"styles.ReactTable\"\n                        className=\"-striped -highlight\"\n                        minRows={0}\n                        LoadingComponent={this.CustomTableLoader}\n                        loading={this.state.loading}\n                        getTrProps={this.handleRowSelection}\n                      />\n                    </div>\n                  </div>\n                  <div\n                    onMouseDown={this.dragdiv}\n                    className=\"splitter\"\n                    style={{\n                      display: \"block\",\n                      height: \"10px\",\n                      backgroundColor: \"black\",\n                      borderTop: \"1px solid #AAA\",\n                      borderBottom: \"1px solid #AAA\",\n                      cursor: \"row-resize\",\n                      overflow: \"hidden\"\n                    }}\n                  />\n                  {this.state.showSelectedContainer ? (\n                    <SelectedContainer\n                      key={this.state.id}\n                      id={this.state.id}\n                      type={this.state.queryType}\n                      alertPreSelectedId={this.state.alertPreSelectedId}\n                      taskid={this.state.entryid}\n                      handleFilter={this.handleFilter}\n                      errorToggle={this.props.errorToggle}\n                      history={this.props.history}\n                      togglePreventClick={this.togglePreventClick}\n                      form={this.state.form}\n                      createCallback={this.props.createCallback}\n                      removeCallback={this.props.removeCallback}\n                      togglePreventClick={this.togglePreventClick}\n                    />\n                  ) : null}\n                  {this.state.showEntityCreateModal ? (\n                    <EntityCreateModal\n                      match={\"\"}\n                      modalActive={this.state.showEntityCreateModal}\n                      ToggleCreateEntity={this.ToggleCreateEntity}\n                      errorToggle={this.props.errorToggle}\n                    />\n                  ) : null}\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  };\n\n  CustomTableLoader = () => {\n    return (\n      <div className={\"-loading\" + (this.state.loading ? \" -active\" : \"\")}>\n        <LoadingContainer loading={this.state.loading} />\n      </div>\n    );\n  };\n\n  AutoScrollToId = () => {\n    //auto scrolls to selected id\n    let row = document.querySelector(\".ReactTable .rt-tbody .rt-tr.selected\");\n    let tbody = document.querySelector(\".ReactTable .rt-tbody\");\n\n    if (!row) {\n      tbody.scrollTop = 0;\n      return;\n    }\n\n    if (\n      tbody.scrollTop + tbody.offsetHeight - row.offsetHeight < row.offsetTop ||\n      row.offsetTop < tbody.scrollTop\n    ) {\n      tbody.scrollTop =\n        row.offsetTop - tbody.offsetHeight / 2 + row.offsetHeight / 2;\n    }\n\n    this.setState({ initialAutoScrollToId: true });\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    //auto scrolls to selected id\n    for (let i = 0; i < this.state.objectarray.length; i++) {\n      //Iterate through all of the items in the list to verify that the current id still matches the rows in the list. If not, don't scroll\n      let idReference = this.state.objectarray[i].id;\n      if (\n        (this.state.id != null &&\n          this.state.id === idReference &&\n          this.state.id !== prevState.id) ||\n        (this.state.id != null &&\n          this.state.id === idReference &&\n          prevState.initialAutoScrollToId === false)\n      ) {\n        //Checks that the id is present, is on the screen, and will not be kicked off again if its already been scrolled to before. The || statement handles the initial load since the id hasn't been scrolled to before.\n        setTimeout(this.AutoScrollToId, 300);\n      }\n    }\n  };\n\n  componentWillReceiveProps = nextProps => {\n    if (nextProps.id === undefined) {\n      this.setState({\n        type: nextProps.type,\n        id: null,\n        showSelectedContainer: false,\n        scrollheight: $(window).height() - 170 + \"px\"\n      });\n    } else if (nextProps.id !== this.props.id) {\n      if (this.props.type === \"alert\") {\n        this.ConvertAlertIdToAlertgroupId(nextProps.id);\n        this.ConvertEntryIdToType(nextProps.id);\n        this.setState({\n          type: nextProps.type,\n          alertPreSelectedId: nextProps.id\n        });\n      } else if (this.props.type === \"task\") {\n        this.setState({\n          type: nextProps.type,\n          queryType: nextProps.queryType,\n          id: nextProps.id,\n          entryid: nextProps.id2\n        });\n      } else {\n        this.setState({ type: nextProps.type, id: nextProps.id });\n      }\n    }\n  };\n\n  ConvertAlertIdToAlertgroupId = id => {\n    //if the type is alert, convert the id to the alertgroup id\n    if (this.props.type === \"alert\") {\n      $.ajax({\n        type: \"get\",\n        url: \"scot/api/v2/alert/\" + id,\n        success: function(response1) {\n          let newresponse = response1;\n          this.setState({\n            id: newresponse.alertgroup,\n            showSelectedContainer: true\n          });\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\n            \"failed to convert alert id to alertgroup id\",\n            data\n          );\n        }.bind(this)\n      });\n    }\n  };\n\n  ConvertEntryIdToType = id => {\n    //if the type is alert, convert the id to the alertgroup id\n    if (this.props.type === \"entry\") {\n      $.ajax({\n        type: \"get\",\n        url: \"scot/api/v2/entry/\" + id,\n        async: false,\n        success: function(response) {\n          this.selected(\n            response.target.type,\n            response.target.id,\n            this.props.id\n          );\n          //this.setState({id: response.target.id, type: response.target.type, showSelectedContainer:true});\n        }.bind(this),\n        error: function(data) {\n          this.props.errorToggle(\n            \"failed to convert alert id to alertgroup id\",\n            data\n          );\n        }.bind(this)\n      });\n    }\n  };\n\n  //This is used for the dragging portrait and landscape views\n  startdrag = e => {\n    $(\"iframe\").each(function(index, ifr) {\n      $(ifr).addClass(\"pointerEventsOff\");\n    });\n\n    this.setState({\n      manualScrollHeight: listStartHeight + e.clientY - listStartY + \"px\",\n      scrollheight: listStartHeight + e.clientY - listStartY + \"px\"\n    });\n  };\n\n  stopdrag = e => {\n    $(\"iframe\").each(function(index, ifr) {\n      $(ifr).removeClass(\"pointerEventsOff\");\n    });\n    document.onmousemove = null;\n  };\n\n  dragdiv = e => {\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n    let elem = document.getElementsByClassName(\"ReactTable\");\n    listStartY = e.clientY;\n    listStartHeight = parseInt(\n      document.defaultView.getComputedStyle(elem[0]).height,\n      10\n    );\n    document.onmousemove = this.startdrag;\n    document.onmouseup = this.stopdrag;\n  };\n\n  toggleView = () => {\n    if (\n      this.state.id.length !== 0 &&\n      this.state.showSelectedContainer === true &&\n      this.state.listViewContainerDisplay !== \"none\"\n    ) {\n      this.setState({ listViewContainerDisplay: \"none\", scrollheight: \"0px\" });\n    } else {\n      this.setState({ listViewContainerDisplay: null, scrollheight: \"30vh\" });\n    }\n  };\n\n  Landscape = () => {\n    document.onmousemove = null;\n    document.onmousedown = null;\n    document.onmouseup = null;\n    $(\".splitter\").css(\"width\", \"100%\");\n    $(\".mainview\").show();\n    this.setState({\n      classname: [\" \", \" \", \" \", \" \"],\n      splitter: false,\n      display: \"block\",\n      maxheight: \"\",\n      alldetail: true,\n      differentviews: \"100%\",\n      scrollheight:\n        this.state.id != null ? \"300px\" : $(window).height() - 170 + \"px\",\n      maxwidth: \"\",\n      minwidth: \"\",\n      scrollwidth: \"100%\",\n      resize: \"vertical\"\n    });\n    this.setState({ listViewOrientation: \"landscape-list-view\" });\n    Cookies.setCookie(\"viewMode\", \"landscape\", 1000);\n  };\n\n  clearAll = () => {\n    let newListViewKey = this.state.listViewKey + 1;\n    this.setState({\n      listViewKey: newListViewKey,\n      activepage: { page: 0, limit: this.state.activepage.limit },\n      sort: [{ id: \"id\", desc: true }],\n      filter: []\n    });\n    this.getNewData({ page: 0 }, [{ id: \"id\", desc: true }], {});\n    Cookies.deleteCookie(\"listViewFilter\" + this.props.type); //clear filter cookie\n    Cookies.deleteCookie(\"listViewSort\" + this.props.type); //clear sort cookie\n    Cookies.deleteCookie(\"listViewPage\" + this.props.type); //clear page cookie\n  };\n\n  selected = (type, rowid, subid, taskid) => {\n    let scrollheight;\n    if (taskid == null && subid == null) {\n      //window.history.pushState('Page', 'SCOT', '/#/' + type +'/'+rowid)\n      this.props.history.push(\"/\" + type + \"/\" + rowid);\n    } else if (taskid == null && subid != null) {\n      this.props.history.push(\"/\" + type + \"/\" + rowid + \"/\" + subid);\n    } else {\n      //If a task, swap the rowid and the taskid\n      //window.history.pushState('Page', 'SCOT', '/#/' + type + '/' + taskid + '/' + rowid)\n      this.props.history.push(\"/\" + type + \"/\" + taskid + \"/\" + rowid + \"/\");\n    }\n\n    if (this.state.display === \"block\") {\n      scrollheight = \"30vh\";\n    }\n\n    this.setState({\n      alertPreSelectedId: 0,\n      scrollheight: scrollheight,\n      showSelectedContainer: true\n    });\n  };\n\n  getNewData = (page, sort, filter) => {\n    this.setState({ loading: true }); //display loading opacity\n    let sortBy = sort;\n    let filterBy = filter;\n    let pageLimit;\n    let pageNumber;\n    let idsarray = this.state.idsarray;\n    let newidsarray = [];\n\n    //if the type is alert, convert the id to the alertgroup id\n    this.ConvertAlertIdToAlertgroupId(this.props.id);\n\n    //if the type is entry, convert the id and type to the actual type and id\n    this.ConvertEntryIdToType(this.props.id);\n\n    //defaultpage = page.page\n    if (page == undefined) {\n      pageNumber = this.state.activepage.page;\n      pageLimit = this.state.activepage.limit;\n    } else {\n      if (page.page == undefined) {\n        pageNumber = this.state.activepage.page;\n      } else {\n        pageNumber = page.page;\n      }\n      if (page.limit == undefined) {\n        pageLimit = this.state.activepage.limit;\n      } else {\n        pageLimit = page.limit;\n      }\n    }\n    let newPage;\n    newPage = pageNumber * pageLimit;\n    //sort check\n    if (sortBy == undefined) {\n      sortBy = this.state.sort;\n    }\n    //filter check\n    if (filterBy == undefined) {\n      filterBy = this.state.filter;\n    }\n    let data = { limit: pageLimit, offset: newPage };\n\n    //add sort to the data object\n    if (sortBy != undefined) {\n      let sortObj = {};\n      $.each(sortBy, function(key, value) {\n        let sortInt = -1;\n        if (!value.desc) {\n          sortInt = 1;\n        }\n        sortObj[value.id] = sortInt;\n      });\n      data[\"sort\"] = JSON.stringify(sortObj);\n    }\n\n    //add filter to the data object\n    if (filterBy != undefined) {\n      $.each(filterBy, function(key, value) {\n        if (value.id == \"source\" || value.id == \"tag\") {\n          let stringArr = [];\n          for (let each of value.value) {\n            stringArr.push(each.name);\n          }\n          data[value.id] = JSON.stringify(stringArr);\n        } else if (\n          value.id == \"created\" ||\n          value.id == \"updated\" ||\n          value.id == \"occurred\"\n        ) {\n          let arr = [];\n          arr.push(value.value.start);\n          arr.push(value.value.end);\n          data[value.id] = JSON.stringify(arr);\n        } else {\n          data[value.id] = JSON.stringify(value.value);\n        }\n      });\n    }\n\n    let newarray = [];\n\n    //Update 5/17/18 - removed below check as it was breaking clicking on an alert in alert group, closing alert and then immediately switching to a new alert group would cancel ajax call and majorly lag network traffic\n    if (this.state.loading == true) {\n      listQuery.abort();\n    }\n    listQuery = $.ajax({\n      type: \"GET\",\n      url: \"/scot/api/v2/\" + this.state.type,\n      data: data,\n      traditional: true,\n      success: function(response) {\n        datasource = response;\n        $.each(\n          datasource.records,\n          function(key, value) {\n            newarray[key] = {};\n            $.each(\n              value,\n              function(num, item) {\n                if (num == \"sources\" || num == \"source\") {\n                  if (item != undefined) {\n                    let sourcearr = item.join(\", \");\n                    newarray[key][\"source\"] = sourcearr;\n                  }\n                } else if (num == \"tags\" || num == \"tag\") {\n                  if (item != undefined) {\n                    let tagarr = item.join(\", \");\n                    newarray[key][\"tag\"] = tagarr;\n                  }\n                } else {\n                  newarray[key][num] = item;\n                }\n                if (num == \"id\") {\n                  this.props.createCallback(item, this.reloadactive);\n                  newidsarray.push(item);\n                }\n              }.bind(this)\n            );\n            if (key % 2 == 0) {\n              newarray[key][\"classname\"] = \"table-row roweven\";\n            } else {\n              newarray[key][\"classname\"] = \"table-row rowodd\";\n            }\n          }.bind(this)\n        );\n\n        let totalPages = this.getPages(response.totalRecordCount); //get pages for list view\n\n        this.setState({\n          totalCount: response.totalRecordCount,\n          activepage: { page: pageNumber, limit: pageLimit },\n          objectarray: newarray,\n          loading: false,\n          idsarray: newidsarray,\n          totalPages: totalPages\n        });\n      }.bind(this),\n      error: function(data) {\n        if (!data.statusText == \"abort\") {\n          this.props.errorToggle(\"failed to get list data\", data);\n        }\n      }.bind(this)\n    });\n  };\n\n  exportCSV = () => {\n    let keys = [];\n    let columns = this.state.columns;\n    $.each(columns, function(key, value) {\n      keys.push(value);\n    });\n    let csv = \"\";\n    $(\".rt-tbody\")\n      .find(\".rt-tr\")\n      .each(function(key, value) {\n        let storearray = [];\n        $(value)\n          .find(\".rt-td\")\n          .each(function(x, y) {\n            let obj = $(y).text();\n            obj = obj.replace(/,/g, \"|\");\n            storearray.push(obj);\n          });\n        csv += storearray.join() + \"\\n\";\n      });\n    let result = keys.join() + \"\\n\";\n    csv = result + csv;\n    let data_uri = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(csv);\n    window.open(data_uri);\n  };\n\n  handleSort = (sortArr, clearall) => {\n    let newSortArr = [];\n\n    if (clearall === true) {\n      this.setState({ sort: [{ id: \"id\", desc: true }] });\n    } else {\n      for (let sortEach of sortArr) {\n        if (sortEach.id) {\n          newSortArr.push(sortEach);\n        }\n      }\n    }\n\n    this.setState({ sort: newSortArr });\n    this.getNewData(null, newSortArr, null);\n    let cookieName = \"listViewSort\" + this.props.type;\n    Cookies.setCookie(cookieName, JSON.stringify(newSortArr), 1000);\n  };\n\n  handleFilter = (filterObj, string, clearall, type) => {\n    let newFilterArr = [];\n    let _type = this.props.type;\n\n    if (type !== undefined) {\n      _type = type;\n    }\n\n    if (clearall === true) {\n      this.setState({ filter: newFilterArr });\n      return;\n    } else {\n      for (let filterEach of filterObj) {\n        if (filterEach.id) {\n          newFilterArr.push(filterEach);\n        }\n      }\n\n      this.setState({ filter: newFilterArr });\n\n      if (type === this.props.type || type === undefined) {\n        //Check if the type passed in matches the type displayed. If not, it's updating the filter for a future query in a different type. Undefined implies its the same type, so update\n        this.getNewData({ page: 0 }, null, newFilterArr);\n      }\n\n      let cookieName = \"listViewFilter\" + _type;\n      Cookies.setCookie(cookieName, JSON.stringify(newFilterArr), 1000);\n    }\n  };\n\n  titleCase = string => {\n    let newstring = string.charAt(0).toUpperCase() + string.slice(1);\n    return newstring;\n  };\n\n  createNewThing = () => {\n    let data;\n\n    if (this.props.type === \"signature\") {\n      data = JSON.stringify({\n        name: \"Name your Signature\",\n        status: \"disabled\"\n      });\n    } else if (this.props.type === \"guide\") {\n      data = JSON.stringify({\n        subject: \"ENTER A GUIDE NAME\",\n        applies_to: [\"documentation\"]\n      });\n    } else if (this.props.type === \"entity\") {\n      this.ToggleCreateEntity();\n      return;\n    } else {\n      data = JSON.stringify({ subject: \"No Subject\" });\n    }\n\n    $.ajax({\n      type: \"POST\",\n      url: \"/scot/api/v2/\" + this.props.type,\n      data: data,\n      success: function(response) {\n        this.selected(this.props.type, response.id);\n      }.bind(this),\n      error: function(data) {\n        this.props.errorToggle(\"failed to create new thing\", data);\n      }.bind(this)\n    });\n  };\n\n  handlePageChange = pageIndex => {\n    this.getNewData({ page: pageIndex });\n    let cookieName = \"listViewPage\" + this.props.type;\n    Cookies.setCookie(\n      cookieName,\n      JSON.stringify({ page: pageIndex, limit: this.state.activepage.limit })\n    );\n  };\n\n  handlePageSizeChange = (pageSize, pageIndex) => {\n    this.getNewData({ limit: pageSize, page: pageIndex });\n    let cookieName = \"listViewPage\" + this.props.type;\n    Cookies.setCookie(\n      cookieName,\n      JSON.stringify({ page: pageIndex, limit: pageSize })\n    );\n  };\n\n  getPages = count => {\n    let totalPages = Math.ceil((count || 1) / this.state.activepage.limit);\n    return totalPages;\n  };\n\n  handleRowSelection(state, rowInfo, column, instance) {\n    return {\n      onClick: event => {\n        if (this.state.preventClick !== true) {\n          if (this.state.id === rowInfo.row.id) {\n            return;\n          }\n          let scrollheight = this.state.scrollheight;\n          if (this.state.display == \"block\") {\n            scrollheight = \"30vh\";\n          }\n          if (this.state.type === \"task\") {\n            this.props.history.push(\n              \"/task/\" +\n                rowInfo.row.target_type +\n                \"/\" +\n                rowInfo.row.target_id +\n                \"/\" +\n                rowInfo.row.id\n            );\n          } else {\n            this.props.history.push(\n              \"/\" + this.state.type + \"/\" + rowInfo.row.id\n            );\n          }\n          this.setState({\n            alertPreSelectedId: 0,\n            scrollheight: scrollheight,\n            showSelectedContainer: true\n          });\n          return;\n        } else {\n          this.props.errorToggle(\n            \"Currently processing action(s). Please wait.\"\n          );\n        }\n      },\n      className: rowInfo.row.id === parseInt(this.props.id) ? \"selected\" : null\n    };\n  }\n}\n","import $ from \"jquery\";\nimport React, { Component } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport AddEntry from \"../components/add_entry.js\";\n\nexport default class ExportModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showEditor: false,\n      data: null,\n      responseSuccess: false,\n      emailField: []\n    };\n  }\n\n  componentWillMount() {\n    this.getData();\n  }\n\n  onBlur = event => {\n    let v = event.target.value;\n    if (v === \"\") {\n      return;\n    }\n    let emailArray = v.split(/[ ,]+/);\n    this.setState({ emailField: emailArray });\n  };\n\n  getData = () => {\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/prepexport/\" + this.props.type + \"/\" + this.props.id,\n      success: function(response) {\n        this.setState({ data: response });\n        this.setState({ leaveCatch: false, showEditor: true });\n      }.bind(this),\n      error: function(response) {\n        this.props.errorToggle(\n          \"Failed to get export data from server!\",\n          response\n        );\n      }.bind(this)\n    });\n  };\n\n  exportResponse = response => {\n    if (response === \"success\") {\n      this.setState({ showEditor: false, responseSuccess: true });\n    }\n  };\n\n  render() {\n    let disabled = false;\n    if (this.state.responseSuccess) {\n      disabled = true;\n    }\n    return (\n      <div>\n        <Modal\n          dialogClassName=\"links-modal\"\n          show={true}\n          onHide={this.props.exportToggle}\n        >\n          <Modal.Header closeButton={true}>\n            <Modal.Title>\n              Export {this.props.type} {this.props.id}\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div>\n              <label htmlFor=\"exampleInputEmail1\">Email addresses</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"email\"\n                aria-describedby=\"emailHelp\"\n                onBlur={this.onBlur}\n                placeholder=\"Enter emails (comma-separated)\"\n                disabled={disabled}\n              />\n            </div>\n            <br />\n            {this.state.showEditor ? (\n              <AddEntry\n                entryAction={\"Export\"}\n                exportResponse={this.exportResponse}\n                type={this.props.type}\n                targetid={this.props.id}\n                id={\"add_entry\"}\n                recipients={this.state.emailField}\n                addedentry={this.props.exportToggle}\n                content={this.state.data}\n                errorToggle={this.props.errorToggle}\n              />\n            ) : null}\n            {!this.state.showEditor && this.state.responseSuccess ? (\n              <PostResponse />\n            ) : null}\n            {!this.state.showEditor && !this.state.responseSuccess ? (\n              <i className=\"fa fa-spinner fa-spin fa-2x\" aria-hidden=\"true\" />\n            ) : null}\n          </Modal.Body>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nclass PostResponse extends Component {\n  render() {\n    return (\n      <div>\n        <i\n          className=\"fa fa-check\"\n          aria-hidden=\"true\"\n          style={{ color: \"green\" }}\n        />{\" \"}\n        Export Successful!\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport Modal from \"react-modal\";\nimport { Link } from \"react-router-dom\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nclass PromotedData extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showAllPromotedDataToolbar: false\n    };\n\n    this.showAllPromotedDataToggle = this.showAllPromotedDataToggle.bind(this);\n  }\n\n  showAllPromotedDataToggle() {\n    if (this.state.showAllPromotedDataToolbar === false) {\n      this.setState({ showAllPromotedDataToolbar: true });\n    } else {\n      this.setState({ showAllPromotedDataToolbar: false });\n    }\n  }\n\n  render() {\n    let promotedFromType = null;\n    let fullarr = [];\n    let shortarr = [];\n    let shortforlength = 3;\n\n    if (this.props.type === \"event\") {\n      promotedFromType = \"alert\";\n    } else if (this.props.type === \"incident\") {\n      promotedFromType = \"event\";\n    } else if ( this.props.type === \"intel\" ) {\n        promotedFromType = \"dispatch\";\n    } else if ( this.props.type === \"product\" ) {\n        promotedFromType = \"intel\";\n    }\n\n    //makes large array for modal\n    for (let i = 0; i < this.props.data.length; i++) {\n      if (i > 0) {\n        fullarr.push(<span> , </span>);\n      }\n      let link = \"/\" + promotedFromType + \"/\" + this.props.data[i];\n      fullarr.push(\n        <span key={this.props.data[i]}>\n          <Link to={link}>{this.props.data[i]}</Link>\n        </span>\n      );\n    }\n    //makes small array for quick display in header\n    if (this.props.data.length < 3) {\n      shortforlength = this.props.data.length;\n    }\n    for (let i = 0; i < shortforlength; i++) {\n      if (i > 0) {\n        shortarr.push(<div> , </div>);\n      }\n      let link = \"/\" + promotedFromType + \"/\" + this.props.data[i];\n      shortarr.push(\n        <div key={this.props.data[i]}>\n          <Link to={link}>{this.props.data[i]}</Link>\n        </div>\n      );\n    }\n    if (this.props.data.length > 3) {\n      shortarr.push(\n        <div onClick={this.showAllPromotedDataToggle}>\n          ,<a href=\"javascript:;\">...more</a>\n        </div>\n      );\n    }\n    return (\n      <td>\n        <span id=\"promoted_from\" style={{ display: \"flex\" }}>\n          {shortarr}\n        </span>\n        {this.state.showAllPromotedDataToolbar ? (\n          <Modal\n            isOpen={true}\n            onRequestClose={this.showAllPromotedDataToggle}\n            style={customStyles}\n          >\n            <div className=\"modal-header\">\n              <img\n                src=\"images/close_toolbar.png\"\n                className=\"close_toolbar\"\n                alt=\"\"\n                onClick={this.showAllPromotedDataToggle}\n              />\n              <h3 id=\"myModalLabel\">Promoted From</h3>\n            </div>\n            <div className=\"modal-body promoted-from-full\">{fullarr}</div>\n            <div className=\"modal-footer\">\n              <Button\n                id=\"cancel-modal\"\n                onClick={this.showAllPromotedDataToggle}\n              >\n                Close\n              </Button>\n            </div>\n          </Modal>\n        ) : null}\n      </td>\n    );\n  }\n}\n\nexport default PromotedData;\n","import React from \"react\";\nimport $ from \"jquery\";\nimport SelectedHeader from \"./selected_header\"\n\nexport default class SelectedContainer extends React.Component {\n    render = () => {\n        let datarows = [];\n        datarows.push(\n            <SelectedHeader\n                key={this.props.id}\n                id={this.props.id}\n                type={this.props.type}\n                toggleEventDisplay={this.props.viewEvent}\n                taskid={this.props.taskid}\n                alertPreSelectedId={this.props.alertPreSelectedId}\n                handleFilter={this.props.handleFilter}\n                errorToggle={this.props.errorToggle}\n                history={this.props.history}\n                form={this.props.form}\n                createCallback={this.props.createCallback}\n                removeCallback={this.props.removeCallback}\n                togglePreventClick={this.props.togglePreventClick}\n            />\n        );\n        let width = \"100%\";\n        if ($(\"#list-view\")[0] !== undefined) {\n            width = \"calc(100% - \" + $(\"#list-view\").width() + \"px)\";\n        }\n        return (\n            <div\n                id=\"main-detail-container\"\n                className=\"entry-container\"\n                style={{ width: width, position: \"relative\" }}\n                tabIndex=\"3\"\n            >\n                {datarows}\n            </div>\n        );\n    };\n}\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField'\nimport { Person, Group } from '@material-ui/icons'\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport axios from 'axios'\nimport Typography from '@material-ui/core/Typography';\nimport { withSnackbar } from 'notistack';\nimport { WithContext as ReactTags } from 'react-tag-input';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\n\nconst styles = theme => ({\n  textField: {\n    marginLeft: '-8px',\n    marginRight: theme.spacing.unit,\n  },\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  textInput: {\n    backgroundColor: 'white',\n    color: 'black'\n  }\n});\n\nconst initstate = {\n  // ischecked: false,\n  username: \"\",\n  fullname: \"\",\n  password: \"\",\n  description: \"\",\n  name: \"\",\n  id: null,\n  suggestions: [],\n  groups: [],\n  active: 0,\n}\n\n\nclass UserGroupFormComponent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = initstate;\n  }\n\n\n  componentDidMount() {\n    this.formatGroups();\n    if (this.props.editObject) {\n      if (this.props.type === 'user') {\n        this.setState(\n          {\n            username: this.props.editObject.username,\n            fullname: this.props.editObject.fullname,\n            password: this.props.editObject.password,\n            id: this.props.editObject.id,\n            active: this.props.editObject.active,\n            groups: this.props.editObject.groups\n          }\n        )\n      }\n      else if (this.props.type === 'group') {\n        this.setState(\n          {\n            name: this.props.editObject.name,\n            description: this.props.editObject.description,\n            id: this.props.editObject.id,\n          }\n        )\n      }\n    }\n  }\n\n  formatGroups = () => {\n    if (this.props.groups.length > 0) {\n      let allgroups = [];\n      this.props.groups.forEach(function (element) {\n        let group = {};\n        group['id'] = element.name\n        group['text'] = element.name;\n        allgroups.push(group)\n      });\n      this.setState({ suggestions: allgroups })\n    }\n  }\n\n\n  resetState = () => {\n    this.setState(initstate)\n  }\n\n  checkBlankInputs = (type) => {\n    let bool = false;\n    if (type === 'user') {\n      if (this.state.username !== '' && this.state.fullname !== '' && this.state.password !== '') {\n        bool = true;\n      }\n    } else {\n      if (this.state.name !== '' && this.state.description !== '') {\n        bool = true\n      }\n    }\n    return bool\n  }\n\n  buildDataObj = (type) => {\n    let obj = {}\n    if (type === 'user') {\n      obj['username'] = this.state.username;\n      obj['fullname'] = this.state.fullname;\n      obj['password'] = this.state.password;\n      obj['groups'] = this.state.groups\n      obj['active'] = this.state.active ? 1 : 0\n    } else if (type === 'group') {\n      obj['name'] = this.state.name;\n\n      obj['description'] = this.state.description\n    }\n    return obj\n  }\n\n  handleGroups = (groups) => {\n    const { enqueueSnackbar, type } = this.props;\n    if (groups.length > 0) {\n      let newgroups = [];\n      groups.forEach(function (element) {\n        newgroups.push(element.id)\n      })\n      this.setState({ groups: newgroups });\n    } else {\n      enqueueSnackbar(`Error handling groups  ${type}`, { variant: 'error' });\n    }\n  }\n\n\n  handlePUT = () => {\n    const { enqueueSnackbar, type } = this.props;\n    let obj = this.buildDataObj(type);\n    if (this.checkBlankInputs(type)) {\n      axios.put(`/scot/api/v2/${type}/${this.state.id}`, obj)\n        .then(function (response) {\n          enqueueSnackbar(`Successfully updated ${type}.`, { variant: 'success' })\n          this.resetState();\n          this.props.fetchData(type)\n          this.props.handleClose();\n        }.bind(this))\n        .catch(function (error) {\n          // handle error\n          enqueueSnackbar(`Failed updating ${type}`, { variant: 'error' });\n        });\n    }\n  }\n\n  handlePOST = () => {\n    const { enqueueSnackbar, type } = this.props;\n    let obj = this.buildDataObj(type);\n    if (this.checkBlankInputs(type)) {\n      axios.post(`/scot/api/v2/${type}/`, obj)\n        .then(function (response) {\n          console.log(response);\n          enqueueSnackbar(`Successfully added ${type}.`, { variant: 'success' })\n          this.resetState();\n          this.props.fetchData(type)\n          this.props.handleClose();\n        }.bind(this))\n        .catch(function (error) {\n          // handle error\n          enqueueSnackbar(`Failed creating ${type}`, { variant: 'error' });\n          console.log(error);\n        });\n    }\n  }\n\n  handleChange = (event, value) => {\n    if (event.nativeEvent.type === 'input') {\n      let newval = event.target.value;\n      this.setState({ [event.target.id]: newval })\n    } else if (event.nativeEvent.type === 'click') {\n      if (event.target.type === 'checkbox') {\n        this.setState({ [event.target.value]: value })\n      }\n    } else {\n      this.setState({ [event.target.name]: value.props.value })\n    }\n  };\n\n\n  render() {\n    const { classes, onClose, selectedValue, type, ...other } = this.props;\n\n    return (\n      <div>\n        <Card className={classes.card}>\n          <CardContent>\n            {this.props.editObject ?\n              <Typography variant=\"h5\" component=\"h2\">Edit {this.props.type} <b>{this.props.editObject.username} </b></Typography> :\n              <Typography variant=\"h5\" component=\"h2\">Create {this.props.type} </Typography>\n            }\n            {this.props.type === 'group' ?\n              <div>\n                <TextField\n                  id=\"name\"\n                  label=\"Group Name\"\n                  value={this.state.name}\n                  onChange={this.handleChange}\n                  variant=\"outlined\"\n                  helperText=\"Enter name of group\"\n                  fullWidth\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  style={{ marginTop: 8, marginBottom: 8 }}\n                />\n                <br />\n                <TextField\n                  id=\"description\"\n                  label=\"Description\"\n                  value={this.state.description}\n                  onChange={this.handleChange}\n                  variant=\"outlined\"\n                  helperText=\"Enter description for group\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n\n                  fullWidth\n                  style={{ marginTop: 8, marginBottom: 8 }}\n                />\n              </div>\n              :\n              <div>\n                <TextField\n                  id=\"username\"\n                  label=\"Username\"\n                  value={this.state.username}\n                  onChange={this.handleChange}\n                  variant=\"outlined\"\n                  helperText=\"Enter a valid username\"\n                  fullWidth\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  style={{ marginTop: 8, marginBottom: 8 }}\n                /><br />\n                <TextField\n                  id=\"fullname\"\n                  label=\"Full Name\"\n                  value={this.state.fullname}\n                  onChange={this.handleChange}\n                  variant=\"outlined\"\n                  helperText=\"Provide your full name\"\n                  fullWidth\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  style={{ marginTop: 8, marginBottom: 8 }}\n                /><br />\n                <TextField\n                  id=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  helperText=\"Enter a valid password\"\n                  value={this.state.password}\n                  onChange={this.handleChange}\n                  fullWidth\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  style={{ marginTop: 8, marginBottom: 8 }}\n                />\n                <br />\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={this.state.active}\n                      onChange={this.handleChange}\n                      value=\"active\"\n                    />\n                  }\n                  label=\"Active?\"\n                />\n                <br />\n                <b>Groups</b>\n                <GroupSelection editObject={this.props.editObject} handleGroups={this.handleGroups} id={this.state.id} suggestions={this.state.suggestions} />\n                <br />\n              </div>\n            }\n            <br />\n          </CardContent>\n          <CardActions>\n            {this.props.editObject ?\n              <div style={{ marginLeft: 350, marginBottom: 5 }}>\n                <Button style={{ marginRight: 5 }} variant=\"contained\" onClick={this.props.handleClose} className={classes.button}>\n                  Cancel\n              </Button>\n                <Button variant=\"contained\" color=\"secondary\" onClick={this.handlePUT} className={classes.button}>\n                  Submit\n              </Button>\n              </div> :\n              <div style={{ marginLeft: 350, marginBottom: 5 }}>\n                <Button style={{ marginRight: 5 }} variant=\"contained\" onClick={this.props.handleClose} className={classes.button}>\n                  Cancel\n              </Button>\n                <Button variant=\"contained\" color=\"secondary\" onClick={this.handlePOST} className={classes.button}>\n                  Submit\n                </Button>\n              </div>\n            }\n          </CardActions>\n        </Card>\n      </div>\n    );\n  }\n}\n\n\nclass GroupSelectionComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      groups: [],\n    };\n\n  }\n\n  componentDidMount() {\n    if (this.props.editObject) {\n      let usersgroups = [];\n      this.props.editObject.groups.forEach(function (element) {\n        let group = {};\n        group['id'] = element\n        group['text'] = element;\n        usersgroups.push(group)\n      })\n      this.setState({ groups: usersgroups });\n    }\n\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state !== nextState) {\n      this.props.handleGroups(nextState.groups)\n      return true\n    } else {\n      return false\n    }\n  }\n\n  mapUsersGroupsToTags = () => {\n    axios.get(`/scot/api/v2/user?id=${this.props.id}`)\n      .then(response => {\n        const usersgroups = [];\n        if (response.data.totalRecordCount > 0) {\n          response.data.records.forEach(function (element) {\n            let group = {};\n            group['id'] = element.name\n            group['text'] = element.name;\n            usersgroups.push(group)\n          })\n          this.setState({ groups: usersgroups });\n        } else {\n        }\n      })\n  }\n\n  handleDelete = (i) => {\n    const { groups } = this.state;\n    this.setState({\n      groups: groups.filter((tag, index) => index !== i),\n    });\n  }\n\n  handleAddition = (tag) => {\n    const { enqueueSnackbar } = this.props;\n    if (this.checkValidGroup(tag['id'])) {\n      let newgroups = this.state.groups;\n      newgroups.push(tag);\n      this.setState({ groups: newgroups });\n      this.props.handleGroups(this.state.groups)\n    }\n    else {\n      enqueueSnackbar(`Invalid group. Please add an existing group`);\n    }\n  }\n\n  checkValidGroup(group) {\n    const { suggestions } = this.props;\n    var found = suggestions.some(function (el) {\n      return el.id === group;\n    });\n    if (found) {\n      return true\n    } else {\n      return false;\n    }\n  }\n\n\n  render() {\n    const { groups } = this.state;\n    const { suggestions } = this.props;\n    const { classes } = this.props;\n    return (\n      <div>\n        <ReactTags\n          classNames={{\n            tagInput: 'tagInputClass',\n            tagInputField: 'tagInputFieldClass',\n          }}\n          placeholder={\"Add a new group\"}\n          inline={false}\n          tags={groups}\n          suggestions={suggestions}\n          handleDelete={this.handleDelete}\n          handleAddition={this.handleAddition}\n        />\n      </div>\n    );\n  }\n}\n\nconst GroupSelection = withStyles(styles)(GroupSelectionComponent)\nconst UserGroupForm = withSnackbar(withStyles(styles)(UserGroupFormComponent));\nexport { GroupSelection, UserGroupForm }\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios'\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nconst styles = theme => ({\n  card: {\n    minWidth: 400,\n    marginBottom: 20\n  },\n});\n\nclass AreYouSure extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletetext: \"\"\n    }\n  }\n\n  handleDelete = () => {\n    const { enqueueSnackbar, type, id } = this.props;\n    let url = `/scot/api/v2/${type}/${id}`;\n    axios.delete(url)\n      .then(function () {\n        enqueueSnackbar(`Successfully deleted ${type}.`, { variant: 'success' });\n        this.props.fetchData(type)\n        this.props.handleClose();\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n        enqueueSnackbar(`Failed deleting ${type}.`, { variant: 'error' });\n        this.props.handleClose();\n      });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div>\n        <Card className={classes.card}>\n          <CardContent>\n            <Typography variant=\"h5\" component=\"h2\">Are you sure you want to delete {this.props.type} {this.props.text}?</Typography>\n            <br />\n            <div>\n              <Button style={{ marginLeft: 5, backgroundColor: 'red', color: 'white' }} onClick={() => this.handleDelete(this.props.id)} variant=\"contained\" >Yes</Button>\n              <Button style={{ marginLeft: 5 }} onClick={this.props.handleClose} variant=\"contained\" >Cancel</Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default withSnackbar(withStyles(styles)(AreYouSure));","import React from 'react'\nimport ReactTable from 'react-table'\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios'\nimport AddIcon from '@material-ui/icons/Add';\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport { UserGroupForm } from './usergroupform'\nimport { Person, Group } from '@material-ui/icons'\nimport DeleteRoundedIcon from '@material-ui/icons/DeleteRounded';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport AreYouSure from './areyousure'\nimport Paper from '@material-ui/core/Paper';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { withSnackbar } from 'notistack';\n\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit * 2,\n  },\n});\n\nclass UserGroupContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      userdata: [],\n      groupdata: [],\n      showModal: false,\n      editObject: null,\n      id: null,\n      type: \"\",\n      areYouSure: false,\n      updateId: null,\n    }\n  }\n\n  edit = (type, id) => {\n    let url = `/scot/api/v2/${type}?id=${id}`;\n    axios.get(url)\n      .then(function (response) {\n        this.setState({ editObject: response.data.records[0], type: type, showModal: true });\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { enqueueSnackbar } = this.props;\n    if (prevState.userdata !== this.state.userdata) {\n      if (this.state.updateId !== null) {\n        const user = this.getUserObject(this.state.updateId)\n        axios.put(`/scot/api/v2/user/${this.state.updateId}`, { active: user.active })\n          .then(function (response) {\n            enqueueSnackbar(`Successfully updated user.`, { variant: 'success' })\n            this.setState({ updateId: null })\n          }.bind(this))\n          .catch(function (error) {\n\n            enqueueSnackbar(`Failed updating user`, { variant: 'error' });\n          });\n      }\n    }\n  }\n\n\n\n  showUserDialog = () => {\n    this.setState({ showModal: true, type: 'user' })\n  }\n\n  showGroupDialog = () => {\n    this.setState({ showModal: true, type: 'group' })\n  }\n\n  handleUserClose = () => {\n    this.setState({ showModal: false });\n  };\n\n  componentDidMount() {\n    this.fetchData('user')\n    this.fetchData('group')\n  }\n\n  handleClose = (type) => {\n    this.setState({ showModal: false, id: null, type: \"\", editObject: null });\n  };\n\n  handleListItemClick = value => {\n    this.props.onClose(value);\n  };\n\n  getColumns = (type) => {\n    let columns = []\n    if (type === 'user') {\n      columns = [\n        {\n          Header: 'ID',\n          accessor: 'id',\n          width: 50\n        },\n        {\n          Header: 'Full Name',\n          accessor: 'fullname',\n          width: 90\n        },\n        {\n          Header: 'Username',\n          accessor: 'username',\n          width: 70\n        },\n        {\n          Header: 'Active',\n          id: 'active',\n          accessor: row => (\n            <center>\n              {row.active === 1 ?\n                <div>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        onChange={() => this.handleActiveToggle(row.id)}\n                        checked={row.active}\n                        value={row.active}\n                      />\n                    }\n                  />\n                </div> :\n                <div>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        onChange={() => this.handleActiveToggle(row.id)}\n                        checked={row.active}\n                        value={row.active} />\n                    }\n                  />\n                </div>}\n            </center>),\n          width: 80\n        },\n        {\n          Header: 'Edit / Delete',\n          id: 'edit',\n          accessor: row => (\n            <center>\n              <Button size=\"small\" style={{ marginLeft: 5 }} onClick={() => this.edit(type, row.id)} variant=\"contained\">Edit</Button>\n              <Button size=\"small\" style={{ marginLeft: 5 }} onClick={() => this.toggleAreYouSure(row.id, type)} color=\"secondary\" variant=\"contained\" ><DeleteRoundedIcon /></Button>\n            </center>),\n          width: 200\n        },\n\n      ]\n    } else if (type === 'group') {\n      columns = [\n        {\n          Header: 'ID',\n          accessor: 'id',\n          width: 50\n        },\n        {\n          Header: 'Group Name',\n          accessor: 'name',\n          width: 100\n        },\n        {\n          Header: 'Group Description',\n          accessor: 'description',\n          width: 100\n        },\n        {\n          Header: 'Edit / Delete',\n          id: 'edit',\n          accessor: row => (\n            <center>\n              <Button size=\"small\" style={{ marginLeft: 5 }} onClick={() => this.edit(type, row.id)} variant=\"contained\">Edit</Button>\n              <Button size=\"small\" style={{ marginLeft: 5 }} onClick={() => this.toggleAreYouSure(row.id, type)} color=\"secondary\" variant=\"contained\" ><DeleteRoundedIcon /></Button>\n            </center>),\n          width: 200\n        },\n      ]\n    }\n    return columns\n  }\n\n  setUserGroupResults = (type, data) => {\n    if (type === 'user') {\n      this.setState({ userdata: data.records })\n    } else if (type === 'group') {\n      this.setState({ groupdata: data.records })\n    }\n  }\n\n  toggleAreYouSure = (id, type) => {\n    this.setState({ areYouSure: true, id: id, type: type })\n  }\n\n  handleAreYouSureClose = () => {\n    this.setState({ areYouSure: false });\n  }\n\n  fetchData = (type) => {\n    axios.get(`/scot/api/v2/${type}?limit=0`)\n      .then(({ data }) => (\n        this.setUserGroupResults(type, data)\n      ));\n  }\n\n  handleActiveToggle = (id) => {\n    let user = this.getUserObject(id);\n    this.setState({\n      userdata: this.state.userdata.map(el => (el.id === id ?\n        { ...el, active: !el.active, } : el)),\n      updateId: user.id\n    });\n\n  }\n\n  getUserObject = id => {\n    let user = this.state.userdata.filter(user => id === user.id ? user : null);\n    return user[0];\n  }\n  render() {\n    const { classes, ...other } = this.props;\n    const { groupdata, userdata } = this.state;\n    const pagesize = 10\n\n    let showuserpagination = userdata.length > pagesize ? true : false\n    let showgrouppagination = groupdata.length > pagesize ? true : false\n\n    return (\n      <div className={classes.root}>\n        <br />\n        <Paper className={classes.paper} elevation={1}>\n          <Typography variant=\"h5\" component=\"h3\">\n            Please be advised\n            </Typography>\n          <Typography component=\"p\">\n            In order to properly add a user, they must belong to a group. A user is added to a group at time of creatino or upon 'Edit'. Groups MUST include the string 'scot' in the name or they will be ignored\n            by the system. You must activate a user in order to begin logging in as the user.\n            </Typography>\n        </Paper>\n        <br />\n        <Grid container spacing={8}>\n          <Grid item xs={12} sm={6}>\n            <Typography variant=\"h4\" gutterBottom>\n              Users <Person />\n            </Typography>\n            <div style={{ display: 'flex', flexDirection: 'row' }}>\n              <Typography variant=\"h5\" gutterBottom>\n                Add User\n              </Typography>\n              <Fab style={{ marginLeft: 5, marginBottom: 10, marginTop: -6 }} size=\"small\" onClick={this.showUserDialog} color=\"secondary\" aria-label=\"Add\" >\n                <AddIcon />\n              </Fab>\n            </div>\n            <ReactTable\n              data={this.state.userdata}\n              columns={this.getColumns('user')}\n              pageSize={this.state.userdata.length}\n              defaultPageSize={10}\n              showPagination={showuserpagination}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <Typography variant=\"h4\" gutterBottom>\n              Groups <Group />\n            </Typography>\n            <div style={{ display: 'flex', flexDirection: 'row' }}>\n              <Typography variant=\"h5\" gutterBottom>\n                Add Group\n            </Typography>\n              <Fab style={{ marginLeft: 5, marginBottom: 10, marginTop: -6 }} size=\"small\" onClick={this.showGroupDialog} color=\"secondary\" aria-label=\"Add\" >\n                <AddIcon />\n              </Fab>\n            </div>\n            <ReactTable\n              data={this.state.groupdata}\n              columns={this.getColumns('group')}\n              pageSize={this.state.groupdata.length}\n              defaultPageSize={10}\n              showPagination={showgrouppagination}\n            />\n          </Grid>\n        </Grid>\n        <Dialog open={this.state.showModal} onClose={this.handleClose} aria-labelledby=\"simple-dialog-title\" >\n          <UserGroupForm id={this.state.id} groups={this.state.groupdata} type={this.state.type} editObject={this.state.editObject} handleClose={this.handleClose} fetchData={(type) => { this.fetchData(type) }} />\n        </Dialog>\n        {this.state.areYouSure ?\n          <Dialog open={this.state.areYouSure} onClose={this.handleAreYouSureClose} aria-labelledby=\"simple-dialog-title\" {...other}>\n            <AreYouSure type={this.state.type} fetchData={(type) => { this.fetchData(type) }} handleClose={this.handleAreYouSureClose} id={this.state.id}></AreYouSure>\n          </Dialog> : null\n        }\n      </div>\n    )\n  }\n}\n\nexport default withSnackbar(withStyles(styles)(UserGroupContainer));","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Panel from 'react-bootstrap/lib/Panel.js';\nimport Button from 'react-bootstrap/lib/Button.js';\nimport Modal from 'react-bootstrap/lib/Modal.js';\nimport $ from 'jquery'\n\nexport class Api extends React.Component {\n  constructor(props) {\n    super(props);\n    this.GetKeys = this.GetKeys.bind(this);\n    this.GetAvailableGroups = this.GetAvailableGroups.bind(this);\n    this.CreateKey = this.CreateKey.bind(this);\n    this.DeleteKey = this.DeleteKey.bind(this);\n    this.GroupChange = this.GroupChange.bind(this);\n    this.ToggleActiveStatus = this.ToggleActiveStatus.bind(this);\n    this.state = {\n      Api: null,\n      keys: null,\n      availableGroups: null,\n    };\n  }\n\n  GetKeys() {\n    $.ajax({\n      type: 'get',\n      url: '/scot/api/v2/apikey',\n      success: function (data) {\n        this.setState({ keys: data.records });\n      }.bind(this),\n      error: function () {\n        this.setState({ keys: 'failed to get keys' });\n      }.bind(this),\n    });\n  }\n\n  GetAvailableGroups() {\n    $.ajax({\n      type: 'get',\n      url: '/scot/api/v2/group?limit=0',\n      success: function (data) {\n        this.setState({ availableGroups: data.records });\n      }.bind(this),\n    });\n  }\n\n  CreateKey() {\n    $.ajax({\n      type: 'post',\n      url: '/scot/api/v2/apikey',\n      success: function () {\n        this.GetKeys();\n      }.bind(this),\n    });\n  }\n\n  DeleteKey(e) {\n    $.ajax({\n      type: 'delete',\n      url: `/scot/api/v2/apikey/${e.target.id}`,\n      success: function () {\n        this.GetKeys();\n      }.bind(this),\n    });\n  }\n\n  GroupChange(id, newGroup) {\n    $.ajax({\n      type: 'PUT',\n      url: `/scot/api/v2/apikey/${id}`,\n      data: JSON.stringify({ groups: newGroup }),\n      contentType: 'application/json; charset=UTF-8',\n      success: function () {\n        this.GetKeys();\n      }.bind(this),\n    });\n  }\n\n  ToggleActiveStatus(id, newStatus) {\n    $.ajax({\n      type: 'PUT',\n      url: `/scot/api/v2/apikey/${id}`,\n      contentType: 'application/json; charset=UTF-8',\n      data: JSON.stringify({ active: newStatus }),\n      success: function () {\n        this.GetKeys();\n      }.bind(this),\n    });\n  }\n\n  componentDidMount() {\n    this.GetKeys();\n    this.GetAvailableGroups();\n  }\n\n  render() {\n    const keysArr = [];\n    if (this.state.keys != undefined) {\n      for (let i = 0; i < this.state.keys.length; i++) {\n        let keyActiveStatus;\n        let keyActiveStatusCss;\n        const keyGroups = [];\n        if (this.state.keys[i].active == 1) {\n          keyActiveStatus = <span style={{ color: 'green' }}>active</span>\n        }\n\n        else {\n          keyActiveStatus = <span style={{ color: 'red' }}>not active</span>\n        }\n        if (this.state.keys[i].groups != undefined) {\n          for (let j = 0; j < this.state.keys[i].groups.length; j++) {\n            keyGroups.push(<div>this.state.keys[i].groups[j]</div>);\n          }\n        }\n        keysArr.push(<div>\n          <div>\n            <div>{this.state.keys[i].apikey}</div>\n            <div>{this.state.keys[i].username}</div>\n            <span>Key is {keyActiveStatus}</span>\n            <span className='pull-right pointer'><i id={this.state.keys[i].id} className=\"fa fa-trash\" aria-hidden=\"true\" onClick={this.DeleteKey}></i></span>\n            <div>\n              <GroupModal id={this.state.keys[i].id} currentGroups={this.state.keys[i].groups} allGroups={this.state.availableGroups} GroupChange={this.GroupChange} ToggleActiveStatus={this.ToggleActiveStatus} keyActiveStatus={this.state.keys[i].active} keyActiveStatusCss={keyActiveStatusCss} />\n            </div>\n          </div>\n          <hr />\n        </div>);\n      }\n    }\n    return (\n      <div id='api' className='administration_api'>\n        <h1>API</h1>\n        <Panel bsStyle='info' header='Your api keys'>\n          {keysArr}\n        </Panel>\n\n        <Button bsStyle='success' onClick={this.CreateKey}>Create API Key</Button>\n      </div>\n    );\n  }\n}\n\nclass GroupModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.Open = this.Open.bind(this);\n    this.Close = this.Close.bind(this);\n    this.DeleteGroup = this.DeleteGroup.bind(this);\n    /* this.AddGroup = this.AddGroup.bind(this); */ // Removed as we don't add groups to an api key\n    this.ToggleActiveStatus = this.ToggleActiveStatus.bind(this);\n    this.state = {\n      showModal: false,\n    };\n  }\n\n  Open() {\n    this.setState({ showModal: true });\n  }\n\n  Close() {\n    this.setState({ showModal: false });\n  }\n\n  DeleteGroup(e) {\n    const newGroups = [];\n    for (const i of this.props.currentGroups) {\n      if (i != undefined) {\n        if (i != e.target.parentNode.textContent) {\n          newGroups.push(i);\n        }\n      }\n    }\n    this.props.GroupChange(this.props.id, newGroups);\n  }\n  /* Removed as we don't add groups to an api key\n  AddGroup (e) {\n      var newGroups = [];\n      for ( const i of this.props.currentGroups) {\n          if ( i != undefined ) {\n              if ( i != e.target.textContent ) {\n                  newGroups.push(i);\n              }\n          }\n      }\n      newGroups.push( e.target.textContent );\n      this.props.GroupChange(this.props.id, newGroups);\n  }\n  */\n  ToggleActiveStatus() {\n    let newStatus;\n    if (this.props.keyActiveStatus == 1) {\n      newStatus = 0;\n    } else {\n      newStatus = 1;\n    }\n    this.props.ToggleActiveStatus(this.props.id, newStatus);\n  }\n\n  render() {\n    // var allGroupArray = [];  //Removed as we don't add groups to an api key\n    const currentGroupArray = [];\n    const currentGroupArrayEdit = [];\n    // //Removed as we don't add groups to an api key\n    /* if ( this.props.allGroups ) {\n        for ( const i of this.props.allGroups ) {\n            allGroupArray.push( <Button id={this.props.id} onClick={this.AddGroup} bsSize='xsmall'>{i.name}</Button> );\n        }\n    } */\n    if (this.props.currentGroups) {\n      for (const j of this.props.currentGroups) {\n        currentGroupArrayEdit.push(<span className='tagButton'>{j}<i id={this.props.id} onClick={this.DeleteGroup} className='fa fa-times tagButtonClose'></i></span>);\n      }\n      for (const k of this.props.currentGroups) {\n        currentGroupArray.push(<span className='tagButton'>{k}</span>);\n      }\n    }\n    let keyStatus = this.props.keyActiveStatus === 1 ? 'active' : 'not active';\n    return (\n      <div>\n        Current Groups: {currentGroupArray}\n        <div>\n          <Button onClick={this.Open} bsSize='small'>Edit API key settings</Button>\n        </div>\n        <Modal show={this.state.showModal} onHide={this.Close}>\n          <Modal.Header closeButton>\n            <Modal.Title>Edit API key settings</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div>\n              <h4>Current Groups:</h4>\n              {currentGroupArrayEdit}\n            </div>\n            {/* <div>\n                            Click to add group:\n                            {allGroupArray}\n                        </div> */}\n            <hr />\n            <div>\n              Key is <span className={this.props.keyActiveStatusCss}>{keyStatus}</span>\n              <Button onClick={this.ToggleActiveStatus} bsSize='xsmall'>Toggle Active Status</Button>\n            </div>\n          </Modal.Body>\n        </Modal>\n      </div>\n    );\n  }\n}\n\n\n","import React, { PureComponent, Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { Modal, Button, ButtonGroup, Panel, FormControl, Form, Col } from 'react-bootstrap';\nimport ReactTable from 'react-table';\nimport { removeMarkedItems } from '../marker';\nimport Notification from 'react-notification-system';\nimport $ from 'jquery'\n\nconst ACTION_BUTTONS = {\n  READY: {\n    style: 'default',\n  },\n  LOADING: {\n    text: 'Processing...',\n    style: 'default',\n    disabled: true,\n  },\n  SUCCESS: {\n    text: 'Success!',\n    style: 'success',\n  },\n  ERROR: {\n    text: 'Error!',\n    style: 'danger',\n  },\n};\n\nexport class Undelete extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      allSelected: false,\n    };\n\n    this.handleTHeadCheckboxSelection = this.handleTHeadCheckboxSelection.bind(this);\n    this.handleRowSelection = this.handleRowSelection.bind(this);\n    this.handleCheckboxSelection = this.handleCheckboxSelection.bind(this);\n    this.getDeletedItems = this.getDeletedItems.bind(this);\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n\n    this.getDeletedItems();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n\n    const columns = [\n      {\n        Header: cell => {\n          return (\n            <div>\n              <div className='mark-checkbox'><i className={`fa fa${this.state.allSelected ? '-check' : ''}-square-o`} aria-hidden=\"true\"></i></div>\n\n            </div>\n          );\n        },\n        id: 'selected',\n        accessor: d => d.selected,\n        Cell: row => {\n          return (\n            <div>\n              <div className='mark-checkbox'><i className={`fa fa${row.row.selected ? '-check' : ''}-square-o`} aria-hidden=\"true\"></i></div>\n            </div>\n          );\n        },\n        maxWidth: 100,\n        filterable: false,\n      },\n      {\n        Header: 'Type',\n        accessor: 'type',\n        //id: 'target.type',\n        //column: 'type',\n        maxWidth: 150,\n        sortable: true,\n      },\n      {\n        Header: 'ID',\n        accessor: 'data.id',\n        id: 'data.id',\n        column: 'id',\n        maxWidth: 100,\n        sortable: true,\n      },\n      {\n        Header: 'Subject',\n        accessor: 'data.subject',\n        id: 'data.subject',\n        column: 'subject',\n        maxWidth: '100%',\n        sortable: true,\n      },\n      {\n        Header: 'Body',\n        accessor: 'data.body',\n        id: 'data.body',\n        column: 'body',\n        maxWidth: '100%',\n        sortable: true,\n      },\n\n    ];\n\n    let dataArr = [];\n    for (let key in this.state.data) {\n      dataArr.push(this.state.data[key]['data'])\n    }\n\n    return (\n      <div>\n\n        {this.state.data.length > 0 ?\n          <ReactTable\n            columns={columns}\n            data={this.state.data}\n            defaultPageSize={10}\n            getTdProps={this.handleCheckboxSelection}\n            getTheadThProps={this.handleTHeadCheckboxSelection}\n            getTrProps={this.handleRowSelection}\n            minRows={0}\n            noDataText='No deleted items were found.'\n            style={{\n              maxHeight: '60vh'\n            }}\n            filterable\n          />\n          :\n          <h3>No deleted items were found.</h3>\n        }\n\n        {this.state.data.length > 0 ? <Actions data={this.state.data} id={this.props.id} type={this.props.type} getDeletedItems={this.getDeletedItems} errorToggle={this.props.errorToggle} /> : null}\n      </div>\n    );\n  }\n\n  handleRowSelection(state, rowInfo, column) {\n    return {\n      onClick: event => {\n        let data = this.state.data;\n\n        for (let row of data) {\n          if (rowInfo.row['data.id'] == row.data.id && rowInfo.row.type == row.type) {\n            row.selected = true;\n          } else {\n            row.selected = false;\n          }\n        }\n\n        this.setState({ data: data, allSelected: false });\n        return;\n      },\n      style: {\n        background: rowInfo != undefined ? rowInfo.row.selected ? 'rgb(174, 218, 255)' : null : null,\n      }\n    };\n  }\n\n  handleCheckboxSelection(state, rowInfo, column) {\n    if (column.id == 'selected') {\n      return {\n        onClick: event => {\n          let data = this.state.data;\n\n          for (let row of data) {\n            if (rowInfo.row['data.id'] == row.data.id && rowInfo.row.type == row.type) {\n              if (row.selected) {\n                row.selected = !row.selected;\n              } else {\n                row.selected = true;\n              }\n              break;\n            }\n          }\n\n          this.setState({ data: data, allSelected: this.checkAllSelected(data) });\n          event.stopPropagation();\n          return;\n        }\n      };\n    } else {\n      return {};\n    }\n  }\n\n  handleTHeadCheckboxSelection(state, rowInfo, column, instance) {\n    if (column.id === 'selected') {\n      return {\n        onClick: event => {\n          let data = this.state.data;\n          let allSelected = !this.state.allSelected;\n\n          for (let row of data) {\n            for (let pageRow of state.pageRows) {\n              if (row.data.id == pageRow['data.id'] && row.data.type == pageRow['data.type']) {                 //compare displayed rows to rows in dataset and only select those\n                row.selected = allSelected;\n                break;\n              }\n            }\n          }\n\n          this.setState({ data: data, allSelected: allSelected });\n          return;\n        }\n      };\n    } else {\n      return {};\n    }\n  }\n\n  checkAllSelected(data) {\n    for (let row of data) {\n      if (!row.selected) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  getDeletedItems() {\n    $.ajax({\n      type: 'get',\n      url: '/scot/api/v2/deleted/?limit=0',\n      success: function (data) {\n        this.setState({ data: data.records });\n      }.bind(this),\n      error: function (data) {\n        console.log('unable to get deleted items');\n      }.bind(this),\n    });\n  }\n}\n\nclass Actions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      entry: false,\n      thing: false,\n      actionSuccess: false,\n      linkContextString: null,\n      linkPanel: false,\n      pendingDelete: false,\n\n      reparseButton: ACTION_BUTTONS.READY,\n      deleteButton: ACTION_BUTTONS.READY,\n      promoteButton: ACTION_BUTTONS.READY,\n    };\n\n    this.RemoveSelected = this.RemoveSelected.bind(this);\n    this.MoveEntry = this.MoveEntry.bind(this);\n    this.CopyEntry = this.CopyEntry.bind(this);\n    this.EntryAjax = this.EntryAjax.bind(this);\n    this.Link = this.Link.bind(this);\n    this.LinkAjax = this.LinkAjax.bind(this);\n    this.Reparse = this.Reparse.bind(this);\n    this.ReparseAjax = this.ReparseAjax.bind(this);\n    this.Promote = this.Promote.bind(this);\n    this.PromoteAjax = this.PromoteAjax.bind(this);\n    this.ToggleActionSuccess = this.ToggleActionSuccess.bind(this);\n    this.ExpandLinkToggle = this.ExpandLinkToggle.bind(this);\n    this.LinkContextChange = this.LinkContextChange.bind(this);\n    this.deleteCallback = this.deleteCallback.bind(this);\n    this.StartDelete = this.StartDelete.bind(this);\n    this.Restore = this.Restore.bind(this);\n    this.Purge = this.Purge.bind(this);\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  deleteCallback(success) {\n    if (success === true) {\n      this.RemoveSelected();\n    }\n\n    this.setState({\n      pendingDelete: false,\n    });\n  }\n\n  render() {\n    let buttons = [];\n    let entry = false, thing = false, alert = true;\n\n    let numSelected = 0;\n    for (let key of this.props.data) {\n      if (key.type && key.selected) {\n        numSelected++;\n\n        if (key.type === 'entry') {\n          entry = true;\n        } else {\n          thing = true;\n        }\n\n        if (key.type !== 'alert') {\n          alert = false;\n        }\n      }\n    }\n\n    const addToEvent = numSelected != 0 && alert && this.props.type === 'event';\n\n    const { reparseButton, deleteButton, promoteButton, pendingDelete } = this.state;\n\n    let deleteThings = null;\n    if (pendingDelete) {\n      deleteThings = this.props.data.filter(thing => thing.selected)\n        .map(thing => { return { type: thing.type, id: thing.id }; });\n    }\n\n\n    return (\n      <div>\n        <Notification ref='notificationSystem' />\n        {this.state.actionSuccess ?\n          <div>\n            <Button bsStyle='success' onClick={this.props.getDeletedItems}>Action Successful! Click to reload data.</Button>\n          </div>\n          :\n          <div style={{ display: 'grid' }}>\n            <div>\n              <h4 style={{ float: 'left' }}></h4> {this.props.data.length > 0 ? <h4 style={{ float: 'left' }}>Select a Deleted Object</h4> : null}\n              <ButtonGroup style={{ float: 'right' }}>\n                <Button bsStyle='success' onClick={this.Restore}>Restore</Button>\n                <Button bsStyle='danger' onClick={this.Purge}>Purge</Button>\n              </ButtonGroup>\n            </div>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  Restore(e) {\n    for (let key of this.props.data) {\n      if (key.selected) {\n        $.ajax({\n          type: 'put',\n          url: '/scot/api/v2/deleted/' + key.id,\n          data: JSON.stringify({ 'status': 'undelete' }),\n          success: function () {\n            let notification = this.refs.notificationSystem;\n            notification.addNotification({\n              message: 'Successfully Restored',\n              level: 'success',\n              autoDismiss: 0,\n            });\n            this.props.getDeletedItems();\n          }.bind(this),\n          error: function () {\n            console.log('failed to restore items');\n          }.bind(this),\n        });\n      }\n    }\n  }\n\n  Purge(e) {\n    for (let key of this.props.data) {\n      if (key.selected) {\n        $.ajax({\n          type: 'delete',\n          url: '/scot/api/v2/deleted/' + key.id,\n          success: function () {\n            let notification = this.refs.notificationSystem;\n            notification.addNotification({\n              message: 'Successfully Purged',\n              level: 'success',\n              autoDismiss: 0,\n            });\n            this.props.getDeletedItems();\n          }.bind(this),\n          error: function () {\n            console.log('failed to purge items');\n          }.bind(this)\n        });\n      }\n    }\n  }\n\n  LinkContextChange(e) {\n    this.setState({ linkContextString: e.target.value });\n  }\n\n  ExpandLinkToggle(newState) {\n    if (newState == true || newState == false) {\n      this.setState({ linkPanel: newState, linkContextString: '' });\n    } else {\n      let linkPanel = !this.state.linkPanel;\n      this.setState({ linkPanel: linkPanel, linkContextString: '' });\n    }\n  }\n\n  RemoveSelected() {\n    for (let key of this.props.data) {\n      if (key.selected) {\n        removeMarkedItems(key.type, key.id);\n      }\n    }\n\n    //update marked items after removal\n    this.props.getDeletedItems();\n\n    //turn off the action success buttons after removal\n    if (this.state.actionSuccess) {\n      this.setState({ actionSuccess: false });\n    }\n  }\n\n  StartDelete() {\n    this.setState({\n      pendingDelete: true,\n    });\n  }\n\n  MoveEntry() {\n    for (let key of this.props.data) {\n      if (key.selected && key.type == 'entry') {\n        this.EntryAjax(key.id, true);\n      }\n    }\n  }\n\n  CopyEntry() {\n    for (let key of this.props.data) {\n      if (key.selected && key.type == 'entry') {\n        this.EntryAjax(key.id, false);\n      }\n    }\n  }\n\n  Link() {\n\n\n    for (let key of this.props.data) {\n      if (key.selected) {\n\n        let arrayToLink = [];\n        let obj = {};\n        let currentobj = {};\n\n        //assign new thing to link\n        obj.id = parseInt(key.id);\n        obj.type = key.type;\n\n        //assign current thing to link to\n        currentobj.id = parseInt(this.props.id);\n        currentobj.type = this.props.type;\n\n        arrayToLink.push(obj);\n        arrayToLink.push(currentobj);\n\n        this.LinkAjax(arrayToLink);\n      }\n\n      /*\n          if ( arrayToLink.length > 0 ) {\n          //add current thing to be linked to\n          let obj = {};\n          obj.id = parseInt( this.props.id );\n          obj.type = this.props.type;\n\n          arrayToLink.push( obj );\n          this.LinkAjax( arrayToLink );\n      }*/\n    }\n\n\n  }\n\n  Reparse() {\n    this.setState({\n      reparseButton: ACTION_BUTTONS.LOADING,\n    });\n\n    $.when(...this.props.data.filter((thing) => thing.selected)\n      .map((thing) => {\n        return this.ReparseAjax(thing);\n      })\n    ).then(\n      // Success\n      () => {\n        this.setState({\n          reparseButton: ACTION_BUTTONS.SUCCESS,\n        });\n      },\n      // Failure\n      (error) => {\n        console.error(error);\n        this.setState({\n          reparseButton: ACTION_BUTTONS.ERROR,\n        });\n        this.props.errorToggle('error reparsing', error);\n      }\n    ).always(() => {\n      setTimeout(() => {\n        this.setState({\n          reparseButton: ACTION_BUTTONS.READY,\n        });\n      }, 2000);\n    });\n  }\n\n  ReparseAjax(thing) {\n    return $.ajax({\n      type: 'put',\n      url: '/scot/api/v2/' + thing.type + '/' + thing.id,\n      data: JSON.stringify({ parsed: 0 }),\n      contentType: 'application/json; charset=UTF-8',\n    });\n  }\n\n  Promote() {\n    this.setState({\n      promoteButton: ACTION_BUTTONS.LOADING,\n    });\n\n    let success = true;\n\n    $.when(...this.props.data.filter((thing) => thing.selected)\n      .map((thing) => {\n        return this.PromoteAjax(thing);\n      })\n    ).then(\n      // Success\n      () => {\n        this.setState({\n          promoteButton: ACTION_BUTTONS.SUCCESS,\n        });\n      },\n      // Failure\n      (error) => {\n        success = false;\n        console.error(error);\n        this.setState({\n          promoteButton: ACTION_BUTTONS.ERROR,\n        });\n        this.props.errorToggle('error adding alerts to event', error);\n      }\n    ).always(() => {\n      setTimeout(() => {\n        this.setState({\n          promoteButton: ACTION_BUTTONS.READY,\n        });\n\n        if (success) {\n          window.location.reload();\n        }\n      }, 2000);\n    });\n  }\n\n  PromoteAjax(thing) {\n    return $.ajax({\n      type: 'put',\n      url: '/scot/api/v2/alert/' + thing.id,\n      data: JSON.stringify({ promote: parseInt(this.props.id) }),\n      contentType: 'application/json; charset=UTF-8',\n    });\n  }\n\n  LinkAjax(arrayToLink) {\n    let data = {};\n    data.weight = 1; //passed in object\n    data.vertices = arrayToLink; //link to current thing\n\n    if (this.state.linkContextString) {           //add context string if one was submitted\n      data.context = this.state.linkContextString;\n    }\n\n    $.ajax({\n      type: 'post',\n      url: '/scot/api/v2/link',\n      data: JSON.stringify(data),\n      contentType: 'application/json; charset=UTF-8',\n      dataType: 'json',\n      success: function (response) {\n        console.log('successfully linked');\n        this.ExpandLinkToggle(false);                          //disable link panel\n        this.ToggleActionSuccess(true);\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('failed to link', data);\n      }.bind(this)\n    });\n  }\n\n  EntryAjax(id, removeOriginal) {\n\n    $.ajax({\n      type: 'get',\n      url: '/scot/api/v2/entry/' + id,\n      success: function (response) {\n        let data = {};\n        data = { parent: 0, body: response.body, target_id: parseInt(this.props.id), target_type: this.props.type };\n        $.ajax({\n          type: 'post',\n          url: '/scot/api/v2/entry',\n          data: JSON.stringify(data),\n          contentType: 'application/json; charset=UTF-8',\n          dataType: 'json',\n          success: function (response) {\n\n            if (removeOriginal) {\n              this.RemoveEntryAfterMove(id);\n              this.RemoveSelected();\n            } else {\n              if (!this.state.actionSuccess) {\n                this.ToggleActionSuccess(true);\n              }\n            }\n\n          }.bind(this),\n          error: function (data) {\n            this.props.errorToggle('failed to create new entry', data);\n          }.bind(this)\n        });\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('failed to get entry data', data);\n      }.bind(this)\n    });\n\n  }\n\n  RemoveEntryAfterMove(id) {\n    $.ajax({\n      type: 'delete',\n      url: '/scot/api/v2/entry/' + id,\n      success: function (response) {\n        console.log('removed original entry');\n      }.bind(this),\n      error: function (data) {\n        this.props.errorToggle('Failed to remove original entry', data);\n      }.bind(this),\n    });\n  }\n\n  ToggleActionSuccess(status) {\n\n    if (status == true || status == false) {\n      this.setState({ actionSuccess: status });\n    } else {\n      let newActionSuccess = !this.state.actionSuccess;\n      this.setState({ actionSuccess: newActionSuccess });\n    }\n\n  }\n}\n\nActions.propTypes = {\n  data: PropTypes.object\n};\n\nActions.defaultProps = {\n  data: {}\n};\n\nUndelete.propTypes = {\n  modalActive: PropTypes.bool\n};\n\nUndelete.defaultProps = {\n  modalActive: true\n};\n\n\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport UserGroupContainer from './usergroupcontainer'\nimport { Api } from './api'\nimport { Undelete } from './undelete'\n\n\nfunction TabContainer(props) {\n  return (\n    <Typography component=\"div\" style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  );\n}\n\nconst theme = createMuiTheme({\n  typography: {\n    // Tell Material-UI what the font-size on the html element is.\n    fontSize: 20,\n  },\n});\n\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.paper,\n  },\n  appBar: {\n    backgroundColor: '#2196f3',\n  },\n  typography: {\n    // Tell Material-UI what the font-size on the html element is.\n    fontSize: 20,\n  },\n});\n\nclass Admin extends React.Component {\n  state = {\n    value: 0,\n  };\n\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { value } = this.state;\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.root}>\n          <AppBar className={classNames(classes.appBar, classes.typography)} position=\"static\">\n            <Tabs value={value} indicatorColor=\"primary\" centered onChange={this.handleChange}>\n              <Tab label=\"Users / Groups\" />\n              <Tab label=\"API\" />\n              <Tab label=\"Undelete\" />\n            </Tabs>\n          </AppBar>\n          {value === 0 &&\n            <TabContainer>\n              <UserGroupContainer></UserGroupContainer>\n            </TabContainer>}\n          {value === 1 &&\n            <TabContainer>\n              <Api></Api>\n            </TabContainer>}\n          {value === 2 &&\n            <TabContainer>\n              <Undelete></Undelete>\n            </TabContainer>}\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\nAdmin.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Admin);","import * as SessionStorage from \"../utils/session_storage\";\nimport $ from \"jquery\";\n\nexport class Amq {\n  constructor() {\n    this.client = \"\";\n    this.whoami = \"\";\n    this.amqdebug = \"\";\n    this.activemqaction = \"\";\n    this.activemqaction = \"\";\n    this.activemqid = \"\";\n    this.activemqwho = \"\";\n    this.activemqtype = \"\";\n    this.activemqguid = \"\";\n    this.activemqhostname = \"\";\n    this.activemqpid = \"\";\n    this.activemqwhen = \"\";\n    this.activemqwall = \"\";\n    this.cb_map = new Map();\n  }\n\n  s4 = () => {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  };\n\n  get_guid = () => {\n    return (\n      this.s4() +\n      this.s4() +\n      this.s4() +\n      this.s4() +\n      this.s4() +\n      this.s4() +\n      this.s4() +\n      this.s4()\n    );\n  };\n\n  register_client = restart => {\n    this.client = this.get_guid();\n    this.whoami = SessionStorage.getSessionStorage(\"whoami\");\n    $.ajax({\n      type: \"POST\",\n      url: \"/scotaq/amq\",\n      data: {\n        message: \"chat\",\n        type: \"listen\",\n        clientId: this.client,\n        destination: \"topic://scot\"\n      },\n      success: function(data) {\n        console.log(\"Registered client as \" + this.client);\n        if (!restart) {\n          //only start the update if this is not a restart. Restart will just use the new clientid once it is live.\n          setTimeout(\n            function() {\n              this.get_data();\n            }.bind(this),\n            1000\n          );\n        }\n      }.bind(this),\n      error: function(data) {\n        console.log(\"Error: failed to register client, retry in 1 sec\");\n        setTimeout(function() {\n          this.register_client();\n        }, 1000);\n      }\n    });\n  };\n\n  get_data = () => {\n    let now = new Date();\n    $.ajax({\n      type: \"GET\",\n      url: \"/scotaq/amq\",\n      data: {\n        /*loc: location.hash, */\n        clientId: this.client,\n        timeout: 20000,\n        d: now.getTime(),\n        r: Math.random(),\n        json: \"true\",\n        username: this.whoami\n      },\n      success: function(data) {\n        console.log(\"Received Message\");\n        setTimeout(\n          function() {\n            this.get_data();\n          }.bind(this),\n          40\n        );\n        let messages = $(data)\n          .text()\n          .split(\"\\n\");\n        messages.forEach(\n          function(message, key) {\n            if (message !== \"\") {\n              let json = JSON.parse(message);\n              console.log(json);\n              this.process_message(json);\n              this.handle_update(json);\n              return true;\n            }\n          }.bind(this)\n        );\n      }.bind(this),\n      error: function() {\n        setTimeout(\n          function() {\n            this.getData(this.client);\n          }.bind(this),\n          1000\n        );\n        console.log(\"AMQ not detected, retrying in 1 second.\");\n      }\n    });\n  };\n\n  checkNumber(number) {\n    let parsed = parseInt(number, 10);\n    if (isNaN(parsed)) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  create_callback_object = (key, callback) => {\n    let intkey = key;\n    if (this.checkNumber(intkey)) {\n      intkey = parseInt(intkey, 10);\n    }\n    if (this.cb_map.has(intkey)) {\n      this.cb_map.get(intkey).add(callback);\n    } else {\n      let newset = new Set();\n      newset.add(callback);\n      this.cb_map.set(intkey, newset);\n    }\n  };\n\n  remove_callback_object = key => {\n    this.cb_map.delete(key);\n  };\n\n  process_message = payload => {\n    if (payload.action === \"wall\") {\n      this.activemqwho = payload.data.who;\n      this.activemqmessage = payload.data.message;\n      this.activemqwhen = payload.data.when;\n      this.activemqwall = true;\n    } else {\n      this.activemqaction = payload.action;\n      this.activemqid = payload.data.id;\n      this.activemqtype = payload.data.type;\n      this.activemqwho = payload.data.who;\n      this.activemqguid = payload.guid;\n      this.activemqhostname = payload.hostname;\n      this.activemqpid = payload.pid;\n    }\n  };\n\n  execute_callback_function = searchstring => {\n    try {\n      let f = this.cb_map.get(searchstring);\n      if (f !== undefined) {\n        f.forEach(function(item) {\n          item();\n        });\n      }\n      let noti = this.cb_map.get(\"notification\");\n      if (noti !== undefined) {\n        noti.forEach(function(item) {\n          item();\n        });\n      }\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  handle_update = message => {\n    let searchstring = \"\";\n    if (message.action === \"wall\") {\n      searchstring = \"wall\";\n    } else if (message.action === \"created\") {\n      searchstring = `${message.data.type}:listview`;\n    } else if (message.action === \"updated\") {\n      searchstring = message.data.id;\n    } else if (message.action === \"deleted\") {\n      searchstring = message.data.id;\n    }\n    this.execute_callback_function(searchstring);\n  };\n}\n","import React from 'react';\nimport {withStyles } from '@material-ui/core/styles';\n\nconst tablestyle = {\n    padding: \"5px\",\n    width: \"100%\"\n};\n\n\nclass EntityInfo extends React.Component {\n    \n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let ei  = this.props.nodeInfo;\n        return (\n            <div>\n                <table style={tablestyle}>\n                    <tr>\n                        <th>Entity Info</th>\n                        <td>id: {ei.id}</td>\n                        <td>Entity: {ei.value}</td>\n                        <td>Type: {ei.type}</td>\n                        <td>Entries: {ei.entry_count}</td>\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\nexport default EntityInfo;\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nconst styles = theme => ({\n    card: {\n        minWidth: 200,\n        marginBotton: 20\n    },\n});\n\nclass GraphControl extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n                <h3>Graph Controls</h3>\n                <p>controls go here</p>\n            </div>\n        );\n    }\n}\n\nexport default GraphControl;\n\n","import React from 'react';\nimport {withStyles } from '@material-ui/core/styles';\n\nconst style = {\n    width: \"100%\",\n    padding: \"5px\"\n};\n\nclass EntityInfo extends React.Component {\n    \n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let ti  = this.props.nodeInfo;\n        let tags = ti.tags;\n        if ( typeof tags === 'undefined' ) {\n            tags = [];\n        }\n        return (\n            <div>\n                <table style={style}>\n                    <tr>\n                        <th>{ti.sourcetype}</th> \n                        <td>id: {ti.id}</td>\n                        <td>subject: {ti.subject}</td>\n                        <td>status: {ti.status}</td>\n                        <td>Tags:\n                            {tags.length > 0 && tags.map((tag) => (\n                                {tag}\n                            ))}</td>\n                        <td>Entries: {ti.entry_count}</td>\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\nexport default EntityInfo;\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport EntityInfo from './EntityInfo';\nimport ThingInfo from './ThingInfo';\n\nconst styles = theme => ({\n    card: {\n        minWidth: 200,\n        marginBotton: 20\n    },\n});\n\nclass NodeInfo extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        console.log(\"Render NodeInfo\")\n        console.log(this.props);\n        let ni = this.props.nodeInfo;\n        let type = ni.sourcetype;\n\n        return (\n            <div>\n                { type === \"entity\" ? \n                <EntityInfo nodeInfo={ni} /> : \n                <ThingInfo nodeInfo={ni} />\n                }\n            </div>\n        );\n    }\n}\n\nexport default NodeInfo;\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport GraphControl from './GraphControl';\nimport NodeInfo from './NodeInfo';\nimport { ForceGraph2D, ForceGraph3D, ForceGraphVR, ForceGraphAR } from 'react-force-graph';\n\nconst styles = theme => ({\n    card: {\n        minWidth: 800,\n        marginBottom: 20\n    },\n    ScotForceGraphDisplay: {\n        display: \"flex\",\n        \"flex-direction\": \"row\"\n    },\n});\n\nfunction merge_arrays(a, b, key) {\n    let reduced = a.filter( aitem => ! b.find( bitem => aitem[key] === bitem[key]) )\n    return reduced.concat(b);\n}\n\nclass ScotForceGraph extends React.Component {\n\n    constructor(props) {\n        super(props);\n        //this.handleNodeAddition = this.handleNodeAddition.bind(this);\n        this.state = {\n            graph: {\n                nodes: [],\n                links: []\n            },\n            nodeinfo: ''\n        };\n    }\n\n    componentDidMount() {\n        console.log(\"componentDidMount\");\n        // this.loadGraph(\"event\",10002,2);\n    }\n\n    loadGraph = (type, id, depth) => {\n        console.log(\"loading graph\");\n        let uri = `/scot/api/v2/graph/${type}/${id}/${depth}`;\n        axios.get(uri).then(\n            response => {\n                console.log(response);\n                // this.state.graph = response.data;\n                console.log(this.state.graph);\n                this.setState({ graph: response.data });\n            }\n        );\n    }\n\n    add_to_graph = (type, id, depth) => {\n        let uri = `/scot/api/v2/graph/${type}/${id}/${depth}`;\n        console.log(`Adding ${uri} to graph`); \n        const existing_graph = JSON.parse(JSON.stringify(this.state.graph));\n        axios.get(uri).then(\n            response => {\n                let new_nodes = response.data.nodes;\n                let new_links = response.data.links;\n                let existing_nodes  = existing_graph.nodes;\n                let existing_links  = existing_graph.links;\n\n                let new_graph_nodes = merge_arrays(new_nodes, existing_nodes);\n                let new_graph_links = merge_arrays(new_links, existing_links);\n                let new_graph = {\n                    nodes: new_graph_nodes,\n                    links: new_graph_links\n                };\n                this.setState({ graph: new_graph });\n            }\n        );\n    }\n\n    draw_to_canvas = (node, ctx, globalScale) => {\n        const label = node.id\n        const fontSize = 12/globalScale;\n        ctx.font = `${fontSize}px Sans-Serif`;\n        const textWidth = ctx.measureText(label).width;\n        const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize *0.2);\n        if ( node.id.match(/entity/) ) {\n            ctx.fillStyle = 'rgba(255,80,80,0.8)';\n            ctx.beginPath(); ctx.arc(node.x,node.y,8, 0, 2*Math.PI, false);\n            ctx.fill();\n        } else {\n            if ( node.id.match(/intel/) ) {\n                ctx.fillStyle = 'rgba(30,30,200,0.6)';\n            }\n            else if ( node.id.match(/event/)) {\n                ctx.fillStyle = 'rgba(0,255,0,0.6)';\n            }\n            else {\n                ctx.fillStyle = 'rgba(255,255,255,0.8)';\n            }\n            ctx.fillRect(node.x - bckgDimensions[0] /2, \n                        node.y -bckgDimensions[1] /2, \n                        ...bckgDimensions);\n        }\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = 'black';\n        //ctx.fillStyle = node.color;\n        ctx.fillText(label, node.x, node.y);\n        node.__bckgDimensions = bckgDimensions;\n    }\n\n    node_paint = (node, color, ctx) => {\n        ctx.fillStyle = color;\n        const bckgDimensions = node.__bckgDimensions;\n        bckgDimensions && \n            ctx.fillRect(\n                node.x - bckgDimensions[0]/2, \n                node.y - bckgDimensions[1]/2, \n                ...bckgDimensions\n            );\n    }\n\n    handleNodeHover = node => {\n        if (node) {\n            const target_type   = node.target_type;\n            const target_id     = node.target_id;\n            const uri = `/scot/api/v2/${target_type}/${target_id}`;\n            console.log(`requesting info about ${target_type} ${target_id}`);\n            axios.get(uri).then(\n                response => {\n                    const data = response.data;\n                    console.log(\"got data\");\n                    console.log(data);\n                    data[\"sourcetype\"] = target_type;\n                    this.setState({ nodeinfo: data });\n                }\n            );\n        }\n    }\n\n    handleNodeAddition(e) {\n        e.preventDefault();\n        console.log(\"event is\");\n        console.log(e);\n        const data = new FormData(e.target);\n        console.log(\"node addition\");\n        console.log(data);\n        this.add_to_graph(data.thingtype, data.thingid, data.depth);\n    }\n\n    handle_node_add = (event) => {\n        event.preventDefault();\n        console.log(\"event.target.elements\");\n        console.log(event.target.elements);\n        this.add_to_graph(\n            event.target.elements.thingtype.value,\n            event.target.elements.thingid.value,\n            event.target.elements.depth.value\n        );\n    }\n\n    render() {\n        console.log(\"render\");\n        let nodeinfo = `${this.state.nodeinfo}`;\n        // console.log(\"nodeinfo =>\");\n        // console.log(nodeinfo);\n        return (\n            <div style={{display: 'flex', flexDirection: 'row'}}>\n                <div id=\"infocontrols\" style={{minWidth: 300}}>\n                    <div id=\"controls\">\n                        <h3>Graph Control</h3>\n                        <form onSubmit={this.handle_node_add}>\n                            <label htmlFor=\"thingtype\">Enter Type:</label>\n                            <input id=\"thingtype\" name=\"thingtype\" type=\"text\"/>\n                            <label htmlFor=\"thingid\">Enter ID:</label>\n                            <input id=\"thingid\" name=\"thingid\" type=\"text\"/>\n                            <label htmlFor=\"depth\">Enter Depth:</label>\n                            <input id=\"depth\" name=\"depth\" type=\"text\"/>\n                            <button>Go!</button>\n                        </form>\n                    </div>\n                    <div id=\"info\">\n                        <NodeInfo\n                         nodeInfo={this.state.nodeinfo}\n                        />\n                    </div>\n                </div>\n                <ForceGraph2D\n                 graphData={this.state.graph}\n                 nodeCanvasObject={(node, ctx, globalScale) => { this.draw_to_canvas(node,ctx, globalScale)}}\n                 nodePointerAreaPaint={(node, color, ctx) => { this.node_paint(node,color,ctx) }}\n                 onNodeHover={this.handleNodeHover}\n                />\n            </div>\n        );\n    }\n}\nexport default withSnackbar(withStyles(styles)(ScotForceGraph));\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport GraphControl from './GraphControl';\nimport NodeInfo from './NodeInfo';\nimport { ForceGraph2D, ForceGraph3D, ForceGraphVR, ForceGraphAR } from 'react-force-graph';\nimport * as THREE from 'three';\nimport SpriteText from 'three-spritetext';\n\nconst styles = theme => ({\n    card:   {\n        minWidth: 800,\n        marginBottom: 10,\n    },\n});\n\nconst nodeinfostyle = {\n    backgroundColor: 'white',\n    color: 'black'\n};\n\nconst sidebyside = {\n    display: \"flex\",\n    flexDirection: \"row\"\n};\n\nclass SFG extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            graph: {\n                nodes: [],\n                links: []\n            },\n            nodeinfo: {},\n            graphtype: '2D',\n            highlightNodes: [],\n            highlightLinks: [],\n            hoverNode: ''\n        };\n    }\n\n    add_to_graph = (type, id, depth) => {\n        const uri = `/scot/api/v2/graph/${type}/${id}/${depth}`;\n        const graphcopy = JSON.parse(JSON.stringify(this.state.graph));\n        axios.get(uri).then(\n            response => {\n                this.update_graph(response, graphcopy);\n            }\n        );\n    }\n\n    update_graph = (response, graphcopy) => {\n        const response_graph = response.data;\n        let new_graph = {\n            nodes: this.merge_arrays(response_graph.nodes, graphcopy.nodes),\n            links: this.merge_arrays(response_graph.links, graphcopy.links)\n        };\n        this.setState({graph: new_graph});\n    }\n\n    merge_arrays = (a, b, k) => {\n        let reduced = a.filter(\n            a_item => ! b.find( \n                b_item => a_item[k] === b_item[k]\n            )\n        );\n        return reduced.concat(b);\n    }\n\n    handle_node_add = (event) => {\n        event.preventDefault();\n        this.add_to_graph(\n            event.target.elements.thingtype.value,\n            event.target.elements.thingid.value,\n            event.target.elements.depth.value\n        );\n    }\n\n    handleNodeHover = node => {\n        console.log(\"Node Hover\");\n        console.log(node);\n        if ( node ) {\n            //this.setState({hoverNode: node});\n            //this.setState({highlightNodes: []});\n            //this.setState({highlightLinks: []});\n            const uri = `/scot/api/v2/${node.target_type}/${node.target_id}`;\n            axios.get(uri).then(\n                response => {\n                    const data = response.data;\n                    data[\"sourcetype\"] = node.target_type;\n                    this.setState({nodeinfo: data});\n                }\n            );\n            // hightlighting\n            //let hnodes = [];\n            //let hlinks = [];\n            //hnodes.push(node);\n            //node.neighbors.forEach(neighbor => hnodes.push(node));\n            //node.links.forEach( link => hlinks.push(link) );\n            //this.setState({highlightNodes: hnodes});\n            //this.setState({highlightLinks: hlinks});\n        }\n    }\n\n    handleNodeClick = node => {\n        console.log(\"Node Clicked\");\n        console.log(node);\n        if ( node ) {\n            const uri = `/#/${node.target_type}/${node.target_id}`;\n            window.open(uri);\n        }\n    }\n\n    handleClearGraph = () => {\n        this.setState({graph: {}});\n    }\n\n    handleToggleGraph = () => {\n        if (this.state.graphtype === '2D') {\n            this.setState({graphtype: '3D'});\n        }\n        else {\n            this.setState({graphtype: '2D'});\n        }\n    }\n\n    draw_to_canvas  = (node, ctx, globalScale) => {\n        this.node_paint(node, node.color, ctx);\n    }\n\n    node_paint = (node, color, ctx) => {\n        //const radius = (5 - ( 5 / node.degree )) + 4; \n        const radius = 5;\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(node.x, node.y, radius, 0, 2 * Math.PI, false);\n        ctx.fill();\n        //if ( this.state.highlightNodes.includes(node) ) {\n        //    this.paint_highlight(node,ctx);\n        //}\n    }\n\n    paint_highlight = (node,ctx) => {\n        ctx.beginPath();\n        ctx.arc(node.x, node.y, 5*1.4, 0, 2*Math.PI, false);\n        ctx.fillStyle = node === this.state.hoverNode ? 'red':'yellow';\n        ctx.fill();\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"GraphControl\" style={nodeinfostyle}>\n                        <div style={sidebyside}>\n                            <button onClick={this.handleToggleGraph}>Toggle Graph Mode</button>\n                            <form onSubmit={this.handle_node_add}>\n                                <label htmlFor=\"thingtype\">Enter Type:</label>\n                                <select id=\"thingtype\" name=\"thingtype\">\n                                    <option>event</option>\n                                    <option>intel</option>\n                                    <option>incident</option>\n                                    <option>dispatch</option>\n                                    <option>entity</option>\n                                </select>\n                                <label htmlFor=\"thingid\">Enter ID:</label>\n                                <input id=\"thingid\" name=\"thingid\" type=\"text\"/>\n                                <label htmlFor=\"depth\">Enter Depth:</label>\n                                <input id=\"depth\" name=\"depth\" type=\"text\"/>\n                                <button>Go!</button>\n                            </form>\n                        </div>\n                </div>\n                <div className=\"NodeInfo\" style={nodeinfostyle}>\n                    <NodeInfo nodeInfo={this.state.nodeinfo}/>\n                </div>\n                <div className=\"GraphView\">\n                    { this.state.graphtype === '2D' ?\n                    <ForceGraph2D\n                     graphData={this.state.graph}\n                     onNodeClick={this.handleNodeClick}\n                     onNodeHover={this.handleNodeHover}\n                     nodeAutoColorBy=\"target_type\"\n                     nodeCanvasObject={\n                        (node, ctx, globalScale) => \n                            { this.draw_to_canvas(node,ctx,globalScale)}\n                     }\n                     nodePointerAreaPaint={\n                        (node, color, ctx) => \n                            { this.node_paint(node, color, ctx) }\n                     }\n                    />\n                    :\n                    <ForceGraph3D\n                     graphData={this.state.graph}\n                     nodeAutoColorBy=\"target_type\"\n                     nodeThreeObject={\n                        node => new THREE.Mesh(\n                                    new THREE.SphereGeometry(2, 16, 16),\n                                    new THREE.MeshBasicMaterial({ color: node.color })\n                                )\n                     }\n                     onNodeClick={this.handleNodeClick}\n                     onNodeHover={this.handleNodeHover}\n                    />\n                    }\n                </div>\n            </div>\n        );\n    }\n}\nexport default withSnackbar(withStyles(styles)(SFG));\n\n\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport ScotForceGraph from './ScotForceGraph';\n//import SFG3d from './SFG3d';\nimport SFG from './SFG';\n\nfunction TabContainer(props) {\n  return (\n    <Typography component=\"div\" style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  );\n}\n\nconst theme = createMuiTheme({\n  typography: {\n    // Tell Material-UI what the font-size on the html element is.\n    fontSize: 20,\n  },\n});\n\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.paper,\n  },\n  appBar: {\n    backgroundColor: '#2196f3',\n  },\n  typography: {\n    // Tell Material-UI what the font-size on the html element is.\n    fontSize: 20,\n  }\n  // didnt work\n  //ScotForceGraphDisplay: {\n  //  \"display\": \"flex\",\n  //  \"flex-direction\": \"row\"\n  //}\n});\n\nclass GraphView extends React.Component {\n\n  state = {\n    value: 0,\n    threed: 1,\n  };\n\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { value } = this.state;\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.root}>\n            { this.state.threed === 1 ?\n                <SFG/>\n            :\n                <ScotForceGraph/>\n            }\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default withStyles(styles)(GraphView);\n","import Navbar from \"react-bootstrap/lib/Navbar.js\";\nimport Nav from \"react-bootstrap/lib/Nav.js\";\nimport NavItem from \"react-bootstrap/lib/NavItem.js\";\nimport NavDropdown from \"react-bootstrap/lib/NavDropdown.js\";\nimport MenuItem from \"react-bootstrap/lib/MenuItem.js\";\nimport React from \"react\";\nimport Home from \"./home\";\nimport { ReportPage, SingleReport } from \"../components/dashboard/report\";\nimport { NOTIFICATION_TYPES } from \"../components/dashboard/activity\";\nimport { UserConfigProvider } from \"../utils/userConfig\";\nimport * as Cookies from \"../utils/cookies\";\nimport * as SessionStorage from \"../utils/session_storage\";\nimport $ from \"jquery\";\nimport Search from \"../components/esearch\";\nimport Wall from \"../debug-components/wall\";\nimport Login from \"../modal/login.js\";\nimport { Link } from \"react-router-dom\";\nimport { Route } from \"react-router-dom\";\nimport ListView from \"../list/list-view\";\nimport Notification from \"react-notification-system\";\nimport LinkContainer from \"react-router-bootstrap/lib/LinkContainer.js\";\nimport Admin from \"../components/admin/\";\nimport { Amq } from \"../utils/activemq\";\nimport SFGraph from \"../components/forcegraph\";\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      notificationSetting: \"on\",\n      login: false,\n      csrf: \"\",\n      origurl: \"\",\n      sensitivity: \"\",\n      whoami: undefined,\n      handler: undefined,\n      eestring: \"\",\n      clientId: null\n    };\n    this.notification = this.notification.bind(this);\n    this.loginToggle = this.loginToggle.bind(this);\n    this.errorToggle = this.errorToggle.bind(this);\n    this.AMQ = new Amq();\n  }\n\n  componentWillReceiveProps = nextProps => {\n    let viewModeSetting = Cookies.checkCookie(\"viewMode\");\n    let notificationSetting = Cookies.checkCookie(\"notification\");\n    if (nextProps.match.params.value) {\n      var listViewFilterSetting = Cookies.checkCookie(\n        \"listViewFilter\" + nextProps.match.params.value.toLowerCase()\n      );\n      var listViewSortSetting = Cookies.checkCookie(\n        \"listViewSort\" + nextProps.match.params.value.toLowerCase()\n      );\n      var listViewPageSetting = Cookies.checkCookie(\n        \"listViewPage\" + nextProps.match.params.value.toLowerCase()\n      );\n    }\n    if (notificationSetting === undefined) {\n      notificationSetting = \"on\";\n    }\n\n    if (!this.state.handler) {\n      this.GetHandler();\n    }\n\n    if (!this.state.whoami) {\n      this.WhoAmIQuery();\n    }\n\n    this.setState({\n      viewMode: viewModeSetting,\n      notificationSetting: notificationSetting,\n      listViewFilter: listViewFilterSetting,\n      listViewSort: listViewSortSetting,\n      listViewPage: listViewPageSetting\n    });\n  };\n\n  componentDidMount = () => {\n    this.GetHandler();\n    this.WhoAmIQuery();\n    this.AMQ.register_client();\n    this.AMQ.create_callback_object(\"wall\", this.wall);\n    this.AMQ.create_callback_object(\"notification\", this.notification);\n\n    //ee\n    if (this.props.match.url === \"/\") {\n      $(document.body).keydown(\n        function(e) {\n          this.ee(e);\n        }.bind(this)\n      );\n    }\n  };\n\n  eedraw = () => {\n    $(\"#content\").css(\"transform\", \"rotateX(20deg)\");\n    $(document.body).prepend(\n      '<span id=\"ee\">Lbh sbhaq gur rtt. Cbfg gb gur jnyy \"V sbhaq gur rtt, pna lbh?\"</span>'\n    );\n  };\n\n  eeremove = () => {\n    $(\"#content\").css(\"transform\", \"rotateX(0deg)\");\n    $(\"#ee\").remove();\n  };\n\n  componentWillUnmount = () => {\n    SessionStorage.removeSessionStorage(\"whoami\");\n  };\n\n  componentWillMount = () => {\n    let notificationSetting = Cookies.checkCookie(\"notification\");\n    if (notificationSetting == undefined) {\n      notificationSetting = \"on\";\n    }\n    this.setState({ notificationSetting: notificationSetting });\n  };\n\n  ee = e => {\n    let ee = \"837279877769847269697171\";\n    if (ee.includes(this.state.eestring)) {\n      if (this.state.eestring + e.keyCode === ee) {\n        this.eedraw();\n        setTimeout(this.eeremove, 2000);\n      } else {\n        if ($(\"input\").is(\":focus\")) {\n          return;\n        }\n        if (e.ctrlKey !== true && e.metaKey !== true) {\n          let eestring = this.state.eestring + e.keyCode;\n          this.setState({ eestring: eestring });\n        }\n      }\n    } else {\n      this.setState({ eestring: \"\" });\n    }\n  };\n\n  notification = () => {\n    // Don't show on dashboard if filtered type\n    if (\n      this.props.match.path === \"/\" &&\n      this.props.match.isExact &&\n      NOTIFICATION_TYPES.includes(this.props.stateProps.activemqstate)\n    ) {\n      return;\n    }\n\n    //Notification display in update as it will run on every amq message matching 'main'.\n    let notification = this.refs.notificationSystem;\n    //not showing notificaiton on entity due to \"flooding\" on an entry update that has many entities causing a storm of AMQ messages\n    if (\n      this.AMQ.activemqwho !== \"scot-alerts\" &&\n      this.AMQ.activemqwho !== \"scot-admin\" &&\n      this.AMQ.activemqwho !== \"scot-flair\" &&\n      notification !== undefined &&\n      this.AMQ.activemqwho !== this.state.whoami &&\n      this.AMQ.activemqwho !== \"\" &&\n      this.AMQ.activemqwho !== \"api\" &&\n      this.AMQ.activemqwall !== true &&\n      this.AMQ.activemqtype !== \"entity\" &&\n      this.state.notificationSetting === \"on\"\n    ) {\n      let message = `${this.AMQ.activemqwho} ${this.AMQ.activemqaction} ${this.AMQ.activemqtype} : ${this.AMQ.activemqid}`;\n      let type = this.AMQ.activemqtype;\n      let state = this.AMQ.activemqstate;\n      let activemqid = this.AMQ.activemqid;\n      notification.addNotification({\n        message: message,\n        level: \"info\",\n        autoDismiss: 5,\n        action:\n          state !== \"delete\"\n            ? {\n                label: \"View\",\n                callback: function() {\n                  window.open(\"/#/\" + type + \"/\" + activemqid);\n                }\n              }\n            : null\n      });\n    }\n  };\n\n  wall = message => {\n    // Don't show on dashboard\n    if (this.props.match.path === \"/\" && this.props.match.isExact) {\n      return;\n    }\n\n    var notification = this.refs.notificationSystem;\n    var date = new Date(this.AMQ.activemqwhen * 1000);\n    date = date.toLocaleString();\n    if (this.AMQ.activemqwall === true) {\n      notification.addNotification({\n        message:\n          date + \" \" + this.AMQ.activemqwho + \": \" + this.AMQ.activemqmessage,\n        level: \"warning\",\n        autoDismiss: 0\n      });\n      // message.activemqwall = false;\n    }\n  };\n\n  errorToggle = (string, result) => {\n    let errorString = string;\n    if (result) {\n      if (result.responseJSON) {\n        if (result.responseJSON.error === \"Authentication Required\") {\n          this.setState({ csrf: result.responseJSON.csrf }); //set csrf here since it can change after the login prompt loads\n          this.loginToggle(result.responseJSON.csrf);\n          return;\n        }\n      } else if (result.statusText === \"Service Unavailable\") {\n        errorString = result.statusText; //Use server error message if available.\n      }\n    }\n\n    let notification = this.refs.notificationSystem;\n    notification.addNotification({\n      message: errorString,\n      level: \"error\",\n      autoDismiss: 0\n    });\n  };\n\n  notificationToggle = () => {\n    if (this.state.notificationSetting === \"off\") {\n      this.setState({ notificationSetting: \"on\" });\n      Cookies.setCookie(\"notification\", \"on\", 1000);\n    } else {\n      this.setState({ notificationSetting: \"off\" });\n      Cookies.setCookie(\"notification\", \"off\", 1000);\n    }\n  };\n\n  loginToggle = (csrf, loggedin) => {\n    //Only open modal once - if other requests come in to open the modal just bypass since the login page is active\n    if (!this.state.login && loggedin !== true) {\n      let origurl = this.props.location.pathname;\n      this.props.history.push(\"/\");\n      this.setState({ login: true, origurl: origurl });\n    } else if (this.state.login && loggedin === true) {\n      this.setState({ login: false });\n      this.props.history.push(this.state.origurl);\n    }\n  };\n\n  LogOut = () => {\n    //Logs out of SCOT\n    $.ajax({\n      type: \"get\",\n      url: \"/logout\",\n      success: function(data) {\n        this.setState({ login: true });\n        console.log(\"Successfully logged out\");\n        //Call whoami so we can get a csrf token\n        this.WhoAmIQuery();\n      }.bind(this),\n      error: function(data) {\n        this.error(\"Failed to log out\", data);\n      }.bind(this)\n    });\n  };\n\n  WhoAmIQuery = () => {\n    $.ajax({\n      type: \"get\",\n      url: \"scot/api/v2/whoami\",\n      success: function(result) {\n        SessionStorage.setSessionStorage(\"whoami\", result.user);\n        if (result.data) {\n          this.setState({\n            sensitivity: result.data.sensitivity,\n            whoami: result.user\n          });\n        }\n      }.bind(this),\n      error: function(data) {\n        this.errorToggle(\"Failed to get current user\", data);\n      }.bind(this)\n    });\n  };\n\n  GetHandler = () => {\n    $.ajax({\n      type: \"get\",\n      url: \"/scot/api/v2/handler?current=1\",\n      success: function(response) {\n        this.setState({ handler: response.records[0].username });\n      }.bind(this),\n      error: function(data) {\n        this.errorToggle(\"Failed to get current user\", data);\n      }.bind(this)\n    });\n  };\n\n  render = () => {\n    let IH = \"Incident Handler: \" + this.state.handler;\n    let type;\n\n    if (this.props.match.params.value) {\n      type = this.props.match.params.value.toLowerCase();\n    }\n\n    return (\n      <UserConfigProvider>\n        <Navbar inverse fixedTop={true} fluid={true}>\n          <Navbar.Header>\n            <Navbar.Brand>\n              <Link to=\"/\" style={{ margin: \"0\", padding: \"0\" }}>\n                <img\n                  src=\"/images/scot-600h.png\"\n                  alt=\"\"\n                  style={{ width: \"50px\" }}\n                />\n              </Link>\n            </Navbar.Brand>\n            <Navbar.Toggle />\n          </Navbar.Header>\n          <Navbar.Collapse>\n            <Nav>\n              <LinkContainer to=\"/alertgroup\" activeClassName=\"active\">\n                <NavItem>Alert</NavItem>\n              </LinkContainer>\n              <LinkContainer to=\"/event\" activeClassName=\"active\">\n                <NavItem>Event</NavItem>\n              </LinkContainer>\n              <LinkContainer to=\"/incident\" activeClassName=\"active\">\n                <NavItem>Incident</NavItem>\n              </LinkContainer>\n              <NavDropdown id=\"nav-dropdown\" title={\"ThreatIntel\"}>\n                <LinkContainer to=\"/dispatch\" activeClassName=\"active\">\n                    <MenuItem>Dispatch</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/intel\" activeClassName=\"active\">\n                    <MenuItem>Intel</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/product\" activeClassName=\"active\">\n                    <MenuItem>Product</MenuItem>\n                </LinkContainer>\n              </NavDropdown>\n              <NavDropdown id=\"nav-dropdown\" title={\"More\"}>\n                <LinkContainer to=\"/task\" activeClassName=\"active\">\n                  <MenuItem>Task</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/guide\" activeClassName=\"active\">\n                  <MenuItem>Guide</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/signature\" activeClassName=\"active\">\n                  <MenuItem>Signature</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/entity\" activeClassName=\"active\">\n                  <MenuItem>Entity</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/reports\" activeClassName=\"active\">\n                  <MenuItem>Reports</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/feed\" activeClassName=\"active\">\n                    <MenuItem>Feeds</MenuItem>\n                </LinkContainer>\n                <LinkContainer to=\"/sfgraph\" activeClassName=\"active\">\n                  <MenuItem>ScotForceGraph</MenuItem>\n                </LinkContainer>\n                <MenuItem divider />\n                <LinkContainer to=\"/admin\" activeClassName=\"active\">\n                  <MenuItem>Administration</MenuItem>\n                </LinkContainer>\n                <MenuItem href=\"/docs/index.html\">Documentation</MenuItem>\n                <MenuItem divider />\n                <MenuItem href=\"https://cybertools-cc.sandia.gov/\">Cyber Chef</MenuItem>\n                <MenuItem divider />\n                <MenuItem href=\"/#/\" onClick={this.LogOut}>\n                  Log Out\n                </MenuItem>\n              </NavDropdown>\n              <NavItem href=\"/incident_handler.html\">{IH}</NavItem>\n            </Nav>\n            <span id=\"ouo_warning\" className=\"ouo-warning\">\n              {this.state.sensitivity}\n            </span>\n            <span\n              id=\"scot_version\"\n              style={{\n                float: \"right\",\n                marginTop: \"3px\",\n                padding: \"10px 10px\",\n                position: \"relative\",\n                color: \"white\"\n              }}\n              className=\"scot_version\"\n            >\n              V3.7\n            </span>\n            <Search errorToggle={this.errorToggle} />\n          </Navbar.Collapse>\n        </Navbar>\n        <div className=\"mainNavPadding\">\n          <Login\n            csrf={this.state.csrf}\n            modalActive={this.state.login}\n            loginToggle={this.loginToggle}\n            WhoAmIQuery={this.WhoAmIQuery}\n            GetHandler={this.GetHandler}\n            errorToggle={this.errorToggle}\n            origurl={this.state.origurl}\n          />\n          <Notification ref=\"notificationSystem\" />\n          {/* Home Page Dashboard */}\n          <Route\n            exact\n            path=\"/\"\n            render={props => (\n              <Home\n                loggedIn={!this.state.login}\n                sensitivity={this.state.sensitivity}\n                errorToggle={this.errorToggle}\n                clientId={this.state.clientId}\n                createCallback={this.AMQ.create_callback_object}\n                removeCallback={this.AMQ.remove_callback_object}\n              />\n            )}\n          />\n          {type === \"admin\" ? (\n            <Route exact path=\"/admin\">\n              <Admin></Admin>\n            </Route>\n          ) : null}\n          {type === \"sfgraph\" ? (\n            <Route exact path=\"/sfgraph\">\n                <SFGraph></SFGraph>\n            </Route>\n          ) : null}\n          {type === \"alert\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"alertgroup\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"entry\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"event\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"incident\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"task\" ? (\n            <ListView\n              isTask={true}\n              queryType={this.props.match.params.type}\n              viewMode={this.state.viewMode}\n              type={this.props.match.params.value}\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"guide\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"dispatch\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"intel\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"product\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"feed\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"signature\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"entity\" ? (\n            <ListView\n              id={this.props.match.params.id}\n              id2={this.props.match.params.id2}\n              viewMode={this.state.viewMode}\n              type={type}\n              notificationToggle={this.notificationToggle}\n              notificationSetting={this.state.notificationSetting}\n              listViewFilter={this.state.listViewFilter}\n              listViewSort={this.state.listViewSort}\n              listViewPage={this.state.listViewPage}\n              errorToggle={this.errorToggle}\n              history={this.props.history}\n              createCallback={this.AMQ.create_callback_object}\n              removeCallback={this.AMQ.remove_callback_object}\n            />\n          ) : null}\n          {type === \"reports\" && !this.props.match.params.id && <ReportPage />}\n          {type === \"reports\" && this.props.match.params.id && (\n            <SingleReport reportType={this.props.match.params.id} />\n          )}\n          {/* {type == \"amq\" ? (\n            <AMQ type=\"amq\" errorToggle={this.errorToggle} />\n          ) : null} */}\n          {type === \"wall\" ? <Wall errorToggle={this.errorToggle} /> : null}\n        </div>\n      </UserConfigProvider>\n    );\n  };\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './main/index';\nimport registerServiceWorker from './registerServiceWorker';\nimport Switch from \"react-router-dom/es/Switch\";\nimport Route from \"react-router-dom/es/Route\";\nimport HashRouter from \"react-router-dom/es/HashRouter\";\nimport { SnackbarProvider } from 'notistack';\n\nlet customHistory = require('history').createBrowserHistory;\n\nReactDOM.render(<HashRouter history={customHistory()}>\n  <SnackbarProvider >\n    <Switch>\n      <Route exact path='/' component={App} />\n      <Route exact path='/:value' component={App} />\n      <Route exact path='/:value/:id' component={App} />\n      <Route exact path='/:value/:id/:id2' component={App} />\n      <Route path='/:value/:type/:id/:id2' component={App} />\n    </Switch>\n  </SnackbarProvider>\n</HashRouter>, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/scot_logo_473x473.981c5c79.png\";"],"sourceRoot":""}